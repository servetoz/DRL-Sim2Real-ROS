"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[873],{96133:(it,Te,s)=>{s.d(Te,{J:()=>l});function l(N,P){if(typeof N.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(N.value==null)return!1;let k=P;for(const ae of N.path)if(typeof k!="object"||k==null||(k=k[ae],k==null))return!1;return k!=null&&k==N.value}},36922:(it,Te,s)=>{s.d(Te,{Iq:()=>be,wm:()=>Ue});var l=s(76635),N=s.n(l),P=s(2784),k=s(7506),ae=s(59506),je=s(36423),r=s(35528),Le=s(96133),Pe=s(60351),Oe=s(94670),J=s(1012);function be(O){const{topics:E,datatypes:Y}=ae.Ui(),{globalVariables:le}=(0,je.Z)(),G=(0,k.O4)(O),me=(0,P.useMemo)(()=>{const V={};for(const j of G){const $=(0,J.ZP)(j);$&&(V[j]=Ze($,le))}return V},[le,G]),Q=(0,k.vE)(me),Be=(0,P.useMemo)(()=>{const V=(0,r.N_)(E),j=new Set,$=[];for(const ce of G){const q=(0,J.ZP)(ce);if(q){if(j.has(q.topicName))continue;j.add(q.topicName);const pe=V[q.topicName];pe&&$.push(pe)}}return $},[E,G]),fe=(0,k.vE)(Be),se=(0,P.useMemo)(()=>{const V=new Map;function j($,ce){if(ce.includes($))return;const q=Y.get($);if(q){V.set($,q);for(const pe of q.definitions)(pe.isComplex===!0||(0,r.bV)(pe.name)!=null)&&j(pe.type,[...ce,$])}}for(const{schemaName:$}of fe.values())$!=null&&j($,[]);return V},[Y,fe]),he=(0,k.vE)(se),z=(0,P.useRef)({});if((0,k.br)([fe,he],{initiallyTrue:!0})&&(z.current={}),(0,k.br)([Q],{initiallyTrue:!1}))for(const[V,j]of Object.entries(z.current)){const $=Q[V];(!$||!(0,l.isEqual)(j.filledInPath,$))&&delete z.current[V]}return(0,P.useCallback)((V,j)=>{if(!G.includes(V))throw new Error(`path (${V}) was not in the list of cached paths`);const $=Q[V];if(!$)return;const ce=z.current[V]=z.current[V]??{filledInPath:$,weakMap:new WeakMap},{weakMap:q}=ce;if(!q.has(j)){const Ve=et(j,$,fe,he);return q.set(j,Ve),Ve}return q.get(j)},[he,Q,G,fe])}function Ze(O,E){return{...O,messagePath:O.messagePath.map(Y=>{if(Y.type==="slice"){const le=typeof Y.start=="object"?Number(E[Y.start.variableName]):Y.start,G=typeof Y.end=="object"?Number(E[Y.end.variableName]):Y.end;return{...Y,start:isNaN(le)?0:le,end:isNaN(G)?1/0:G}}else if(Y.type==="filter"&&typeof Y.value=="object"){let le;const G=E[Y.value.variableName];return(typeof G=="number"||typeof G=="string")&&(le=G),{...Y,value:le}}return Y})}}function et(O,E,Y,le){const G=(0,Oe.pb)(le),me=(0,r.N_)(Y)[E.topicName];if(!me||O.topic!==E.topicName)return;for(const se of E.messagePath)if(se.type==="filter"){if(!(0,Le.J)(se,O.message))return[]}else break;const Q=[];function Be(se,he,z,V){if(se==null||V==null)return;const j=E.messagePath[he],$=E.messagePath[he+1];if(j)if(j.type==="name"&&V.structureType==="message"){const ce=V.nextByName[j.name];Be(se[j.name],he+1,`${z}.${j.repr}`,ce)}else if(j.type==="slice"&&V.structureType==="array"){const{start:ce,end:q}=j;if(typeof ce=="object"||typeof q=="object")throw new Error("getMessagePathDataItems only works on paths where global variables have been filled in");const pe=ce,Ve=q;if(typeof pe!="number"||typeof Ve!="number")return;const rt=se.length;for(let We=pe;We<=Math.min(Ve,rt-1);We++){const ut=We>=0?We:rt+We,ze=se[ut];if(ze==null)continue;let Xe;if($&&$.type==="filter")Xe=`${z}[:]`;else if(typeof ze=="object"){const Ye=Pe.H.find(dt=>dt in ze);Ye!=null?Xe=`${z}[:]{${Ye}==${ze[Ye]}}`:Xe=`${z}[${We}]`}else Xe=`${z}[${We}]`;Be(ze,he+1,Xe,V.next)}}else j.type==="filter"?(0,Le.J)(j,se)&&Be(se,he+1,`${z}{${j.repr}}`,V):console.warn(`Unknown pathItem.type ${j.type} for structureType: ${V.structureType}`);else{let ce;const q=E.messagePath[he-1];if(q&&q.type==="name"){const pe=q.name;ce=(0,r.Hh)(le)[V.datatype]?.[pe]?.[se]}Q.push({value:se,path:z,constantName:ce})}}const fe=me.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:G[me.schemaName];return fe&&Be(O.message,0,(0,J.dH)(E.topicName),fe),Q}function Ue(O){const E=(0,k.O4)(O),Y=be(E);return(0,P.useCallback)(le=>{const G={};for(const me of E){const Q=(0,J.ZP)(me);if(!Q){G[me]=[];continue}const Be=le[Q.topicName];if(!Be)continue;const fe=[];G[me]=fe;for(const se of Be){const he=Y(me,se);he&&fe.push({messageEvent:se,queriedData:he})}}return G},[E,Y])}},78324:(it,Te,s)=>{s.d(Te,{i:()=>r});var l=s(52322),N=s(3925),P=s(56961),k=s(80078),ae=s(2784),je=s(84877);function r(Le){const{getItems:Pe}=Le,Oe=(0,ae.useRef)(null),[J,be]=(0,ae.useState)(),Ze=(0,ae.useCallback)(()=>be(void 0),[]),[et,Ue]=(0,ae.useState)([]);return(0,ae.useEffect)(()=>{const O=Oe.current?.closest(`.${je.DY}`);if(!O)return;let E="none";const Y=Q=>{Q.button===2&&E==="down"&&(be({x:Q.clientX,y:Q.clientY}),Ue(Pe()),E="none")},le=Q=>{E="canceled"},G=Q=>{Q.button===2&&(E="down")},me=Q=>{Q.preventDefault()};return O.addEventListener("mousedown",G),O.addEventListener("mousemove",le),O.addEventListener("mouseup",Y),O.addEventListener("contextmenu",me),()=>{O.removeEventListener("mousedown",G),O.removeEventListener("mousemove",le),O.removeEventListener("mouseup",Y),O.removeEventListener("contextmenu",me)}},[Pe]),(0,l.jsx)("div",{ref:Oe,onContextMenu:O=>O.preventDefault(),children:(0,l.jsx)(N.Z,{open:J!=null,onClose:Ze,anchorReference:"anchorPosition",anchorPosition:J?{top:J.y,left:J.x}:void 0,MenuListProps:{dense:!0},children:et.map((O,E)=>O.type==="divider"?(0,l.jsx)(P.Z,{variant:"middle"},`divider_${E}`):(0,l.jsx)(k.Z,{onClick:()=>{Ze(),O.onclick()},disabled:O.disabled,children:O.label},`item_${E}_${O.label}`))})})}},31458:(it,Te,s)=>{s.d(Te,{Z:()=>$t});var l=s(52322),N=s(47746),P=s(20379),k=s(17055),ae=s(86232),je=s(76635),r=s(2784),Le=s(87438),Pe=s(8740),Oe=s(94225),J=s(91004),be=s(8220),Ze=s(23503),et=s(69629),Ue=s.n(et),O=s(97984),E=s(24468),Y=s(16846),le=s(94858),G=s(27788),me=s(42146),Q=s(64578);function Be(c){(0,me.tm)((n,a,d,m)=>{a instanceof Error||typeof a=="string"||console.warn("Invalid Error type",a),c.send("sendNotification",{message:n,details:a instanceof Error?a.toString():a,type:d,severity:m})})}function fe(c){Be(c),(0,Q.Z)()}var se=s(6881),he=s(30686),z=s(22354),V=s(23571),j=s(77075),$="../../packages/studio-base/src/components/Chart/worker/ChartJSManager.ts";const ce=Ze.ZP.getLogger($);function q(c){return(n,a)=>{const d=c.listeners(n);!a||d.includes(a)||c.on(n,a)}}function pe(c){return(n,a)=>{a&&c.off(n,a)}}class Ve{#t;#n=new he.Z;#e=new he.Z;#a;constructor(n){ce.info(`new ChartJSManager(id=${n.id})`),this.init(n)}async init({id:n,node:a,type:d,data:m,options:M,devicePixelRatio:p,fontLoaded:v}){const C=await v;ce.debug(`ChartJSManager(${n}) init, default font "${C.family}" status=${C.status}`);const Z={addEventListener:q(this.#n),removeEventListener:pe(this.#n),ownerDocument:{addEventListener:q(this.#e),removeEventListener:pe(this.#e)}},K=z.L.start?.bind(z.L);z.L.start=(w,_,ie)=>{const Ne=w.ctx;w.ctx={canvas:Z};const xe=K?.(w,_,ie);return w.ctx=Ne,xe};const oe={...this.#s(M),devicePixelRatio:p,font:{family:j.R.MONOSPACE},responsive:!1},ue=new E.kL(a,{type:d,data:m,options:oe,plugins:[se.Z,z.L]});z.L.start=K,this.#t=ue}wheel(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,this.#n.emit("wheel",n),this.getScales()}mousedown(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,this.#n.emit("mousedown",n),this.getScales()}mousemove(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,this.#n.emit("mousemove",n),this.getScales()}mouseup(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,this.#e.emit("mouseup",n),this.getScales()}panstart(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,(0,V.Y)(this.#t)?.$zoom.panStartHandler(n),this.getScales()}panmove(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,(0,V.Y)(this.#t)?.$zoom.panHandler(n),this.getScales()}panend(n){const a=n.target;return a.getBoundingClientRect=()=>a.boundingClientRect,(0,V.Y)(this.#t)?.$zoom.panEndHandler(n),this.getScales()}update({options:n,width:a,height:d,isBoundsReset:m,data:M}){const p=this.#t;if(p==null)return{};if(n!=null){p.options.plugins=this.#s(n).plugins;const v=n.scales??{};(m||v.x?.min!=null&&v.x.max!=null)&&p.options.scales&&(p.options.scales.x=v.x),(m||v.y?.min!=null&&v.y.max!=null)&&p.options.scales&&(p.options.scales.y=v.y)}if(a!=null||d!=null){let v=!1;const C=Math.floor(a??p.width),Z=Math.floor(d??p.height);a!=null&&Math.abs(p.width-C)>Number.EPSILON&&(p.canvas.width=C,v=!0),d!=null&&Math.abs(p.height-Z)>Number.EPSILON&&(p.canvas.height=Z,v=!0),v&&p.resize(C,Z)}return M!=null&&(p.data=M),p.update("none"),this.getScales()}destroy(){this.#t?.destroy()}getElementsAtEvent({event:n}){const a={native:!0,x:n.clientX,y:n.clientY},d=this.#t?.getElementsAtEventForMode(a,this.#t.options.interaction?.mode??"intersect",this.#t.options.interaction??{},!1)??[],m=new Array;for(const M of d){const p=this.#t?.data?.datasets[M.datasetIndex]?.data[M.index];p==null||typeof p=="number"||m.push({data:p,datasetIndex:M.datasetIndex,index:M.index,view:{x:M.element.x,y:M.element.y}})}return m.sort((M,p)=>{const v=n.clientX-M.view.x,C=n.clientY-M.view.y,Z=n.clientX-p.view.x,K=n.clientY-p.view.y,oe=v*v+C*C,ue=Z*Z+K*K;return oe-ue}),m}getDatalabelAtEvent({event:n}){this.#t?.notifyPlugins("beforeEvent",{event:n});const a=this.#a;return this.#a=void 0,a?.dataset.data[a.dataIndex]}getScales(){const n={},a=this.#t?.scales.x;a&&(n.x={pixelMin:a.left,pixelMax:a.right,min:a.min,max:a.max});const d=this.#t?.scales.y;return d&&(n.y={pixelMin:d.bottom,pixelMax:d.top,min:d.min,max:d.max}),n}#s(n){const a=n.plugins?.datalabels;if(a){a.listeners={click:m=>{this.#a=m}},a.formatter=(m,M)=>m.label??null;const d=a.color??"white";a.color=m=>m.dataset.data[m.dataIndex]?.labelColor??d}return n}}async function rt(){const c=new FontFace("IBM Plex Mono",`url(${G}) format('woff2')`);return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self.fonts.add(c):document.fonts.add(c),await c.load()}const We=rt();E.kL.register(E.jn,E.od,E.ST,E.ho,E.uw,E.f$,E.FB,E.RM,E.Gu,E.De,E.Dx,E.u,le.Z);const ut=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function ze(c){const n=c.options?.scales?.x;return n?.ticks&&(n.ticks.callback=function(a,d,m){return d===0||d===m.length-1?ut.format(a):Y.aL.formatters.numeric.apply(this,[a,d,m])}),c}class Xe{#t;#n=new Map;constructor(n){this.#t=n,typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&fe(this.#t),n.receive("initialize",a=>{a.fontLoaded=We;const d=new Ve(a);return this.#n.set(a.id,d),d.getScales()}),n.receive("wheel",a=>this.#e(a.id).wheel(a.event)),n.receive("mousedown",a=>this.#e(a.id).mousedown(a.event)),n.receive("mousemove",a=>this.#e(a.id).mousemove(a.event)),n.receive("mouseup",a=>this.#e(a.id).mouseup(a.event)),n.receive("panstart",a=>this.#e(a.id).panstart(a.event)),n.receive("panend",a=>this.#e(a.id).panend(a.event)),n.receive("panmove",a=>this.#e(a.id).panmove(a.event)),n.receive("update",a=>this.#e(a.id).update(ze(a))),n.receive("destroy",a=>{const d=this.#n.get(a.id);d&&(d.destroy(),this.#n.delete(a.id))}),n.receive("getElementsAtEvent",a=>this.#e(a.id).getElementsAtEvent(a)),n.receive("getDatalabelAtEvent",a=>this.#e(a.id).getDatalabelAtEvent(a))}#e(n){const a=this.#n.get(n);if(!a)throw new Error(`Could not find chart with id ${n}`);return a}}var Ye=s(45243),dt=s(12982),mt=s.n(dt),xt=s(829),vt=s.n(xt);function Tt(c){c.receive("sendNotification",({message:n,details:a,type:d,severity:m})=>{(0,me.ZP)(n,a,d,m)})}function yt(c){Tt(c)}class Nt{#t;#n;#e;#a;constructor(n,a){this.#t=n,this.#n=a,this.#e=new Array(a),this.#a=new Set}testing_workerCount(){return this.#e.filter(Boolean).length}testing_getWorkerState(n){return this.#e.find(a=>a?.listenerIds.includes(n))}registerWorkerListener(n){if(this.#a.has(n))throw new Error("cannot register the same listener id twice");if(this.#a.add(n),this.#e.filter(Boolean).length<this.#n){const M=this.#t(),p=new Ye.Z(M);yt(p);const v=mt()(this.#e,C=>!C);return this.#e[v]={worker:M,rpc:p,listenerIds:[n]},p}const m=vt()(this.#e.filter(Boolean),M=>M?.listenerIds.length)[0];if(!m)throw new Error("no worker state");return m.listenerIds.push(n),m.rpc}unregisterWorkerListener(n){if(!this.#a.has(n))throw new Error("Cannot find listener to unregister");this.#a.delete(n);const a=mt()(this.#e,m=>m?m.listenerIds.includes(n):!1),d=this.#e[a];a>=0&&d&&(d.listenerIds=d.listenerIds.filter(m=>m!==n),d.listenerIds.length===0&&(this.#e[a]=void 0,d.worker.terminate(),d.rpc.terminate()))}}var Rt=s(36537),Lt="../../packages/studio-base/src/components/Chart/index.tsx";const bt=Ze.ZP.getLogger(Lt);function Bt(){return new Worker(new URL(s.p+s.u(5764),s.b))}const It=(0,Rt.N)(window).devicePixelRatio??1,Mt=new Nt(Bt,4);function Qe(c){const n=c.currentTarget.getBoundingClientRect();return{cancelable:!1,clientX:c.clientX-n.left,clientY:c.clientY-n.top,target:{boundingClientRect:n.toJSON()}}}const Ct=typeof HTMLCanvasElement.prototype.transferControlToOffscreen=="function";function qe(c){const[n]=(0,r.useState)(()=>(0,J.Z)()),a=(0,r.useRef)(!1),d=(0,r.useRef)(),m=(0,r.useRef)(null),M=(0,Le.Z)(),p=(0,r.useRef)(),v=c.options.plugins?.zoom?.zoom?.enabled??!1,C=c.options.plugins?.zoom?.pan?.enabled??!1,{type:Z,data:K,isBoundsReset:oe,options:ue,width:w,height:_,onStartRender:ie,onFinishRender:Ne}=c,xe=(0,r.useRef)(),X=(0,r.useRef)(),nt=(0,r.useRef)(!1),Me=(0,r.useRef)({});(0,r.useLayoutEffect)(()=>{bt.info(`Register Chart ${n}`);let i;if(Ct)i=Mt.registerWorkerListener(n);else{const{local:D,remote:x}=(0,Ye.t)();new Xe(new Ye.Z(x)),i=new Ye.Z(D)}const b=async(D,x,F)=>await i.send(D,{id:n,...x},F);return xe.current=b,()=>{bt.info(`Unregister chart ${n}`),b("destroy").catch(()=>{}),X.current=void 0,xe.current=void 0,a.current=!1,Me.current={},d.current?.remove(),d.current=void 0,Ct&&Mt.unregisterWorkerListener(n)}},[n]);const Ge=(0,r.useRef)(c.onScalesUpdate);Ge.current=c.onScalesUpdate;const ve=(0,r.useCallback)((i,b)=>{if(!M())return;const D=p.current;p.current=i;const x=JSON.stringify(D),F=JSON.stringify(i);x!==F&&Ge.current?.(i,b??{userInteraction:!1})},[M]),Je=(0,r.useCallback)(()=>{const i=Me.current,b={};if(!(w===0||_===0)&&(i.data!==K&&(i.data=b.data=K),i.options!==ue&&(i.options=b.options=ue),i.height!==_&&(i.height=b.height=_),i.width!==w&&(i.width=b.width=w),b.isBoundsReset=oe,Object.keys(b).length!==0))return b},[K,_,ue,oe,w]),e=(0,r.useCallback)(async i=>{if(!a.current){(0,O.assert)(d.current==null,"Canvas has already been initialized"),(0,O.assert)(m.current,"No container ref"),(0,O.assert)(xe.current,"No RPC");const D=document.createElement("canvas");D.style.width="100%",D.style.height="100%",D.width=i.width??0,D.height=i.height??0,m.current.appendChild(D),d.current=D,a.current=!0,ie?.();const x=typeof D.transferControlToOffscreen=="function"?D.transferControlToOffscreen():D,F=await xe.current("initialize",{node:x,type:Z,data:i.data,options:i.options,devicePixelRatio:It,width:i.width,height:i.height},[x]);X.current=xe.current,ve(F),Ne?.();return}(0,O.assert)(X.current,"No RPC"),ie?.();const b=await X.current("update",i);ve(b),Ne?.()},[ve,Ne,ie,Z]),t=(0,r.useRef)(!1),[u,o]=(0,r.useState)();(0,r.useLayoutEffect)(()=>{if(!m.current||t.current)return;o(void 0);const i=Je();i&&(t.current=!0,e(i).catch(b=>{M()&&o(b)}).finally(()=>{t.current=!1}))},[Je,M,e]),(0,r.useLayoutEffect)(()=>{const i=m.current;if(!i||!C)return;const b=new(Ue()).Manager(i),D=c.options.plugins?.zoom?.pan?.threshold??10;return b.add(new(Ue()).Pan({threshold:D})),b.on("panstart",async x=>{if(nt.current=!0,!X.current)return;const F=x.target.getBoundingClientRect();await X.current("panstart",{event:{cancelable:!1,deltaY:x.deltaY,deltaX:x.deltaX,center:{x:x.center.x,y:x.center.y},target:{boundingClientRect:F.toJSON()}}})}),b.on("panmove",async x=>{if(!X.current)return;const F=x.target.getBoundingClientRect(),H=await X.current("panmove",{event:{cancelable:!1,deltaY:x.deltaY,deltaX:x.deltaX,target:{boundingClientRect:F.toJSON()}}});ve(H,{userInteraction:!0})}),b.on("panend",async x=>{if(!X.current)return;const F=x.target.getBoundingClientRect(),H=await X.current("panend",{event:{cancelable:!1,deltaY:x.deltaY,deltaX:x.deltaX,target:{boundingClientRect:F.toJSON()}}});ve(H,{userInteraction:!0})}),()=>{b.destroy()}},[ve,C,c.options.plugins?.zoom?.pan?.threshold]);const S=(0,r.useCallback)(async i=>{if(!v||!X.current)return;const b=i.currentTarget.getBoundingClientRect(),D=await X.current("wheel",{event:{cancelable:!1,deltaY:i.deltaY,deltaX:i.deltaX,clientX:i.clientX,clientY:i.clientY,target:{boundingClientRect:b.toJSON()}}});ve(D,{userInteraction:!0})},[v,ve]),g=(0,r.useCallback)(async i=>{if(nt.current=!1,!X.current)return;const b=await X.current("mousedown",{event:Qe(i)});ve(b)},[ve]),y=(0,r.useCallback)(async i=>{if(X.current)return await X.current("mouseup",{event:Qe(i)})},[]),f=(0,r.useRef)(!1),{onHover:h}=c,B=(0,r.useCallback)(async i=>{if(f.current=!0,h==null||X.current==null)return;const b=await X.current("getElementsAtEvent",{event:Qe(i)});M()&&f.current&&h(b)},[h,M]),R=(0,r.useCallback)(()=>{f.current=!0},[]),W=(0,r.useCallback)(()=>{f.current=!1,h?.([])},[h]),I=(0,r.useCallback)(async i=>{if(!c.onClick||!X.current||!M()||nt.current)return;const b=i.currentTarget.getBoundingClientRect(),D=i.clientX-b.left,x=i.clientY-b.top,F=await X.current("getDatalabelAtEvent",{event:{x:D,y:x,type:"click"}});let H,ee;const A=p.current?.x;if(A){const re=A.pixelMax-A.pixelMin;H=(A.max-A.min)/re*(D-A.pixelMin)+A.min}const U=p.current?.y;if(U){const re=U.pixelMax-U.pixelMin;ee=(U.max-U.min)/re*(x-U.pixelMin)+U.min}c.onClick({datalabel:F,x:H,y:ee})},[M,c]);if(u)throw u;return(0,l.jsx)("div",{ref:m,onWheel:S,onClick:I,onMouseDown:g,onMouseMove:B,onMouseLeave:W,onMouseEnter:R,onMouseUp:y,style:{width:w,height:_,cursor:"crosshair",position:"relative"}})}const St=qe;var Pt=s(86451),At=s(42741),ft=s(93812),tt=s(86495);function Wt(c,n){if(c.data.length<=1)return c;const a=n.width/(n.x.max-n.x.min),d=n.height/(n.y.max-n.y.min),m=[];let M,p,v,C;const Z=n.x.max-n.x.min,K=n.x.min-Z*.5,oe=n.x.max+Z*.5;let ue;for(const w of c.data){if(!w)continue;if(w.x<K){m.length===0?m.push(w):m[0]=w;continue}if(w.x>oe){ue=w;continue}const _=Math.trunc(w.x*a),ie=Math.trunc(w.y*d);if(M?.xPixel!==_){v&&v.yPixel!==M?.yPixel&&v.yPixel!==p?.yPixel&&m.push(v.datum),C&&C.yPixel!==M?.yPixel&&C.yPixel!==p?.yPixel&&m.push(C.datum),p&&M?.yPixel!==p.yPixel&&m.push(p.datum),m.push(w),M={xPixel:_,yPixel:ie,datum:w},p={xPixel:_,yPixel:ie,datum:w},v={xPixel:_,yPixel:ie,datum:w},C={xPixel:_,yPixel:ie,datum:w};continue}p??={xPixel:_,yPixel:ie,datum:w},p.xPixel=_,p.yPixel=ie,p.datum=w,v&&ie<v.yPixel&&(v.yPixel=ie,v.datum=w),C&&ie>C.yPixel&&(C.yPixel=ie,C.datum=w)}return v&&v.yPixel!==M?.yPixel&&v.yPixel!==p?.yPixel&&m.push(v.datum),C&&C.yPixel!==M?.yPixel&&C.yPixel!==p?.yPixel&&m.push(C.datum),p&&M?.yPixel!==p.yPixel&&m.push(p.datum),ue&&m.push(ue),{...c,data:m}}function kt(c,n){if(c.data.length<=1)return c;const a=n.width/(n.x.max-n.x.min),d=n.height/(n.y.max-n.y.min),m=n.width,M=[],p=[];for(const v of c.data){if(!v||v.x>n.x.max||v.x<n.x.min)continue;const C=Math.round(v.x*a),K=Math.round(v.y*d)*m+C;p[K]!==!0&&(p[K]=!0,M.push(v))}return{...c,data:M}}class jt{#t=[];#n=0;#e=0;#a;#s;update(n){this.#t=n.datasets??this.#t,this.#n=n.width??this.#n,this.#e=n.height??this.#e,this.#a=n.datasetBounds??this.#a,this.#s=n.scales??this.#s}downsample(){const n=this.#s;let a;n?.x&&n.y&&(a={width:this.#n,height:this.#e,x:{min:n.x.min,max:n.x.max},y:{min:n.y.min,max:n.y.max}});const d=this.#a;return d?(!a&&d.x.min!=null&&d.x.max!=null&&d.y.min!=null&&d.y.max!=null&&(a={width:this.#n,height:this.#e,x:{min:d.x.min,max:d.x.max},y:{min:d.y.min,max:d.y.max}}),a?this.#t.map(m=>{if(!a)return m;const M=m.showLine!==!0?kt(m,a):Wt(m,a),p=M.data.map(v=>v==null||isNaN(v.x)||isNaN(v.y)?{x:NaN,y:NaN,value:NaN}:v);return{...M,data:p}}):[]):[]}}var Ot=s(23144),Vt=s(3896);const Dt=(0,Pe.ZL)()(c=>({root:{fontFamily:j.R.MONOSPACE,fontSize:c.typography.caption.fontSize,lineHeight:c.typography.caption.lineHeight,overflowWrap:"break-word"},grid:{columnGap:c.spacing(.5),display:"grid",gridTemplateColumns:"auto minmax(0px, max-content) minmax(auto, max-content)",alignItems:"center",fontFamily:j.R.MONOSPACE,fontSize:c.typography.caption.fontSize,lineHeight:c.typography.caption.lineHeight,overflowWrap:"break-word"},icon:{gridColumn:"1",height:12,width:12},path:{opacity:.9,whiteSpace:"nowrap"},value:{fontWeight:600,paddingLeft:c.spacing(2)},overflow:{gridColumn:"2/4",opacity:c.palette.action.disabledOpacity,fontStyle:"italic",":not(:last-child)":{marginBottom:c.spacing(.5)}}}));function ht(){const{classes:c}=Dt();return(0,l.jsx)("div",{className:c.overflow,children:"<multiple values under cursor>"})}function Et(c){const{colorsByDatasetIndex:n,content:a,labelsByDatasetIndex:d,multiDataset:m}=c,{classes:M,cx:p}=Dt(),v=(0,r.useMemo)(()=>{if(!m)return[];const C=new Map;for(const Z of a){const K=Z.datasetIndex,oe=C.get(K);if(oe){oe.hasMultipleValues=!0;continue}C.set(K,{tooltip:Z,hasMultipleValues:!1})}return(0,je.sortBy)([...C.entries()],([Z,K])=>K.tooltip.datasetIndex)},[a,m]);if(!m){const C=a[0];if(!C)return(0,l.jsx)(l.Fragment,{});const Z=typeof C.value=="string"?C.value:typeof C.value=="bigint"?C.value.toString():JSON.stringify(C.value);return(0,l.jsxs)(ft.Z,{className:M.root,"data-testid":"TimeBasedChartTooltipContent",children:[(0,l.jsxs)("div",{children:[Z,C.constantName!=null?` (${C.constantName})`:""]}),a.length>1&&(0,l.jsx)(ht,{})]})}return(0,l.jsx)("div",{className:p(M.root,M.grid),"data-testid":"TimeBasedChartTooltipContent",children:v.map(([C,Z],K)=>{const oe=n?.[C]??"auto",ue=d?.[C],w=Z.tooltip,_=typeof w.value=="string"?w.value:typeof w.value=="bigint"?w.value.toString():JSON.stringify(w.value);return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(Vt.In2,{className:M.icon,primaryFill:oe}),(0,l.jsx)("div",{className:M.path,children:ue??""}),(0,l.jsxs)("div",{className:M.value,children:[_,w.constantName!=null?` (${w.constantName})`:""]}),Z.hasMultipleValues&&(0,l.jsx)(ht,{})]},K)})})}var pt=s(63718),Ft="../../packages/studio-base/src/components/TimeBasedChart/index.tsx";const gt=Ze.ZP.getLogger(Ft),Zt=(0,Pe.ZL)()(c=>({root:{position:"relative"},resetZoomButton:{position:"absolute",bottom:0,right:0,marginBottom:c.spacing(4),marginRight:c.spacing(1)},tooltip:{maxWidth:"none"},bar:{position:"absolute",top:0,bottom:0,width:1,marginLeft:-1,display:"block"},playbackBar:{backgroundColor:"#aaa"}})),Xt=c=>c.globalBounds,Yt=c=>c.setGlobalBounds;function $t(c){const n=(0,r.useRef)(0),{currentTime:a,data:d,dataBounds:m,datasetId:M,defaultView:p,height:v,isSynced:C=!1,showXAxisLabels:Z,type:K,width:oe,xAxes:ue,xAxisIsPlaybackTime:w,yAxes:_}=c,{labels:ie,datasets:Ne}=d,xe=(0,N.Z)(),{classes:X,cx:nt}=Zt(),Me=(0,r.useMemo)(()=>(0,J.Z)(),[]),Ge=(0,Le.Z)(),ve=(0,r.useRef)(null),[Je,e]=(0,r.useState)(!1),t=(0,At.An)((0,r.useCallback)(T=>T.pauseFrame,[])),u=(0,r.useRef)(),o=(0,r.useRef)(),S=(0,r.useCallback)(()=>{u.current&&u.current(),u.current=t("TimeBasedChart")},[t]),g=(0,r.useCallback)(()=>{const T=u.current;u.current=void 0,o.current=T,T&&(n.current=requestAnimationFrame(()=>{T(),o.current=void 0}))},[]);(0,r.useEffect)(()=>()=>{g(),cancelAnimationFrame(n.current),o.current?.()},[t,g]);const y=(0,tt.oA)(Xt),f=(0,tt.oA)(Yt),h=(0,r.useMemo)(()=>C?y:void 0,[y,C]),B=(0,r.useMemo)(()=>c.linesToHide??{},[c.linesToHide]),R=(0,r.useRef)(void 0),W=(0,r.useMemo)(()=>{if(m)return m;let T,L,ne,we;for(const Ae of Ne)for(const de of Ae.data)de!=null&&(isNaN(de.x)||(T=Math.min(T??de.x,de.x),L=Math.max(L??de.x,de.x)),isNaN(de.x)||(ne=Math.min(ne??de.y,de.y),we=Math.max(we??de.y,de.y)));return{x:{min:T,max:L},y:{min:ne,max:we}}},[m,Ne]),I=()=>{e(!1),f(void 0)},[i,b]=(0,r.useState)(!1),[D,x]=(0,r.useState)(!1),F=(0,r.useMemo)(()=>i?"y":D?"xy":"x",[D,i]),H=r.useMemo(()=>({v:()=>b(!0),b:()=>x(!0)}),[b,x]),ee=r.useMemo(()=>({v:()=>b(!1),b:()=>x(!1)}),[b,x]),A=(0,r.useRef)(void 0),[U,re]=(0,r.useState)(),at=(0,r.useCallback)(T=>{if(T.length===0||A.current==null)return re(void 0);const L=[];for(const Ae of T){if(!Ae.data)continue;const de=Ae.data;de.value!=null&&L.push({item:{datasetIndex:Ae.datasetIndex,value:de.value,constantName:de.constantName},element:Ae})}if(L.length===0)return re(void 0);const ne=L[0].element,we=ve.current?.getBoundingClientRect();we&&re({x:we.left+ne.view.x,y:we.top+A.current,data:L.map(Ae=>Ae.item)})},[]),te=(0,tt.D4)(),ge=(0,tt.Js)(),ye=(0,r.useCallback)(()=>ge(Me),[ge,Me]),Ie=(0,r.useCallback)(()=>{re(void 0),ye()},[ye]),Re=(0,r.useCallback)(T=>{const L=R.current?.x;if(!L||!ve.current){re(void 0),ye();return}const ne=ve.current.getBoundingClientRect();A.current=T.pageY-ne.top;const we=T.pageX-ne.left,Ae=L.pixelMax-L.pixelMin,wt=(L.max-L.min)/Ae*(we-L.pixelMin)+L.min;if(!(wt>=L.min&&wt<=L.max)||isNaN(wt)){re(void 0),ye();return}te({componentId:Me,value:wt,type:w?"PLAYBACK_SECONDS":"OTHER"})},[te,Me,w,ye]),$e=(0,r.useMemo)(()=>({decimation:{enabled:!0,algorithm:"lttb"},legend:{display:!1},datalabels:{display:!1},tooltip:{enabled:!1},zoom:{zoom:{enabled:c.zoom,mode:F,sensitivity:3,speed:.1},pan:{mode:"xy",enabled:!0,speed:20,threshold:10}},...c.plugins,annotation:{annotations:c.annotations}}),[c.annotations,c.plugins,c.zoom,F]),{min:ke,max:Fe}=(0,r.useMemo)(()=>{if(!h&&Je)return{min:void 0,max:void 0};if(h?.sourceId===Me&&h.userInteraction)return{min:void 0,max:void 0};let T,L;return p?.type==="fixed"?(T=p.minXValue,L=p.maxXValue):p?.type==="following"?(L=a??0,T=L-p.width):(T=W.x.min,L=W.x.max),h?.userInteraction===!0&&(T=h.min,L=h.max),T===L?{min:void 0,max:void 0}:{min:T,max:L}},[Me,a,W.x.max,W.x.min,p,h,Je]),Ce=(0,r.useMemo)(()=>{const T={font:{family:j.R.MONOSPACE,size:10},color:xe.palette.text.secondary,maxRotation:0};return{grid:{color:xe.palette.divider},...ue,min:ke,max:Fe,ticks:{display:Z,...T,...ue?.ticks}}},[xe.palette,Z,ue,ke,Fe]),He=(0,r.useMemo)(()=>{const T={font:{family:j.R.MONOSPACE,size:10},color:xe.palette.text.secondary,padding:0};let{min:L,max:ne}=_;return ne==null&&L!=null&&(ne=W.y.max),L==null&&ne!=null&&(L=W.y.min),{type:"linear",..._,min:L,max:ne,ticks:{...T,..._.ticks}}},[W.y,_,xe.palette]),Se=(0,r.useMemo)(()=>(0,be.Z)(Ne,T=>{const{label:L}=T;if(!((L==null||B[L])??!1))return T}),[Ne,B]),[De]=(0,r.useState)(()=>new jt),[lt,st]=(0,r.useState)(()=>(De.update({width:oe,height:v,datasets:Se,datasetBounds:W,scales:R.current}),De.downsample())),_e=(0,r.useCallback)(()=>{st(De.downsample())},[De]),Ke=(0,Oe.y1)(_e,100,{leading:!1,maxWait:100});(0,r.useEffect)(()=>{De.update({datasetBounds:W})},[W,De]),(0,r.useEffect)(()=>{De.update({width:oe,height:v,datasets:Se}),Ke()},[De,v,oe,Se,Ke]);const Ee=(0,r.useMemo)(()=>({labels:ie,datasets:lt}),[ie,lt]),ot=(0,r.useMemo)(()=>({maintainAspectRatio:!1,animation:!1,elements:{line:{tension:0}},interaction:{intersect:!1,mode:"x"},scales:{x:Ce,y:He},plugins:$e}),[$e,Ce,He]),ct=(0,r.useCallback)(T=>{Ge()&&at(T)},[Ge,at]),Gt=(0,r.useCallback)((T,{userInteraction:L})=>{if(Ge()&&!(T.x!=null&&(0,je.isEqual)(T.x,R.current?.x)&&!L)&&(L&&e(!0),R.current=T,De.update({scales:T}),Ke(),!(!C||!T.x))){if(L){f({min:T.x.min,max:T.x.max,sourceId:Me,userInteraction:!0});return}f(ne=>{const we=T.x;if(!we)return ne;if(!ne)return{min:we.min,max:we.max,sourceId:Me,userInteraction:!1};if(ne.userInteraction)return ne;const Ae=Math.min(we.min,ne.min),de=Math.max(we.max,ne.max);return ne.max===de&&ne.min===Ae?ne:{min:Ae,max:de,sourceId:Me,userInteraction:!1}})}},[Me,De,Ge,C,Ke,f]);(0,r.useEffect)(()=>gt.debug(`<TimeBasedChart> (datasetId=${M})`),[M]);const Ht=(0,r.useMemo)(()=>Object.fromEntries(d.datasets.map((T,L)=>[L,T.borderColor?.toString()])),[d.datasets]),Ut=(0,r.useMemo)(()=>Object.fromEntries(d.datasets.map((T,L)=>[L,T.label])),[d.datasets]),zt=Ne.length,Jt=(0,r.useMemo)(()=>U?(0,l.jsx)(Et,{content:U.data,multiDataset:zt>1,colorsByDatasetIndex:Ht,labelsByDatasetIndex:Ut}):void 0,[U,Ht,zt,Ut]),Kt=(0,r.useMemo)(()=>C?h?.userInteraction===!0:Je,[h?.userInteraction,Je,C]),Qt={type:K,width:oe,height:v,isBoundsReset:y==null,options:ot,data:Ee,onClick:c.onClick,onScalesUpdate:Gt,onStartRender:S,onFinishRender:g,onHover:ct};return oe===0||v===0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(ft.Z,{direction:"row",fullWidth:!0,children:(0,l.jsx)(P.Z,{arrow:!1,classes:{tooltip:X.tooltip},open:U!=null,placement:"right",title:Jt??(0,l.jsx)(l.Fragment,{}),disableInteractive:!0,followCursor:!0,TransitionComponent:k.Z,TransitionProps:{timeout:0},children:(0,l.jsx)(ft.Z,{direction:"row",style:{width:oe},children:(0,l.jsxs)("div",{className:X.root,onDoubleClick:I,children:[(0,l.jsx)(Ot.Z,{componentId:Me,isTimestampScale:w,scales:R.current,children:(0,l.jsx)("div",{className:X.bar,style:{backgroundColor:w?xe.palette.warning.main:xe.palette.info.main}})}),w&&(0,l.jsx)(pt.G,{scales:R.current,xValue:a,children:(0,l.jsx)("div",{className:nt(X.bar,X.playbackBar)})}),(0,l.jsx)("div",{ref:ve,onMouseMove:Re,onMouseOut:Ie,children:(0,l.jsx)(St,{...Qt})}),Kt&&(0,l.jsx)(ae.Z,{className:X.resetZoomButton,variant:"contained",color:"inherit",title:"(shortcut: double-click)",onClick:I,children:"Reset view"}),(0,l.jsx)(Pt.Z,{global:!0,keyDownHandlers:H,keyUpHandlers:ee})]})})})})}},90873:(it,Te,s)=>{s.r(Te),s.d(Te,{default:()=>Je,openSiblingPlotPanel:()=>xe,plotableRosTypes:()=>pt});var l=s(52322),N=s(76635),P=s(2784),k=s(44668),ae=s(42741),je=s(14075),r=s(78324),Le=s(76479),Pe=s(93812),Oe=s(47746),J=s(16003),be=s(8220),Ze=s(7506),et=s(59506),Ue=s(1012),O=s(36922),E=s(27999);const Y=e=>{const t={};return Object.entries(e).forEach(([u,o])=>{t[u]=o.map(S=>{const g=(0,E.IJ)(S.messageEvent.message);return{queriedData:S.queriedData,receiveTime:S.messageEvent.receiveTime,headerStamp:g}})}),t};function le(e,t){return Object.freeze(Y(e(t)))}function G(e,t){return le(e,t)}function me(e){const t=[];for(let u=1;u<e.length;u++){const o=e[u],S=e[u-1],g=o.x-S.x,y=(o.y-S.y)/g;t.push({...o,y,value:y})}return t}const Q={abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,log:Math.log,log1p:Math.log1p,log2:Math.log2,log10:Math.log10,round:Math.round,sign:Math.sign,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,trunc:Math.trunc,negative:e=>-e,deg2rad:e=>e*(Math.PI/180),rad2deg:e=>e*(180/Math.PI)};function Be(e,t){let{y:u}=e;const o=Number(u);return isNaN(o)||(u=t(o)),{...e,y:u,value:u}}function fe(){return{x:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER},y:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER}}}function se(e,t){return{x:{min:Math.min(e.x.min,t.x.min),max:Math.max(e.x.max,t.x.max)},y:{min:Math.min(e.y.min,t.y.min),max:Math.max(e.y.max,t.y.max)}}}var he=s(85091),z=s(68071);function V(e){return!isNaN(Number.parseFloat(e.value))}const j=e=>e==="custom"||e==="currentCustom";function $(e,t,u,o,S,g){if(j(e)&&g){if(V(g))return Number.parseFloat(g.value);if(o){if(!S)return NaN;const y=S.queriedData[u]?.value;return(0,k.isTime)(y)?(0,k.toSec)(y):typeof y=="bigint"?y:Number(y)}}return e==="timestamp"?t:u}function ce(e,t,u,o,S,g,y){const f=o==="headerStamp"?e.headerStamp:e.receiveTime;if(!f)return{data:[],hasMismatchedData:!1};const h=[],B=(0,k.toSec)((0,k.subtract)(f,u));for(const W of e.queriedData.entries()){const[I,{value:i,constantName:b}]=W;if(typeof i=="number"||typeof i=="boolean"||typeof i=="string"||typeof i=="bigint"){const D=typeof i=="bigint"?i:Number(i);if(typeof D=="bigint"||!isNaN(D)){const x=$(S,B,I,y,t,g),F=D;h.push({x:Number(x),y:Number(F),value:i,constantName:b,receiveTime:e.receiveTime,headerStamp:e.headerStamp})}}else if((0,k.isTime)(i)){const D=$(S,B,I,y,t,g),x=(0,k.toSec)(i);h.push({x:Number(D),y:x,receiveTime:e.receiveTime,headerStamp:e.headerStamp,value:`${(0,he.WU)(i)} (${(0,E.Eo)(i)})`,constantName:b})}}const R=j(S)&&(!t||e.queriedData.length!==t.queriedData.length);return{data:h,hasMismatchedData:R}}function q({path:e,yAxisRanges:t,index:u,startTime:o,xAxisVal:S,xAxisRanges:g,xAxisPath:y,invertedTheme:f=!1}){let h=e.showLine!==!1,B=j(S)&&g!=null&&t.length!==g.length;const R=[];let W;for(const D of Object.keys(Q))if(e.value.endsWith(`.@${D}`)&&(W=Q[D],W))break;const I=[];for(const[D,x]of t.entries()){const F=g?.[D],{data:H,hasMismatchedData:ee}=ce(x,F,o,e.timestampMethod,S,y,g);for(const A of H)W?I.push(Be(A,W)):I.push(A);B=B||ee,x.queriedData.length>1&&S!=="index"&&(h=!1)}for(const D of I)R.push(D);const i=(0,z.wi)(e.color,u);return{dataset:{borderColor:i,label:e.label!=null&&e.label!==""?e.label:e.value,showLine:h,fill:!1,borderWidth:1,pointRadius:1,pointHoverRadius:3,pointBackgroundColor:f?(0,z.UX)(i):(0,z.eE)(i),pointBorderColor:"transparent",data:R},hasMismatchedData:B}}function pe({paths:e,itemsByPath:t,startTime:u,xAxisVal:o,xAxisPath:S,invertedTheme:g}){const y=fe(),f=[],h=[];for(const[B,R]of e.entries()){const W=t[R.value]??[],I=S&&t[S.value];if(!R.enabled)h.push(void 0);else if(!V(R)){const i=q({path:R,yAxisRanges:W,index:B,startTime:u,xAxisVal:o,xAxisRanges:I,xAxisPath:S,invertedTheme:g});i.hasMismatchedData&&f.push(R.value);for(const b of i.dataset.data)isFinite(b.x)&&(y.x.min=Math.min(y.x.min,b.x),y.x.max=Math.max(y.x.max,b.x)),isFinite(b.y)&&(y.y.min=Math.min(y.y.min,b.y),y.y.max=Math.max(y.y.max,b.y));h.push({path:R,dataset:i.dataset})}}return{bounds:y,datasets:h,pathsWithMismatchedDataLengths:f}}function Ve(e,t){return e==null?t:t==null?e:{path:e.path,dataset:{...e.dataset,data:e.dataset.data.concat(t.dataset.data),showLine:e.dataset.showLine===!0&&t.dataset.showLine===!0}}}const rt=[];function We(){return{cursors:{},messages:{},previousBlocks:[]}}const ut=e=>e.playerState.progress.messageCache?.blocks??rt;function ze(e){const[t,u]=(0,P.useState)(We),o=(0,ae.An)(ut),S=(0,P.useMemo)(()=>{if((0,N.sumBy)(Object.values(t.messages),f=>f.length)>=1e6)if(performance.memory){const f=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit;if(isNaN(f)||f>.6)return!1}else return!1;return!0},[t.messages]),g=o[0]?.messagesByTopic!==t.previousBlocks[0]?.messagesByTopic;return(g||o!==t.previousBlocks&&S)&&u(y=>{const f=(0,N.transform)(e,(h,B)=>{h.cursors[B]=g?-1:y.cursors[B]??-1,h.messages[B]=g?[]:y.messages[B]??[]},{...We(),previousBlocks:o});for(const[h,B]of o.entries()){if(B==null)break;for(const R of e){const W=B.messagesByTopic[R];W!=null&&h>(f.cursors[R]??-1)&&(f.messages[R]=(f.messages[R]??[]).concat(W),f.cursors[R]=h)}}return f}),t.messages}const Xe={sec:0,nsec:0},Ye={},dt={datasets:[],bounds:fe(),pathsWithMismatchedDataLengths:[]};function mt(e){return e.map(t=>{if(t!=null)return t.path.value.endsWith(".@derivative")?{path:t.path,dataset:{...t.dataset,data:me(t.dataset.data)}}:t})}function xt(e){return e.map(t=>{if(t!=null)return t.path.timestampMethod!=="headerStamp"?t:{path:t.path,dataset:{...t.dataset,data:t.dataset.data.sort((u,o)=>u.x-o.x)}}})}function vt(){return{allFrames:{},allPaths:[],bounds:fe(),cursors:{},datasets:[],subscriptions:[],pathsWithMismatchedDataLengths:[],xAxisVal:"timestamp",xAxisPath:void 0}}function Tt(e){const{allPaths:t,followingView:u,showSingleCurrentMessage:o,startTime:S,xAxisPath:g,xAxisVal:y,yAxisPaths:f}=e,h=(0,Oe.Z)(),B=(0,P.useMemo)(()=>(0,N.groupBy)(t,te=>(0,Ue.ZP)(te)?.topicName),[t]),R=(0,Ze.O4)((0,Ue.UU)(t)),W=(0,P.useMemo)(()=>R.map(te=>({topic:te,preload:!0})),[R]),[I,i]=(0,P.useState)(vt),b=ze(R),D=o?Ye:b,x=(0,O.wm)(t),F=t!==I.allPaths||y!==I.xAxisVal||g!==I.xAxisPath;(D!==I.allFrames||F)&&i(te=>{const ge=F?vt():te,ye=(0,N.transform)(D,(Ce,He,Se)=>{Ce[Se]=He.slice(ge.cursors[Se]??0)},{}),Ie=(0,N.transform)(D,(Ce,He,Se)=>{Ce[Se]=He.length},{}),Re=G(x,ye),ke=Object.values(ye).some(Ce=>Ce.length>0)?pe({paths:f,itemsByPath:Re,startTime:S??Xe,xAxisVal:y,xAxisPath:g,invertedTheme:h.palette.mode==="dark"}):dt,Fe=(0,N.zipWith)(ge.datasets,ke.datasets,Ve);return{allFrames:D,allPaths:t,bounds:se(ge.bounds,ke.bounds),cursors:Ie,datasets:Fe,pathsWithMismatchedDataLengths:(0,N.union)(ge.pathsWithMismatchedDataLengths,ke.pathsWithMismatchedDataLengths),subscriptions:W,xAxisPath:g,xAxisVal:y}});const H=(0,O.Iq)(t),ee=(0,P.useCallback)(te=>te?{datasets:te.datasets.filter(ge=>ge&&t.includes(ge.path.value)),bounds:te.bounds,pathsWithMismatchedDataLengths:(0,N.intersection)(te.pathsWithMismatchedDataLengths,t)}:{datasets:[],bounds:fe(),pathsWithMismatchedDataLengths:[]},[t]),A=(0,J.Z)(I.datasets),U=(0,P.useCallback)((te,ge)=>{const ye=ge.at(-1)?.receiveTime,Ie=u?.type==="following",Re={};for(const Fe of ge){const Ce=B[Fe.topic];if(Ce)for(const[He,Se]of Ce.entries()){if((A.current[He]?.dataset.data.length??0)>0)continue;const De=H(Se,Fe);if(!De)continue;const lt=(0,E.IJ)(Fe.message),st={queriedData:De,receiveTime:Fe.receiveTime,headerStamp:lt};if(o)Re[Se]=[st];else{let _e=Re[Se]?.slice()??[];const Ke=_e;if(ye&&Ie){const Ee=(0,k.subtract)(ye,{sec:u.width,nsec:0}),ot=Ke.filter(ct=>!(0,k.isLessThan)(ct.receiveTime,Ee));ot.push(st),_e=ot}else _e=Ke.concat(st);Re[Se]=_e}}}if((0,N.isEmpty)(Re))return te;const $e=pe({paths:f,itemsByPath:Re,startTime:S??Xe,xAxisVal:y,xAxisPath:g,invertedTheme:h.palette.mode==="dark"});return{bounds:se(te.bounds,$e.bounds),datasets:(0,N.zipWith)(te.datasets,$e.datasets,Ve),pathsWithMismatchedDataLengths:(0,N.union)(te.pathsWithMismatchedDataLengths,$e.pathsWithMismatchedDataLengths)}},[H,u,A,o,S,h.palette.mode,B,g,y,f]),re=(0,et.CC)({topics:R,preloadType:"full",restore:ee,addMessages:U});return(0,P.useMemo)(()=>{const te=mt(I.datasets),ge=xt(te),ye=mt(re.datasets),Ie=xt(ye),Re=Object.values(ge).concat(Object.values(Ie));return{bounds:se(I.bounds,re.bounds),datasets:(0,be.Z)(Re,ke=>ke?ke.dataset:void 0),pathsWithMismatchedDataLengths:(0,N.union)(I.pathsWithMismatchedDataLengths,re.pathsWithMismatchedDataLengths)}},[re.bounds,re.datasets,re.pathsWithMismatchedDataLengths,I.bounds,I.datasets,I.pathsWithMismatchedDataLengths])}var yt=s(40301),Nt=s(62515),Rt=s(31458);function Lt(e,t){const u=(0,z.wi)(e.color,t);return{type:"line",display:!0,drawTime:"beforeDatasetsDraw",scaleID:"y",label:{content:e.value,width:"100%",height:"100%"},borderColor:u,borderDash:[5,5],borderWidth:1,value:Number.parseFloat(e.value)}}function bt(e){return(0,be.Z)(e,(t,u)=>{if(t.enabled){if(V(t))return Lt(t,u)}else return})}function Bt(e){const t=(0,Oe.Z)(),{currentTime:u,datasetBounds:o,datasets:S,defaultView:g,isSynced:y,maxYValue:f,minYValue:h,onClick:B,paths:R,showXAxisLabels:W,showYAxisLabels:I,xAxisVal:i}=e,b=(0,P.useMemo)(()=>bt(R),[R]),D=(0,P.useMemo)(()=>{const A=isNaN(h)?void 0:h,U=isNaN(f)?void 0:f;return{min:A,max:U,ticks:{display:I,precision:3},grid:{color:t.palette.divider}}},[f,h,I,t]),{width:x,height:F,ref:H}=(0,Nt.NB)({refreshRate:0,refreshMode:"debounce"}),ee=(0,P.useMemo)(()=>({datasets:S}),[S]);return(0,l.jsx)("div",{style:{width:"100%",flexGrow:1,overflow:"hidden",padding:"2px"},ref:H,children:(0,l.jsx)(Rt.Z,{isSynced:y,zoom:!0,width:x??0,height:F??0,data:ee,dataBounds:o,annotations:b,type:"scatter",yAxes:D,xAxisIsPlaybackTime:i==="timestamp",showXAxisLabels:W,currentTime:u,defaultView:g,onClick:B},i)})}var It=s(2043),Mt=s(75988),Qe=s(85108),Ct=s(87037),qe=s(1547),St=s(8740),Pt=s(3896),At=s(52498),ft=s(41518),tt=s(68434),Wt=s(20379),kt=s(91004),jt=s(82044),Ot=s(88099),Vt=s(86495),Dt=s(26775);function ht(e){if(e!=="")return e??void 0}function Et(e,t){return ht(e.label)??ht(e.value)??`Series ${t+1}`}const pt=["bool","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","time","duration","string","json"];var Ft=s(77075);const gt=28,Zt=(0,St.ZL)()((e,t,u)=>({root:{display:"contents",cursor:"pointer","&:hover":{"& > *:last-child":{opacity:1},"& > *":{backgroundColor:e.palette.background.paper,backgroundImage:`linear-gradient(${["0deg",e.palette.action.focus,e.palette.action.focus].join(" ,")})`}}},showPlotValue:{[`.${u.plotName}`]:{gridColumn:"span 1",padding:e.spacing(0,1.5,0,.5)}},listIcon:{display:"flex",alignItems:"center",position:"sticky",height:gt,left:0},checkbox:{fontSize:"1em",padding:e.spacing(.975),borderRadius:0,"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},disabledPathLabel:{opacity:.5},plotName:{display:"flex",alignItems:"center",height:gt,padding:e.spacing(0,2.5,0,.5),gridColumn:"span 2",fontFeatureSettings:`${Ft.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`,".MuiTypography-root":{whiteSpace:"nowrap"}},plotValue:{display:"flex",alignItems:"center",height:gt,padding:e.spacing(.25,1,.25,.25)},errorIcon:{color:e.palette.error.main}}));function Xt({currentTime:e,datasets:t,hasMismatchedDataLength:u,index:o,onClickPath:S,path:g,paths:y,savePaths:f,showPlotValuesInLegend:h}){const{openPanelSettings:B}=(0,Dt.W)(),{id:R}=(0,jt.R)(),{setSelectedPanelIds:W}=(0,Ot.iy)(),{classes:I,cx:i}=Zt(),b=(0,P.useMemo)(()=>h?t[o]?.data??[]:[],[t,o,h]),[D]=(0,P.useState)(()=>(0,kt.Z)()),x=(0,Vt.hx)({componentId:D,isTimestampScale:!0}),F=(0,P.useMemo)(()=>{if(!h)return;const H=x?.value??e;let ee;for(const A of b){if(H==null||A==null||A.x>H)break;ee=A.y}return ee},[h,x?.value,e,b]);return(0,l.jsxs)("div",{className:i(I.root,{[I.showPlotValue]:h}),onClick:()=>{W([R]),B(),S()},children:[(0,l.jsx)("div",{className:I.listIcon,children:(0,l.jsx)(ft.Z,{className:I.checkbox,checked:g.enabled,size:"small",title:"Toggle visibility",style:{color:(0,z.wi)(g.color,o)},icon:(0,l.jsx)(Pt.uXJ,{}),checkedIcon:(0,l.jsx)(Pt.In2,{}),onClick:H=>H.stopPropagation(),onChange:()=>{const H=y.slice(),ee=H[o];ee&&(H[o]={...ee,enabled:!ee.enabled}),f(H)}})}),(0,l.jsxs)("div",{className:I.plotName,style:{gridColumn:h?void 0:"span 2"},children:[(0,l.jsx)(tt.Z,{noWrap:h,flex:"auto",variant:"body2",className:i({[I.disabledPathLabel]:!g.enabled}),children:Et(g,o)}),u&&(0,l.jsx)(Wt.Z,{placement:"top",title:"Mismatch in the number of elements in x-axis and y-axis messages",children:(0,l.jsx)(At.fXk,{className:I.errorIcon})})]}),h&&(0,l.jsx)("div",{className:I.plotValue,children:(0,l.jsx)(tt.Z,{variant:"body2",align:"right",color:x?.value!=null?"warning.main":"text.secondary",children:F??""})})]})}const Yt=25,$t=800,c=(0,St.ZL)()(({palette:e,shadows:t,shape:u,spacing:o},S,g)=>({root:{display:"flex",overflow:"hidden"},rootFloating:{padding:o(.75),pointerEvents:"none",gap:o(.75),position:"absolute",top:o(4.5),left:o(4),zIndex:1e3,backgroundColor:"transparent",alignItems:"flex-start",height:`calc(100% - ${Le.B}px - ${o(5.25)})`,overflow:"hidden",[`.${g.container}`]:{pointerEvents:"auto",borderRadius:u.borderRadius,backgroundImage:`linear-gradient(${["0deg",(0,qe.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,qe.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,qe.Z)(e.background.paper).setAlpha(.8).toHex8String(),backdropFilter:"blur(3px)",maxWidth:`calc(100% - ${o(1)})`,boxShadow:t[3]}},rootLeft:{alignItems:"flex-start",maxWidth:"80%",[`.${g.toggleButton}`]:{padding:o(.25),height:"100%",borderRadius:0,borderTop:"none",borderBottom:"none"},[`.${g.container}`]:{overflow:"auto",height:"100%",alignContent:"flex-start"}},rootTop:{flexDirection:"column",maxHeight:"80%",[`.${g.toggleButton}`]:{padding:o(.25),borderRadius:0,borderRight:"none",borderLeft:"none"}},container:{alignItems:"center",overflow:"auto",display:"grid",gridTemplateColumns:"auto minmax(0, 1fr) auto"},dragHandle:{userSelect:"none",border:`0px solid ${e.action.hover}`,"&:hover":{borderColor:e.action.selected}},toggleButton:{fontSize:"1rem",padding:o(.75),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},toggleButtonFloating:{backdropFilter:"blur(3px)",pointerEvents:"auto",backgroundImage:`linear-gradient(${["0deg",(0,qe.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,qe.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,qe.Z)(e.background.paper).setAlpha(.8).toHex8String(),boxShadow:t[3],"&:hover":{backgroundColor:e.background.paper,backgroundImage:`linear-gradient(0deg, ${e.action.hover}, ${e.action.hover})`}}}));function n(e){const{currentTime:t,datasets:u,legendDisplay:o,onClickPath:S,paths:g,pathsWithMismatchedDataLengths:y,saveConfig:f,showLegend:h,showPlotValuesInLegend:B,sidebarDimension:R}=e,{classes:W,cx:I}=c(),i=(0,P.useRef)({x:0,y:0,sidebarDimension:0}),b=(0,P.useCallback)(()=>f({showLegend:!h}),[h,f]),D=(0,P.useMemo)(()=>{switch(o){case"floating":return h?(0,l.jsx)(It.iRs,{}):(0,l.jsx)(Mt.FEU,{});case"left":return h?(0,l.jsx)(Qe.YIM,{}):(0,l.jsx)(Qe.qmn,{});case"top":return h?(0,l.jsx)(Qe.XRD,{}):(0,l.jsx)(Qe._4M,{})}},[h,o]),x=(0,P.useCallback)(A=>{if(o==="floating"||A.buttons!==1)return;const U=o==="left"?A.clientX-i.current.x:A.clientY-i.current.y,re=(0,N.clamp)(i.current.sidebarDimension+U,Yt,$t);f({sidebarDimension:re})},[o,f]),F=(0,P.useCallback)(A=>{A.currentTarget.setPointerCapture(A.pointerId),i.current={x:A.clientX,y:A.clientY,sidebarDimension:R}},[R]),H=(0,P.useCallback)(A=>{A.currentTarget.releasePointerCapture(A.pointerId)},[]),ee=(0,P.useCallback)(A=>{f({paths:A})},[f]);return(0,l.jsxs)("div",{className:I(W.root,{[W.rootFloating]:o==="floating",[W.rootLeft]:o==="left",[W.rootTop]:o==="top"}),children:[(0,l.jsx)(Ct.Z,{onClick:b,className:I(W.toggleButton,{[W.toggleButtonFloating]:o==="floating"}),children:D}),h&&(0,l.jsx)(Pe.Z,{flexGrow:1,gap:.5,overflow:"auto",fullHeight:o!=="top",style:{height:o==="top"?Math.round(R):void 0,width:o==="left"?Math.round(R):void 0},children:(0,l.jsx)(Pe.Z,{flex:"auto",fullWidth:!0,fullHeight:o!=="top",overflow:o==="floating"?"auto":void 0,children:(0,l.jsx)("div",{className:W.container,children:g.map((A,U)=>(0,l.jsx)(Xt,{index:U,onClickPath:()=>S(U),path:A,paths:g,hasMismatchedDataLength:y.includes(A.value),datasets:u,currentTime:t,savePaths:ee,showPlotValuesInLegend:B},U))})})}),o!=="floating"&&(0,l.jsx)("div",{className:W.dragHandle,onPointerDown:F,onPointerMove:x,onPointerUp:H,style:o==="left"?{marginLeft:-6,cursor:"ew-resize",borderRightWidth:2,height:"100%",width:4}:{marginTop:-6,cursor:"ns-resize",borderBottomWidth:2,width:"100%",height:4}})]})}var a=s(55433);function d(e,t){const{x:u,value:o,receiveTime:S,headerStamp:g}=t,y=(0,E.Eo)(S),f=g?(0,E.Eo)(g):"";return[u,y,f,e,o]}const m=e=>({timestamp:"elapsed time",index:"index",custom:"x value",currentCustom:"x value"})[e];function M(e,t){const u=[m(t),"receive time","header.stamp","topic","value"],o=[];o.push(u);for(const S of e)for(const g of S.data)o.push(d(S.label,g));return o.join(`
`)}function p(e,t){const u=M(e,t),o=new Blob([u],{type:"text/csv;charset=utf-8;"});(0,a.G)([{blob:o,fileName:"plot_data.csv"}])}var v=s(67067),C=s(5817),Z=s.n(C),K=s(68588),oe=s(39367);const ue=Z()((e,t,u)=>({actions:[{type:"action",id:"delete-series",label:u("deleteSeries"),display:"inline",icon:"Clear"}],label:Et(e,t),visible:e.enabled,fields:{value:{label:u("messagePath"),input:"messagepath",value:e.value,validTypes:pt,supportsMathModifiers:!0},label:{input:"string",label:u("label"),value:e.label},color:{input:"rgb",label:u("color"),value:e.color??z.Hm[t%z.Hm.length]},showLine:{label:u("showLine"),input:"boolean",value:e.showLine!==!1},timestampMethod:{input:"select",label:u("timestamp"),value:e.timestampMethod,options:[{label:u("receiveTime"),value:"receiveTime"},{label:u("headerStamp"),value:"headerStamp"}]}}})),w=Z()((e,t)=>{const u=Object.fromEntries(e.map((o,S)=>[`${S}`,ue(o,S,t)]));return{label:t("series"),children:u,actions:[{type:"action",id:"add-series",label:t("addSeries"),display:"inline",icon:"Addchart"}]}});function _(e,t){const u=(0,N.isNumber)(e.minYValue)&&(0,N.isNumber)(e.maxYValue)&&e.minYValue>=e.maxYValue?t("maxYError"):void 0,o=(0,N.isNumber)(e.minXValue)&&(0,N.isNumber)(e.maxXValue)&&e.minXValue>=e.maxXValue?t("maxXError"):void 0;return{general:{label:t("general"),fields:{isSynced:{label:t("syncWithOtherPlots"),input:"boolean",value:e.isSynced}}},legend:{label:t("legend"),fields:{legendDisplay:{label:t("position"),input:"select",value:e.legendDisplay,options:[{value:"floating",label:t("floating")},{value:"left",label:t("left")},{value:"top",label:t("top")},{value:"none",label:t("hidden")}]},showPlotValuesInLegend:{label:t("showValues"),input:"boolean",value:e.showPlotValuesInLegend}}},yAxis:{label:t("yAxis"),defaultExpansionState:"collapsed",fields:{showYAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showYAxisLabels},minYValue:{label:t("min"),input:"number",value:e.minYValue!=null?Number(e.minYValue):void 0,placeholder:"auto"},maxYValue:{label:t("max"),input:"number",error:u,value:e.maxYValue!=null?Number(e.maxYValue):void 0,placeholder:"auto"}}},xAxis:{label:t("xAxis"),defaultExpansionState:"collapsed",fields:{xAxisVal:{label:t("value"),input:"select",value:e.xAxisVal,options:[{label:t("timestamp"),value:"timestamp"},{label:t("index"),value:"index"},{label:t("currentPath"),value:"currentCustom"},{label:t("accumulatedPath"),value:"custom"}]},xAxisPath:e.xAxisVal==="currentCustom"||e.xAxisVal==="custom"?{label:t("messagePath"),input:"messagepath",value:e.xAxisPath?.value??"",validTypes:pt}:void 0,showXAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showXAxisLabels},minXValue:{label:t("min"),input:"number",value:e.minXValue!=null?Number(e.minXValue):void 0,placeholder:"auto"},maxXValue:{label:t("max"),input:"number",error:o,value:e.maxXValue!=null?Number(e.maxXValue):void 0,placeholder:"auto"},followingViewWidth:{label:t("secondsRange"),input:"number",placeholder:"auto",value:e.followingViewWidth}}},paths:w(e.paths,t)}}function ie(e,t,u){const o=(0,oe.W0)(),{t:S}=(0,K.$G)("plot"),g=(0,P.useCallback)(y=>{if(y.action==="update"){const{path:f,value:h}=y.payload;t((0,v.Uy)(B=>{f[0]==="paths"?f[2]==="visible"?(0,N.set)(B,[...f.slice(0,2),"enabled"],h):(0,N.set)(B,f,h):(0,N.isEqual)(f,["legend","legendDisplay"])?(B.legendDisplay=h,B.showLegend=!0):(0,N.isEqual)(f,["xAxis","xAxisPath"])?(0,N.set)(B,["xAxisPath","value"],h):((0,N.set)(B,f.slice(1),h),f[1]==="followingViewWidth"?(B.minXValue=void 0,B.maxXValue=void 0):(f[1]==="minXValue"||f[1]==="maxXValue")&&(B.followingViewWidth=void 0))}))}else if(y.payload.id==="add-series")t((0,v.Uy)(f=>{f.paths.push({timestampMethod:"receiveTime",value:"",enabled:!0})}));else if(y.payload.id==="delete-series"){const f=y.payload.path[1];t((0,v.Uy)(h=>{h.paths.splice(Number(f),1)}))}},[t]);(0,P.useEffect)(()=>{o({actionHandler:g,focusedPath:u,nodes:_(e,S)})},[g,e,u,o,S])}const Ne=240;function xe(e,t){e({panelType:"Plot",updateIfExists:!0,siblingConfigCreator:u=>({...u,paths:(0,N.uniq)(u.paths.concat([{value:t,enabled:!0,timestampMethod:"receiveTime"}]).filter(({value:o})=>o))})})}function X(e){return e.playerState.activeData?.startTime}function nt(e){return e.playerState.activeData?.currentTime}function Me(e){return e.playerState.activeData?.endTime}function Ge(e){const{saveConfig:t,config:u}=e,{title:o,followingViewWidth:S,paths:g,minXValue:y,maxXValue:f,minYValue:h,maxYValue:B,showXAxisLabels:R,showYAxisLabels:W,showLegend:I,legendDisplay:i=u.showSidebar===!0?"left":"floating",showPlotValuesInLegend:b,isSynced:D,xAxisVal:x,xAxisPath:F,sidebarDimension:H=u.sidebarWidth??Ne,[yt.xS]:ee}=u;(0,P.useEffect)(()=>{o&&(ee==null||ee==="")&&t({title:void 0,[yt.xS]:o})},[ee,o,t]),(0,P.useEffect)(()=>{g.length===0&&t({paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}]})},[t,g.length]);const A=x==="currentCustom"||x==="index",U=(0,ae.An)(X),re=(0,ae.An)(nt),at=(0,ae.An)(Me),te=Ee=>{if(x==="timestamp"&&Ee&&U)return(0,k.toSec)((0,k.subtract)(Ee,U))},ge=te(re),ye=(0,P.useMemo)(()=>{if(S!=null&&+S>0)return{type:"following",width:+S}},[S]),Ie=te(at),Re=(0,P.useMemo)(()=>{if((0,N.isNumber)(y)&&(0,N.isNumber)(Ie)||(0,N.isNumber)(f))return{type:"fixed",minXValue:(0,N.isNumber)(y)?y:0,maxXValue:(0,N.isNumber)(f)?f:Ie??0};if(x==="timestamp"&&U&&Ie!=null)return{type:"fixed",minXValue:0,maxXValue:Ie}},[f,y,Ie,U,x]),$e=(0,P.useMemo)(()=>ye??Re??void 0,[Re,ye]),ke=(0,P.useMemo)(()=>g.map(({value:Ee})=>Ee).concat((0,N.compact)([F?.value])),[F?.value,g]),{bounds:Fe,datasets:Ce,pathsWithMismatchedDataLengths:He}=Tt({allPaths:ke,followingView:ye,showSingleCurrentMessage:A,startTime:U,xAxisVal:x,xAxisPath:F,yAxisPaths:g}),Se=(0,ae.m7)(),De=(0,P.useCallback)(({x:Ee})=>{const{seekPlayback:ot,playerState:{activeData:{startTime:ct}={}}}=Se();!ot||!ct||Ee==null||x!=="timestamp"||Ee>=0&&ot((0,k.add)(ct,(0,k.fromSec)(Ee)))},[Se,x]),[lt,st]=(0,P.useState)(void 0);ie(u,t,lt);const _e=(0,P.useMemo)(()=>i==="top"?"column":"row",[i]),Ke=(0,P.useCallback)(()=>[{type:"item",label:"Download plot data as CSV",onclick:()=>p(Ce,x)}],[Ce,x]);return(0,l.jsxs)(Pe.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",children:[(0,l.jsx)(Le.Z,{}),(0,l.jsxs)(Pe.Z,{direction:_e,flex:"auto",fullWidth:!0,style:{height:`calc(100% - ${Le.B}px)`},children:[i!=="none"&&(0,l.jsx)(n,{paths:g,datasets:Ce,currentTime:ge,onClickPath:Ee=>st(["paths",String(Ee)]),saveConfig:t,showLegend:I,pathsWithMismatchedDataLengths:He,legendDisplay:i,showPlotValuesInLegend:b,sidebarDimension:H}),(0,l.jsxs)(Pe.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",children:[(0,l.jsx)(Bt,{isSynced:x==="timestamp"&&D,paths:g,minYValue:parseFloat((h??"").toString()),maxYValue:parseFloat((B??"").toString()),showXAxisLabels:R,showYAxisLabels:W,datasets:Ce,datasetBounds:Fe,xAxisVal:x,currentTime:ge,onClick:De,defaultView:$e}),(0,l.jsx)(r.i,{getItems:Ke})]})]})]})}const ve={paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}],minYValue:void 0,maxYValue:void 0,showXAxisLabels:!0,showYAxisLabels:!0,showLegend:!0,legendDisplay:"floating",showPlotValuesInLegend:!1,isSynced:!0,xAxisVal:"timestamp",sidebarDimension:Ne},Je=(0,je.Z)(Object.assign(Ge,{panelType:"Plot",defaultConfig:ve}))},68071:(it,Te,s)=>{s.d(Te,{A2:()=>r,Hm:()=>ae,UX:()=>Le,eE:()=>Pe,wi:()=>Oe});var l=s(76635),N=s.n(l),P=s(1547),k=s(25302);const ae=[k.Y.blue.medium,k.Y.orange.medium,k.Y.yellow.medium,k.Y.green.medium,k.Y.cyan.medium,k.Y.purple.medium,k.Y.paleGreen.medium],je=ae.map(J=>[J,...(0,P.Z)(J).tetrad().map(be=>be.toHexString())]),r=(0,l.uniq)((0,l.range)(0,je[0].length).map(J=>je.map(be=>be[J])).flat()),Le=(0,l.memoize)(J=>(0,P.Z)(J).brighten(15).toString()),Pe=(0,l.memoize)(J=>(0,P.Z)(J).darken(30).toString());function Oe(J,be){return J??ae[be%ae.length]}},25302:(it,Te,s)=>{s.d(Te,{B:()=>P,Y:()=>N});var l=s(1547);const N={base:{dark:"#1F1E27",medium:"#8B8B8D",light:"#F7F7F3"},red:{dark:"#F24366",medium:"#ff7c96",light:"#FFAABB"},blue:{dark:"#1b83ec",medium:"#4e98e2",light:"#77AADD"},paleGreen:{dark:"#B4CC00",medium:"#cad660",light:"#CDD67E"},orange:{dark:"#ea531f",medium:"#f5774d",light:"#faa487"},cyan:{dark:"#22b5ff",medium:"#61cbff",light:"#99DDFF"},green:{dark:"#05d27d",medium:"#5cd6a9",light:"#8de0c9"},purple:{dark:"#6E51EE",medium:"#a395e2",light:"#c7c0e7"},yellow:{dark:"#EDCC28",medium:"#f7df71",light:"#f1e4aa"}},P=(0,l.Z)("hsv(0, 0%, 75%)").toHexString()}}]);

//# sourceMappingURL=studio-873.js.map