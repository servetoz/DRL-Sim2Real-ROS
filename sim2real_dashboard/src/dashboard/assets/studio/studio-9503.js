"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9503],{62098:function(Z,y,V){var O=this&&this.__createBinding||(Object.create?function(B,v,x,T){T===void 0&&(T=x);var $=Object.getOwnPropertyDescriptor(v,x);(!$||("get"in $?!v.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return v[x]}}),Object.defineProperty(B,T,$)}:function(B,v,x,T){T===void 0&&(T=x),B[T]=v[x]}),l=this&&this.__exportStar||function(B,v){for(var x in B)x!=="default"&&!Object.prototype.hasOwnProperty.call(v,x)&&O(v,B,x)};Object.defineProperty(y,"__esModule",{value:!0}),l(V(38367),y),l(V(35135),y)},25811:(Z,y,V)=>{V.d(y,{RS:()=>j,c1:()=>Q});function O({polynomial:i,numTables:t}){const e=new Uint32Array(256*t);for(let s=0;s<256;s++){let n=s;n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,n=(n&1)*i^n>>>1,e[s]=n}for(let s=256;s<e.length;s++){const n=e[s-256];e[s]=e[n&255]^n>>>8}return e}const l=O({polynomial:3988292384,numTables:8});function B(){return-1}function v(i,t){const e=t.byteLength,s=new DataView(t.buffer,t.byteOffset,e);let n=i,r=0;const o=-s.byteOffset&3;for(;r<o&&r<e;r++)n=l[(n^s.getUint8(r))&255]^n>>>8;if(r===e)return n;r=o;let c=e-r;for(;c>=8;r+=8,c-=8){n^=s.getUint32(r,!0);const a=s.getUint32(r+4,!0);n=l[0*256+(a>>>24&255)]^l[1*256+(a>>>16&255)]^l[2*256+(a>>>8&255)]^l[3*256+(a>>>0&255)]^l[4*256+(n>>>24&255)]^l[5*256+(n>>>16&255)]^l[6*256+(n>>>8&255)]^l[7*256+(n>>>0&255)]}for(let a=r;a<e;a++)n=l[(n^s.getUint8(a))&255]^n>>>8;return n}function x(i){return(i^-1)>>>0}function T(i){return x(v(B(),i))}var $=function(i,t){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,n,r,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(d){return a([h,d])}}function a(h){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,n&&(r=h[0]&2?n.return:h[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,h[1])).done)return r;switch(n=0,r&&(h=[h[0]&2,r.value]),h[0]){case 0:case 1:r=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,n=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){e.label=h[1];break}if(h[0]===6&&e.label<r[1]){e.label=r[1],r=h;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(h);break}r[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(i,e)}catch(d){h=[6,d],n=0}finally{s=r=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},A=function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var s=e.call(i),n,r=[],o;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)r.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return r},M=function(i,t,e){if(e||arguments.length===2)for(var s=0,n=t.length,r;s<n;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return i.concat(r||Array.prototype.slice.call(t))},k=function(i){return~~i},X=function(){function i(t){t===void 0&&(t=i.minComparator);var e=this;this.compare=t,this.heapArray=[],this._limit=0,this.offer=this.add,this.element=this.peek,this.poll=this.pop,this._invertedCompare=function(s,n){return-1*e.compare(s,n)}}return i.getChildrenIndexOf=function(t){return[t*2+1,t*2+2]},i.getParentIndexOf=function(t){if(t<=0)return-1;var e=t%2?1:2;return Math.floor((t-e)/2)},i.getSiblingIndexOf=function(t){if(t<=0)return-1;var e=t%2?1:-1;return t+e},i.minComparator=function(t,e){return t>e?1:t<e?-1:0},i.maxComparator=function(t,e){return e>t?1:e<t?-1:0},i.minComparatorNumber=function(t,e){return t-e},i.maxComparatorNumber=function(t,e){return e-t},i.defaultIsEqual=function(t,e){return t===e},i.print=function(t){function e(d){var p=i.getParentIndexOf(d);return Math.floor(Math.log2(p+1))}function s(d,p){for(var m="";p>0;--p)m+=d;return m}for(var n=0,r=[],o=e(t.length-1)+2,c=0;n<t.length;){var a=e(n)+1;n===0&&(a=0);var h=String(t.get(n));h.length>c&&(c=h.length),r[a]=r[a]||[],r[a].push(h),n+=1}return r.map(function(d,p){var m=Math.pow(2,o-p)-1;return s(" ",Math.floor(m/2)*c)+d.map(function(_){var S=(c-_.length)/2;return s(" ",Math.ceil(S))+_+s(" ",Math.floor(S))}).join(s(" ",m*c))}).join(`
`)},i.heapify=function(t,e){var s=new i(e);return s.heapArray=t,s.init(),s},i.heappop=function(t,e){var s=new i(e);return s.heapArray=t,s.pop()},i.heappush=function(t,e,s){var n=new i(s);n.heapArray=t,n.push(e)},i.heappushpop=function(t,e,s){var n=new i(s);return n.heapArray=t,n.pushpop(e)},i.heapreplace=function(t,e,s){var n=new i(s);return n.heapArray=t,n.replace(e)},i.heaptop=function(t,e,s){e===void 0&&(e=1);var n=new i(s);return n.heapArray=t,n.top(e)},i.heapbottom=function(t,e,s){e===void 0&&(e=1);var n=new i(s);return n.heapArray=t,n.bottom(e)},i.nlargest=function(t,e,s){var n=new i(s);return n.heapArray=M([],A(e),!1),n.init(),n.top(t)},i.nsmallest=function(t,e,s){var n=new i(s);return n.heapArray=M([],A(e),!1),n.init(),n.bottom(t)},i.prototype.add=function(t){return this._sortNodeUp(this.heapArray.push(t)-1),this._applyLimit(),!0},i.prototype.addAll=function(t){var e,s=this.length;(e=this.heapArray).push.apply(e,M([],A(t),!1));for(var n=this.length;s<n;++s)this._sortNodeUp(s);return this._applyLimit(),!0},i.prototype.bottom=function(t){if(t===void 0&&(t=1),this.heapArray.length===0||t<=0)return[];if(this.heapArray.length===1)return[this.heapArray[0]];if(t>=this.heapArray.length)return M([],A(this.heapArray),!1);var e=this._bottomN_push(~~t);return e},i.prototype.check=function(){var t=this;return this.heapArray.find(function(e,s){return!!t.getChildrenOf(s).find(function(n){return t.compare(e,n)>0})})},i.prototype.clear=function(){this.heapArray=[]},i.prototype.clone=function(){var t=new i(this.comparator());return t.heapArray=this.toArray(),t._limit=this._limit,t},i.prototype.comparator=function(){return this.compare},i.prototype.contains=function(t,e){return e===void 0&&(e=i.defaultIsEqual),this.heapArray.findIndex(function(s){return e(s,t)})>=0},i.prototype.init=function(t){t&&(this.heapArray=M([],A(t),!1));for(var e=Math.floor(this.heapArray.length);e>=0;--e)this._sortNodeDown(e);this._applyLimit()},i.prototype.isEmpty=function(){return this.length===0},i.prototype.leafs=function(){if(this.heapArray.length===0)return[];var t=i.getParentIndexOf(this.heapArray.length-1);return this.heapArray.slice(t+1)},Object.defineProperty(i.prototype,"length",{get:function(){return this.heapArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit=~~t,this._applyLimit()},enumerable:!1,configurable:!0}),i.prototype.peek=function(){return this.heapArray[0]},i.prototype.pop=function(){var t=this.heapArray.pop();return this.length>0&&t!==void 0?this.replace(t):t},i.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length<1?!1:t.length===1?this.add(t[0]):this.addAll(t)},i.prototype.pushpop=function(t){var e;return this.compare(this.heapArray[0],t)<0&&(e=A([this.heapArray[0],t],2),t=e[0],this.heapArray[0]=e[1],this._sortNodeDown(0)),t},i.prototype.remove=function(t,e){if(e===void 0&&(e=i.defaultIsEqual),this.length>0){if(t===void 0)return this.pop(),!0;var s=this.heapArray.findIndex(function(n){return e(n,t)});if(s>=0)return s===0?this.pop():s===this.length-1?this.heapArray.pop():(this.heapArray.splice(s,1,this.heapArray.pop()),this._sortNodeUp(s),this._sortNodeDown(s)),!0}return!1},i.prototype.replace=function(t){var e=this.heapArray[0];return this.heapArray[0]=t,this._sortNodeDown(0),e},i.prototype.size=function(){return this.length},i.prototype.top=function(t){if(t===void 0&&(t=1),this.heapArray.length===0||t<=0)return[];if(this.heapArray.length===1||t===1)return[this.heapArray[0]];if(t>=this.heapArray.length)return M([],A(this.heapArray),!1);var e=this._topN_push(~~t);return e},i.prototype.toArray=function(){return M([],A(this.heapArray),!1)},i.prototype.toString=function(){return this.heapArray.toString()},i.prototype.get=function(t){return this.heapArray[t]},i.prototype.getChildrenOf=function(t){var e=this;return i.getChildrenIndexOf(t).map(function(s){return e.heapArray[s]}).filter(function(s){return s!==void 0})},i.prototype.getParentOf=function(t){var e=i.getParentIndexOf(t);return this.heapArray[e]},i.prototype[Symbol.iterator]=function(){return $(this,function(t){switch(t.label){case 0:return this.length?[4,this.pop()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})},i.prototype.iterator=function(){return this.toArray()},i.prototype._applyLimit=function(){if(this._limit&&this._limit<this.heapArray.length)for(var t=this.heapArray.length-this._limit;t;)this.heapArray.pop(),--t},i.prototype._bottomN_push=function(t){var e=new i(this.compare);e.limit=t,e.heapArray=this.heapArray.slice(-t),e.init();for(var s=this.heapArray.length-1-t,n=i.getParentIndexOf(s),r=[],o=s;o>n;--o)r.push(o);for(var c=this.heapArray;r.length;){var o=r.shift();this.compare(c[o],e.peek())>0&&(e.replace(c[o]),o%2&&r.push(i.getParentIndexOf(o)))}return e.toArray()},i.prototype._moveNode=function(t,e){var s;s=A([this.heapArray[e],this.heapArray[t]],2),this.heapArray[t]=s[0],this.heapArray[e]=s[1]},i.prototype._sortNodeDown=function(t){for(var e=this,s=t<this.heapArray.length-1,n=this.heapArray[t],r=function(h,d){return e.heapArray.length>d&&e.compare(e.heapArray[d],e.heapArray[h])<0&&(h=d),h};s;){var o=i.getChildrenIndexOf(t),c=o.reduce(r,o[0]),a=this.heapArray[c];typeof a<"u"&&this.compare(n,a)>0?(this._moveNode(t,c),t=c):s=!1}},i.prototype._sortNodeUp=function(t){for(var e=t>0;e;){var s=i.getParentIndexOf(t);s>=0&&this.compare(this.heapArray[s],this.heapArray[t])>0?(this._moveNode(t,s),t=s):e=!1}},i.prototype._topN_push=function(t){var e=new i(this._invertedCompare);e.limit=t;for(var s=[0],n=this.heapArray;s.length;){var r=s.shift();r<n.length&&(e.length<t?(e.push(n[r]),s.push.apply(s,M([],A(i.getChildrenIndexOf(r)),!1))):this.compare(n[r],e.peek())<0&&(e.replace(n[r]),s.push.apply(s,M([],A(i.getChildrenIndexOf(r)),!1))))}return e.toArray()},i.prototype._topN_fill=function(t){var e=this.heapArray,s=new i(this._invertedCompare);s.limit=t,s.heapArray=e.slice(0,t),s.init();for(var n=i.getParentIndexOf(t-1)+1,r=[],o=n;o<t;++o)r.push.apply(r,M([],A(i.getChildrenIndexOf(o).filter(function(c){return c<e.length})),!1));for((t-1)%2&&r.push(t);r.length;){var o=r.shift();o<e.length&&this.compare(e[o],s.peek())<0&&(s.replace(e[o]),r.push.apply(r,M([],A(i.getChildrenIndexOf(o)),!1)))}return s.toArray()},i.prototype._topN_heap=function(t){for(var e=this.clone(),s=[],n=0;n<t;++n)s.push(e.pop());return s},i.prototype._topIdxOf=function(t){if(!t.length)return-1;for(var e=0,s=t[e],n=1;n<t.length;++n){var r=this.compare(t[n],s);r<0&&(e=n,s=t[n])}return e},i.prototype._topOf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var s=new i(this.compare);return s.init(t),s.peek()},i}();const F=typeof DataView.prototype.getBigUint64=="function"?DataView.prototype.getBigUint64:function(i,t){const e=t===!0?this.getUint32(i,t):this.getUint32(i+4,t),s=t===!0?this.getUint32(i+4,t):this.getUint32(i,t);return BigInt(s)<<32n|BigInt(e)};class K{constructor(t,e=0){this.textDecoder=new TextDecoder,this.view=t,this.offset=e}uint8(){const t=this.view.getUint8(this.offset);return this.offset+=1,t}uint16(){const t=this.view.getUint16(this.offset,!0);return this.offset+=2,t}uint32(){const t=this.view.getUint32(this.offset,!0);return this.offset+=4,t}uint64(){const t=F.call(this.view,this.offset,!0);return this.offset+=8,t}string(){const t=this.uint32();if(this.offset+t>this.view.byteLength)throw new Error(`String length ${t} exceeds bounds of buffer`);const e=this.textDecoder.decode(new Uint8Array(this.view.buffer,this.view.byteOffset+this.offset,t));return this.offset+=t,e}keyValuePairs(t,e){const s=this.uint32();if(this.offset+s>this.view.byteLength)throw new Error(`Key-value pairs length ${s} exceeds bounds of buffer`);const n=[],r=this.offset+s;try{for(;this.offset<r;)n.push([t(this),e(this)])}catch(o){throw new Error(`Error reading key-value pairs: ${o.message}`)}if(this.offset!==r)throw new Error(`Key-value pairs length (${this.offset-r+s}) greater than expected (${s})`);return n}map(t,e){const s=this.uint32();if(this.offset+s>this.view.byteLength)throw new Error(`Map length ${s} exceeds bounds of buffer`);const n=new Map,r=this.offset+s;try{for(;this.offset<r;){const o=t(this),c=e(this),a=n.get(o);if(a!=null)throw new Error(`Duplicate key ${String(o)} (${String(a)} vs ${String(c)})`);n.set(o,c)}}catch(o){throw new Error(`Error reading map: ${o.message}`)}if(this.offset!==r)throw new Error(`Map length (${this.offset-r+s}) greater than expected (${s})`);return n}}const I=Object.freeze([137,77,67,65,80,48,13,10]);var C;(function(i){i[i.MIN=1]="MIN",i[i.HEADER=1]="HEADER",i[i.FOOTER=2]="FOOTER",i[i.SCHEMA=3]="SCHEMA",i[i.CHANNEL=4]="CHANNEL",i[i.MESSAGE=5]="MESSAGE",i[i.CHUNK=6]="CHUNK",i[i.MESSAGE_INDEX=7]="MESSAGE_INDEX",i[i.CHUNK_INDEX=8]="CHUNK_INDEX",i[i.ATTACHMENT=9]="ATTACHMENT",i[i.ATTACHMENT_INDEX=10]="ATTACHMENT_INDEX",i[i.STATISTICS=11]="STATISTICS",i[i.METADATA=12]="METADATA",i[i.METADATA_INDEX=13]="METADATA_INDEX",i[i.SUMMARY_OFFSET=14]="SUMMARY_OFFSET",i[i.DATA_END=15]="DATA_END",i[i.MAX=15]="MAX"})(C||(C={}));function U(i){return i>=C.MIN&&i<=C.MAX}function z(i,t){if(t+I.length>i.byteLength)return{usedBytes:0};if(!I.every((e,s)=>e===i.getUint8(t+s)))throw new Error(`Expected MCAP magic '${I.map(e=>e.toString(16).padStart(2,"0")).join(" ")}', found '${Array.from(I,(e,s)=>i.getUint8(t+s).toString(16).padStart(2,"0")).join(" ")}'`);return{magic:{specVersion:"0"},usedBytes:I.length}}function L({view:i,startOffset:t,validateCrcs:e}){if(t+1+8>=i.byteLength)return{usedBytes:0};const s=new K(i,t),n=s.uint8(),r=s.uint64();if(r>Number.MAX_SAFE_INTEGER)throw new Error(`Record content length ${r} is too large`);const o=s.offset+Number(r);if(o>i.byteLength)return{usedBytes:0};if(!U(n))return{record:{type:"Unknown",opcode:n,data:new Uint8Array(i.buffer,i.byteOffset+s.offset,Number(r))},usedBytes:o-t};const c=new DataView(i.buffer,i.byteOffset+s.offset,Number(r)),a=new K(c);switch(n){case C.HEADER:{const h=a.string(),d=a.string();return{record:{type:"Header",profile:h,library:d},usedBytes:o-t}}case C.FOOTER:{const h=a.uint64(),d=a.uint64(),p=a.uint32();return{record:{type:"Footer",summaryStart:h,summaryOffsetStart:d,summaryCrc:p},usedBytes:o-t}}case C.SCHEMA:{const h=a.uint16(),d=a.string(),p=a.string(),m=a.uint32();if(a.offset+m>c.byteLength)throw new Error(`Schema data length ${m} exceeds bounds of record`);const _=new Uint8Array(c.buffer.slice(c.byteOffset+a.offset,c.byteOffset+a.offset+m));return a.offset+=m,{record:{type:"Schema",id:h,encoding:p,name:d,data:_},usedBytes:o-t}}case C.CHANNEL:{const h=a.uint16(),d=a.uint16(),p=a.string(),m=a.string(),_=a.map(D=>D.string(),D=>D.string());return{record:{type:"Channel",id:h,schemaId:d,topic:p,messageEncoding:m,metadata:_},usedBytes:o-t}}case C.MESSAGE:{const h=a.uint16(),d=a.uint32(),p=a.uint64(),m=a.uint64(),_=new Uint8Array(c.buffer.slice(c.byteOffset+a.offset,c.byteOffset+c.byteLength));return{record:{type:"Message",channelId:h,sequence:d,logTime:p,publishTime:m,data:_},usedBytes:o-t}}case C.CHUNK:{const h=a.uint64(),d=a.uint64(),p=a.uint64(),m=a.uint32(),_=a.string(),S=Number(a.uint64());if(S+a.offset>c.byteLength)throw new Error("Chunk records length exceeds remaining record size");const D=new Uint8Array(c.buffer.slice(c.byteOffset+a.offset,c.byteOffset+a.offset+S));return{record:{type:"Chunk",messageStartTime:h,messageEndTime:d,compression:_,uncompressedSize:p,uncompressedCrc:m,records:D},usedBytes:o-t}}case C.MESSAGE_INDEX:{const h=a.uint16(),d=a.keyValuePairs(m=>m.uint64(),m=>m.uint64());return{record:{type:"MessageIndex",channelId:h,records:d},usedBytes:o-t}}case C.CHUNK_INDEX:{const h=a.uint64(),d=a.uint64(),p=a.uint64(),m=a.uint64(),_=a.map(P=>P.uint16(),P=>P.uint64()),S=a.uint64(),D=a.string(),R=a.uint64(),W=a.uint64();return{record:{type:"ChunkIndex",messageStartTime:h,messageEndTime:d,chunkStartOffset:p,chunkLength:m,messageIndexOffsets:_,messageIndexLength:S,compression:D,compressedSize:R,uncompressedSize:W},usedBytes:o-t}}case C.ATTACHMENT:{const h=a.uint64(),d=a.uint64(),p=a.string(),m=a.string(),_=a.uint64();if(BigInt(c.byteOffset+a.offset)+_>Number.MAX_SAFE_INTEGER)throw new Error(`Attachment too large: ${_}`);if(a.offset+Number(_)+4>c.byteLength)throw new Error(`Attachment data length ${_} exceeds bounds of record`);const S=new Uint8Array(c.buffer.slice(c.byteOffset+a.offset,c.byteOffset+a.offset+Number(_)));a.offset+=Number(_);const D=a.offset,R=a.uint32();if(e&&R!==0){const q=T(new DataView(c.buffer,c.byteOffset,D));if(q!==R)throw new Error(`Attachment CRC32 mismatch: expected ${R}, actual ${q}`)}return{record:{type:"Attachment",logTime:h,createTime:d,name:p,mediaType:m,data:S},usedBytes:o-t}}case C.ATTACHMENT_INDEX:{const h=a.uint64(),d=a.uint64(),p=a.uint64(),m=a.uint64(),_=a.uint64(),S=a.string(),D=a.string();return{record:{type:"AttachmentIndex",offset:h,length:d,logTime:p,createTime:m,dataSize:_,name:S,mediaType:D},usedBytes:o-t}}case C.STATISTICS:{const h=a.uint64(),d=a.uint16(),p=a.uint32(),m=a.uint32(),_=a.uint32(),S=a.uint32(),D=a.uint64(),R=a.uint64(),W=a.map(P=>P.uint16(),P=>P.uint64());return{record:{type:"Statistics",messageCount:h,schemaCount:d,channelCount:p,attachmentCount:m,metadataCount:_,chunkCount:S,messageStartTime:D,messageEndTime:R,channelMessageCounts:W},usedBytes:o-t}}case C.METADATA:{const h=a.string();return{record:{type:"Metadata",metadata:a.map(m=>m.string(),m=>m.string()),name:h},usedBytes:o-t}}case C.METADATA_INDEX:{const h=a.uint64(),d=a.uint64(),p=a.string();return{record:{type:"MetadataIndex",offset:h,length:d,name:p},usedBytes:o-t}}case C.SUMMARY_OFFSET:{const h=a.uint8(),d=a.uint64(),p=a.uint64();return{record:{type:"SummaryOffset",groupOpcode:h,groupStart:d,groupLength:p},usedBytes:o-t}}case C.DATA_END:return{record:{type:"DataEnd",dataSectionCrc:a.uint32()},usedBytes:o-t}}}function G(i,t,e){let s=0,n=i.length;if(n===0)return 0;const r=e(t);for(;s<n;){const o=s+n>>>1;e(i[o][0])<r?s=o+1:n=o}return n}class N{constructor(t){if(this.chunkIndex=t.chunkIndex,this.relevantChannels=t.relevantChannels,this.startTime=t.startTime,this.endTime=t.endTime,this.reverse=t.reverse,this.chunkIndex.messageIndexLength===0n)throw new Error("Chunks without message indexes are not currently supported")}compare(t){if(this.reverse!==t.reverse)throw new Error("Cannot compare a reversed ChunkCursor to a non-reversed ChunkCursor");let e=Number(this.getSortTime()-t.getSortTime());return e===0&&(e=Number(this.chunkIndex.chunkStartOffset-t.chunkIndex.chunkStartOffset)),this.reverse?-e:e}hasMoreMessages(){if(!this.messageIndexCursors)throw new Error("loadMessageIndexes() must be called before hasMore()");return this.messageIndexCursors.size()>0}popMessage(){if(!this.messageIndexCursors)throw new Error("loadMessageIndexes() must be called before popMessage()");const t=this.messageIndexCursors.peek();if(!t)throw new Error(`Unexpected popMessage() call when no more messages are available, in chunk at offset ${this.chunkIndex.chunkStartOffset}`);const e=t.records[t.index],[s]=e;if(this.startTime!=null&&s<this.startTime)throw new Error(`Encountered message with logTime (${s}) prior to startTime (${this.startTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);if(this.endTime!=null&&s>this.endTime)throw new Error(`Encountered message with logTime (${s}) after endTime (${this.endTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);const n=t.records[t.index+1];if(n&&this.reverse){if(this.startTime==null||n[0]>=this.startTime)return t.index++,this.messageIndexCursors.replace(t),e}else if(n&&(this.endTime==null||n[0]<=this.endTime))return t.index++,this.messageIndexCursors.replace(t),e;return this.messageIndexCursors.pop(),e}hasMessageIndexes(){return this.messageIndexCursors!=null}async loadMessageIndexes(t){const e=this.reverse;this.messageIndexCursors=new X((h,d)=>{const p=h.records[h.index]?.[0],m=d.records[d.index]?.[0];return e?p==null?-1:m==null?1:Number(m-p):p==null?1:m==null?-1:Number(p-m)});let s,n;for(const[h,d]of this.chunkIndex.messageIndexOffsets)(s==null||d<s)&&(s=d),(!this.relevantChannels||this.relevantChannels.has(h))&&(n==null||d<n)&&(n=d);if(s==null||n==null)return;const r=s+this.chunkIndex.messageIndexLength,o=await t.read(n,r-n),c=new DataView(o.buffer,o.byteOffset,o.byteLength);let a=0;for(let h;h=L({view:c,startOffset:a,validateCrcs:!0}),h.record;a+=h.usedBytes){if(h.record.type!=="MessageIndex"||h.record.records.length===0||this.relevantChannels&&!this.relevantChannels.has(h.record.channelId))continue;h.record.records.sort(([p],[m])=>Number(p-m)),e&&h.record.records.reverse();for(let p=0;p<h.record.records.length;p++){const[m]=h.record.records[p];if(m<this.chunkIndex.messageStartTime)throw new Error(`Encountered message index entry in channel ${h.record.channelId} with logTime (${m}) earlier than chunk messageStartTime (${this.chunkIndex.messageStartTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);if(m>this.chunkIndex.messageEndTime)throw new Error(`Encountered message index entry in channel ${h.record.channelId} with logTime (${m}) later than chunk messageEndTime (${this.chunkIndex.messageEndTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`)}let d=0;if(e?this.endTime!=null&&(d=G(h.record.records,this.endTime,p=>-p)):this.startTime!=null&&(d=G(h.record.records,this.startTime,p=>p)),!(d>=h.record.records.length)){if(e){if(this.startTime!=null&&h.record.records[d][0]<this.startTime)continue}else if(this.endTime!=null&&h.record.records[d][0]>this.endTime)continue;this.messageIndexCursors.push({index:d,channelId:h.record.channelId,records:h.record.records})}}if(a!==c.byteLength)throw new Error(`${c.byteLength-a} bytes remaining in message index section`)}getSortTime(){if(!this.messageIndexCursors)return this.reverse?this.chunkIndex.messageEndTime:this.chunkIndex.messageStartTime;const t=this.messageIndexCursors.peek();if(!t)throw new Error(`Unexpected empty cursor for chunk at offset ${this.chunkIndex.chunkStartOffset}`);return t.records[t.index][0]}}class j{constructor(t){this.metadataIndexes=[],this.readable=t.readable,this.chunkIndexes=t.chunkIndexes,this.attachmentIndexes=t.attachmentIndexes,this.metadataIndexes=t.metadataIndexes,this.statistics=t.statistics,this.decompressHandlers=t.decompressHandlers,this.channelsById=t.channelsById,this.schemasById=t.schemasById,this.summaryOffsetsByOpcode=t.summaryOffsetsByOpcode,this.header=t.header,this.footer=t.footer;for(const e of t.chunkIndexes)(this.messageStartTime==null||e.messageStartTime<this.messageStartTime)&&(this.messageStartTime=e.messageStartTime),(this.messageEndTime==null||e.messageEndTime>this.messageEndTime)&&(this.messageEndTime=e.messageEndTime);for(const e of t.attachmentIndexes)(this.attachmentStartTime==null||e.logTime<this.attachmentStartTime)&&(this.attachmentStartTime=e.logTime),(this.attachmentEndTime==null||e.logTime>this.attachmentEndTime)&&(this.attachmentEndTime=e.logTime)}errorWithLibrary(t){return new Error(`${t} [library=${this.header.library}]`)}static async Initialize({readable:t,decompressHandlers:e}){const s=await t.size();let n;{const w=await t.read(0n,BigInt(I.length+1+8)),Y=new DataView(w.buffer,w.byteOffset,w.byteLength);z(Y,0);const J=Y.getBigUint64(I.length+1,!0),tt=await t.read(BigInt(I.length),1n+8n+J),et=L({view:new DataView(tt.buffer,tt.byteOffset,tt.byteLength),startOffset:0,validateCrcs:!0});if(et.record?.type!=="Header")throw new Error(`Unable to read header at beginning of file; found ${et.record?.type??"nothing"}`);if(et.usedBytes!==tt.byteLength)throw new Error(`${tt.byteLength-et.usedBytes} bytes remaining after parsing header`);n=et.record}function r(w){return new Error(`${w} [library=${n.library}]`)}let o,c;{const w=BigInt(I.length+1+8+4+4),Y=BigInt(1+8+8+8+4+I.length);if(s<w+Y)throw r(`File size (${s}) is too small to be valid MCAP`);o=s-Y;const J=await t.read(o,Y);c=new DataView(J.buffer,J.byteOffset,J.byteLength)}try{z(c,c.byteLength-I.length)}catch(w){throw r(w.message)}let a;{const w=L({view:c,startOffset:0,validateCrcs:!0});if(w.record?.type!=="Footer")throw r(`Unable to read footer from end of file (offset ${o}); found ${w.record?.type??"nothing"}`);if(w.usedBytes!==c.byteLength-I.length)throw r(`${c.byteLength-I.length-w.usedBytes} bytes remaining after parsing footer`);a=w.record}if(a.summaryStart===0n)throw r("File is not indexed");const h=new Uint8Array(1+8+8+8);h.set(new Uint8Array(c.buffer,c.byteOffset,h.byteLength));const d=await t.read(a.summaryStart,o-a.summaryStart);if(a.summaryCrc!==0){let w=B();if(w=v(w,d),w=v(w,h),w=x(w),w!==a.summaryCrc)throw r(`Incorrect summary CRC ${w} (expected ${a.summaryCrc})`)}const p=new DataView(d.buffer,d.byteOffset,d.byteLength),m=new Map,_=new Map,S=[],D=[],R=[],W=new Map;let q,P=0;for(let w;w=L({view:p,startOffset:P,validateCrcs:!0}),w.record;P+=w.usedBytes)switch(w.record.type){case"Schema":_.set(w.record.id,w.record);break;case"Channel":m.set(w.record.id,w.record);break;case"ChunkIndex":S.push(w.record);break;case"AttachmentIndex":D.push(w.record);break;case"MetadataIndex":R.push(w.record);break;case"Statistics":if(q)throw r("Duplicate Statistics record");q=w.record;break;case"SummaryOffset":W.set(w.record.groupOpcode,w.record);break;case"Header":case"Footer":case"Message":case"Chunk":case"MessageIndex":case"Attachment":case"Metadata":case"DataEnd":throw r(`${w.record.type} record not allowed in index section`);case"Unknown":break}if(P!==p.byteLength)throw r(`${p.byteLength-P} bytes remaining in index section`);return new j({readable:t,chunkIndexes:S,attachmentIndexes:D,metadataIndexes:R,statistics:q,decompressHandlers:e,channelsById:m,schemasById:_,summaryOffsetsByOpcode:W,header:n,footer:a})}async*readMessages(t={}){const{topics:e,startTime:s=this.messageStartTime,endTime:n=this.messageEndTime,reverse:r=!1,validateCrcs:o}=t;if(s==null||n==null)return;let c;if(e){c=new Set;for(const d of this.channelsById.values())e.includes(d.topic)&&c.add(d.id)}const a=new X((d,p)=>d.compare(p));for(const d of this.chunkIndexes)d.messageStartTime<=n&&d.messageEndTime>=s&&a.push(new N({chunkIndex:d,relevantChannels:c,startTime:s,endTime:n,reverse:r}));const h=new Map;for(let d;d=a.peek();){if(!d.hasMessageIndexes()){await d.loadMessageIndexes(this.readable),d.hasMoreMessages()?a.replace(d):a.pop();continue}let p=h.get(d.chunkIndex.chunkStartOffset);p||(p=await this.loadChunkData(d.chunkIndex),h.set(d.chunkIndex.chunkStartOffset,p));const[m,_]=d.popMessage();if(_>=BigInt(p.byteLength))throw this.errorWithLibrary(`Message offset beyond chunk bounds (log time ${m}, offset ${_}, chunk data length ${p.byteLength}) in chunk at offset ${d.chunkIndex.chunkStartOffset}`);const S=L({view:p,startOffset:Number(_),validateCrcs:o??!0});if(!S.record)throw this.errorWithLibrary(`Unable to parse record at offset ${_} in chunk at offset ${d.chunkIndex.chunkStartOffset}`);if(S.record.type!=="Message")throw this.errorWithLibrary(`Unexpected record type ${S.record.type} in message index (time ${m}, offset ${_} in chunk at offset ${d.chunkIndex.chunkStartOffset})`);if(S.record.logTime!==m)throw this.errorWithLibrary(`Message log time ${S.record.logTime} did not match message index entry (${m} at offset ${_} in chunk at offset ${d.chunkIndex.chunkStartOffset})`);yield S.record,d.hasMoreMessages()?a.replace(d):(a.pop(),h.delete(d.chunkIndex.chunkStartOffset))}}async*readMetadata(t={}){const{name:e}=t;for(const s of this.metadataIndexes){if(e!=null&&s.name!==e)continue;const n=await this.readable.read(s.offset,s.length),r=L({view:new DataView(n.buffer,n.byteOffset,n.byteLength),startOffset:0,validateCrcs:!1});if(r.record?.type!=="Metadata")throw this.errorWithLibrary(`Metadata data at offset ${s.offset} does not point to metadata record (found ${String(r.record?.type)})`);yield r.record}}async*readAttachments(t={}){const{name:e,mediaType:s,startTime:n=this.attachmentStartTime,endTime:r=this.attachmentEndTime,validateCrcs:o}=t;if(!(n==null||r==null))for(const c of this.attachmentIndexes){if(e!=null&&c.name!==e||s!=null&&c.mediaType!==s||c.logTime>r||c.logTime<n)continue;const a=await this.readable.read(c.offset,c.length),h=L({view:new DataView(a.buffer,a.byteOffset,a.byteLength),startOffset:0,validateCrcs:o??!0});if(h.record?.type!=="Attachment")throw this.errorWithLibrary(`Attachment data at offset ${c.offset} does not point to attachment record (found ${String(h.record?.type)})`);yield h.record}}async loadChunkData(t){const e=await this.readable.read(t.chunkStartOffset,t.chunkLength),s=L({view:new DataView(e.buffer,e.byteOffset,e.byteLength),startOffset:0,validateCrcs:!0});if(s.record?.type!=="Chunk")throw this.errorWithLibrary(`Chunk start offset ${t.chunkStartOffset} does not point to chunk record (found ${String(s.record?.type)})`);const n=s.record;let r=n.records;if(n.compression!==""&&r.byteLength>0){const o=this.decompressHandlers?.[n.compression];if(!o)throw this.errorWithLibrary(`Unsupported compression ${n.compression}`);r=o(r,n.uncompressedSize)}if(n.uncompressedCrc!==0){const o=T(r);if(o!==n.uncompressedCrc)throw this.errorWithLibrary(`Incorrect chunk CRC ${o} (expected ${n.uncompressedCrc})`)}return new DataView(r.buffer,r.byteOffset,r.byteLength)}}class E{constructor(t=0){this.buffer=new ArrayBuffer(t),this.view=new DataView(this.buffer,0,0)}bytesRemaining(){return this.view.byteLength}consume(t){this.view=new DataView(this.buffer,this.view.byteOffset+t,this.view.byteLength-t)}append(t){if(this.view.byteOffset+this.view.byteLength+t.byteLength<=this.buffer.byteLength)new Uint8Array(this.view.buffer,this.view.byteOffset).set(t,this.view.byteLength),this.view=new DataView(this.buffer,this.view.byteOffset,this.view.byteLength+t.byteLength);else if(this.view.byteLength+t.byteLength<=this.buffer.byteLength){const e=new Uint8Array(this.buffer,this.view.byteOffset,this.view.byteLength),s=new Uint8Array(this.buffer);s.set(e,0),s.set(t,e.byteLength),this.view=new DataView(this.buffer,0,this.view.byteLength+t.byteLength)}else{const e=new Uint8Array(this.buffer,this.view.byteOffset,this.view.byteLength);this.buffer=new ArrayBuffer((this.view.byteLength+t.byteLength)*2);const s=new Uint8Array(this.buffer);s.set(e,0),s.set(t,e.byteLength),this.view=new DataView(this.buffer,0,this.view.byteLength+t.byteLength)}}}class Q{constructor({includeChunks:t=!1,decompressHandlers:e={},validateCrcs:s=!0,noMagicPrefix:n=!1}={}){this.buffer=new E(I.length*2),this.doneReading=!1,this.generator=this.read(),this.channelsById=new Map,this.includeChunks=t,this.decompressHandlers=e,this.validateCrcs=s,this.noMagicPrefix=n}done(){return this.doneReading}bytesRemaining(){return this.buffer.bytesRemaining()}append(t){if(this.doneReading)throw new Error("Already done reading");this.buffer.append(t)}nextRecord(){if(this.doneReading)return;const t=this.generator.next();if(t.value?.type==="Channel"){const e=this.channelsById.get(t.value.id);if(this.channelsById.set(t.value.id,t.value),e&&!H(e,t.value))throw new Error(`Channel record for id ${t.value.id} (topic: ${t.value.topic}) differs from previous channel record of the same id.`)}else if(t.value?.type==="Message"){const e=t.value.channelId;if(!this.channelsById.get(e))throw new Error(`Encountered message on channel ${e} without prior channel record`)}return t.done===!0&&(this.doneReading=!0),t.value}*read(){if(!this.noMagicPrefix){let s,n;for(;{magic:s,usedBytes:n}=z(this.buffer.view,0),!s;)yield;this.buffer.consume(n)}let t;function e(s){return new Error(`${s} ${t?`[library=${t.library}]`:"[no header]"}`)}for(;;){let s;{let n;for(;{record:s,usedBytes:n}=L({view:this.buffer.view,startOffset:0,validateCrcs:this.validateCrcs}),!s;)yield;this.buffer.consume(n)}switch(s.type){case"Unknown":break;case"Header":if(t)throw new Error(`Duplicate Header record: library=${t.library} profile=${t.profile} vs. library=${s.library} profile=${s.profile}`);t=s,yield s;break;case"Schema":case"Channel":case"Message":case"MessageIndex":case"ChunkIndex":case"Attachment":case"AttachmentIndex":case"Statistics":case"Metadata":case"MetadataIndex":case"SummaryOffset":case"DataEnd":yield s;break;case"Chunk":{this.includeChunks&&(yield s);let n=s.records;if(s.compression!==""&&n.byteLength>0){const c=this.decompressHandlers[s.compression];if(!c)throw e(`Unsupported compression ${s.compression}`);n=c(n,s.uncompressedSize)}if(this.validateCrcs&&s.uncompressedCrc!==0){const c=T(n);if(c!==s.uncompressedCrc)throw e(`Incorrect chunk CRC ${c} (expected ${s.uncompressedCrc})`)}const r=new DataView(n.buffer,n.byteOffset,n.byteLength);let o=0;for(let c;c=L({view:r,startOffset:o,validateCrcs:this.validateCrcs}),c.record;o+=c.usedBytes)switch(c.record.type){case"Unknown":break;case"Header":case"Footer":case"Chunk":case"MessageIndex":case"ChunkIndex":case"Attachment":case"AttachmentIndex":case"Statistics":case"Metadata":case"MetadataIndex":case"SummaryOffset":case"DataEnd":throw e(`${c.record.type} record not allowed inside a chunk`);case"Schema":case"Channel":case"Message":yield c.record;break}if(o!==n.byteLength)throw e(`${n.byteLength-o} bytes remaining in chunk`);break}case"Footer":try{let n,r;for(;{magic:n,usedBytes:r}=z(this.buffer.view,0),!n;)yield;this.buffer.consume(r)}catch(n){throw e(n.message)}if(this.buffer.bytesRemaining()!==0)throw e(`${this.buffer.bytesRemaining()} bytes remaining after MCAP footer and trailing magic`);return s}}}}function H(i,t){if(!(i.id===t.id&&i.messageEncoding===t.messageEncoding&&i.schemaId===t.schemaId&&i.topic===t.topic&&i.metadata.size===t.metadata.size))return!1;for(const[e,s]of i.metadata.entries()){const n=t.metadata.get(e);if(s!==n)return!1}return!0}class g{constructor(t){this.options=t,this.bufferBuilder=new BufferBuilder}get length(){return this.bufferBuilder.length}get buffer(){return this.bufferBuilder.buffer}reset(){this.bufferBuilder.reset()}writeMagic(){this.bufferBuilder.bytes(new Uint8Array(MCAP_MAGIC))}writeHeader(t){this.bufferBuilder.uint8(Opcode.HEADER);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).string(t.profile).string(t.library),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeFooter(t){return this.bufferBuilder.uint8(Opcode.FOOTER).uint64(20n).uint64(t.summaryStart).uint64(t.summaryOffsetStart).uint32(t.summaryCrc),20n}writeSchema(t){this.bufferBuilder.uint8(Opcode.SCHEMA);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.id).string(t.name).string(t.encoding).uint32(t.data.byteLength).bytes(t.data),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeChannel(t){this.bufferBuilder.uint8(Opcode.CHANNEL);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.id).uint16(t.schemaId).string(t.topic).string(t.messageEncoding).tupleArray(n=>this.bufferBuilder.string(n),n=>this.bufferBuilder.string(n),t.metadata),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeMessage(t){this.bufferBuilder.uint8(Opcode.MESSAGE);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.channelId).uint32(t.sequence).uint64(t.logTime).uint64(t.publishTime).bytes(t.data);const s=this.bufferBuilder.length;this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s)}writeAttachment(t){this.bufferBuilder.uint8(Opcode.ATTACHMENT);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(t.logTime).uint64(t.createTime).string(t.name).string(t.mediaType).uint64(BigInt(t.data.byteLength)).bytes(t.data),this.bufferBuilder.uint32(crc32(this.bufferBuilder.bufferView(s,this.bufferBuilder.length-s))),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(n-e-8)).seek(n),BigInt(n-e+1)}writeAttachmentIndex(t){this.bufferBuilder.uint8(Opcode.ATTACHMENT_INDEX);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.offset).uint64(t.length).uint64(t.logTime).uint64(t.createTime).uint64(t.dataSize).string(t.name).string(t.mediaType),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeChunk(t){this.bufferBuilder.uint8(Opcode.CHUNK);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageStartTime).uint64(t.messageEndTime).uint64(t.uncompressedSize).uint32(t.uncompressedCrc).string(t.compression).uint64(BigInt(t.records.byteLength)).bytes(t.records);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeChunkIndex(t){this.bufferBuilder.uint8(Opcode.CHUNK_INDEX);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageStartTime).uint64(t.messageEndTime).uint64(t.chunkStartOffset).uint64(t.chunkLength).uint32(t.messageIndexOffsets.size*10);for(const[n,r]of t.messageIndexOffsets)this.bufferBuilder.uint16(n).uint64(r);this.bufferBuilder.uint64(t.messageIndexLength).string(t.compression).uint64(t.compressedSize).uint64(t.uncompressedSize),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeMessageIndex(t){this.bufferBuilder.uint8(Opcode.MESSAGE_INDEX);const e=this.bufferBuilder.length,s=t.records.length*16;this.bufferBuilder.uint64(0n).uint16(t.channelId).uint32(s);for(const r of t.records)this.bufferBuilder.uint64(r[0]).uint64(r[1]);this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(n-e-8)).seek(n),BigInt(n-e+1)}writeMetadata(t){this.bufferBuilder.uint8(Opcode.METADATA);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).string(t.name).tupleArray(n=>this.bufferBuilder.string(n),n=>this.bufferBuilder.string(n),t.metadata),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeMetadataIndex(t){this.bufferBuilder.uint8(Opcode.METADATA_INDEX);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.offset).uint64(t.length).string(t.name),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeSummaryOffset(t){this.bufferBuilder.uint8(Opcode.SUMMARY_OFFSET);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint8(t.groupOpcode).uint64(t.groupStart).uint64(t.groupLength),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeStatistics(t){this.bufferBuilder.uint8(Opcode.STATISTICS);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageCount).uint16(t.schemaCount).uint32(t.channelCount).uint32(t.attachmentCount).uint32(t.metadataCount).uint32(t.chunkCount).uint64(t.messageStartTime).uint64(t.messageEndTime).tupleArray(n=>this.bufferBuilder.uint16(n),n=>this.bufferBuilder.uint64(n),t.channelMessageCounts),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}writeDataEnd(t){this.bufferBuilder.uint8(Opcode.DATA_END);const e=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint32(t.dataSectionCrc),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const s=this.bufferBuilder.length;return this.bufferBuilder.seek(e).uint64(BigInt(s-e-8)).seek(s),BigInt(s-e+1)}}class f{constructor({useMessageIndex:t=!0}){this.recordWriter=new McapRecordBuilder,this.totalMessageCount=0,this.messageStartTime=0n,this.messageEndTime=0n,t&&(this.messageIndices=new Map)}get numMessages(){return this.totalMessageCount}get buffer(){return this.recordWriter.buffer}get byteLength(){return this.recordWriter.length}get indices(){return this.messageIndices?this.messageIndices.values():[]}addSchema(t){this.recordWriter.writeSchema(t)}addChannel(t){this.messageIndices&&!this.messageIndices.has(t.id)&&this.messageIndices.set(t.id,{channelId:t.id,records:[]}),this.recordWriter.writeChannel(t)}addMessage(t){if((this.totalMessageCount===0||t.logTime<this.messageStartTime)&&(this.messageStartTime=t.logTime),(this.totalMessageCount===0||t.logTime>this.messageEndTime)&&(this.messageEndTime=t.logTime),this.messageIndices){let e=this.messageIndices.get(t.channelId);e||(e={channelId:t.channelId,records:[]},this.messageIndices.set(t.channelId,e)),e.records.push([t.logTime,BigInt(this.recordWriter.length)])}this.totalMessageCount+=1,this.recordWriter.writeMessage(t)}reset(){this.messageStartTime=0n,this.messageEndTime=0n,this.totalMessageCount=0,this.messageIndices?.clear(),this.recordWriter.reset()}}class b{constructor(t){this.nextChannelId=0,this.nextSchemaId=1,this.recordWriter=new McapRecordBuilder,this.schemas=new Map,this.channels=new Map,this.writtenSchemaIds=new Set,this.writtenChannelIds=new Set,this.dataSectionCrc=crc32Init();const{writable:e,useStatistics:s=!0,useSummaryOffsets:n=!0,useChunks:r=!0,repeatSchemas:o=!0,repeatChannels:c=!0,useAttachmentIndex:a=!0,useMetadataIndex:h=!0,useMessageIndex:d=!0,useChunkIndex:p=!0,startChannelId:m=0,chunkSize:_=1024*1024,compressChunk:S}=t;this.writable=e,this.useSummaryOffsets=n,s&&(this.statistics={messageCount:0n,schemaCount:0,channelCount:0,attachmentCount:0,metadataCount:0,chunkCount:0,messageStartTime:0n,messageEndTime:0n,channelMessageCounts:new Map}),r&&(this.chunkBuilder=new ChunkBuilder({useMessageIndex:d})),this.repeatSchemas=o,this.repeatChannels=c,a&&(this.attachmentIndices=[]),h&&(this.metadataIndices=[]),p&&(this.chunkIndices=[]),this.nextChannelId=m,this.chunkSize=_,this.compressChunk=S}async start(t){this.recordWriter.writeMagic(),this.recordWriter.writeHeader(t),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async end(){await this.finalizeChunk(),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset(),this.recordWriter.writeDataEnd({dataSectionCrc:crc32Final(this.dataSectionCrc)}),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const t=[],e=this.writable.position();let s=crc32Init();if(this.repeatSchemas){const a=this.writable.position();let h=0n;for(const d of this.schemas.values())h+=this.recordWriter.writeSchema(d);t.push({groupOpcode:Opcode.SCHEMA,groupStart:a,groupLength:h})}if(this.repeatChannels){s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position();let h=0n;for(const d of this.channels.values())h+=this.recordWriter.writeChannel(d);t.push({groupOpcode:Opcode.CHANNEL,groupStart:a,groupLength:h})}if(this.statistics){s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position(),h=this.recordWriter.writeStatistics(this.statistics);t.push({groupOpcode:Opcode.STATISTICS,groupStart:a,groupLength:h})}if(s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset(),this.metadataIndices){s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position();let h=0n;for(const d of this.metadataIndices)h+=this.recordWriter.writeMetadataIndex(d);t.push({groupOpcode:Opcode.METADATA_INDEX,groupStart:a,groupLength:h})}if(this.attachmentIndices){s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position();let h=0n;for(const d of this.attachmentIndices)h+=this.recordWriter.writeAttachmentIndex(d);t.push({groupOpcode:Opcode.ATTACHMENT_INDEX,groupStart:a,groupLength:h})}if(this.chunkIndices){s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position();let h=0n;for(const d of this.chunkIndices)h+=this.recordWriter.writeChunkIndex(d);t.push({groupOpcode:Opcode.CHUNK_INDEX,groupStart:a,groupLength:h})}s=crc32Update(s,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const n=this.writable.position(),r=n-e;if(this.useSummaryOffsets)for(const a of t)a.groupLength!==0n&&this.recordWriter.writeSummaryOffset(a);s=crc32Update(s,this.recordWriter.buffer);const o={summaryStart:r===0n?0n:e,summaryOffsetStart:this.useSummaryOffsets?n:0n,summaryCrc:0},c=new DataView(new ArrayBuffer(1+8+8+8));c.setUint8(0,Opcode.FOOTER),c.setBigUint64(1,8n+8n+4n,!0),c.setBigUint64(1+8,o.summaryStart,!0),c.setBigUint64(1+8+8,o.summaryOffsetStart,!0),s=crc32Update(s,c),o.summaryCrc=crc32Final(s),this.recordWriter.writeFooter(o),this.recordWriter.writeMagic(),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async registerSchema(t){const e=this.nextSchemaId++;return this.schemas.set(e,{...t,id:e}),this.statistics&&++this.statistics.schemaCount,e}async registerChannel(t){const e=this.nextChannelId++;return this.channels.set(e,{...t,id:e}),this.statistics&&++this.statistics.channelCount,e}async addMessage(t){if(this.statistics&&(this.statistics.messageCount===0n?(this.statistics.messageStartTime=t.logTime,this.statistics.messageEndTime=t.logTime):(t.logTime<this.statistics.messageStartTime&&(this.statistics.messageStartTime=t.logTime),t.logTime>this.statistics.messageEndTime&&(this.statistics.messageEndTime=t.logTime)),this.statistics.channelMessageCounts.set(t.channelId,(this.statistics.channelMessageCounts.get(t.channelId)??0n)+1n),++this.statistics.messageCount),!this.writtenChannelIds.has(t.channelId)){const e=this.channels.get(t.channelId);if(!e)throw new Error(`McapWriter#addMessage failed: missing channel for id ${t.channelId}`);if(e.schemaId!==0&&!this.writtenSchemaIds.has(e.schemaId)){const s=this.schemas.get(e.schemaId);if(!s)throw new Error(`McapWriter#addMessage failed: missing schema for id ${e.schemaId}`);this.chunkBuilder?this.chunkBuilder.addSchema(s):this.recordWriter.writeSchema(s),this.writtenSchemaIds.add(e.schemaId)}this.chunkBuilder?this.chunkBuilder.addChannel(e):this.recordWriter.writeChannel(e),this.writtenChannelIds.add(t.channelId)}this.chunkBuilder?this.chunkBuilder.addMessage(t):this.recordWriter.writeMessage(t),this.chunkBuilder&&this.chunkBuilder.byteLength>this.chunkSize&&await this.finalizeChunk()}async addAttachment(t){const e=this.recordWriter.writeAttachment(t);if(this.statistics&&++this.statistics.attachmentCount,this.attachmentIndices){const s=this.writable.position();this.attachmentIndices.push({logTime:t.logTime,createTime:t.createTime,name:t.name,mediaType:t.mediaType,offset:s,dataSize:BigInt(t.data.byteLength),length:e})}this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async addMetadata(t){const e=this.recordWriter.writeMetadata(t);if(this.statistics&&++this.statistics.metadataCount,this.metadataIndices){const s=this.writable.position();this.metadataIndices.push({name:t.name,offset:s,length:e})}this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async finalizeChunk(){if(!this.chunkBuilder||this.chunkBuilder.numMessages===0)return;this.statistics&&++this.statistics.chunkCount;const t=this.chunkBuilder.buffer,e=BigInt(t.length),s=crc32(t);let n="",r=t;this.compressChunk&&({compression:n,compressedData:r}=this.compressChunk(t));const o={messageStartTime:this.chunkBuilder.messageStartTime,messageEndTime:this.chunkBuilder.messageEndTime,uncompressedSize:e,uncompressedCrc:s,compression:n,records:r},c=this.writable.position(),a=this.recordWriter.writeChunk(o),h=this.chunkIndices?new Map:void 0;this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const d=this.writable.position();let p=0n;for(const m of this.chunkBuilder.indices)h?.set(m.channelId,d+p),p+=this.recordWriter.writeMessageIndex(m);this.chunkIndices&&this.chunkIndices.push({messageStartTime:o.messageStartTime,messageEndTime:o.messageEndTime,chunkStartOffset:c,chunkLength:a,messageIndexOffsets:h,messageIndexLength:p,compression:o.compression,compressedSize:BigInt(o.records.byteLength),uncompressedSize:o.uncompressedSize}),this.chunkBuilder.reset(),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}}function u(i){return i.byteLength>=MCAP_MAGIC.length&&MCAP_MAGIC.every((t,e)=>t===i.getUint8(e))}},15356:(Z,y,V)=>{V.d(y,{XU:()=>O.XU,cZ:()=>x.c});var O=V(53037),l=V(41e3),B=V(56052),v=V(94328),x=V(91245)},98357:(Z,y,V)=>{V.d(y,{rB:()=>l,_b:()=>u,V_:()=>E,iA:()=>b});var O=V(15356),l;(function(i){i[i.None=0]="None",i[i.UType=1]="UType",i[i.Bool=2]="Bool",i[i.Byte=3]="Byte",i[i.UByte=4]="UByte",i[i.Short=5]="Short",i[i.UShort=6]="UShort",i[i.Int=7]="Int",i[i.UInt=8]="UInt",i[i.Long=9]="Long",i[i.ULong=10]="ULong",i[i.Float=11]="Float",i[i.Double=12]="Double",i[i.String=13]="String",i[i.Vector=14]="Vector",i[i.Obj=15]="Obj",i[i.Union=16]="Union",i[i.Array=17]="Array",i[i.MaxBaseType=18]="MaxBaseType"})(l||(l={}));var B;(function(i){i.AdvancedArrayFeatures="1",i.AdvancedUnionFeatures="2",i.OptionalScalars="4",i.DefaultVectorsAndStrings="8"})(B||(B={}));class v{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsType(t,e){return(e||new v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsType(t,e){return t.setPosition(t.position()+O.XU),(e||new v).__init(t.readInt32(t.position())+t.position(),t)}baseType(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):l.None}mutate_base_type(t){const e=this.bb.__offset(this.bb_pos,4);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,t),!0)}element(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):l.None}mutate_element(t){const e=this.bb.__offset(this.bb_pos,6);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,t),!0)}index(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):-1}mutate_index(t){const e=this.bb.__offset(this.bb_pos,8);return e===0?!1:(this.bb.writeInt32(this.bb_pos+e,t),!0)}fixedLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_fixed_length(t){const e=this.bb.__offset(this.bb_pos,10);return e===0?!1:(this.bb.writeUint16(this.bb_pos+e,t),!0)}baseSize(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):4}mutate_base_size(t){const e=this.bb.__offset(this.bb_pos,12);return e===0?!1:(this.bb.writeUint32(this.bb_pos+e,t),!0)}elementSize(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint32(this.bb_pos+t):0}mutate_element_size(t){const e=this.bb.__offset(this.bb_pos,14);return e===0?!1:(this.bb.writeUint32(this.bb_pos+e,t),!0)}static getFullyQualifiedName(){return"reflection.Type"}static startType(t){t.startObject(6)}static addBaseType(t,e){t.addFieldInt8(0,e,l.None)}static addElement(t,e){t.addFieldInt8(1,e,l.None)}static addIndex(t,e){t.addFieldInt32(2,e,-1)}static addFixedLength(t,e){t.addFieldInt16(3,e,0)}static addBaseSize(t,e){t.addFieldInt32(4,e,4)}static addElementSize(t,e){t.addFieldInt32(5,e,0)}static endType(t){return t.endObject()}static createType(t,e,s,n,r,o,c){return v.startType(t),v.addBaseType(t,e),v.addElement(t,s),v.addIndex(t,n),v.addFixedLength(t,r),v.addBaseSize(t,o),v.addElementSize(t,c),v.endType(t)}unpack(){return new x(this.baseType(),this.element(),this.index(),this.fixedLength(),this.baseSize(),this.elementSize())}unpackTo(t){t.baseType=this.baseType(),t.element=this.element(),t.index=this.index(),t.fixedLength=this.fixedLength(),t.baseSize=this.baseSize(),t.elementSize=this.elementSize()}}class x{baseType;element;index;fixedLength;baseSize;elementSize;constructor(t=l.None,e=l.None,s=-1,n=0,r=4,o=0){this.baseType=t,this.element=e,this.index=s,this.fixedLength=n,this.baseSize=r,this.elementSize=o}pack(t){return v.createType(t,this.baseType,this.element,this.index,this.fixedLength,this.baseSize,this.elementSize)}}class T{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new T).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+O.XU),(e||new T).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static getFullyQualifiedName(){return"reflection.KeyValue"}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){const e=t.endObject();return t.requiredField(e,4),e}static createKeyValue(t,e,s){return T.startKeyValue(t),T.addKey(t,e),T.addValue(t,s),T.endKeyValue(t)}unpack(){return new $(this.key(),this.value())}unpackTo(t){t.key=this.key(),t.value=this.value()}}class ${key;value;constructor(t=null,e=null){this.key=t,this.value=e}pack(t){const e=this.key!==null?t.createString(this.key):0,s=this.value!==null?t.createString(this.value):0;return T.createKeyValue(t,e,s)}}class A{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsEnumVal(t,e){return(e||new A).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsEnumVal(t,e){return t.setPosition(t.position()+O.XU),(e||new A).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}mutate_value(t){const e=this.bb.__offset(this.bb_pos,6);return e===0?!1:(this.bb.writeInt64(this.bb_pos+e,t),!0)}unionType(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new v).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}documentation(t,e){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static getFullyQualifiedName(){return"reflection.EnumVal"}static startEnumVal(t){t.startObject(5)}static addName(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldInt64(1,e,BigInt("0"))}static addUnionType(t,e){t.addFieldOffset(3,e,0)}static addDocumentation(t,e){t.addFieldOffset(4,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static endEnumVal(t){const e=t.endObject();return t.requiredField(e,4),e}unpack(){return new M(this.name(),this.value(),this.unionType()!==null?this.unionType().unpack():null,this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()))}unpackTo(t){t.name=this.name(),t.value=this.value(),t.unionType=this.unionType()!==null?this.unionType().unpack():null,t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength())}}class M{name;value;unionType;documentation;constructor(t=null,e=BigInt("0"),s=null,n=[]){this.name=t,this.value=e,this.unionType=s,this.documentation=n}pack(t){const e=this.name!==null?t.createString(this.name):0,s=this.unionType!==null?this.unionType.pack(t):0,n=A.createDocumentationVector(t,t.createObjectOffsetList(this.documentation));return A.startEnumVal(t),A.addName(t,e),A.addValue(t,this.value),A.addUnionType(t,s),A.addDocumentation(t,n),A.endEnumVal(t)}}class k{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsEnum(t,e){return(e||new k).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsEnum(t,e){return t.setPosition(t.position()+O.XU),(e||new k).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}values(t,e){const s=this.bb.__offset(this.bb_pos,6);return s?(e||new A).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}valuesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}isUnion(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_is_union(t){const e=this.bb.__offset(this.bb_pos,8);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}underlyingType(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new v).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}attributes(t,e){const s=this.bb.__offset(this.bb_pos,12);return s?(e||new T).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}attributesLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}documentation(t,e){const s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}declarationFile(t){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}static getFullyQualifiedName(){return"reflection.Enum"}static startEnum(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addValues(t,e){t.addFieldOffset(1,e,0)}static createValuesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startValuesVector(t,e){t.startVector(4,e,4)}static addIsUnion(t,e){t.addFieldInt8(2,+e,0)}static addUnderlyingType(t,e){t.addFieldOffset(3,e,0)}static addAttributes(t,e){t.addFieldOffset(4,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addDocumentation(t,e){t.addFieldOffset(5,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static addDeclarationFile(t,e){t.addFieldOffset(6,e,0)}static endEnum(t){const e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,10),e}unpack(){return new X(this.name(),this.bb.createObjList(this.values.bind(this),this.valuesLength()),this.isUnion(),this.underlyingType()!==null?this.underlyingType().unpack():null,this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(t){t.name=this.name(),t.values=this.bb.createObjList(this.values.bind(this),this.valuesLength()),t.isUnion=this.isUnion(),t.underlyingType=this.underlyingType()!==null?this.underlyingType().unpack():null,t.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),t.declarationFile=this.declarationFile()}}class X{name;values;isUnion;underlyingType;attributes;documentation;declarationFile;constructor(t=null,e=[],s=!1,n=null,r=[],o=[],c=null){this.name=t,this.values=e,this.isUnion=s,this.underlyingType=n,this.attributes=r,this.documentation=o,this.declarationFile=c}pack(t){const e=this.name!==null?t.createString(this.name):0,s=k.createValuesVector(t,t.createObjectOffsetList(this.values)),n=this.underlyingType!==null?this.underlyingType.pack(t):0,r=k.createAttributesVector(t,t.createObjectOffsetList(this.attributes)),o=k.createDocumentationVector(t,t.createObjectOffsetList(this.documentation)),c=this.declarationFile!==null?t.createString(this.declarationFile):0;return k.startEnum(t),k.addName(t,e),k.addValues(t,s),k.addIsUnion(t,this.isUnion),k.addUnderlyingType(t,n),k.addAttributes(t,r),k.addDocumentation(t,o),k.addDeclarationFile(t,c),k.endEnum(t)}}class F{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new F).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+O.XU),(e||new F).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new v).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}id(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_id(t){const e=this.bb.__offset(this.bb_pos,8);return e===0?!1:(this.bb.writeUint16(this.bb_pos+e,t),!0)}offset(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_offset(t){const e=this.bb.__offset(this.bb_pos,10);return e===0?!1:(this.bb.writeUint16(this.bb_pos+e,t),!0)}defaultInteger(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}mutate_default_integer(t){const e=this.bb.__offset(this.bb_pos,12);return e===0?!1:(this.bb.writeInt64(this.bb_pos+e,t),!0)}defaultReal(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readFloat64(this.bb_pos+t):0}mutate_default_real(t){const e=this.bb.__offset(this.bb_pos,14);return e===0?!1:(this.bb.writeFloat64(this.bb_pos+e,t),!0)}deprecated(){const t=this.bb.__offset(this.bb_pos,16);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_deprecated(t){const e=this.bb.__offset(this.bb_pos,16);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}required(){const t=this.bb.__offset(this.bb_pos,18);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_required(t){const e=this.bb.__offset(this.bb_pos,18);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}key(){const t=this.bb.__offset(this.bb_pos,20);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_key(t){const e=this.bb.__offset(this.bb_pos,20);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}attributes(t,e){const s=this.bb.__offset(this.bb_pos,22);return s?(e||new T).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}attributesLength(){const t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}documentation(t,e){const s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}optional(){const t=this.bb.__offset(this.bb_pos,26);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_optional(t){const e=this.bb.__offset(this.bb_pos,26);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}padding(){const t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readUint16(this.bb_pos+t):0}mutate_padding(t){const e=this.bb.__offset(this.bb_pos,28);return e===0?!1:(this.bb.writeUint16(this.bb_pos+e,t),!0)}static getFullyQualifiedName(){return"reflection.Field"}static startField(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldOffset(1,e,0)}static addId(t,e){t.addFieldInt16(2,e,0)}static addOffset(t,e){t.addFieldInt16(3,e,0)}static addDefaultInteger(t,e){t.addFieldInt64(4,e,BigInt("0"))}static addDefaultReal(t,e){t.addFieldFloat64(5,e,0)}static addDeprecated(t,e){t.addFieldInt8(6,+e,0)}static addRequired(t,e){t.addFieldInt8(7,+e,0)}static addKey(t,e){t.addFieldInt8(8,+e,0)}static addAttributes(t,e){t.addFieldOffset(9,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addDocumentation(t,e){t.addFieldOffset(10,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static addOptional(t,e){t.addFieldInt8(11,+e,0)}static addPadding(t,e){t.addFieldInt16(12,e,0)}static endField(t){const e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}unpack(){return new K(this.name(),this.type()!==null?this.type().unpack():null,this.id(),this.offset(),this.defaultInteger(),this.defaultReal(),this.deprecated(),this.required(),this.key(),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.optional(),this.padding())}unpackTo(t){t.name=this.name(),t.type=this.type()!==null?this.type().unpack():null,t.id=this.id(),t.offset=this.offset(),t.defaultInteger=this.defaultInteger(),t.defaultReal=this.defaultReal(),t.deprecated=this.deprecated(),t.required=this.required(),t.key=this.key(),t.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),t.optional=this.optional(),t.padding=this.padding()}}class K{name;type;id;offset;defaultInteger;defaultReal;deprecated;required;key;attributes;documentation;optional;padding;constructor(t=null,e=null,s=0,n=0,r=BigInt("0"),o=0,c=!1,a=!1,h=!1,d=[],p=[],m=!1,_=0){this.name=t,this.type=e,this.id=s,this.offset=n,this.defaultInteger=r,this.defaultReal=o,this.deprecated=c,this.required=a,this.key=h,this.attributes=d,this.documentation=p,this.optional=m,this.padding=_}pack(t){const e=this.name!==null?t.createString(this.name):0,s=this.type!==null?this.type.pack(t):0,n=F.createAttributesVector(t,t.createObjectOffsetList(this.attributes)),r=F.createDocumentationVector(t,t.createObjectOffsetList(this.documentation));return F.startField(t),F.addName(t,e),F.addType(t,s),F.addId(t,this.id),F.addOffset(t,this.offset),F.addDefaultInteger(t,this.defaultInteger),F.addDefaultReal(t,this.defaultReal),F.addDeprecated(t,this.deprecated),F.addRequired(t,this.required),F.addKey(t,this.key),F.addAttributes(t,n),F.addDocumentation(t,r),F.addOptional(t,this.optional),F.addPadding(t,this.padding),F.endField(t)}}class I{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsObject(t,e){return(e||new I).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsObject(t,e){return t.setPosition(t.position()+O.XU),(e||new I).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}fields(t,e){const s=this.bb.__offset(this.bb_pos,6);return s?(e||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}isStruct(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}mutate_is_struct(t){const e=this.bb.__offset(this.bb_pos,8);return e===0?!1:(this.bb.writeInt8(this.bb_pos+e,+t),!0)}minalign(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}mutate_minalign(t){const e=this.bb.__offset(this.bb_pos,10);return e===0?!1:(this.bb.writeInt32(this.bb_pos+e,t),!0)}bytesize(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):0}mutate_bytesize(t){const e=this.bb.__offset(this.bb_pos,12);return e===0?!1:(this.bb.writeInt32(this.bb_pos+e,t),!0)}attributes(t,e){const s=this.bb.__offset(this.bb_pos,14);return s?(e||new T).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}attributesLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}documentation(t,e){const s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}declarationFile(t){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}static getFullyQualifiedName(){return"reflection.Object"}static startObject(t){t.startObject(8)}static addName(t,e){t.addFieldOffset(0,e,0)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addIsStruct(t,e){t.addFieldInt8(2,+e,0)}static addMinalign(t,e){t.addFieldInt32(3,e,0)}static addBytesize(t,e){t.addFieldInt32(4,e,0)}static addAttributes(t,e){t.addFieldOffset(5,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addDocumentation(t,e){t.addFieldOffset(6,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static addDeclarationFile(t,e){t.addFieldOffset(7,e,0)}static endObject(t){const e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static createObject(t,e,s,n,r,o,c,a,h){return I.startObject(t),I.addName(t,e),I.addFields(t,s),I.addIsStruct(t,n),I.addMinalign(t,r),I.addBytesize(t,o),I.addAttributes(t,c),I.addDocumentation(t,a),I.addDeclarationFile(t,h),I.endObject(t)}unpack(){return new C(this.name(),this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),this.isStruct(),this.minalign(),this.bytesize(),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(t){t.name=this.name(),t.fields=this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),t.isStruct=this.isStruct(),t.minalign=this.minalign(),t.bytesize=this.bytesize(),t.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),t.declarationFile=this.declarationFile()}}class C{name;fields;isStruct;minalign;bytesize;attributes;documentation;declarationFile;constructor(t=null,e=[],s=!1,n=0,r=0,o=[],c=[],a=null){this.name=t,this.fields=e,this.isStruct=s,this.minalign=n,this.bytesize=r,this.attributes=o,this.documentation=c,this.declarationFile=a}pack(t){const e=this.name!==null?t.createString(this.name):0,s=I.createFieldsVector(t,t.createObjectOffsetList(this.fields)),n=I.createAttributesVector(t,t.createObjectOffsetList(this.attributes)),r=I.createDocumentationVector(t,t.createObjectOffsetList(this.documentation)),o=this.declarationFile!==null?t.createString(this.declarationFile):0;return I.createObject(t,e,s,this.isStruct,this.minalign,this.bytesize,n,r,o)}}class U{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRPCCall(t,e){return(e||new U).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRPCCall(t,e){return t.setPosition(t.position()+O.XU),(e||new U).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}request(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new I).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}response(t){const e=this.bb.__offset(this.bb_pos,8);return e?(t||new I).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}attributes(t,e){const s=this.bb.__offset(this.bb_pos,10);return s?(e||new T).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}attributesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}documentation(t,e){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static getFullyQualifiedName(){return"reflection.RPCCall"}static startRPCCall(t){t.startObject(5)}static addName(t,e){t.addFieldOffset(0,e,0)}static addRequest(t,e){t.addFieldOffset(1,e,0)}static addResponse(t,e){t.addFieldOffset(2,e,0)}static addAttributes(t,e){t.addFieldOffset(3,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addDocumentation(t,e){t.addFieldOffset(4,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static endRPCCall(t){const e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),t.requiredField(e,8),e}unpack(){return new z(this.name(),this.request()!==null?this.request().unpack():null,this.response()!==null?this.response().unpack():null,this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()))}unpackTo(t){t.name=this.name(),t.request=this.request()!==null?this.request().unpack():null,t.response=this.response()!==null?this.response().unpack():null,t.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength())}}class z{name;request;response;attributes;documentation;constructor(t=null,e=null,s=null,n=[],r=[]){this.name=t,this.request=e,this.response=s,this.attributes=n,this.documentation=r}pack(t){const e=this.name!==null?t.createString(this.name):0,s=this.request!==null?this.request.pack(t):0,n=this.response!==null?this.response.pack(t):0,r=U.createAttributesVector(t,t.createObjectOffsetList(this.attributes)),o=U.createDocumentationVector(t,t.createObjectOffsetList(this.documentation));return U.startRPCCall(t),U.addName(t,e),U.addRequest(t,s),U.addResponse(t,n),U.addAttributes(t,r),U.addDocumentation(t,o),U.endRPCCall(t)}}class L{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsService(t,e){return(e||new L).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsService(t,e){return t.setPosition(t.position()+O.XU),(e||new L).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}calls(t,e){const s=this.bb.__offset(this.bb_pos,6);return s?(e||new U).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}callsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(t,e){const s=this.bb.__offset(this.bb_pos,8);return s?(e||new T).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}attributesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}documentation(t,e){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}documentationLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}declarationFile(t){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}static getFullyQualifiedName(){return"reflection.Service"}static startService(t){t.startObject(5)}static addName(t,e){t.addFieldOffset(0,e,0)}static addCalls(t,e){t.addFieldOffset(1,e,0)}static createCallsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startCallsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(2,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addDocumentation(t,e){t.addFieldOffset(3,e,0)}static createDocumentationVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startDocumentationVector(t,e){t.startVector(4,e,4)}static addDeclarationFile(t,e){t.addFieldOffset(4,e,0)}static endService(t){const e=t.endObject();return t.requiredField(e,4),e}static createService(t,e,s,n,r,o){return L.startService(t),L.addName(t,e),L.addCalls(t,s),L.addAttributes(t,n),L.addDocumentation(t,r),L.addDeclarationFile(t,o),L.endService(t)}unpack(){return new G(this.name(),this.bb.createObjList(this.calls.bind(this),this.callsLength()),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(t){t.name=this.name(),t.calls=this.bb.createObjList(this.calls.bind(this),this.callsLength()),t.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),t.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),t.declarationFile=this.declarationFile()}}class G{name;calls;attributes;documentation;declarationFile;constructor(t=null,e=[],s=[],n=[],r=null){this.name=t,this.calls=e,this.attributes=s,this.documentation=n,this.declarationFile=r}pack(t){const e=this.name!==null?t.createString(this.name):0,s=L.createCallsVector(t,t.createObjectOffsetList(this.calls)),n=L.createAttributesVector(t,t.createObjectOffsetList(this.attributes)),r=L.createDocumentationVector(t,t.createObjectOffsetList(this.documentation)),o=this.declarationFile!==null?t.createString(this.declarationFile):0;return L.createService(t,e,s,n,r,o)}}class N{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchemaFile(t,e){return(e||new N).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchemaFile(t,e){return t.setPosition(t.position()+O.XU),(e||new N).__init(t.readInt32(t.position())+t.position(),t)}filename(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}includedFilenames(t,e){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+t*4,e):null}includedFilenamesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static getFullyQualifiedName(){return"reflection.SchemaFile"}static startSchemaFile(t){t.startObject(2)}static addFilename(t,e){t.addFieldOffset(0,e,0)}static addIncludedFilenames(t,e){t.addFieldOffset(1,e,0)}static createIncludedFilenamesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startIncludedFilenamesVector(t,e){t.startVector(4,e,4)}static endSchemaFile(t){const e=t.endObject();return t.requiredField(e,4),e}static createSchemaFile(t,e,s){return N.startSchemaFile(t),N.addFilename(t,e),N.addIncludedFilenames(t,s),N.endSchemaFile(t)}unpack(){return new j(this.filename(),this.bb.createScalarList(this.includedFilenames.bind(this),this.includedFilenamesLength()))}unpackTo(t){t.filename=this.filename(),t.includedFilenames=this.bb.createScalarList(this.includedFilenames.bind(this),this.includedFilenamesLength())}}class j{filename;includedFilenames;constructor(t=null,e=[]){this.filename=t,this.includedFilenames=e}pack(t){const e=this.filename!==null?t.createString(this.filename):0,s=N.createIncludedFilenamesVector(t,t.createObjectOffsetList(this.includedFilenames));return N.createSchemaFile(t,e,s)}}class E{bb=null;bb_pos=0;__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new E).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+O.XU),(e||new E).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("BFBS")}objects(t,e){const s=this.bb.__offset(this.bb_pos,4);return s?(e||new I).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}objectsLength(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}enums(t,e){const s=this.bb.__offset(this.bb_pos,6);return s?(e||new k).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}enumsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}fileIdent(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}fileExt(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}rootTable(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new I).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}services(t,e){const s=this.bb.__offset(this.bb_pos,14);return s?(e||new L).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}servicesLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}advancedFeatures(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}mutate_advanced_features(t){const e=this.bb.__offset(this.bb_pos,16);return e===0?!1:(this.bb.writeUint64(this.bb_pos+e,t),!0)}fbsFiles(t,e){const s=this.bb.__offset(this.bb_pos,18);return s?(e||new N).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+t*4),this.bb):null}fbsFilesLength(){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static getFullyQualifiedName(){return"reflection.Schema"}static startSchema(t){t.startObject(8)}static addObjects(t,e){t.addFieldOffset(0,e,0)}static createObjectsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startObjectsVector(t,e){t.startVector(4,e,4)}static addEnums(t,e){t.addFieldOffset(1,e,0)}static createEnumsVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startEnumsVector(t,e){t.startVector(4,e,4)}static addFileIdent(t,e){t.addFieldOffset(2,e,0)}static addFileExt(t,e){t.addFieldOffset(3,e,0)}static addRootTable(t,e){t.addFieldOffset(4,e,0)}static addServices(t,e){t.addFieldOffset(5,e,0)}static createServicesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startServicesVector(t,e){t.startVector(4,e,4)}static addAdvancedFeatures(t,e){t.addFieldInt64(6,e,BigInt("0"))}static addFbsFiles(t,e){t.addFieldOffset(7,e,0)}static createFbsFilesVector(t,e){t.startVector(4,e.length,4);for(let s=e.length-1;s>=0;s--)t.addOffset(e[s]);return t.endVector()}static startFbsFilesVector(t,e){t.startVector(4,e,4)}static endSchema(t){const e=t.endObject();return t.requiredField(e,4),t.requiredField(e,6),e}static finishSchemaBuffer(t,e){t.finish(e,"BFBS")}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,"BFBS",!0)}unpack(){return new Q(this.bb.createObjList(this.objects.bind(this),this.objectsLength()),this.bb.createObjList(this.enums.bind(this),this.enumsLength()),this.fileIdent(),this.fileExt(),this.rootTable()!==null?this.rootTable().unpack():null,this.bb.createObjList(this.services.bind(this),this.servicesLength()),this.advancedFeatures(),this.bb.createObjList(this.fbsFiles.bind(this),this.fbsFilesLength()))}unpackTo(t){t.objects=this.bb.createObjList(this.objects.bind(this),this.objectsLength()),t.enums=this.bb.createObjList(this.enums.bind(this),this.enumsLength()),t.fileIdent=this.fileIdent(),t.fileExt=this.fileExt(),t.rootTable=this.rootTable()!==null?this.rootTable().unpack():null,t.services=this.bb.createObjList(this.services.bind(this),this.servicesLength()),t.advancedFeatures=this.advancedFeatures(),t.fbsFiles=this.bb.createObjList(this.fbsFiles.bind(this),this.fbsFilesLength())}}class Q{objects;enums;fileIdent;fileExt;rootTable;services;advancedFeatures;fbsFiles;constructor(t=[],e=[],s=null,n=null,r=null,o=[],c=BigInt("0"),a=[]){this.objects=t,this.enums=e,this.fileIdent=s,this.fileExt=n,this.rootTable=r,this.services=o,this.advancedFeatures=c,this.fbsFiles=a}pack(t){const e=E.createObjectsVector(t,t.createObjectOffsetList(this.objects)),s=E.createEnumsVector(t,t.createObjectOffsetList(this.enums)),n=this.fileIdent!==null?t.createString(this.fileIdent):0,r=this.fileExt!==null?t.createString(this.fileExt):0,o=this.rootTable!==null?this.rootTable.pack(t):0,c=E.createServicesVector(t,t.createObjectOffsetList(this.services)),a=E.createFbsFilesVector(t,t.createObjectOffsetList(this.fbsFiles));return E.startSchema(t),E.addObjects(t,e),E.addEnums(t,s),E.addFileIdent(t,n),E.addFileExt(t,r),E.addRootTable(t,o),E.addServices(t,c),E.addAdvancedFeatures(t,this.advancedFeatures),E.addFbsFiles(t,a),E.endSchema(t)}}function H(i){switch(i){case l.None:case l.UType:case l.Bool:case l.Byte:case l.UByte:return 1;case l.Short:case l.UShort:return 2;case l.Int:case l.UInt:return 4;case l.Long:case l.ULong:return 8;case l.Float:return 4;case l.Double:return 8;case l.String:case l.Vector:case l.Obj:case l.Union:case l.Array:return 4}return NaN}function g(i){switch(i){case l.UType:case l.Bool:case l.Byte:case l.UByte:case l.Short:case l.UShort:case l.Int:case l.UInt:case l.Long:case l.ULong:case l.Float:case l.Double:return!0;case l.None:case l.String:case l.Vector:case l.Obj:case l.Union:case l.Array:return!1}return!1}function f(i){switch(i){case l.UType:case l.Bool:case l.Byte:case l.UByte:case l.Short:case l.UShort:case l.Int:case l.UInt:case l.Long:case l.ULong:return!0;case l.Float:case l.Double:case l.None:case l.String:case l.Vector:case l.Obj:case l.Union:case l.Array:return!1}return!1}class b{bb;typeIndex;offset;isStruct;constructor(t,e,s,n){if(this.bb=t,this.typeIndex=e,this.offset=s,this.isStruct=n,s<0||s+4>t.capacity())throw new Error(`Attempt to construct Table with offset ${s}, which would extend beyond ByteBuffer (capacity ${t.capacity()})`);if(n)return;const r=t.readInt32(s),o=s-r,c=2*2;if(o<0||o+c>t.capacity())throw new Error(`Table at offset ${s} points to vtable at ${o} (${s} - ${r}), which would extend beyond the ByteBuffer (capacity ${t.capacity()})`);const a=t.readUint16(o);if(a<4)throw new Error(`Table at offset ${s} points to vtable at ${o} (${s} - ${r}), which specifies vtable size ${a}, which should be at least 4 (vtable size + object size)`);if(o+a>t.capacity())throw new Error(`Table at offset ${s} points to vtable at ${o} (${s} - ${r}), which specifies vtable size ${a}, which would extend beyond the ByteBuffer (capacity ${t.capacity()})`);const h=t.readUint16(o+2);if(h<4)throw new Error(`Table at offset ${s} points to vtable at ${o} (${s} - ${r}), which specifies inline object size ${h}, which should be at least 4 (vtable offset)`);if(s+h>t.capacity())throw new Error(`Table at offset ${s} points to vtable at ${o} (${s} - ${r}), which specifies inline object size ${h}, which would extend beyond the ByteBuffer (capacity ${t.capacity()})`)}static getRootTable(t){if(t.position()+4>t.capacity())throw new Error(`Attempt to parse root table offset from ${t.position()}, which would extend beyond ByteBuffer (capacity ${t.capacity()})`);return new b(t,-1,t.readUint32(t.position())+t.position(),!1)}static getNamedTable(t,e,s,n){for(let r=0;r<e.objectsLength();++r){const o=e.objects(r);if(o!==null&&o.name()===s)return new b(t,r,n===void 0?t.readUint32(t.position())+t.position():n,o.isStruct())}throw new Error("Unable to find type "+s+" in schema.")}readScalar(t,e){const s=H(t);if(e<0||e+s>this.bb.capacity())throw new Error(`Attempt to read scalar type ${t} (size ${s}) at offset ${e}, which would extend beyond ByteBuffer (capacity ${this.bb.capacity()})`);switch(t){case l.UType:case l.Bool:return this.bb.readUint8(e);case l.Byte:return this.bb.readInt8(e);case l.UByte:return this.bb.readUint8(e);case l.Short:return this.bb.readInt16(e);case l.UShort:return this.bb.readUint16(e);case l.Int:return this.bb.readInt32(e);case l.UInt:return this.bb.readUint32(e);case l.Long:return this.bb.readInt64(e);case l.ULong:return this.bb.readUint64(e);case l.Float:return this.bb.readFloat32(e);case l.Double:return this.bb.readFloat64(e)}throw new Error(`Unsupported message type ${t}`)}}class u{schema;constructor(t){this.schema=t}toObjectLambda(t,e=!1){const s={},n=this.getType(t),r=n.fieldsLength();for(let o=0;o<r;++o){const c=n.fields(o);if(c===null)throw new Error("Malformed schema: field at index "+o+" not populated.");const a=c.type();if(a===null)throw new Error('Malformed schema: "type" field of Field not populated.');const h=c.name();if(h===null)throw new Error('Malformed schema: "name" field of Field not populated.');const d=a.baseType();if(g(d))s[h]=this.readScalarLambda(t,h,e);else if(d===l.String)s[h]=this.readStringLambda(t,h);else if(d===l.Obj){const p=this.readTableLambda(t,h),m=this.toObjectLambda(a.index(),e);s[h]=_=>{const S=p(_);return S===null?null:m(S)}}else if(d===l.Vector){const p=a.element();if(g(p))s[h]=this.readVectorOfScalarsLambda(t,h);else if(p===l.String)s[h]=this.readVectorOfStringsLambda(t,h);else if(p===l.Obj){const m=this.readVectorOfTablesLambda(t,h),_=this.toObjectLambda(a.index(),e);s[h]=S=>{const D=m(S);if(D===null)return null;const R=[];for(const W of D)R.push(_(W));return R}}else throw new Error("Vectors of Unions and Arrays are not supported.")}else throw new Error("Unions and Arrays are not supported in field "+c.name())}return o=>{const c={};for(const a in s){const h=s[a](o);h!==null&&(c[a]=h)}return c}}toObject(t,e=!1){return this.toObjectLambda(t.typeIndex,e)(t)}getType(t){if(t===-1){const s=this.schema.rootTable();if(s===null)throw new Error("Malformed schema: No root table.");return s}if(t<0||t>this.schema.objectsLength())throw new Error("Type index out-of-range.");const e=this.schema.objects(t);if(e===null)throw new Error("Malformed schema: No object at index "+t+".");return e}getField(t,e){const s=this.getType(e),n=s.fieldsLength();for(let r=0;r<n;++r){const o=s.fields(r);if(o===null)throw new Error("Malformed schema: Missing Field table at index "+r+".");const c=o.name();if(t===c)return o}throw new Error("Couldn't find field "+t+" in object "+s.name()+".")}readScalar(t,e,s=!1){return this.readScalarLambda(t.typeIndex,e,s)(t)}readScalarLambda(t,e,s=!1){const n=this.getField(e,t),r=n.type();if(r===null)throw new Error('Malformed schema: "type" field of Field not populated.');const o=this.getType(t).isStruct();if(!g(r.baseType()))throw new Error("Field "+e+" is not a scalar type.");if(o){const c=r.baseType();return a=>a.readScalar(c,a.offset+n.offset())}return c=>{const a=c.offset+c.bb.__offset(c.offset,n.offset());return a===c.offset?s?f(r.baseType())?n.defaultInteger():n.defaultReal():null:c.readScalar(r.baseType(),a)}}readString(t,e){return this.readStringLambda(t.typeIndex,e)(t)}readStringLambda(t,e){const s=this.getField(e,t),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==l.String)throw new Error("Field "+e+" is not a string.");return r=>{const o=r.offset+r.bb.__offset(r.offset,s.offset());return o===r.offset?null:r.bb.__string(o)}}readTable(t,e){return this.readTableLambda(t.typeIndex,e)(t)}readTableLambda(t,e){const s=this.getField(e,t),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');const r=this.getType(t).isStruct();if(n.baseType()!==l.Obj)throw new Error("Field "+e+" is not an object type.");const o=this.getType(n.index()).isStruct();return r?c=>new b(c.bb,n.index(),c.offset+s.offset(),o):c=>{const a=c.offset+c.bb.__offset(c.offset,s.offset());if(a===c.offset)return null;const h=o?a:c.bb.__indirect(a);return new b(c.bb,n.index(),h,o)}}readVectorOfScalars(t,e){return this.readVectorOfScalarsLambda(t.typeIndex,e)(t)}readVectorOfScalarsLambda(t,e){const s=this.getField(e,t),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==l.Vector)throw new Error("Field "+e+" is not an vector.");const r=n.element();if(!g(r))throw new Error("Field "+e+" is not an vector of scalars.");const o=r===l.UByte;return c=>{const a=c.offset+c.bb.__offset(c.offset,s.offset());if(a===c.offset)return null;const h=c.bb.__vector_len(a),d=c.bb.__vector(a),p=H(n.element());let m;if(o)m=new Uint8Array(c.bb.bytes().buffer,c.bb.bytes().byteOffset+d,h);else{m=[];for(let _=0;_<h;++_)m.push(c.readScalar(n.element(),d+p*_))}return m}}readVectorOfTables(t,e){return this.readVectorOfTablesLambda(t.typeIndex,e)(t)}readVectorOfTablesLambda(t,e){const s=this.getField(e,t),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==l.Vector)throw new Error("Field "+e+" is not an vector.");if(n.element()!==l.Obj)throw new Error("Field "+e+" is not an vector of objects.");const r=this.getType(n.index()),o=r.isStruct(),c=o?r.bytesize():H(n.element());return a=>{const h=a.offset+a.bb.__offset(a.offset,s.offset());if(h===a.offset)return null;const d=a.bb.__vector_len(h),p=[],m=a.bb.__vector(h);for(let _=0;_<d;++_){const S=m+c*_;p.push(new b(a.bb,n.index(),o?S:a.bb.__indirect(S),o))}return p}}readVectorOfStrings(t,e){return this.readVectorOfStringsLambda(t.typeIndex,e)(t)}readVectorOfStringsLambda(t,e){const s=this.getField(e,t),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==l.Vector)throw new Error("Field "+e+" is not an vector.");if(n.element()!==l.String)throw new Error("Field "+e+" is not an vector of strings.");return r=>{const o=r.offset+r.bb.__offset(r.offset,s.offset());if(o===r.offset)return null;const c=r.bb.__vector_len(o),a=[],h=r.bb.__vector(o),d=H(n.element());for(let p=0;p<c;++p)a.push(r.bb.__string(h+d*p));return a}}}},70943:(Z,y,V)=>{var O=V(11168);Z.exports=y=O.descriptor=O.Root.fromJSON(V(63460)).lookup(".google.protobuf");var l=O.Namespace,B=O.Root,v=O.Enum,x=O.Type,T=O.Field,$=O.MapField,A=O.OneOf,M=O.Service,k=O.Method;B.fromDescriptor=function(f){typeof f.length=="number"&&(f=y.FileDescriptorSet.decode(f));var b=new B;if(f.file)for(var u,i,t=0,e;t<f.file.length;++t){if(i=b,(u=f.file[t]).package&&u.package.length&&(i=b.define(u.package)),u.name&&u.name.length&&b.files.push(i.filename=u.name),u.messageType)for(e=0;e<u.messageType.length;++e)i.add(x.fromDescriptor(u.messageType[e],u.syntax));if(u.enumType)for(e=0;e<u.enumType.length;++e)i.add(v.fromDescriptor(u.enumType[e]));if(u.extension)for(e=0;e<u.extension.length;++e)i.add(T.fromDescriptor(u.extension[e]));if(u.service)for(e=0;e<u.service.length;++e)i.add(M.fromDescriptor(u.service[e]));var s=j(u.options,y.FileOptions);if(s){var n=Object.keys(s);for(e=0;e<n.length;++e)i.setOption(n[e],s[n[e]])}}return b},B.prototype.toDescriptor=function(f){var b=y.FileDescriptorSet.create();return X(this,b.file,f),b};function X(g,f,b){var u=y.FileDescriptorProto.create({name:g.filename||(g.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});b&&(u.syntax=b),g instanceof B||(u.package=g.fullName.substring(1));for(var i=0,t;i<g.nestedArray.length;++i)(t=g._nestedArray[i])instanceof x?u.messageType.push(t.toDescriptor(b)):t instanceof v?u.enumType.push(t.toDescriptor()):t instanceof T?u.extension.push(t.toDescriptor(b)):t instanceof M?u.service.push(t.toDescriptor()):t instanceof l&&X(t,f,b);u.options=E(g.options,y.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&f.push(u)}var F=0;x.fromDescriptor=function(f,b){typeof f.length=="number"&&(f=y.DescriptorProto.decode(f));var u=new x(f.name.length?f.name:"Type"+F++,j(f.options,y.MessageOptions)),i;if(f.oneofDecl)for(i=0;i<f.oneofDecl.length;++i)u.add(A.fromDescriptor(f.oneofDecl[i]));if(f.field)for(i=0;i<f.field.length;++i){var t=T.fromDescriptor(f.field[i],b);u.add(t),f.field[i].hasOwnProperty("oneofIndex")&&u.oneofsArray[f.field[i].oneofIndex].add(t)}if(f.extension)for(i=0;i<f.extension.length;++i)u.add(T.fromDescriptor(f.extension[i],b));if(f.nestedType)for(i=0;i<f.nestedType.length;++i)u.add(x.fromDescriptor(f.nestedType[i],b)),f.nestedType[i].options&&f.nestedType[i].options.mapEntry&&u.setOption("map_entry",!0);if(f.enumType)for(i=0;i<f.enumType.length;++i)u.add(v.fromDescriptor(f.enumType[i]));if(f.extensionRange&&f.extensionRange.length)for(u.extensions=[],i=0;i<f.extensionRange.length;++i)u.extensions.push([f.extensionRange[i].start,f.extensionRange[i].end]);if(f.reservedRange&&f.reservedRange.length||f.reservedName&&f.reservedName.length){if(u.reserved=[],f.reservedRange)for(i=0;i<f.reservedRange.length;++i)u.reserved.push([f.reservedRange[i].start,f.reservedRange[i].end]);if(f.reservedName)for(i=0;i<f.reservedName.length;++i)u.reserved.push(f.reservedName[i])}return u},x.prototype.toDescriptor=function(f){var b=y.DescriptorProto.create({name:this.name}),u;for(u=0;u<this.fieldsArray.length;++u){var i;if(b.field.push(i=this._fieldsArray[u].toDescriptor(f)),this._fieldsArray[u]instanceof $){var t=N(this._fieldsArray[u].keyType,this._fieldsArray[u].resolvedKeyType),e=N(this._fieldsArray[u].type,this._fieldsArray[u].resolvedType),s=e===11||e===14?this._fieldsArray[u].resolvedType&&Q(this.parent,this._fieldsArray[u].resolvedType)||this._fieldsArray[u].type:void 0;b.nestedType.push(y.DescriptorProto.create({name:i.typeName,field:[y.FieldDescriptorProto.create({name:"key",number:1,label:1,type:t}),y.FieldDescriptorProto.create({name:"value",number:2,label:1,type:e,typeName:s})],options:y.MessageOptions.create({mapEntry:!0})}))}}for(u=0;u<this.oneofsArray.length;++u)b.oneofDecl.push(this._oneofsArray[u].toDescriptor());for(u=0;u<this.nestedArray.length;++u)this._nestedArray[u]instanceof T?b.field.push(this._nestedArray[u].toDescriptor(f)):this._nestedArray[u]instanceof x?b.nestedType.push(this._nestedArray[u].toDescriptor(f)):this._nestedArray[u]instanceof v&&b.enumType.push(this._nestedArray[u].toDescriptor());if(this.extensions)for(u=0;u<this.extensions.length;++u)b.extensionRange.push(y.DescriptorProto.ExtensionRange.create({start:this.extensions[u][0],end:this.extensions[u][1]}));if(this.reserved)for(u=0;u<this.reserved.length;++u)typeof this.reserved[u]=="string"?b.reservedName.push(this.reserved[u]):b.reservedRange.push(y.DescriptorProto.ReservedRange.create({start:this.reserved[u][0],end:this.reserved[u][1]}));return b.options=E(this.options,y.MessageOptions),b};var K=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;T.fromDescriptor=function(f,b){if(typeof f.length=="number"&&(f=y.DescriptorProto.decode(f)),typeof f.number!="number")throw Error("missing field id");var u;f.typeName&&f.typeName.length?u=f.typeName:u=L(f.type);var i;switch(f.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+f.label)}var t=f.extendee;f.extendee!==void 0&&(t=t.length?t:void 0);var e=new T(f.name.length?f.name:"field"+f.number,f.number,u,i,t);if(e.options=j(f.options,y.FieldOptions),f.defaultValue&&f.defaultValue.length){var s=f.defaultValue;switch(s){case"true":case"TRUE":s=!0;break;case"false":case"FALSE":s=!1;break;default:var n=K.exec(s);n&&(s=parseInt(s));break}e.setOption("default",s)}return G(f.type)&&(b==="proto3"?f.options&&!f.options.packed&&e.setOption("packed",!1):f.options&&f.options.packed||e.setOption("packed",!1)),e},T.prototype.toDescriptor=function(f){var b=y.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)b.type=11,b.typeName=O.util.ucFirst(this.name),b.label=3;else{switch(b.type=N(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:b.typeName=this.resolvedType?Q(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":b.label=3;break;case"required":b.label=2;break;default:b.label=1;break}}if(b.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(b.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(b.options=E(this.options,y.FieldOptions),this.options.default!=null&&(b.defaultValue=String(this.options.default))),f==="proto3"?this.packed||((b.options||(b.options=y.FieldOptions.create())).packed=!1):this.packed&&((b.options||(b.options=y.FieldOptions.create())).packed=!0),b};var I=0;v.fromDescriptor=function(f){typeof f.length=="number"&&(f=y.EnumDescriptorProto.decode(f));var b={};if(f.value)for(var u=0;u<f.value.length;++u){var i=f.value[u].name,t=f.value[u].number||0;b[i&&i.length?i:"NAME"+t]=t}return new v(f.name&&f.name.length?f.name:"Enum"+I++,b,j(f.options,y.EnumOptions))},v.prototype.toDescriptor=function(){for(var f=[],b=0,u=Object.keys(this.values);b<u.length;++b)f.push(y.EnumValueDescriptorProto.create({name:u[b],number:this.values[u[b]]}));return y.EnumDescriptorProto.create({name:this.name,value:f,options:E(this.options,y.EnumOptions)})};var C=0;A.fromDescriptor=function(f){return typeof f.length=="number"&&(f=y.OneofDescriptorProto.decode(f)),new A(f.name&&f.name.length?f.name:"oneof"+C++)},A.prototype.toDescriptor=function(){return y.OneofDescriptorProto.create({name:this.name})};var U=0;M.fromDescriptor=function(f){typeof f.length=="number"&&(f=y.ServiceDescriptorProto.decode(f));var b=new M(f.name&&f.name.length?f.name:"Service"+U++,j(f.options,y.ServiceOptions));if(f.method)for(var u=0;u<f.method.length;++u)b.add(k.fromDescriptor(f.method[u]));return b},M.prototype.toDescriptor=function(){for(var f=[],b=0;b<this.methodsArray.length;++b)f.push(this._methodsArray[b].toDescriptor());return y.ServiceDescriptorProto.create({name:this.name,method:f,options:E(this.options,y.ServiceOptions)})};var z=0;k.fromDescriptor=function(f){return typeof f.length=="number"&&(f=y.MethodDescriptorProto.decode(f)),new k(f.name&&f.name.length?f.name:"Method"+z++,"rpc",f.inputType,f.outputType,Boolean(f.clientStreaming),Boolean(f.serverStreaming),j(f.options,y.MethodOptions))},k.prototype.toDescriptor=function(){return y.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:E(this.options,y.MethodOptions)})};function L(g){switch(g){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+g)}function G(g){switch(g){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function N(g,f){switch(g){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(f instanceof v)return 14;if(f instanceof x)return f.group?10:11;throw Error("illegal type: "+g)}function j(g,f){if(g){for(var b=[],u=0,i,t,e;u<f.fieldsArray.length;++u)(t=(i=f._fieldsArray[u]).name)!=="uninterpretedOption"&&g.hasOwnProperty(t)&&(e=g[t],i.resolvedType instanceof v&&typeof e=="number"&&i.resolvedType.valuesById[e]!==void 0&&(e=i.resolvedType.valuesById[e]),b.push(H(t),e));return b.length?O.util.toObject(b):void 0}}function E(g,f){if(g){for(var b=[],u=0,i=Object.keys(g),t,e;u<i.length;++u)if(e=g[t=i[u]],t!=="default"){var s=f.fields[t];!s&&!(s=f.fields[t=O.util.camelCase(t)])||b.push(t,e)}return b.length?f.fromObject(O.util.toObject(b)):void 0}}function Q(g,f){var b=g.fullName.split("."),u=f.fullName.split("."),i=0,t=0,e=u.length-1;if(!(g instanceof B)&&f instanceof l)for(;i<b.length&&t<e&&b[i]===u[t];){var s=f.lookup(b[i++],!0);if(s!==null&&s!==f)break;++t}else for(;i<b.length&&t<e&&b[i]===u[t];++i,++t);return u.slice(t).join(".")}function H(g){return g.substring(0,1)+g.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(f,b){return"_"+b.toLowerCase()})}}}]);

//# sourceMappingURL=studio-9503.js.map