"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1015],{89820:(st,A,t)=>{t.d(A,{CW:()=>I,KV:()=>Y,ZP:()=>D});var e=t(52322),K=t(2043),z=t(7808),G=t(12540),F=t(32199),S=t(72283),M=t(87037),H=t(52296),V=t(41574),w=t(8740),o=t(93812),Z=t(2784);const k=240,X=(0,w.ZL)()(l=>({root:{pointerEvents:"auto",backgroundColor:l.palette.background.default,width:280},content:{position:"relative"},iconButton:{fontSize:"1rem !important",[`& svg:not(.${z.Z.root})`]:{fontSize:"1rem !important"}},tabs:{minHeight:"auto",[`.${G.Z.indicator}`]:{transform:"scaleX(0.75)",height:2},[`.${F.Z.root}`]:{minHeight:"auto",minWidth:"auto",padding:l.spacing(1,1.5,1.125),color:l.palette.text.secondary,"&.Mui-selected":{color:l.palette.text.primary}}}}));function Y({children:l}){return l}function I({children:l}){return(0,e.jsx)(o.Z,{padding:1,overflowX:"hidden",overflowY:"auto",style:{maxHeight:k},children:l})}function D({children:l,checked:R,icon:J,onSelectTab:O,selectedTab:x,tooltip:B,dataTest:Q}){const{classes:E}=X();if(!(x!=null)){let u=x;return Z.Children.forEach(l,C=>{u==null&&(u=C.props.name)}),(0,e.jsx)(S.Z,{square:!1,elevation:4,style:{pointerEvents:"auto"},children:(0,e.jsx)(M.Z,{className:E.iconButton,color:R===!0?"info":"default",title:B,"data-testid":`ExpandingToolbar-${B}`,onClick:()=>O(u),children:J})})}let y;Z.Children.forEach(l,u=>{(!y||u.props.name===x)&&(y=u)});const q=(u,C)=>{C!=null&&O(C)};return(0,e.jsxs)(S.Z,{className:E.root,"data-testid":Q,square:!1,elevation:4,children:[(0,e.jsx)(S.Z,{children:(0,e.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,e.jsx)(H.Z,{className:E.tabs,textColor:"inherit",value:x,onChange:q,children:Z.Children.map(l,u=>(0,e.jsx)(V.Z,{label:u.props.name,value:u.props.name}))}),(0,e.jsx)(M.Z,{className:E.iconButton,onClick:()=>O(void 0),children:(0,e.jsx)(K.iRs,{})})]})}),(0,e.jsx)("div",{className:E.content,children:y})]})}},71015:(st,A,t)=>{t.r(A),t.d(A,{default:()=>it});var e=t(52322),K=t(29022),z=t(2043),G=t(69802),F=t(24957),S=t(72283),M=t(87037),H=t(30531),V=t(2940),w=t(31692),o=t(2784),Z=t(14786),k=t.n(Z),X=t(8740),Y=t(29268),I=t(89820),D=t(42741),l=t(14075),R=t(76479),J=t(93812),O=t(93218),x=t.n(O),B=t(81368),Q=t.n(B);x().use(Q()),x().warnings(!1);const E={name:"dagre",fit:!1,nodesep:20,rankDir:"TB",ranker:"longest-path"};function nt(i){const r=(0,o.useRef)(),T=(0,o.useRef)(null),g=(0,o.useRef)(!1);(0,o.useEffect)(()=>{if(!T.current)throw new Error("Graph ref must be available on first render");return r.current=x()({container:T.current,zoom:.7}),r.current.on("viewport",()=>{g.current=!0}),i.graphRef.current={fit:()=>{g.current=!1,r.current?.fit()},resetUserPanZoom:()=>{g.current=!1}},()=>{r.current?.destroy()}},[i.graphRef]);const{elements:d,rankDir:p}=i;return(0,o.useEffect)(()=>{r.current&&(r.current.batch(()=>{r.current?.elements().remove(),r.current?.add(d),r.current?.elements().makeLayout({...E,rankDir:p}).run()}),g.current||r.current.fit())},[d,p]),(0,o.useEffect)(()=>{r.current?.style(i.style)},[i.style]),(0,e.jsx)("div",{ref:T,style:{width:"100%",height:"100%"}})}const y=200,q=[{selector:"edge",style:{"target-arrow-shape":"triangle","line-color":"rgb(190, 190, 187)","target-arrow-color":"rgb(190, 190, 187)","curve-style":"bezier"}},{selector:'node[type="node"]',style:{content:"data(label)",shape:"round-rectangle",height:"20px","background-color":"#000","border-color":"rgb(69, 165, 255)","border-width":"1px","padding-top":"4px","padding-right":"4px","padding-bottom":"4px","padding-left":"4px","font-size":"16px","text-max-width":`${y}px`,"text-wrap":"ellipsis","text-valign":"center","text-halign":"center",color:"rgb(69, 165, 255)"}},{selector:'node[type="topic"]',style:{content:"data(label)",shape:"diamond",width:"40px",height:"40px","background-color":"rgb(183, 157, 202)","font-size":"16px","text-outline-color":"#000","text-outline-width":"2px",color:"#fff"}},{selector:'node[type="service"]',style:{content:"data(label)",shape:"round-rectangle",height:"20px","background-color":"#000","border-color":"rgb(255, 107, 130)","border-width":"1px","padding-top":"4px","padding-right":"4px","padding-bottom":"4px","padding-left":"4px","font-size":"16px","text-max-width":"200px","text-wrap":"ellipsis","text-valign":"center","text-halign":"center",color:"rgb(255, 107, 130)"}}],u=(0,X.ZL)()(i=>({root:{display:"flex",flexDirection:"column",alignItems:"flex-end",position:"absolute",top:`calc(${R.B}px + ${i.spacing(1)})`,right:i.spacing(1),zIndex:101,gap:i.spacing(1),pointerEvents:"none"},stack:{"& > .MuiIconButton-root":{"&:not(:first-of-type)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},icon:{fontSize:"1rem !important","& svg:not(.MuiSvgIcon-root)":{fontSize:"1rem !important"}},pointerEventsAuto:{pointerEvents:"auto"},toolbarContent:{padding:i.spacing(1)}})),C={all:"All topics",none:"No topics",published:"Published topics",subscribed:"Subscribed topics",connected:"Connected topics","disconnected-pub":"Disconnected published topics","disconnected-sub":"Disconnected subscribed topics"};function _(i,...r){for(const T of r)for(const g of T)i.add(g)}function tt(){const{classes:i,cx:r}=u(),[T,g]=(0,o.useState)(void 0),d=(0,D.An)((0,o.useCallback)(s=>s.playerState.activeData?.publishedTopics,[])),p=(0,D.An)((0,o.useCallback)(s=>s.playerState.activeData?.subscribedTopics,[])),$=(0,D.An)((0,o.useCallback)(s=>s.playerState.activeData?.services,[])),[W,at]=(0,o.useState)(!1),[j,rt]=(0,o.useState)(!0),[c,ct]=(0,o.useState)("all"),et=(0,o.useMemo)(()=>k().init({fontFamily:"Arial",fontSize:"16px"}),[]),N=(0,o.useCallback)(({topicIdWithSubscriptions:s,topic:f})=>{const h=(d??new Map([])).has(f),P=s.has(f);return c==="none"?!1:c==="all"||c==="published"&&h||c==="subscribed"&&P||c==="connected"&&h&&P||c==="disconnected-pub"&&h&&!P||c==="disconnected-sub"&&P&&!h},[d,c]),lt=(0,o.useMemo)(()=>{const s=[],f=new Set,U=new Set,h=new Set,P=new Set;d?.forEach((n,a)=>{_(f,n),U.add(a)}),p?.forEach((n,a)=>{_(f,n),U.add(a),h.add(a)}),$?.forEach((n,a)=>{_(f,n),P.add(a)});for(const n of f){const a=Math.min(y,et.width(n));s.push({style:{width:`${a}px`},data:{id:`n:${n}`,label:n,type:"node"}})}if(c!=="none")for(const n of U)N({topicIdWithSubscriptions:h,topic:n})&&s.push({data:{id:`t:${n}`,label:n,type:"topic"}});if(j)for(const n of P){const a=Math.min(y,et.width(n));s.push({style:{width:`${a}px`},data:{id:`s:${n}`,label:n,type:"service"}})}switch(c){case"none":if(d==null||p==null)break;for(const[n,a]of d.entries())for(const m of a)for(const v of p.get(n)??[]){if(v===m)continue;const b=`n:${m}`,ot=`n:${v}`;s.push({data:{id:`${b}-${ot}`,source:b,target:ot}})}break;default:if(d!=null){for(const[n,a]of d.entries())if(N({topicIdWithSubscriptions:h,topic:n}))for(const m of a){const v=`n:${m}`,b=`t:${n}`;s.push({data:{id:`${v}-${b}`,source:v,target:b}})}}if(p!=null){for(const[n,a]of p.entries())if(N({topicIdWithSubscriptions:h,topic:n}))for(const m of a){const v=`t:${n}`,b=`n:${m}`;s.push({data:{id:`${v}-${b}`,source:v,target:b}})}}}if(j&&$!=null)for(const[n,a]of $.entries())for(const m of a)s.push({data:{source:`n:${m}`,target:`s:${n}`}});return s},[et,d,p,$,c,N,j]),L=(0,o.useRef)(),dt=(0,o.useCallback)(()=>{L.current?.fit()},[]),ut=(0,o.useCallback)(()=>{L.current?.resetUserPanZoom(),at(!W)},[W]),ft=(0,o.useMemo)(()=>`Showing ${C[c].toLowerCase()}`,[c]),pt=(0,o.useCallback)(()=>{L.current?.resetUserPanZoom(),rt(!j)},[j]);return d==null?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{}),(0,e.jsx)(Y.Z,{children:"Waiting for data..."})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{}),(0,e.jsxs)("div",{className:i.root,children:[(0,e.jsx)(S.Z,{square:!1,elevation:4,className:i.pointerEventsAuto,children:(0,e.jsxs)(J.Z,{flex:"0 0",className:r(i.stack,i.pointerEventsAuto),children:[(0,e.jsx)(M.Z,{title:"Zoom fit",onClick:dt,className:i.icon,children:(0,e.jsx)(K.SD4,{})}),(0,e.jsx)(M.Z,{title:"Orientation",onClick:ut,className:i.icon,children:(0,e.jsx)(z.O9A,{style:{transform:`rotate(${W?90:0}deg)`}})}),(0,e.jsx)(M.Z,{color:j?"info":"inherit",className:i.icon,title:j?"Showing services":"Hiding services",onClick:pt,children:(0,e.jsx)(G.feG,{})})]})}),(0,e.jsx)(I.ZP,{checked:c!=="none",dataTest:"set-topic-visibility",tooltip:ft,icon:(0,e.jsx)(F._f9,{}),selectedTab:T,onSelectTab:s=>{g(s)},children:(0,e.jsx)(I.KV,{name:"Topics",children:(0,e.jsx)("div",{className:i.toolbarContent,children:(0,e.jsx)(H.Z,{defaultValue:c,onChange:(s,f)=>{L.current?.resetUserPanZoom(),ct(f)},children:Object.entries(C).map(([s,f])=>(0,e.jsx)(V.Z,{value:s,control:(0,e.jsx)(w.Z,{}),label:f},s))})})})})]}),(0,e.jsx)(nt,{style:q,elements:lt,rankDir:W?"LR":"TB",graphRef:L})]})}tt.panelType="TopicGraph",tt.defaultConfig={};const it=(0,l.Z)(tt)}}]);

//# sourceMappingURL=studio-1015.js.map