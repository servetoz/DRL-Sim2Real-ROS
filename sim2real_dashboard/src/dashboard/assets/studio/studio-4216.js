(self.webpackChunk=self.webpackChunk||[]).push([[4216],{14786:function(gt,Q){(function(p,f){f(Q)})(this,function(p){function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),n.push.apply(n,s)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(s){H(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const rt=new Set(["\u2014"]),it=new Set(["\xAD"]),W=new Set([" ","\u1680","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2008","\u2009","\u200A","\u205F","\u3000","	","\u200B","\u2028","\u2029"]),lt=new Set(["\u058A","\u2010","\u2012","\u2013","\u05BE","\u0F0B","\u1361","\u17D8","\u17DA","\u2027","|","\u16EB","\u16EC","\u16ED","\u2056","\u2058","\u2059","\u205A","\u205B","\u205D","\u205E","\u2E19","\u2E2A","\u2E2B","\u2E2C","\u2E2D","\u2E30","\u10100","\u10101","\u10102","\u1039F","\u103D0","\u1091F","\u12470"]),E=new Set(["\xB4","\u1FFD"]),F=new Set([`
`]);function N(t,e){e||(e={});const n=Number.parseInt(g(e,"base-font-size",16),10),s=Number.parseFloat(t),u=t.replace(s,"");switch(u){case"rem":case"em":return s*n;case"pt":return s*(96/72);case"px":return s}throw new Error("The unit "+u+" is not supported")}function R(t,e){const n=new Set(["inherit","initial","unset","normal"]);let s=0;t&&!n.has(t)&&(s=N(t));let u=0;return e&&!n.has(e)&&(u=N(e)),y=>(y.trim().replace(/\s+/gi," ").split(" ").length-1)*s+y.length*u}function L(t,e){const n=[],s=g(e,"font-weight",t.getPropertyValue("font-weight"))||"400";["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"].includes(s.toString())&&n.push(s);const u=g(e,"font-style",t.getPropertyValue("font-style"));["normal","italic","oblique"].includes(u)&&n.push(u);const y=g(e,"font-variant",t.getPropertyValue("font-variant"));["normal","small-caps"].includes(y)&&n.push(y);const b=N(g(e,"font-size",t.getPropertyValue("font-size"))||"16px");n.push(b+"px");const o=g(e,"font-family",t.getPropertyValue("font-family"))||"Helvetica, Arial, sans-serif";return n.push(o),n.join(" ")}function Y(t){return t&&typeof t.getPropertyValue=="function"}function M(t){return $(t)&&t.style&&typeof window<"u"&&typeof window.getComputedStyle=="function"}function $(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:Boolean(t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string")}function q(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function _(t,e){const n=h({},e),{style:s}=n;return e||(e={}),Y(s)?s:M(t)?window.getComputedStyle(t,g(e,"pseudoElt",null)):{getPropertyValue:u=>g(e,u)}}function K(t,e){switch(e){case"pre":case"pre-wrap":return t;case"pre-line":return(t||"").replace(/\s+/gm," ").trim();default:return(t||"").replace(/[\r\n]/gm," ").replace(/\s+/gm," ").trim()}}function G(t,e){switch(e.getPropertyValue("text-transform")){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();default:return t}}function tt(t){return t=(t||"").replace(/<wbr>/gi,"\u200B").replace(/<br\s*\/?>/gi,`
`).replace(/&shy;/gi,"\xAD").replace(/&mdash;/gi,"\u2014"),/&#(\d+)(;?)|&#[xX]([a-fA-F\d]+)(;?)|&([\da-zA-Z]+);/g.test(t)&&console&&console.error("text-metrics: Found encoded htmlenties. You may want to use https://mths.be/he to decode your text first."),t}function et(t){return t&&(t.textContent||t.textContent)||""}function g(t,e,n){return t&&t[e]!==void 0&&t[e]||n}function z(t){const e={};for(const n of Object.keys(t||{}))e[n.replace(/([A-Z])/g,s=>"-"+s.toLowerCase())]=t[n];return e}function U(t){try{const e=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,s=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return e.font=t,e.setTransform(n/s,0,0,n/s,0,0),e}catch(e){throw new Error("Canvas support required"+e.message)}}function X(t){return(rt.has(t)?"B2":W.has(t)&&"BAI")||it.has(t)&&"SHY"||lt.has(t)&&"BA"||E.has(t)&&"BB"||F.has(t)&&"BK"}function nt(t){let{ctx:e,text:n,max:s,wordSpacing:u,letterSpacing:y}=t;const b=R(u,y),o=[],c=[],m=[];let r="",a="";if(!n)return[];for(const d of n){const i=X(d);a===""&&i==="BAI"||(i?(m.push({chr:d,type:i}),c.push(a),a=""):a+=d)}a&&c.push(a);for(const[d,i]of c.entries()){if(d===0){r=i;continue}const v=m[d-1],l=v.type==="SHY"?"":v.chr;if(v.type==="BK"){o.push(r),r=i;continue}const T=e.measureText(r+l+i).width+b(r+l+i);if(Math.round(T)<=s)r+=l+i;else switch(v.type){case"SHY":o.push(r+"-"),r=i;break;case"BA":o.push(r+l),r=i;break;case"BAI":o.push(r),r=i;break;case"BB":o.push(r),r=l+i;break;case"B2":Number.parseInt(e.measureText(r+l).width+b(r+l),10)<=s?(o.push(r+l),r=i):Number.parseInt(e.measureText(l+i).width+b(l+i),10)<=s?(o.push(r),r=l+i):(o.push(r,l),r=i);break;default:throw new Error("Undefoined break")}}return[...r].length>0&&o.push(r),o}function at(t){let{ctx:e,text:n,max:s,wordSpacing:u,letterSpacing:y}=t;const b=R(u,y),o=[];let c="",m=0;if(!n)return[];for(const r of n){const a=X(r);if(a==="BK"){o.push(c),c="";continue}const d=c.length;if(W.has(r)&&(d===0||W.has(c[d-1])))continue;let i=e.measureText(c+r).width+b(c+r),v=Math.ceil(i);if(a==="SHY"){const l=n[m+1]||"";i=e.measureText(c+r+l).width+b(c+r+l),v=Math.ceil(i)}if(v>s&&[...c].length>0)switch(a){case"SHY":o.push(c+"-"),c="";break;case"BA":o.push(c+r),c="";break;case"BAI":o.push(c),c="";break;default:o.push(c),c=r}else r!=="\xAD"&&(c+=r);m++}return[...c].length>0&&o.push(c),o}var ct={__proto__:null,addWordAndLetterSpacing:R,getFont:L,isCSSStyleDeclaration:Y,canGetComputedStyle:M,isElement:$,isObject:q,getStyle:_,normalizeWhitespace:K,getStyledText:G,prepareText:tt,getText:et,prop:g,normalizeOptions:z,getContext2d:U,computeLinesDefault:nt,computeLinesBreakAll:at};class ut{constructor(e,n){n===void 0&&(n={}),!$(e)&&q(e)?(this.el=void 0,this.overwrites=z(e)):(this.el=e,this.overwrites=z(n)),this.style=_(this.el,this.overwrites),this.font=g(n,"font",null)||L(this.style,this.overwrites)}padding(){return this.el?Number.parseInt(this.style.paddingLeft||0,10)+Number.parseInt(this.style.paddingRight||0,10):0}parseArgs(e,n,s){n===void 0&&(n={}),s===void 0&&(s={}),typeof e=="object"&&e&&(s=n,n=e||{},e=void 0);const u=h(h({},this.overwrites),z(s)),y=g(u,"white-space")||this.style.getPropertyValue("white-space");return n||(n={}),s||(n={}),{text:e=!e&&this.el?K(et(this.el),y):tt(K(e,y)),options:n,overwrites:s,styles:u}}width(){const{text:e,options:n,overwrites:s,styles:u}=this.parseArgs(...[].slice.call(arguments));if(!e)return 0;const y=L(this.style,u),b=g(u,"letter-spacing")||this.style.getPropertyValue("letter-spacing"),o=R(g(u,"word-spacing")||this.style.getPropertyValue("word-spacing"),b),c=U(y),m=G(e,this.style);return n.multiline?this.lines(m,n,s).reduce((r,a)=>{const d=c.measureText(a).width+o(a);return Math.max(r,d)},0):c.measureText(m).width+o(m)}height(){const{text:e,options:n,styles:s}=this.parseArgs(...[].slice.call(arguments)),u=Number.parseFloat(g(s,"line-height")||this.style.getPropertyValue("line-height"));return Math.ceil(this.lines(e,n,s).length*u||0)}lines(){const{text:e,options:n,overwrites:s,styles:u}=this.parseArgs(...[].slice.call(arguments)),y=L(this.style,u);let b=Number.parseInt(g(n,"width")||g(s,"width"),10)||g(this.el,"offsetWidth",0)||Number.parseInt(g(u,"width",0),10)||Number.parseInt(this.style.width,10);b-=this.padding();const o=g(u,"word-break")||this.style.getPropertyValue("word-break"),c=g(u,"letter-spacing")||this.style.getPropertyValue("letter-spacing"),m=g(u,"word-spacing")||this.style.getPropertyValue("word-spacing"),r=U(y),a=G(e,this.style);return o==="break-all"?at({ctx:r,text:a,max:b,wordSpacing:m,letterSpacing:c}):nt({ctx:r,text:a,max:b,wordSpacing:m,letterSpacing:c})}maxFontSize(){const{text:e,options:n,overwrites:s,styles:u}=this.parseArgs(...[].slice.call(arguments)),y=r=>Math.ceil(this.width(e,n,h(h({},u),{},{"font-size":r+"px"})));let b=Number.parseInt(g(n,"width")||g(s,"width"),10)||g(this.el,"offsetWidth",0)||Number.parseInt(g(u,"width",0),10)||Number.parseInt(this.style.width,10);b-=this.padding();let o=Math.floor(b/2),c=y(o);if(o=Math.floor(o/c*b),c=y(o),Math.ceil(c)===b)return o?o+"px":void 0;const m=c>b&&o>0;for(;c>b&&o>0;)o-=1,c=y(o);if(!m)for(;c<b;){if(c=y(o+1),c>b)return o?o+"px":void 0;o+=1}return o?o+"px":void 0}}const dt=h({},ct);p.init=(t,e)=>new ut(t,e),p.utils=dt})},14216:(gt,Q,p)=>{"use strict";p.r(Q),p.d(Q,{default:()=>r});var f=p(52322),h=p(2784),H=p(8740),rt=p(44449),it=p(14075),W=p(82044),lt=p(13688),E=p(93812);const F="TAB",N=(0,h.createContext)({preventTabDrop:!1});N.displayName="TabDndContext";var R=p(93553),L=p(47021),Y=p(8533),M=p(76479),$=p(49318),q=p(42689),_=p(88099),K=p(92679),G=p(33459),tt=p(87037),et=p(14786),g=p.n(et),z=p(77075),U=p(67649).Z;const X=120,nt=40,at=14,ct=(0,H.ZL)()((a,d,i)=>({root:{cursor:"pointer",color:a.palette.text.secondary,fontSize:a.typography.body2.fontSize,fontWeight:a.typography.body2.fontWeight,position:"relative",display:"flex",alignItems:"center",width:"100%",height:M.B,padding:a.spacing(0,1),userSelect:"none",backgroundColor:"transparent",maxWidth:X,gap:a.spacing(.5),top:1,[`:not(.${i.active}):hover`]:{color:a.palette.text.primary}},active:{color:a.palette.text.primary,fontWeight:a.typography.subtitle2.fontWeight,backgroundColor:a.palette.background.paper,userSelect:"all",zIndex:1,boxShadow:a.shadows[2]},dragging:{backgroundColor:a.palette.background.paper,borderColor:a.palette.action.selected},hidden:{visibility:"hidden"},input:{font:"inherit",color:"inherit"},dropIndicator:{position:"absolute",top:0,bottom:0,width:2,height:"100%",backgroundColor:a.palette.primary.main,opacity:.8,borderRadius:a.shape.borderRadius,zIndex:1},iconButton:{padding:a.spacing(.125),color:a.palette.text.secondary,":hover":{color:a.palette.text.primary}}})),ut=z.R.SANS_SERIF,dt="12px";let t;function e(a){return t==null&&(t=g().init({fontFamily:ut,fontSize:dt})),t.width(a)+3}function n(a){const{tabIndex:d,isActive:i,tabCount:v,tabTitle:l="",isDragging:T,actions:w,innerRef:A,highlight:j,hidden:B}=a,{classes:S,cx:P}=ct(),C=(0,h.useRef)(null),[x,Z]=(0,h.useState)(l),[V,D]=(0,h.useState)(!1),st=(0,h.useCallback)(O=>Z(O.target.value),[]),{selectTab:I,removeTab:J}=(0,h.useMemo)(()=>({selectTab:()=>w.selectTab(d),removeTab:()=>w.removeTab(d)}),[w,d]),k=(0,h.useCallback)(()=>w.setTabTitle(d,x),[w,d,x]),ft=(0,h.useCallback)(()=>{i?(D(!0),U(()=>{if(C.current){const O=C.current;O.focus(),O.select()}})):I()},[i,I,C]),ot=(0,h.useCallback)(()=>{D(!1),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},[]),pt=(0,h.useCallback)(()=>{k(),ot()},[ot,k]),ht=(0,h.useCallback)(()=>{Z(l),ot()},[ot,l]),bt=(0,h.useCallback)(O=>{O.key==="Escape"?ht():O.key==="Enter"&&pt()},[pt,ht]);return(0,h.useEffect)(()=>{i||D(!1)},[i]),(0,h.useEffect)(()=>{Z(l)},[l]),(0,f.jsxs)("div",{hidden:B,onClick:ft,ref:A,title:l||"Enter tab name","data-testid":"toolbar-tab",className:P(S.root,{[S.active]:i,[S.dragging]:T,[S.hidden]:B}),style:{minWidth:i?`calc(max(${nt}px,  min(${Math.ceil(e(l)+30)}px, ${X}px, 100% - ${at*(v-1)}px)))`:void 0},children:[j!=null&&(0,f.jsx)("div",{className:S.dropIndicator,style:{left:j==="before"?0:"auto",right:j==="before"?"auto":0}}),(0,f.jsx)(G.ZP,{className:S.input,readOnly:!V,placeholder:"Enter tab name",value:x,onChange:st,onBlur:k,onKeyDown:bt,inputRef:C,style:{pointerEvents:V?"all":"none"}}),i&&(0,f.jsx)(tt.Z,{edge:"end",size:"small","data-testid":"tab-icon",title:"Remove tab",onClick:J,className:S.iconButton,children:(0,f.jsx)(K.Z,{fontSize:"inherit"})})]})}function s(a){const{isActive:d,tabCount:i,actions:v,panelId:l,tabTitle:T,tabIndex:w}=a,{moveTab:A}=(0,_._B)(),[{isDragging:j},B]=(0,q.c)({type:F,item:{panelId:l,tabIndex:w},collect:x=>({isDragging:x.isDragging()})}),[{highlight:S},P]=(0,Y.L)({accept:F,collect:x=>({highlight:x.isOver()?x.getItem().tabIndex<w?"after":"before":void 0}),drop:(x,Z)=>{const V={panelId:x.panelId,tabIndex:x.tabIndex};A({source:V,target:{tabIndex:w,panelId:l}})}}),C={tabTitle:T,tabIndex:w,isActive:d,tabCount:i,actions:v,isDragging:j,innerRef:x=>{B(x),P(x)},hidden:j,highlight:S};return(0,f.jsx)(n,{...C})}const u=(0,H.ZL)()(a=>({root:{backgroundColor:a.palette.background.default},toolbar:{padding:a.spacing(0,.75,0,.25)},button:{flexGrow:1,height:M.B}}));function y(a){const{panelId:d,actions:i,tabs:v,activeTabIdx:l,setDraggingTabState:T}=a,{classes:w,theme:A}=u(),[{isOver:j,item:B},S]=(0,Y.L)({accept:F,collect:P=>({item:P.getItem(),isOver:P.isOver()})});return(0,h.useEffect)(()=>{T({item:B,isOver:j})},[B,j,T]),(0,f.jsx)(E.Z,{className:w.root,flex:"0 0",position:"relative",children:(0,f.jsx)(M.Z,{className:w.toolbar,backgroundColor:A.palette.background.default,additionalIcons:(0,f.jsx)($.Z,{"data-testid":"add-tab",title:"Add tab",onClick:i.addTab,children:(0,f.jsx)(R.Z,{fontSize:"inherit"})}),children:(0,f.jsxs)(E.Z,{direction:"row",flex:"auto",alignItems:"center",ref:S,"data-testid":"toolbar-droppable",style:{gap:1},overflow:"hidden",children:[v.map((P,C)=>(0,f.jsx)(s,{isActive:l===C,panelId:d,actions:i,tabCount:v.length,tabIndex:C,tabTitle:P.title},C)),(0,f.jsx)(L.Z,{className:w.button,onDoubleClick:i.addTab})]})})})}var b=p(11701),o=p(40301);const c=(0,H.ZL)()(a=>({panelCover:{top:"0",left:"0",width:"100%",height:"100%",zIndex:1,background:a.palette.background.paper,position:"absolute"}}));function m({config:a,saveConfig:d}){const i=(0,W.R)().id,{classes:v}=c(),{tabs:l,activeTabIdx:T}=a,A=l[T]?.layout,[j,B]=(0,h.useState)({item:void 0,isOver:!1}),S=(0,h.useCallback)(I=>{d({activeTabIdx:I})},[d]),P=(0,h.useCallback)((I,J)=>{const k=l.slice();k[I]={...l[I],title:J},d({tabs:k})},[d,l]),C=(0,h.useCallback)(I=>{const J=l.slice(0,I).concat(l.slice(I+1)),k=l.length-1;d({tabs:J,activeTabIdx:T===k?k-1:T})},[T,d,l]),x=(0,h.useCallback)(()=>{const I={title:`${l.length+1}`,layout:void 0};d({...a,activeTabIdx:l.length,tabs:l.concat([I])})},[a,d,l]),Z=(0,h.useCallback)(I=>{d((0,o.p1)(I,a))},[a,d]),V=(0,h.useMemo)(()=>({addTab:x,removeTab:C,selectTab:S,setTabTitle:P}),[x,C,S,P]),D=j.item,st=!!D&&D.panelId===i&&D.tabIndex===T&&!j.isOver;return(0,f.jsxs)(E.Z,{flex:"auto",overflow:"hidden",children:[(0,f.jsx)(y,{panelId:i,tabs:l,actions:V,activeTabIdx:T,setDraggingTabState:B}),(0,f.jsxs)(E.Z,{direction:"row",flex:"auto",overflow:"hidden",position:"relative",children:[A!=null?(0,f.jsx)(N.Provider,{value:{preventTabDrop:st},children:(0,f.jsx)(lt.D,{layout:A,onChange:Z,tabId:i})}):(0,f.jsx)(rt.v,{tabId:i}),st&&(0,f.jsx)("div",{className:v.panelCover})]})]})}m.panelType=b.bm,m.defaultConfig=o.kY;const r=(0,it.Z)(m)}}]);

//# sourceMappingURL=studio-4216.js.map