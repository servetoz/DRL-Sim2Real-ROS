{"version":3,"file":"studio-3949.js","mappings":"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","sources":["webpack:///../../node_modules/@mui/icons-material/Difference.js","webpack:///../../node_modules/@mui/icons-material/DifferenceOutlined.js","webpack:///../../node_modules/@mui/icons-material/FilterAlt.js","webpack:///../../node_modules/@mui/icons-material/PowerInput.js","webpack:///../../node_modules/@mui/icons-material/ScatterPlot.js","webpack:///../../node_modules/@mui/icons-material/ShowChart.js","webpack:///../../node_modules/is-extendable/index.js","webpack:///../../node_modules/is-extendable/node_modules/is-plain-object/index.js","webpack:///../../node_modules/isobject/index.js","webpack:///../../node_modules/object.omit/index.js","webpack:///../../node_modules/string-hash/index.js","webpack:///../../node_modules/react-hover-observer/dist/es/utils/noop.js","webpack:///../../node_modules/react-hover-observer/dist/es/ReactHoverObserver.js","webpack:///../../packages/studio-base/src/components/JsonTree/useGetItemStringWithTimezone.tsx","webpack:///../../packages/studio-base/src/components/MessagePathSyntax/useMessageDataItem.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/types.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/Toolbar.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/getDiff.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/DiffSpan.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/utils.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/DiffStats.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/MaybeCollapsedValue.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/copyMessageReplacer.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/Metadata.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/HighlightedValue.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/Value.tsx","webpack:///../../packages/studio-base/src/panels/RawMessages/getValueActionForValue.ts","webpack:///../../packages/studio-base/src/panels/RawMessages/index.tsx","webpack:///../../packages/studio-base/src/types/isTypedArray.ts","webpack:///../../packages/studio-base/src/util/quatToEuler.ts","webpack:///../../packages/studio-base/src/util/getItemString.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z\"\n}), 'Difference');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM14.5 7V5h-2v2h-2v2h2v2h2V9h2V7h-2zm2 6h-6v2h6v-2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm4 16H8V3h6.17L19 7.83V17z\"\n}), 'DifferenceOutlined');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z\"\n}), 'FilterAlt');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z\"\n}), 'PowerInput');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"7\",\n  cy: \"14\",\n  r: \"3\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"11\",\n  cy: \"6\",\n  r: \"3\"\n}, \"1\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"16.6\",\n  cy: \"17.6\",\n  r: \"3\"\n}, \"2\")], 'ScatterPlot');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"\n}), 'ShowChart');\nexports.default = _default;","/*!\n * is-extendable <https://github.com/jonschlinkert/is-extendable>\n *\n * Copyright (c) 2015-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isPlainObject = require('is-plain-object');\n\nmodule.exports = function isExtendable(val) {\n  return isPlainObject(val) || typeof val === 'function' || Array.isArray(val);\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * object.omit <https://github.com/jonschlinkert/object.omit>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('is-extendable');\n\nmodule.exports = function omit(obj, props, fn) {\n  if (!isObject(obj)) return {};\n\n  if (typeof props === 'function') {\n    fn = props;\n    props = [];\n  }\n\n  if (typeof props === 'string') {\n    props = [props];\n  }\n\n  var isFunction = typeof fn === 'function';\n  var keys = Object.keys(obj);\n  var res = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var val = obj[key];\n\n    if (!props || (props.indexOf(key) === -1 && (!isFunction || fn(val, key, obj)))) {\n      res[key] = val;\n    }\n  }\n  return res;\n};\n","\"use strict\";\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nmodule.exports = hash;\n","export default (function () {});","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport assign from 'object-assign';\nimport omit from 'object.omit';\n\nimport noop from './utils/noop';\n\nvar _class = function (_React$Component) {\n    _inherits(_class, _React$Component);\n\n    function _class(props) {\n        _classCallCheck(this, _class);\n\n        var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n        _this.state = {\n            isHovering: false\n        };\n\n        _this.onMouseEnter = _this.onMouseEnter.bind(_this);\n        _this.onMouseLeave = _this.onMouseLeave.bind(_this);\n        _this.onMouseOver = _this.onMouseOver.bind(_this);\n        _this.onMouseOut = _this.onMouseOut.bind(_this);\n        _this.setIsHovering = _this.setIsHovering.bind(_this);\n        _this.unsetIsHovering = _this.unsetIsHovering.bind(_this);\n        _this.componentWillUnmount = _this.componentWillUnmount.bind(_this);\n\n        _this.timerIds = [];\n        return _this;\n    }\n\n    _createClass(_class, [{\n        key: 'onMouseEnter',\n        value: function onMouseEnter(e) {\n            this.props.onMouseEnter({\n                e: e,\n                setIsHovering: this.setIsHovering,\n                unsetIsHovering: this.unsetIsHovering\n            });\n        }\n    }, {\n        key: 'onMouseLeave',\n        value: function onMouseLeave(e) {\n            this.props.onMouseLeave({\n                e: e,\n                setIsHovering: this.setIsHovering,\n                unsetIsHovering: this.unsetIsHovering\n            });\n        }\n    }, {\n        key: 'onMouseOver',\n        value: function onMouseOver(e) {\n            this.props.onMouseOver({\n                e: e,\n                setIsHovering: this.setIsHovering,\n                unsetIsHovering: this.unsetIsHovering\n            });\n        }\n    }, {\n        key: 'onMouseOut',\n        value: function onMouseOut(e) {\n            this.props.onMouseOut({\n                e: e,\n                setIsHovering: this.setIsHovering,\n                unsetIsHovering: this.unsetIsHovering\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.clearTimers();\n        }\n    }, {\n        key: 'setIsHovering',\n        value: function setIsHovering() {\n            var _this2 = this;\n\n            this.clearTimers();\n\n            var hoverScheduleId = setTimeout(function () {\n                var newState = { isHovering: true };\n                _this2.setState(newState, function () {\n                    _this2.props.onHoverChanged(newState);\n                });\n            }, this.props.hoverDelayInMs);\n\n            this.timerIds.push(hoverScheduleId);\n        }\n    }, {\n        key: 'unsetIsHovering',\n        value: function unsetIsHovering() {\n            var _this3 = this;\n\n            this.clearTimers();\n\n            var hoverOffScheduleId = setTimeout(function () {\n                var newState = { isHovering: false };\n                _this3.setState(newState, function () {\n                    _this3.props.onHoverChanged(newState);\n                });\n            }, this.props.hoverOffDelayInMs);\n\n            this.timerIds.push(hoverOffScheduleId);\n        }\n    }, {\n        key: 'clearTimers',\n        value: function clearTimers() {\n            var ids = this.timerIds;\n            while (ids.length) {\n                clearTimeout(ids.pop());\n            }\n        }\n    }, {\n        key: 'getIsReactComponent',\n        value: function getIsReactComponent(reactElement) {\n            return typeof reactElement.type === 'function';\n        }\n    }, {\n        key: 'shouldDecorateChild',\n        value: function shouldDecorateChild(child) {\n            return !!child && this.getIsReactComponent(child) && this.props.shouldDecorateChildren;\n        }\n    }, {\n        key: 'decorateChild',\n        value: function decorateChild(child, props) {\n            return cloneElement(child, props);\n        }\n    }, {\n        key: 'renderChildrenWithProps',\n        value: function renderChildrenWithProps(children, props) {\n            var _this4 = this;\n\n            if (typeof children === 'function') {\n                return children(props);\n            }\n\n            return Children.map(children, function (child) {\n                return _this4.shouldDecorateChild(child) ? _this4.decorateChild(child, props) : child;\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                children = _props.children,\n                className = _props.className;\n\n            var childProps = assign({}, { isHovering: this.state.isHovering }, omit(this.props, ['children', 'className', 'hoverDelayInMs', 'hoverOffDelayInMs', 'onHoverChanged', 'onMouseEnter', 'onMouseLeave', 'onMouseOver', 'onMouseOut', 'shouldDecorateChildren']));\n\n            return React.createElement(\n                'div',\n                {\n                    className: className,\n                    onMouseEnter: this.onMouseEnter,\n                    onMouseLeave: this.onMouseLeave,\n                    onMouseOver: this.onMouseOver,\n                    onMouseOut: this.onMouseOut\n                },\n                this.renderChildrenWithProps(children, childProps)\n            );\n        }\n    }]);\n\n    return _class;\n}(React.Component);\n\n_class.displayName = 'ReactHoverObserver';\n_class.defaultProps = {\n    hoverDelayInMs: 0,\n    hoverOffDelayInMs: 0,\n    onHoverChanged: noop,\n    onMouseEnter: function onMouseEnter(_ref) {\n        var setIsHovering = _ref.setIsHovering;\n        return setIsHovering();\n    },\n    onMouseLeave: function onMouseLeave(_ref2) {\n        var unsetIsHovering = _ref2.unsetIsHovering;\n        return unsetIsHovering();\n    },\n    onMouseOver: noop,\n    onMouseOut: noop,\n    shouldDecorateChildren: true\n};\n_class.propTypes = {\n    className: PropTypes.string,\n    hoverDelayInMs: PropTypes.number,\n    hoverOffDelayInMs: PropTypes.number,\n    onHoverChanged: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onMouseOver: PropTypes.func,\n    onMouseOut: PropTypes.func,\n    shouldDecorateChildren: PropTypes.bool\n};\nexport default _class;\n;","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { ReactNode, useCallback } from \"react\";\n\nimport { AppSetting } from \"@foxglove/studio-base/AppSetting\";\nimport { useAppConfigurationValue } from \"@foxglove/studio-base/hooks/useAppConfigurationValue\";\nimport { getItemString } from \"@foxglove/studio-base/util/getItemString\";\n\nexport default function useGetItemStringWithTimezone(): (\n  type: string,\n  data: unknown,\n  itemType: ReactNode,\n  itemString: string,\n) => ReactNode {\n  const [timezone] = useAppConfigurationValue<string>(AppSetting.TIMEZONE);\n  return useCallback(\n    (type: string, data: unknown, itemType: ReactNode, itemString: string) =>\n      getItemString(type, data, itemType, itemString, [], timezone),\n    [timezone],\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { useCallback, useMemo } from \"react\";\n\nimport { useMessageReducer } from \"@foxglove/studio-base/PanelAPI\";\nimport { MessageEvent } from \"@foxglove/studio-base/players/types\";\n\nimport parseRosPath from \"./parseRosPath\";\nimport {\n  useCachedGetMessagePathDataItems,\n  MessageAndData,\n} from \"./useCachedGetMessagePathDataItems\";\n\ntype Options = {\n  historySize: number;\n};\n\ntype ReducedValue = {\n  // Matched message (events) oldest message first\n  matches: MessageAndData[];\n\n  // The latest set of message events recevied to addMessages\n  messageEvents: readonly Readonly<MessageEvent>[];\n\n  // The path used to match these messages.\n  path: string;\n};\n\n/**\n * Return an array of MessageAndData[] for matching messages on @param path.\n *\n * The first array item is the oldest matched message, and the last item is the newest.\n *\n * The `historySize` option configures how many matching messages to keep. The default is 1.\n */\nexport function useMessageDataItem(path: string, options?: Options): ReducedValue[\"matches\"] {\n  const { historySize = 1 } = options ?? {};\n  const rosPath = useMemo(() => parseRosPath(path), [path]);\n  const topics = useMemo(() => (rosPath ? [rosPath.topicName] : []), [rosPath]);\n\n  const cachedGetMessagePathDataItems = useCachedGetMessagePathDataItems([path]);\n\n  const addMessages = useCallback(\n    (prevValue: ReducedValue, messageEvents: Readonly<MessageEvent[]>): ReducedValue => {\n      if (messageEvents.length === 0) {\n        return prevValue;\n      }\n\n      const newMatches: MessageAndData[] = [];\n\n      // Iterate backwards since our default history size is 1 and we might not need to visit all messages\n      // This does mean we need to flip newMatches around since we want to store older items first\n      for (let i = messageEvents.length - 1; i >= 0 && newMatches.length < historySize; --i) {\n        const messageEvent = messageEvents[i]!;\n        const queriedData = cachedGetMessagePathDataItems(path, messageEvent);\n        if (queriedData && queriedData.length > 0) {\n          newMatches.push({ messageEvent, queriedData });\n        }\n      }\n\n      // We want older items to be first in the array. Since we iterated backwards\n      // we reverse the matches.\n      const reversed = newMatches.reverse();\n      if (newMatches.length === historySize) {\n        return {\n          matches: reversed,\n          messageEvents,\n          path,\n        };\n      }\n\n      const prevMatches = prevValue.matches;\n      return {\n        matches: prevMatches.concat(reversed).slice(-historySize),\n        messageEvents,\n        path,\n      };\n    },\n    [cachedGetMessagePathDataItems, historySize, path],\n  );\n\n  const restore = useCallback(\n    (prevValue?: ReducedValue): ReducedValue => {\n      if (!prevValue) {\n        return {\n          matches: [],\n          messageEvents: [],\n          path,\n        };\n      }\n\n      // re-filter the previous batch of messages\n      const newMatches: MessageAndData[] = [];\n      for (const messageEvent of prevValue.messageEvents) {\n        const queriedData = cachedGetMessagePathDataItems(path, messageEvent);\n        if (queriedData && queriedData.length > 0) {\n          newMatches.push({ messageEvent, queriedData });\n        }\n      }\n\n      // Return a new message set if we have matching messages or this is a different path\n      // than the path used to fetch the previous set of messages.\n      if (newMatches.length > 0 || path !== prevValue.path) {\n        return {\n          matches: newMatches.slice(-historySize),\n          messageEvents: prevValue.messageEvents,\n          path,\n        };\n      }\n\n      return prevValue;\n    },\n    [cachedGetMessagePathDataItems, historySize, path],\n  );\n\n  const reducedValue = useMessageReducer<ReducedValue>({\n    topics,\n    addMessages,\n    restore,\n  });\n\n  return reducedValue.matches;\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\n// Terse to save space in layout. c = collapsed, e = expanded.\ntype NodeExpansion = \"all\" | \"none\" | Record<string, \"e\" | \"c\">;\n\nexport type RawMessagesPanelConfig = {\n  diffEnabled: boolean;\n  diffMethod: \"custom\" | \"previous message\";\n  diffTopicPath: string;\n  expansion?: NodeExpansion;\n  showFullMessageForDiff: boolean;\n  topicPath: string;\n};\n\nexport const Constants = {\n  CUSTOM_METHOD: \"custom\",\n  PREV_MSG_METHOD: \"previous message\",\n} as const;\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport DiffIcon from \"@mui/icons-material/Difference\";\nimport DiffOutlinedIcon from \"@mui/icons-material/DifferenceOutlined\";\nimport UnfoldLessIcon from \"@mui/icons-material/UnfoldLess\";\nimport UnfoldMoreIcon from \"@mui/icons-material/UnfoldMore\";\nimport { IconButton, MenuItem, Select, SelectChangeEvent } from \"@mui/material\";\nimport { makeStyles } from \"tss-react/mui\";\n\nimport { Topic } from \"@foxglove/studio\";\nimport MessagePathInput from \"@foxglove/studio-base/components/MessagePathSyntax/MessagePathInput\";\nimport PanelToolbar from \"@foxglove/studio-base/components/PanelToolbar\";\nimport Stack from \"@foxglove/studio-base/components/Stack\";\nimport { SaveConfig } from \"@foxglove/studio-base/types/panels\";\n\nimport { Constants, RawMessagesPanelConfig } from \"./types\";\n\ntype Props = {\n  canExpandAll: boolean;\n  diffEnabled: boolean;\n  diffMethod: RawMessagesPanelConfig[\"diffMethod\"];\n  diffTopicPath: string;\n  onDiffTopicPathChange: (path: string) => void;\n  onToggleDiff: () => void;\n  onToggleExpandAll: () => void;\n  onTopicPathChange: (path: string) => void;\n  saveConfig: SaveConfig<RawMessagesPanelConfig>;\n  topic?: Topic;\n  topicPath: string;\n};\n\nconst useStyles = makeStyles()((theme) => ({\n  iconButton: {\n    \"&.MuiIconButton-root\": {\n      padding: theme.spacing(0.25),\n    },\n  },\n}));\n\nfunction ToolbarComponent(props: Props): JSX.Element {\n  const {\n    canExpandAll,\n    diffEnabled,\n    diffMethod,\n    diffTopicPath,\n    onDiffTopicPathChange,\n    onToggleDiff,\n    onToggleExpandAll,\n    onTopicPathChange,\n    saveConfig,\n    topic,\n    topicPath,\n  } = props;\n\n  const { classes } = useStyles();\n\n  return (\n    <PanelToolbar>\n      <IconButton\n        className={classes.iconButton}\n        title=\"Toggle diff\"\n        onClick={onToggleDiff}\n        color={diffEnabled ? \"default\" : \"inherit\"}\n        size=\"small\"\n      >\n        {diffEnabled ? <DiffIcon fontSize=\"small\" /> : <DiffOutlinedIcon fontSize=\"small\" />}\n      </IconButton>\n      <IconButton\n        className={classes.iconButton}\n        title={canExpandAll ? \"Expand all\" : \"Collapse all\"}\n        onClick={onToggleExpandAll}\n        data-testid=\"expand-all\"\n        size=\"small\"\n      >\n        {canExpandAll ? <UnfoldMoreIcon fontSize=\"small\" /> : <UnfoldLessIcon fontSize=\"small\" />}\n      </IconButton>\n      <Stack fullWidth paddingLeft={0.25}>\n        <MessagePathInput\n          index={0}\n          path={topicPath}\n          onChange={onTopicPathChange}\n          inputStyle={{ height: 20 }}\n        />\n        {diffEnabled && (\n          <Stack direction=\"row\" flex=\"auto\">\n            <Select\n              variant=\"filled\"\n              size=\"small\"\n              title=\"Diff method\"\n              value={diffMethod}\n              MenuProps={{ MenuListProps: { dense: true } }}\n              onChange={(event: SelectChangeEvent) =>\n                saveConfig({\n                  diffMethod: event.target.value as RawMessagesPanelConfig[\"diffMethod\"],\n                })\n              }\n            >\n              <MenuItem value={Constants.PREV_MSG_METHOD}>{Constants.PREV_MSG_METHOD}</MenuItem>\n              <MenuItem value={Constants.CUSTOM_METHOD}>custom</MenuItem>\n            </Select>\n            {diffMethod === Constants.CUSTOM_METHOD && (\n              <MessagePathInput\n                index={1}\n                path={diffTopicPath}\n                onChange={onDiffTopicPathChange}\n                inputStyle={{ height: \"100%\" }}\n                {...(topic ? { prioritizedDatatype: topic.schemaName } : {})}\n              />\n            )}\n          </Stack>\n        )}\n      </Stack>\n    </PanelToolbar>\n  );\n}\n\nexport const Toolbar = React.memo(ToolbarComponent);\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\nimport { every, uniq, keyBy, isEmpty } from \"lodash\";\n\nimport { isTypicalFilterName } from \"@foxglove/studio-base/components/MessagePathSyntax/isTypicalFilterName\";\n\nexport const diffArrow = \"->\";\nexport const diffLabels = {\n  ADDED: {\n    labelText: \"STUDIO_DIFF___ADDED\",\n    color: \"#404047\",\n    backgroundColor: \"#daffe7\",\n    invertedBackgroundColor: \"#182924\",\n    indicator: \"+\",\n  },\n  DELETED: {\n    labelText: \"STUDIO_DIFF___DELETED\",\n    color: \"#404047\",\n    backgroundColor: \"#ffdee3\",\n    invertedBackgroundColor: \"#3d2327\",\n    indicator: \"-\",\n  },\n  CHANGED: {\n    labelText: \"STUDIO_DIFF___CHANGED\",\n    color: \"#eba800\",\n  },\n  ID: { labelText: \"STUDIO_DIFF___ID\" },\n} as const;\n\nexport const diffLabelsByLabelText = keyBy(Object.values(diffLabels), \"labelText\");\n\nexport type DiffObject = Record<string, unknown>;\nexport default function getDiff({\n  before,\n  after,\n  idLabel,\n  showFullMessageForDiff = false,\n}: {\n  before: unknown;\n  after: unknown;\n  idLabel?: string;\n  showFullMessageForDiff?: boolean;\n}): undefined | DiffObject | DiffObject[] {\n  if (Array.isArray(before) && Array.isArray(after)) {\n    let idToCompareWith: string | undefined;\n    const allItems = before.concat(after);\n    if (typeof allItems[0] === \"object\" && allItems[0] != undefined) {\n      let candidateIdsToCompareWith: Record<string, { before: unknown[]; after: unknown[] }> = {};\n      if (allItems[0].id != undefined) {\n        candidateIdsToCompareWith.id = { before: [], after: [] };\n      }\n      for (const key in allItems[0]) {\n        if (isTypicalFilterName(key)) {\n          candidateIdsToCompareWith[key] = { before: [], after: [] };\n        }\n      }\n      if (!every(allItems, (item) => typeof item === \"object\" && item)) {\n        candidateIdsToCompareWith = {};\n      }\n      for (const [idKey, candidates] of Object.entries(candidateIdsToCompareWith)) {\n        for (const beforeItem of before) {\n          if (beforeItem[idKey] != undefined) {\n            candidates.before.push(beforeItem[idKey]);\n          }\n        }\n      }\n      for (const [idKey, candidates] of Object.entries(candidateIdsToCompareWith)) {\n        for (const afterItem of after) {\n          if (afterItem[idKey] != undefined) {\n            candidates.after.push(afterItem[idKey]);\n          }\n        }\n      }\n      for (const [idKey, { before: candidateIdBefore, after: candidateIdAfter }] of Object.entries(\n        candidateIdsToCompareWith,\n      )) {\n        if (\n          uniq(candidateIdBefore).length === before.length &&\n          uniq(candidateIdAfter).length === after.length\n        ) {\n          idToCompareWith = idKey;\n          break;\n        }\n      }\n    }\n\n    if (idToCompareWith != undefined) {\n      const unmatchedAfterById = keyBy(after, idToCompareWith);\n      const diff = [];\n      for (const beforeItem of before) {\n        if (beforeItem == undefined || typeof beforeItem !== \"object\") {\n          throw new Error(\"beforeItem is invalid; should have checked this earlier\");\n        }\n        const id = beforeItem[idToCompareWith];\n        const innerDiff = getDiff({\n          before: beforeItem,\n          after: unmatchedAfterById[id],\n          idLabel: idToCompareWith,\n          showFullMessageForDiff,\n        });\n        delete unmatchedAfterById[id];\n        if (!isEmpty(innerDiff)) {\n          const isDeleted =\n            Object.keys(innerDiff as DiffObject).length === 1 &&\n            Object.keys(innerDiff as DiffObject)[0] === diffLabels.DELETED.labelText;\n          diff.push(\n            isDeleted\n              ? (innerDiff as DiffObject)\n              : {\n                  [diffLabels.ID.labelText]: { [idToCompareWith]: id },\n                  ...(innerDiff as DiffObject),\n                },\n          );\n        }\n      }\n      for (const afterItem of Object.values(unmatchedAfterById)) {\n        const innerDiff = getDiff({\n          before: undefined,\n          after: afterItem,\n          idLabel: idToCompareWith,\n          showFullMessageForDiff,\n        });\n        if (!isEmpty(innerDiff)) {\n          diff.push(innerDiff as DiffObject);\n        }\n      }\n      return diff;\n    }\n  }\n\n  if (typeof before === \"object\" && typeof after === \"object\" && before && after) {\n    const diff: DiffObject = {};\n    const allKeys = Object.keys(before).concat(Object.keys(after));\n    for (const key of uniq(allKeys)) {\n      const innerDiff = getDiff({\n        before: (before as DiffObject)[key],\n        after: (after as DiffObject)[key],\n        idLabel: undefined,\n        showFullMessageForDiff,\n      });\n      if (!isEmpty(innerDiff)) {\n        diff[key] = innerDiff;\n      } else if (showFullMessageForDiff) {\n        diff[key] = (before as DiffObject)[key];\n      }\n    }\n    return diff;\n  }\n\n  if (before === after) {\n    return undefined;\n  }\n  if (before == undefined) {\n    const afterIsNotObj = Array.isArray(after) || typeof after !== \"object\";\n    if (!idLabel || afterIsNotObj) {\n      return { [diffLabels.ADDED.labelText]: after };\n    }\n    const idLabelObj = {\n      [diffLabels.ID.labelText]: { [idLabel]: { ...(after as DiffObject) }[idLabel] },\n    };\n    return {\n      [diffLabels.ADDED.labelText]: { ...idLabelObj, ...(after as DiffObject) },\n    };\n  }\n  if (after == undefined) {\n    const beforeIsNotObj = Array.isArray(before) || typeof before !== \"object\";\n    if (!idLabel || beforeIsNotObj) {\n      return { [diffLabels.DELETED.labelText]: before };\n    }\n    const idLabelObj = {\n      [diffLabels.ID.labelText]: { [idLabel]: { ...(before as DiffObject) }[idLabel] },\n    };\n    return {\n      [diffLabels.DELETED.labelText]: { ...idLabelObj, ...(before as DiffObject) },\n    };\n  }\n\n  const beforeText = typeof before === \"bigint\" ? before.toString() : JSON.stringify(before);\n  const afterText = typeof after === \"bigint\" ? after.toString() : JSON.stringify(after);\n\n  return {\n    [diffLabels.CHANGED.labelText]: `${beforeText} ${diffArrow} ${afterText}`,\n  };\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport { CSSProperties, ReactNode } from \"react\";\nimport { makeStyles } from \"tss-react/mui\";\n\nconst useStyles = makeStyles()((theme) => ({\n  root: {\n    padding: theme.spacing(0, 0.5),\n    textDecoration: \"inherit\",\n    whiteSpace: \"pre-line\",\n  },\n}));\n\ntype Props = {\n  children?: ReactNode;\n  style?: CSSProperties;\n};\n\nexport function DiffSpan(props: Props): JSX.Element {\n  const { children, style } = props;\n\n  const { classes } = useStyles();\n\n  return (\n    <span className={classes.root} style={style}>\n      {children}\n    </span>\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { first, kebabCase, last } from \"lodash\";\n\nimport { ros1 } from \"@foxglove/rosmsg-msgs-common\";\nimport { foxgloveMessageSchemas } from \"@foxglove/schemas/internal\";\nimport { diffLabels, DiffObject } from \"@foxglove/studio-base/panels/RawMessages/getDiff\";\n\nexport const DATA_ARRAY_PREVIEW_LIMIT = 20;\nconst ROS1_COMMON_MSG_PACKAGES = new Set(Object.keys(ros1).map((key) => key.split(\"/\")[0]!));\nROS1_COMMON_MSG_PACKAGES.add(\"turtlesim\");\n\nfunction isTypedArray(obj: unknown) {\n  return Boolean(\n    obj != undefined &&\n      typeof obj === \"object\" &&\n      ArrayBuffer.isView(obj) &&\n      !(obj instanceof DataView),\n  );\n}\n\n/**\n * Recursively traverses all keypaths in obj, for use in JSON tree expansion.\n */\nexport function generateDeepKeyPaths(obj: unknown, maxArrayLength: number): Set<string> {\n  const keys = new Set<string>();\n  const recurseMapKeys = (path: string[], nestedObj: unknown) => {\n    if (nestedObj == undefined) {\n      return;\n    }\n\n    if (typeof nestedObj !== \"object\" && typeof nestedObj !== \"function\") {\n      return;\n    }\n\n    if (Array.isArray(nestedObj) && nestedObj.length > maxArrayLength) {\n      return;\n    }\n\n    if (isTypedArray(nestedObj)) {\n      return;\n    }\n\n    if (path.length > 0) {\n      keys.add(path.join(\"~\"));\n    }\n\n    for (const key of Object.getOwnPropertyNames(nestedObj)) {\n      const newPath = [key, ...path];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const value = (nestedObj as any)[key];\n      recurseMapKeys(newPath, value as object);\n    }\n  };\n  recurseMapKeys([], obj);\n  return keys;\n}\n\nexport function getChangeCounts(\n  data: DiffObject,\n  startingCounts: {\n    -readonly [K in (typeof diffLabels)[\"ADDED\" | \"CHANGED\" | \"DELETED\"][\"labelText\"]]: number;\n  },\n): {\n  [key: string]: number;\n} {\n  for (const key in data) {\n    if (\n      key === diffLabels.ADDED.labelText ||\n      key === diffLabels.CHANGED.labelText ||\n      key === diffLabels.DELETED.labelText\n    ) {\n      startingCounts[key]++;\n    } else if (typeof data[key] === \"object\" && data[key] != undefined) {\n      getChangeCounts(data[key] as DiffObject, startingCounts);\n    }\n  }\n  return startingCounts;\n}\n\nconst foxgloveDocsLinksByDatatype = new Map<string, string>();\nfor (const schema of Object.values(foxgloveMessageSchemas)) {\n  const url = `https://foxglove.dev/docs/studio/messages/${kebabCase(schema.name)}`;\n  foxgloveDocsLinksByDatatype.set(`foxglove_msgs/${schema.name}`, url);\n  foxgloveDocsLinksByDatatype.set(`foxglove_msgs/msg/${schema.name}`, url);\n  foxgloveDocsLinksByDatatype.set(`foxglove.${schema.name}`, url);\n}\n\nexport function getMessageDocumentationLink(datatype: string): string | undefined {\n  const parts = datatype.split(/[/.]/);\n  const pkg = first(parts);\n  const filename = last(parts);\n\n  if (pkg != undefined && ROS1_COMMON_MSG_PACKAGES.has(pkg)) {\n    return `https://docs.ros.org/api/${pkg}/html/msg/${filename}.html`;\n  }\n\n  const foxgloveDocsLink = foxgloveDocsLinksByDatatype.get(datatype);\n  if (foxgloveDocsLink != undefined) {\n    return foxgloveDocsLink;\n  }\n\n  return undefined;\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport { Typography } from \"@mui/material\";\nimport { ReactNode } from \"react\";\nimport { makeStyles } from \"tss-react/mui\";\n\nimport { diffLabels, DiffObject } from \"@foxglove/studio-base/panels/RawMessages/getDiff\";\nimport { getChangeCounts } from \"@foxglove/studio-base/panels/RawMessages/utils\";\n\nconst useStyles = makeStyles()((theme) => ({\n  diff: {\n    float: \"right\",\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: theme.spacing(0.75),\n    marginRight: theme.spacing(0.75),\n  },\n  badge: {\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    gap: theme.spacing(0.25),\n    padding: theme.spacing(0, 0.75),\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: theme.palette.background.paper,\n  },\n  changeIndicator: {\n    display: \"inline-block\",\n    width: theme.spacing(0.75),\n    height: theme.spacing(0.75),\n    borderRadius: \"50%\",\n    backgroundColor: theme.palette.warning.main,\n  },\n}));\n\nexport default function DiffStats({\n  data,\n  itemType,\n}: {\n  data: DiffObject;\n  itemType: ReactNode;\n}): JSX.Element {\n  const { classes } = useStyles();\n  const { ADDED, DELETED, CHANGED, ID } = diffLabels;\n  const id = data[ID.labelText] as DiffObject | undefined;\n  const idLabel = id\n    ? Object.keys(id)\n        .map((key) => `${key}: ${id[key]}`)\n        .join(\", \")\n    : undefined;\n\n  const counts = getChangeCounts(data, {\n    [ADDED.labelText]: 0,\n    [CHANGED.labelText]: 0,\n    [DELETED.labelText]: 0,\n  });\n\n  return (\n    <>\n      {id && (\n        <>\n          {itemType} {idLabel}\n        </>\n      )}\n      <div className={classes.diff}>\n        {(counts[ADDED.labelText] !== 0 || counts[DELETED.labelText] !== 0) && (\n          <div className={classes.badge}>\n            {counts[ADDED.labelText] !== 0 && (\n              <Typography variant=\"caption\" color=\"success.main\">\n                {`${diffLabels.ADDED.indicator}${counts[ADDED.labelText]}`}\n              </Typography>\n            )}\n            {counts[DELETED.labelText] !== 0 && (\n              <Typography variant=\"caption\" color=\"error.main\">\n                {`${diffLabels.DELETED.indicator}${counts[DELETED.labelText]}`}\n              </Typography>\n            )}\n          </div>\n        )}\n        {counts[CHANGED.labelText] !== 0 && <div className={classes.changeIndicator} />}\n      </div>\n    </>\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { Tooltip } from \"@mui/material\";\nimport { useCallback, useState } from \"react\";\n\n// Strings longer than this many characters will start off collapsed.\nconst COLLAPSE_TEXT_OVER_LENGTH = 512;\n\ntype Props = { itemLabel: string };\n\nexport default function MaybeCollapsedValue({ itemLabel }: Props): JSX.Element {\n  const lengthOverLimit = itemLabel.length >= COLLAPSE_TEXT_OVER_LENGTH;\n\n  const [showingEntireLabel, setShowingEntireLabel] = useState(!lengthOverLimit);\n\n  const expandText = useCallback(() => setShowingEntireLabel(true), []);\n\n  const truncatedItemText = showingEntireLabel\n    ? itemLabel\n    : itemLabel.slice(0, COLLAPSE_TEXT_OVER_LENGTH);\n\n  // Tooltip is expensive to render. Skip it if we're not truncating.\n  if (!lengthOverLimit) {\n    return <span>{itemLabel}</span>;\n  }\n\n  return (\n    <Tooltip\n      title={!showingEntireLabel ? \"Text was truncated, click to see all\" : \"\"}\n      placement=\"top\"\n    >\n      <span onClick={expandText} style={{ cursor: !showingEntireLabel ? \"pointer\" : \"inherit\" }}>\n        {`${truncatedItemText}${!showingEntireLabel ? \"...\" : \"\"}`}\n      </span>\n    </Tooltip>\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport { isTypedArray } from \"@foxglove/studio-base/types/isTypedArray\";\n\n/** A JSON.stringify replacer to support bigints and typed arrays */\nexport function copyMessageReplacer(_key: unknown, value: unknown): unknown {\n  if (value == undefined) {\n    return;\n  }\n  if (typeof value === \"bigint\") {\n    return value.toString();\n  }\n  if (isTypedArray(value)) {\n    return Array.from<unknown>(value);\n  }\n  return value;\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { Link, Typography } from \"@mui/material\";\nimport { useCallback } from \"react\";\nimport { useLatest } from \"react-use\";\nimport { makeStyles } from \"tss-react/mui\";\n\nimport CopyButton from \"@foxglove/studio-base/components/CopyButton\";\nimport Stack from \"@foxglove/studio-base/components/Stack\";\nimport { MessageEvent } from \"@foxglove/studio-base/players/types\";\nimport { formatTimeRaw } from \"@foxglove/studio-base/util/time\";\n\nimport { copyMessageReplacer } from \"./copyMessageReplacer\";\nimport { getMessageDocumentationLink } from \"./utils\";\n\nconst useStyles = makeStyles()((theme) => ({\n  button: {\n    padding: theme.spacing(0.125),\n\n    \".MuiSvgIcon-root\": {\n      fontSize: `${theme.typography.pxToRem(16)} !important`,\n    },\n    \".MuiButton-startIcon\": {\n      marginRight: theme.spacing(0.5),\n    },\n    \"&:hover\": {\n      backgroundColor: \"transparent\",\n    },\n  },\n}));\n\ntype Props = {\n  data: unknown;\n  diffData: unknown;\n  diff: unknown;\n  datatype?: string;\n  message: MessageEvent;\n  diffMessage?: MessageEvent;\n};\n\nexport default function Metadata({\n  data,\n  diffData,\n  diff,\n  datatype,\n  message,\n  diffMessage,\n}: Props): JSX.Element {\n  const { classes } = useStyles();\n\n  // Access these by ref so that our callbacks aren't invalidated and CopyButton\n  // memoization is stable.\n  const latestData = useLatest(data);\n  const latestDiffData = useLatest(diffData);\n\n  const docsLink = datatype ? getMessageDocumentationLink(datatype) : undefined;\n  const copyData = useCallback(\n    () => JSON.stringify(latestData.current, copyMessageReplacer, 2) ?? \"\",\n    [latestData],\n  );\n  const copyDiffData = useCallback(\n    () => JSON.stringify(latestDiffData.current, copyMessageReplacer, 2) ?? \"\",\n    [latestDiffData],\n  );\n  const copyDiff = useCallback(() => JSON.stringify(diff, copyMessageReplacer, 2) ?? \"\", [diff]);\n\n  return (\n    <Stack alignItems=\"flex-start\" paddingInline={0.25} paddingBlockStart={0.75}>\n      <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n        <Typography variant=\"caption\" lineHeight={1.2} color=\"text.secondary\">\n          {diffMessage ? (\n            \"base\"\n          ) : docsLink ? (\n            <Link\n              target=\"_blank\"\n              color=\"inherit\"\n              variant=\"caption\"\n              underline=\"hover\"\n              rel=\"noopener noreferrer\"\n              href={docsLink}\n            >\n              {datatype}\n            </Link>\n          ) : (\n            datatype\n          )}\n          {` @ ${formatTimeRaw(message.receiveTime)} sec`}\n        </Typography>\n        <CopyButton size=\"small\" iconSize=\"inherit\" className={classes.button} getText={copyData} />\n      </Stack>\n\n      {diffMessage?.receiveTime && (\n        <>\n          <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n            <Typography\n              variant=\"caption\"\n              lineHeight={1.2}\n              color=\"text.secondary\"\n            >{`diff @ ${formatTimeRaw(diffMessage.receiveTime)} sec `}</Typography>\n            <CopyButton\n              size=\"small\"\n              iconSize=\"inherit\"\n              className={classes.button}\n              getText={copyDiffData}\n            />\n          </Stack>\n          <CopyButton size=\"small\" iconSize=\"inherit\" className={classes.button} getText={copyDiff}>\n            Copy diff of msgs\n          </CopyButton>\n        </>\n      )}\n    </Stack>\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2019-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { diffLabels, diffArrow } from \"@foxglove/studio-base/panels/RawMessages/getDiff\";\n\nimport { DiffSpan } from \"./DiffSpan\";\nimport MaybeCollapsedValue from \"./MaybeCollapsedValue\";\n\ntype Props = {\n  itemLabel: string;\n};\n\nexport default function HighlightedValue({ itemLabel }: Props): JSX.Element {\n  const diffArrowStr = ` ${diffArrow} `;\n  // react-json-tree's valueRenderer only gets called for primitives, so diff before/after values must be at same level by the time it gets to the tree\n  const splitItemLabel = `${itemLabel}`.split(diffArrowStr);\n  const itemLabelContainsChange = splitItemLabel.length === 2;\n  if (itemLabelContainsChange) {\n    const [before, after] = splitItemLabel;\n    const beforeText = JSON.parse(JSON.stringify(before) ?? \"\");\n    const afterText = JSON.parse(JSON.stringify(after) ?? \"\");\n    return (\n      <DiffSpan style={{ color: diffLabels.CHANGED.color }}>\n        <MaybeCollapsedValue itemLabel={beforeText} />\n        {diffArrowStr}\n        <MaybeCollapsedValue itemLabel={afterText} />\n      </DiffSpan>\n    );\n  }\n\n  return (\n    <DiffSpan>\n      <MaybeCollapsedValue itemLabel={itemLabel} />\n    </DiffSpan>\n  );\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport CheckIcon from \"@mui/icons-material/Check\";\nimport CopyAllIcon from \"@mui/icons-material/CopyAll\";\nimport ErrorIcon from \"@mui/icons-material/Error\";\nimport FilterIcon from \"@mui/icons-material/FilterAlt\";\nimport StateTransitionsIcon from \"@mui/icons-material/PowerInput\";\nimport ScatterPlotIcon from \"@mui/icons-material/ScatterPlot\";\nimport LineChartIcon from \"@mui/icons-material/ShowChart\";\nimport { IconButtonProps, Tooltip, TooltipProps } from \"@mui/material\";\nimport { useCallback, useMemo, useState, useRef, useEffect } from \"react\";\nimport { withStyles, makeStyles } from \"tss-react/mui\";\n\nimport HoverableIconButton from \"@foxglove/studio-base/components/HoverableIconButton\";\nimport Stack from \"@foxglove/studio-base/components/Stack\";\nimport { openSiblingPlotPanel, plotableRosTypes } from \"@foxglove/studio-base/panels/Plot\";\nimport {\n  openSiblingStateTransitionsPanel,\n  transitionableRosTypes,\n} from \"@foxglove/studio-base/panels/StateTransitions\";\nimport { OpenSiblingPanel } from \"@foxglove/studio-base/types/panels\";\nimport clipboard from \"@foxglove/studio-base/util/clipboard\";\n\nimport HighlightedValue from \"./HighlightedValue\";\nimport { copyMessageReplacer } from \"./copyMessageReplacer\";\nimport { ValueAction } from \"./getValueActionForValue\";\n\nconst StyledIconButton = withStyles(HoverableIconButton, (theme) => ({\n  root: {\n    \"&.MuiIconButton-root\": {\n      fontSize: theme.typography.pxToRem(16),\n      opacity: 0.6,\n      padding: 0,\n    },\n  },\n}));\n\nconst useStyles = makeStyles()({\n  // always hidden, just used to keep space and prevent resizing on hover\n  placeholderActionContainer: {\n    alignItems: \"inherit\",\n    display: \"inherit\",\n    gap: \"inherit\",\n    visibility: \"hidden\",\n  },\n});\n\ntype ValueProps = {\n  arrLabel: string;\n  basePath: string;\n  itemLabel: string;\n  itemValue: unknown;\n  valueAction: ValueAction | undefined;\n  onTopicPathChange: (arg0: string) => void;\n  openSiblingPanel: OpenSiblingPanel;\n};\n\ntype ValueActionItem = {\n  key: string;\n  tooltip: TooltipProps[\"title\"];\n  icon: React.ReactNode;\n  onClick?: IconButtonProps[\"onClick\"];\n  activeColor?: IconButtonProps[\"color\"];\n  color?: IconButtonProps[\"color\"];\n};\n\nconst emptyAction: ValueActionItem = {\n  key: \"\",\n  tooltip: \"\",\n  icon: <ErrorIcon fontSize=\"inherit\" />,\n};\n\nconst MAX_ACTION_ITEMS = 4;\n\nfunction Value(props: ValueProps): JSX.Element {\n  const timeOutID = useRef<ReturnType<typeof setTimeout> | undefined>(undefined);\n  const {\n    arrLabel,\n    basePath,\n    itemLabel,\n    itemValue,\n    valueAction,\n    onTopicPathChange,\n    openSiblingPanel,\n  } = props;\n  const [copied, setCopied] = useState(false);\n\n  const openPlotPanel = useCallback(\n    (pathSuffix: string) => () =>\n      openSiblingPlotPanel(openSiblingPanel, `${basePath}${pathSuffix}`),\n    [basePath, openSiblingPanel],\n  );\n\n  const openStateTransitionsPanel = useCallback(\n    (pathSuffix: string) => () =>\n      openSiblingStateTransitionsPanel(openSiblingPanel, `${basePath}${pathSuffix}`),\n    [basePath, openSiblingPanel],\n  );\n\n  const onFilter = useCallback(\n    () => onTopicPathChange(`${basePath}${valueAction?.filterPath}`),\n    [basePath, valueAction, onTopicPathChange],\n  );\n\n  const handleCopy = useCallback((value: string) => {\n    clipboard\n      .copy(value)\n      .then(() => {\n        setCopied(true);\n        timeOutID.current = setTimeout(() => setCopied(false), 1500);\n      })\n      .catch((e) => console.warn(e));\n  }, []);\n\n  const availableActions = useMemo(() => {\n    const actions: ValueActionItem[] = [];\n    if (arrLabel.length > 0) {\n      actions.push({\n        key: \"Copy\",\n        activeColor: copied ? \"success\" : \"primary\",\n        tooltip: copied ? \"Copied\" : \"Copy to Clipboard\",\n        icon: copied ? <CheckIcon fontSize=\"inherit\" /> : <CopyAllIcon fontSize=\"inherit\" />,\n        onClick: () => handleCopy(JSON.stringify(itemValue, copyMessageReplacer, 2) ?? \"\"),\n      });\n    }\n    if (valueAction != undefined) {\n      const isPlotableType = plotableRosTypes.includes(valueAction.primitiveType);\n      const isTransitionalType = transitionableRosTypes.includes(valueAction.primitiveType);\n      const isMultiSlicePath = valueAction.multiSlicePath === valueAction.singleSlicePath;\n\n      if (valueAction.filterPath.length > 0) {\n        actions.push({\n          key: \"Filter\",\n          tooltip: \"Filter on this value\",\n          icon: <FilterIcon fontSize=\"inherit\" />,\n          onClick: onFilter,\n        });\n      }\n      if (isPlotableType) {\n        actions.push({\n          key: \"line\",\n          tooltip: \"Plot this value on a line chart\",\n          icon: <LineChartIcon fontSize=\"inherit\" />,\n          onClick: openPlotPanel(valueAction.singleSlicePath),\n        });\n      }\n      if (isPlotableType && !isMultiSlicePath) {\n        actions.push({\n          key: \"scatter\",\n          tooltip: \"Plot this value on a scatter plot\",\n          icon: <ScatterPlotIcon fontSize=\"inherit\" />,\n          onClick: openPlotPanel(valueAction.multiSlicePath),\n        });\n      }\n      if (isTransitionalType && isMultiSlicePath) {\n        actions.push({\n          key: \"stateTransitions\",\n          tooltip: \"View state transitions for this value\",\n          icon: <StateTransitionsIcon fontSize=\"inherit\" />,\n          onClick: openStateTransitionsPanel(valueAction.singleSlicePath),\n        });\n      }\n    }\n\n    return actions;\n  }, [\n    arrLabel.length,\n    copied,\n    handleCopy,\n    itemValue,\n    onFilter,\n    openPlotPanel,\n    openStateTransitionsPanel,\n    valueAction,\n  ]);\n\n  // need to keep space to prevent resizing and wrapping on hover\n  const placeholderActionsForSpacing = useMemo(() => {\n    const actions: ValueActionItem[] = [];\n    for (let i = availableActions.length; i < MAX_ACTION_ITEMS; i++) {\n      actions.push({ ...emptyAction, key: `empty-${i}` });\n    }\n    return actions;\n  }, [availableActions.length]);\n  const { classes, cx } = useStyles();\n\n  useEffect(() => {\n    return () => {\n      if (timeOutID.current != undefined) {\n        clearTimeout(timeOutID.current);\n      }\n    };\n  }, []);\n\n  // The Tooltip and StyledIconButton components seem to be expensive to render so we\n  // track our hover state and render them conditionally only when this component is\n  // hovered.\n  const [pointerOver, setPointerOver] = useState(false);\n\n  return (\n    <Stack\n      inline\n      flexWrap=\"wrap\"\n      direction=\"row\"\n      alignItems=\"center\"\n      gap={0.25}\n      onPointerEnter={() => setPointerOver(true)}\n      onPointerLeave={() => setPointerOver(false)}\n    >\n      <HighlightedValue itemLabel={itemLabel} />\n      {arrLabel}\n      {pointerOver &&\n        availableActions.map((action) => (\n          <Tooltip key={action.key} arrow title={action.tooltip} placement=\"top\">\n            <StyledIconButton\n              size=\"small\"\n              activeColor={action.activeColor}\n              onClick={action.onClick}\n              color=\"inherit\"\n              icon={action.icon}\n            />\n          </Tooltip>\n        ))}\n      <span className={cx(classes.placeholderActionContainer)}>\n        {pointerOver &&\n          placeholderActionsForSpacing.map((action) => (\n            <Tooltip key={action.key} arrow title={action.tooltip} placement=\"top\">\n              <StyledIconButton size=\"small\" color=\"inherit\" icon={action.icon} />\n            </Tooltip>\n          ))}\n      </span>\n    </Stack>\n  );\n}\n\n// In practice this seems to be an expensive component to render.\n// Memoization provides a very noticeable performance boost.\nexport default React.memo(Value);\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2018-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { MessagePathStructureItem } from \"@foxglove/studio-base/components/MessagePathSyntax/constants\";\nimport { isTypicalFilterName } from \"@foxglove/studio-base/components/MessagePathSyntax/isTypicalFilterName\";\n\nexport type ValueAction = {\n  singleSlicePath: string; // Path that will only return one value per unit of time (for line charts).\n  multiSlicePath: string; // Path that might return multiple values per unit of time (for scatter plots).\n  primitiveType: string; // The ROS primitive type that these paths point at.\n  filterPath: string; // Path to filter on using the current value\n};\n\nconst isObjectElement = (\n  value: unknown,\n  pathItem: string | number,\n  structureItem: MessagePathStructureItem,\n): boolean => {\n  return (\n    typeof pathItem === \"string\" &&\n    structureItem.structureType === \"message\" &&\n    typeof value === \"object\"\n  );\n};\n\nconst isArrayElement = (\n  value: unknown,\n  pathItem: string | number,\n  structureItem: MessagePathStructureItem,\n): boolean =>\n  typeof pathItem === \"number\" && structureItem.structureType === \"array\" && Array.isArray(value);\n\n// Given a root value (e.g. a message object), a root structureItem (e.g. a message definition),\n// and a key path to navigate down the value and strutureItem (e.g. [\"items\", 10, \"speed\"]), return\n// a bunch of paths for that navigated down value.\nexport function getValueActionForValue(\n  rootValue: unknown,\n  rootStructureItem: MessagePathStructureItem | undefined,\n  keyPath: (number | string)[],\n): ValueAction | undefined {\n  let singleSlicePath = \"\";\n  let multiSlicePath = \"\";\n  let filterPath = \"\";\n  let value: unknown = rootValue;\n  let structureItem: MessagePathStructureItem | undefined = rootStructureItem;\n  // Walk down the keyPath, while updating `value` and `structureItem`\n  for (const pathItem of keyPath) {\n    if (structureItem == undefined || value == undefined) {\n      break;\n    } else if (isObjectElement(value, pathItem, structureItem)) {\n      structureItem =\n        structureItem.structureType === \"message\" && typeof pathItem === \"string\"\n          ? structureItem.nextByName[pathItem]\n          : undefined;\n      value = (value as Record<string, unknown>)[pathItem];\n      if (multiSlicePath.endsWith(\"[:]\") && structureItem?.structureType === \"primitive\") {\n        // We're just inside a message that is inside an array, so we might want to pivot on this new value.\n        if (typeof value === \"bigint\") {\n          filterPath = `${multiSlicePath}{${pathItem}==${value.toString()}}`;\n        } else {\n          filterPath = `${multiSlicePath}{${pathItem}==${JSON.stringify(value) ?? \"\"}}`;\n        }\n      } else {\n        filterPath = \"\";\n      }\n      singleSlicePath += `.${pathItem}`;\n      multiSlicePath += `.${pathItem}`;\n    } else if (isArrayElement(value, pathItem, structureItem)) {\n      value = (value as Record<string, unknown>)[pathItem];\n      structureItem = structureItem.structureType === \"array\" ? structureItem.next : undefined;\n      multiSlicePath = `${singleSlicePath}[:]`;\n\n      // Ideally show something like `/topic.object[:]{id=123}` for the singleSlicePath, but fall\n      // back to `/topic.object[10]` if necessary.\n      let typicalFilterName;\n      if (structureItem?.structureType === \"message\") {\n        typicalFilterName = Object.entries(structureItem.nextByName).find(\n          ([key, nextStructureItem]) =>\n            nextStructureItem.structureType === \"primitive\" && isTypicalFilterName(key),\n        )?.[0];\n      }\n      if (\n        typeof value === \"object\" &&\n        value != undefined &&\n        typeof typicalFilterName === \"string\"\n      ) {\n        const filterValue = (value as Record<string, unknown>)[typicalFilterName];\n        singleSlicePath += `[:]{${typicalFilterName}==${\n          typeof filterValue === \"bigint\"\n            ? filterValue.toString()\n            : JSON.stringify(filterValue) ?? \"\"\n        }}`;\n      } else {\n        singleSlicePath += `[${pathItem}]`;\n      }\n    } else if (structureItem.structureType === \"primitive\") {\n      // ROS has primitives with nested data (time, duration).\n      // We currently don't support looking inside them.\n      return undefined;\n    } else {\n      throw new Error(`Invalid structureType: ${structureItem.structureType} for value/pathItem.`);\n    }\n  }\n  // At this point we should be looking at a primitive. If not, just return nothing.\n  if (structureItem && structureItem.structureType === \"primitive\" && value != undefined) {\n    return {\n      singleSlicePath,\n      multiSlicePath,\n      primitiveType: structureItem.primitiveType,\n      filterPath,\n    };\n  }\n  return undefined;\n}\n\n// Given root structureItem (e.g. a message definition),\n// and a key path to navigate down, return strutureItem for the field at that path\nexport const getStructureItemForPath = (\n  rootStructureItem: MessagePathStructureItem | undefined,\n  keyPath: (number | string)[],\n): MessagePathStructureItem | undefined => {\n  let structureItem: MessagePathStructureItem | undefined = rootStructureItem;\n  // Walk down the keyPath, while updating `value` and `structureItem`\n  for (const pathItem of keyPath) {\n    if (structureItem == undefined) {\n      break;\n    } else if (structureItem.structureType === \"message\" && typeof pathItem === \"string\") {\n      structureItem = structureItem.nextByName[pathItem];\n    } else if (structureItem.structureType === \"array\" && typeof pathItem === \"number\") {\n      structureItem = structureItem.next;\n    } else if (structureItem.structureType === \"primitive\") {\n      // ROS has some primitives that contain nested data (time+duration). We currently don't\n      // support looking inside them.\n      return structureItem;\n    } else {\n      throw new Error(`Invalid structureType: ${structureItem.structureType} for value/pathItem.`);\n    }\n  }\n  return structureItem;\n};\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n//\n// This file incorporates work covered by the following copyright and\n// permission notice:\n//\n//   Copyright 2018-2021 Cruise LLC\n//\n//   This source code is licensed under the Apache License, Version 2.0,\n//   found at http://www.apache.org/licenses/LICENSE-2.0\n//   You may not use this file except in compliance with the License.\n\nimport { Checkbox, FormControlLabel, Typography, useTheme } from \"@mui/material\";\n// eslint-disable-next-line no-restricted-imports\nimport { first, get, isEqual, last, padStart } from \"lodash\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport ReactHoverObserver from \"react-hover-observer\";\nimport Tree from \"react-json-tree\";\nimport { makeStyles } from \"tss-react/mui\";\n\nimport { Immutable } from \"@foxglove/studio\";\nimport { useDataSourceInfo } from \"@foxglove/studio-base/PanelAPI\";\nimport EmptyState from \"@foxglove/studio-base/components/EmptyState\";\nimport useGetItemStringWithTimezone from \"@foxglove/studio-base/components/JsonTree/useGetItemStringWithTimezone\";\nimport {\n  MessagePathStructureItem,\n  RosPath,\n} from \"@foxglove/studio-base/components/MessagePathSyntax/constants\";\nimport {\n  messagePathStructures,\n  traverseStructure,\n} from \"@foxglove/studio-base/components/MessagePathSyntax/messagePathsForDatatype\";\nimport parseRosPath from \"@foxglove/studio-base/components/MessagePathSyntax/parseRosPath\";\nimport { MessagePathDataItem } from \"@foxglove/studio-base/components/MessagePathSyntax/useCachedGetMessagePathDataItems\";\nimport { useMessageDataItem } from \"@foxglove/studio-base/components/MessagePathSyntax/useMessageDataItem\";\nimport Panel from \"@foxglove/studio-base/components/Panel\";\nimport { usePanelContext } from \"@foxglove/studio-base/components/PanelContext\";\nimport Stack from \"@foxglove/studio-base/components/Stack\";\nimport { Toolbar } from \"@foxglove/studio-base/panels/RawMessages/Toolbar\";\nimport getDiff, {\n  DiffObject,\n  diffLabels,\n  diffLabelsByLabelText,\n} from \"@foxglove/studio-base/panels/RawMessages/getDiff\";\nimport { Topic } from \"@foxglove/studio-base/players/types\";\nimport { SaveConfig } from \"@foxglove/studio-base/types/panels\";\nimport { useJsonTreeTheme } from \"@foxglove/studio-base/util/globalConstants\";\nimport { enumValuesByDatatypeAndField } from \"@foxglove/studio-base/util/selectors\";\nimport { fonts } from \"@foxglove/studio-base/util/sharedStyleConstants\";\n\nimport { DiffSpan } from \"./DiffSpan\";\nimport DiffStats from \"./DiffStats\";\nimport MaybeCollapsedValue from \"./MaybeCollapsedValue\";\nimport Metadata from \"./Metadata\";\nimport Value from \"./Value\";\nimport {\n  ValueAction,\n  getStructureItemForPath,\n  getValueActionForValue,\n} from \"./getValueActionForValue\";\nimport { Constants, RawMessagesPanelConfig } from \"./types\";\nimport { DATA_ARRAY_PREVIEW_LIMIT, generateDeepKeyPaths } from \"./utils\";\n\ntype Props = {\n  config: Immutable<RawMessagesPanelConfig>;\n  saveConfig: SaveConfig<RawMessagesPanelConfig>;\n};\n\nconst isSingleElemArray = (obj: unknown): obj is unknown[] => {\n  if (!Array.isArray(obj)) {\n    return false;\n  }\n  return obj.filter((a) => a != undefined).length === 1;\n};\n\nconst dataWithoutWrappingArray = (data: unknown) => {\n  return isSingleElemArray(data) && typeof data[0] === \"object\" ? data[0] : data;\n};\n\n// lazy messages don't have own properties so we need to invoke \"toJSON\" to get the message\n// as a regular object\nfunction maybeDeepParse(val: unknown) {\n  if (typeof val === \"object\" && val != undefined && \"toJSON\" in val) {\n    return (val as { toJSON: () => unknown }).toJSON();\n  }\n  return val;\n}\n\nconst useStyles = makeStyles()((theme) => ({\n  topic: {\n    fontFamily: fonts.SANS_SERIF,\n    fontFeatureSettings: `${theme.typography.fontFeatureSettings}, \"zero\"`,\n  },\n  big: {\n    \"&.MuiTypography-root\": {\n      fontFeatureSettings: `${theme.typography.fontFeatureSettings}, \"zero\"`,\n    },\n  },\n  hoverObserver: {\n    display: \"inline-flex\",\n    alignItems: \"center\",\n  },\n}));\n\nfunction RawMessages(props: Props) {\n  const {\n    palette: { mode: themePreference },\n  } = useTheme();\n  const { classes } = useStyles();\n  const jsonTreeTheme = useJsonTreeTheme();\n  const { config, saveConfig } = props;\n  const { openSiblingPanel } = usePanelContext();\n  const { topicPath, diffMethod, diffTopicPath, diffEnabled, showFullMessageForDiff } = config;\n  const { topics, datatypes } = useDataSourceInfo();\n\n  const defaultGetItemString = useGetItemStringWithTimezone();\n  const getItemString = useMemo(\n    () =>\n      diffEnabled\n        ? (_type: string, data: DiffObject, itemType: React.ReactNode) => (\n            <DiffStats data={data} itemType={itemType} />\n          )\n        : defaultGetItemString,\n    [defaultGetItemString, diffEnabled],\n  );\n\n  const topicRosPath: RosPath | undefined = useMemo(() => parseRosPath(topicPath), [topicPath]);\n  const topic: Topic | undefined = useMemo(\n    () => topicRosPath && topics.find(({ name }) => name === topicRosPath.topicName),\n    [topicRosPath, topics],\n  );\n  const rootStructureItem: MessagePathStructureItem | undefined = useMemo(() => {\n    if (!topic || !topicRosPath || topic.schemaName == undefined) {\n      return;\n    }\n    return traverseStructure(\n      messagePathStructures(datatypes)[topic.schemaName],\n      topicRosPath.messagePath,\n    ).structureItem;\n  }, [datatypes, topic, topicRosPath]);\n\n  const [expansion, setExpansion] = useState(config.expansion);\n  const matchedMessages = useMessageDataItem(topicPath, { historySize: 2 });\n  const diffMessages = useMessageDataItem(diffEnabled ? diffTopicPath : \"\");\n\n  const diffTopicObj = diffMessages[0];\n  const currTickObj = matchedMessages[matchedMessages.length - 1];\n  const prevTickObj = matchedMessages[matchedMessages.length - 2];\n\n  const inTimetickDiffMode = diffEnabled && diffMethod === Constants.PREV_MSG_METHOD;\n  const baseItem = inTimetickDiffMode ? prevTickObj : currTickObj;\n  const diffItem = inTimetickDiffMode ? currTickObj : diffTopicObj;\n\n  const autoExpandPaths = useMemo(() => {\n    if (baseItem) {\n      const data = dataWithoutWrappingArray(baseItem.queriedData.map(({ value }) => value));\n      return generateDeepKeyPaths(maybeDeepParse(data), 5);\n    } else {\n      return new Set<string>();\n    }\n  }, [baseItem]);\n\n  const canExpandAll = useMemo(() => {\n    if (expansion === \"none\") {\n      return true;\n    }\n    if (expansion === \"all\") {\n      return false;\n    }\n    if (typeof expansion === \"object\" && Object.values(expansion).some((v) => v === \"c\")) {\n      return true;\n    } else {\n      return false;\n    }\n  }, [expansion]);\n\n  const onTopicPathChange = useCallback(\n    (newTopicPath: string) => {\n      setExpansion(undefined);\n      saveConfig({ topicPath: newTopicPath });\n    },\n    [saveConfig],\n  );\n\n  const onDiffTopicPathChange = useCallback(\n    (newDiffTopicPath: string) => {\n      saveConfig({ diffTopicPath: newDiffTopicPath });\n    },\n    [saveConfig],\n  );\n\n  const onToggleDiff = useCallback(() => {\n    saveConfig({ diffEnabled: !diffEnabled });\n  }, [diffEnabled, saveConfig]);\n\n  const onToggleExpandAll = useCallback(() => {\n    setExpansion(canExpandAll ? \"all\" : \"none\");\n  }, [canExpandAll]);\n\n  const onLabelClick = useCallback(\n    (keypath: (string | number)[]) => {\n      const key = keypath.join(\"~\");\n      setExpansion((old) => {\n        if (old === \"all\") {\n          return { [key]: \"c\" };\n        } else if (old === \"none\") {\n          return { [key]: \"e\" };\n        } else if (old == undefined) {\n          return { [key]: autoExpandPaths.has(key) ? \"c\" : \"e\" };\n        } else {\n          if (old[key]) {\n            return { ...old, [key]: old[key] === \"c\" ? \"e\" : \"c\" };\n          } else {\n            return { ...old, [key]: autoExpandPaths.has(key) ? \"c\" : \"e\" };\n          }\n        }\n      });\n    },\n    [autoExpandPaths],\n  );\n\n  useEffect(() => {\n    saveConfig({ expansion });\n  }, [expansion, saveConfig]);\n\n  const getValueLabels = useCallback(\n    ({\n      constantName,\n      label,\n      itemValue,\n      keyPath,\n    }: {\n      constantName: string | undefined;\n      label: string;\n      itemValue: unknown;\n      keyPath: ReadonlyArray<number | string>;\n    }): { arrLabel: string; itemLabel: string } => {\n      let itemLabel = label;\n      if (typeof itemValue === \"bigint\") {\n        itemLabel = itemValue.toString();\n      }\n      // output preview for the first x items if the data is in binary format\n      // sample output: Int8Array(331776) [-4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, ...]\n      let arrLabel = \"\";\n      if (ArrayBuffer.isView(itemValue)) {\n        const array = itemValue as Uint8Array;\n        const itemPart = array.slice(0, DATA_ARRAY_PREVIEW_LIMIT).join(\", \");\n        const length = array.length;\n        arrLabel = `(${length}) [${itemPart}${length >= DATA_ARRAY_PREVIEW_LIMIT ? \", ...\" : \"\"}] `;\n        itemLabel = itemValue.constructor.name;\n      }\n      if (constantName != undefined) {\n        itemLabel = `${itemLabel} (${constantName})`;\n      }\n\n      // When we encounter a nsec field (nanosecond) that is a number, we ensure the label displays 9 digits.\n      // This helps when visually scanning time values from `sec` and `nsec` fields.\n      // A nanosecond label of 099999999 makes it easier to realize this is 0.09 seconds compared to\n      // 99999999 which requires some counting to reamize this is also 0.09\n      if (keyPath[0] === \"nsec\" && typeof itemValue === \"number\") {\n        itemLabel = padStart(itemLabel, 9, \"0\");\n      }\n\n      return { arrLabel, itemLabel };\n    },\n    [],\n  );\n\n  const renderDiffLabel = useCallback(\n    (label: string, itemValue: unknown) => {\n      let constantName: string | undefined;\n      const { arrLabel, itemLabel } = getValueLabels({\n        constantName,\n        label,\n        itemValue,\n        keyPath: [],\n      });\n      return (\n        <Value\n          arrLabel={arrLabel}\n          basePath=\"\"\n          itemLabel={itemLabel}\n          itemValue={itemValue}\n          valueAction={undefined}\n          onTopicPathChange={onTopicPathChange}\n          openSiblingPanel={openSiblingPanel}\n        />\n      );\n    },\n    [getValueLabels, onTopicPathChange, openSiblingPanel],\n  );\n\n  const valueRenderer = useCallback(\n    (\n      structureItem: MessagePathStructureItem | undefined,\n      data: unknown[],\n      queriedData: MessagePathDataItem[],\n      label: string,\n      itemValue: unknown,\n      ...keyPath: (number | string)[]\n    ) => (\n      <ReactHoverObserver className={classes.hoverObserver}>\n        {({ isHovering }: { isHovering: boolean }) => {\n          const lastKeyPath = last(keyPath) as number;\n          let valueAction: ValueAction | undefined;\n          if (isHovering && structureItem) {\n            valueAction = getValueActionForValue(\n              data[lastKeyPath],\n              structureItem,\n              keyPath.slice(0, -1).reverse(),\n            );\n          }\n\n          let constantName: string | undefined;\n          if (structureItem) {\n            const childStructureItem = getStructureItemForPath(\n              structureItem,\n              keyPath.slice(0, -1).reverse(),\n            );\n            if (childStructureItem) {\n              // if it's an array index (typeof number) then we want the nearest named array which will be typeof string\n\n              const keyPathIndex = keyPath.findIndex((key) => typeof key === \"string\");\n              const field = keyPath[keyPathIndex];\n              if (typeof field === \"string\") {\n                const enumMapping = enumValuesByDatatypeAndField(datatypes);\n                const datatype = childStructureItem.datatype;\n                constantName = enumMapping[datatype]?.[field]?.[String(itemValue)];\n              }\n            }\n          }\n          const basePath = queriedData[lastKeyPath]?.path ?? \"\";\n          const { arrLabel, itemLabel } = getValueLabels({\n            constantName,\n            label,\n            itemValue,\n            keyPath,\n          });\n\n          return (\n            <Value\n              arrLabel={arrLabel}\n              basePath={basePath}\n              itemLabel={itemLabel}\n              itemValue={itemValue}\n              valueAction={valueAction}\n              onTopicPathChange={onTopicPathChange}\n              openSiblingPanel={openSiblingPanel}\n            />\n          );\n        }}\n      </ReactHoverObserver>\n    ),\n    [classes.hoverObserver, datatypes, getValueLabels, onTopicPathChange, openSiblingPanel],\n  );\n\n  const renderSingleTopicOrDiffOutput = useCallback(() => {\n    const shouldExpandNode = (keypath: (string | number)[]) => {\n      if (expansion === \"all\") {\n        return true;\n      }\n      if (expansion === \"none\") {\n        return false;\n      }\n\n      const joinedPath = keypath.join(\"~\");\n      if (expansion && expansion[joinedPath] === \"c\") {\n        return false;\n      }\n      if (expansion && expansion[joinedPath] === \"e\") {\n        return true;\n      }\n\n      return autoExpandPaths.has(joinedPath);\n    };\n\n    if (topicPath.length === 0) {\n      return <EmptyState>No topic selected</EmptyState>;\n    }\n    if (diffEnabled && diffMethod === Constants.CUSTOM_METHOD && (!baseItem || !diffItem)) {\n      return (\n        <EmptyState>{`Waiting to diff next messages from \"${topicPath}\" and \"${diffTopicPath}\"`}</EmptyState>\n      );\n    }\n\n    if (!baseItem) {\n      return <EmptyState>Waiting for next message</EmptyState>;\n    }\n\n    const data = dataWithoutWrappingArray(baseItem.queriedData.map(({ value }) => value));\n    const hideWrappingArray =\n      baseItem.queriedData.length === 1 && typeof baseItem.queriedData[0]?.value === \"object\";\n    const shouldDisplaySingleVal =\n      (data != undefined && typeof data !== \"object\") ||\n      (isSingleElemArray(data) && data[0] != undefined && typeof data[0] !== \"object\");\n    const singleVal = isSingleElemArray(data) ? data[0] : data;\n\n    const diffData =\n      diffItem && dataWithoutWrappingArray(diffItem.queriedData.map(({ value }) => value));\n\n    // json parse/stringify round trip is used to deep parse data and diff data which may be lazy messages\n    // lazy messages have non-enumerable getters but do have a toJSON method to turn themselves into an object\n    const diff = diffEnabled\n      ? getDiff({\n          before: maybeDeepParse(data),\n          after: maybeDeepParse(diffData),\n          idLabel: undefined,\n          showFullMessageForDiff,\n        })\n      : {};\n\n    return (\n      <Stack\n        className={classes.topic}\n        flex=\"auto\"\n        overflowX=\"hidden\"\n        paddingLeft={0.75}\n        data-testid=\"panel-scroll-container\"\n      >\n        <Metadata\n          data={data}\n          diffData={diffData}\n          diff={diff}\n          message={baseItem.messageEvent}\n          {...(topic ? { datatype: topic.schemaName } : undefined)}\n          {...(diffItem ? { diffMessage: diffItem.messageEvent } : undefined)}\n        />\n        {shouldDisplaySingleVal ? (\n          <Typography\n            className={classes.big}\n            variant=\"h1\"\n            fontWeight=\"bold\"\n            whiteSpace=\"pre-line\"\n            style={{ wordWrap: \"break-word\" }}\n          >\n            <MaybeCollapsedValue itemLabel={String(singleVal)} />\n          </Typography>\n        ) : diffEnabled && isEqual({}, diff) ? (\n          <EmptyState>No difference found</EmptyState>\n        ) : (\n          <>\n            {diffEnabled && (\n              <FormControlLabel\n                disableTypography\n                checked={showFullMessageForDiff}\n                control={\n                  <Checkbox\n                    size=\"small\"\n                    defaultChecked\n                    onChange={() => saveConfig({ showFullMessageForDiff: !showFullMessageForDiff })}\n                  />\n                }\n                label=\"Show full msg\"\n              />\n            )}\n            <Tree\n              labelRenderer={(raw) => (\n                <>\n                  <DiffSpan>{first(raw)}</DiffSpan>\n                  {/* https://stackoverflow.com/questions/62319014/make-text-selection-treat-adjacent-elements-as-separate-words */}\n                  <span style={{ fontSize: 0 }}>&nbsp;</span>\n                </>\n              )}\n              shouldExpandNode={shouldExpandNode}\n              onExpand={(_data, _level, keyPath) => {\n                onLabelClick(keyPath);\n              }}\n              onCollapse={(_data, _level, keyPath) => {\n                onLabelClick(keyPath);\n              }}\n              hideRoot\n              invertTheme={false}\n              getItemString={getItemString}\n              valueRenderer={(valueAsString: string, value, ...keyPath) => {\n                if (diffEnabled) {\n                  return renderDiffLabel(valueAsString, value);\n                }\n                if (hideWrappingArray) {\n                  // When the wrapping array is hidden, put it back here.\n                  return valueRenderer(\n                    rootStructureItem,\n                    [data],\n                    baseItem.queriedData,\n                    valueAsString,\n                    value,\n                    ...keyPath,\n                    0,\n                  );\n                }\n\n                return valueRenderer(\n                  rootStructureItem,\n                  data as unknown[],\n                  baseItem.queriedData,\n                  valueAsString,\n                  value,\n                  ...keyPath,\n                );\n              }}\n              postprocessValue={(rawVal: unknown) => {\n                if (rawVal == undefined) {\n                  return rawVal;\n                }\n                const idValue = (rawVal as Record<string, unknown>)[diffLabels.ID.labelText];\n                const addedValue = (rawVal as Record<string, unknown>)[diffLabels.ADDED.labelText];\n                const changedValue = (rawVal as Record<string, unknown>)[\n                  diffLabels.CHANGED.labelText\n                ];\n                const deletedValue = (rawVal as Record<string, unknown>)[\n                  diffLabels.DELETED.labelText\n                ];\n                if (\n                  (addedValue != undefined ? 1 : 0) +\n                    (changedValue != undefined ? 1 : 0) +\n                    (deletedValue != undefined ? 1 : 0) ===\n                    1 &&\n                  idValue == undefined\n                ) {\n                  return addedValue ?? changedValue ?? deletedValue;\n                }\n                return maybeDeepParse(rawVal);\n              }}\n              theme={{\n                ...jsonTreeTheme,\n                tree: { margin: 0 },\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                nestedNode: ({ style }, keyPath: any) => {\n                  const baseStyle = {\n                    ...style,\n                    paddingTop: 2,\n                    paddingBottom: 2,\n                    marginTop: 2,\n                    textDecoration: \"inherit\",\n                  };\n                  if (!diffEnabled) {\n                    return { style: baseStyle };\n                  }\n                  let backgroundColor;\n                  let textDecoration;\n                  if (diffLabelsByLabelText[keyPath[0]]) {\n                    backgroundColor =\n                      themePreference === \"dark\"\n                        ? // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[keyPath[0]].invertedBackgroundColor\n                        : // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[keyPath[0]].backgroundColor;\n                    textDecoration =\n                      keyPath[0] === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                  }\n                  const nestedObj = get(diff, keyPath.slice().reverse(), {});\n                  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                  const nestedObjKey = Object.keys(nestedObj)[0];\n                  if (nestedObjKey != undefined && diffLabelsByLabelText[nestedObjKey]) {\n                    backgroundColor =\n                      themePreference === \"dark\"\n                        ? // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[nestedObjKey].invertedBackgroundColor\n                        : // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[nestedObjKey].backgroundColor;\n                    textDecoration =\n                      nestedObjKey === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                  }\n                  return {\n                    style: {\n                      ...baseStyle,\n                      backgroundColor,\n                      textDecoration: textDecoration ?? \"inherit\",\n                    },\n                  };\n                },\n                nestedNodeLabel: ({ style }) => ({\n                  style: { ...style, textDecoration: \"inherit\" },\n                }),\n                nestedNodeChildren: ({ style }) => ({\n                  style: { ...style, textDecoration: \"inherit\" },\n                }),\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                value: ({ style }, _nodeType, keyPath: any) => {\n                  const baseStyle = { ...style, textDecoration: \"inherit\" };\n                  if (!diffEnabled) {\n                    return { style: baseStyle };\n                  }\n                  let backgroundColor;\n                  let textDecoration;\n                  const nestedObj = get(diff, keyPath.slice().reverse(), {});\n                  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                  const nestedObjKey = Object.keys(nestedObj)[0];\n                  if (nestedObjKey != undefined && diffLabelsByLabelText[nestedObjKey]) {\n                    backgroundColor =\n                      themePreference === \"dark\"\n                        ? // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[nestedObjKey].invertedBackgroundColor\n                        : // @ts-expect-error backgroundColor is not a property?\n                          diffLabelsByLabelText[nestedObjKey].backgroundColor;\n                    textDecoration =\n                      nestedObjKey === diffLabels.DELETED.labelText ? \"line-through\" : \"none\";\n                  }\n                  return {\n                    style: {\n                      ...baseStyle,\n                      backgroundColor,\n                      textDecoration: textDecoration ?? \"inherit\",\n                    },\n                  };\n                },\n                label: { textDecoration: \"inherit\" },\n              }}\n              data={diffEnabled ? diff : data}\n            />\n          </>\n        )}\n      </Stack>\n    );\n  }, [\n    autoExpandPaths,\n    baseItem,\n    classes.big,\n    classes.topic,\n    diffEnabled,\n    diffItem,\n    diffMethod,\n    diffTopicPath,\n    expansion,\n    getItemString,\n    jsonTreeTheme,\n    onLabelClick,\n    renderDiffLabel,\n    rootStructureItem,\n    saveConfig,\n    showFullMessageForDiff,\n    themePreference,\n    topic,\n    topicPath,\n    valueRenderer,\n  ]);\n\n  return (\n    <Stack flex=\"auto\" overflow=\"hidden\" position=\"relative\">\n      <Toolbar\n        canExpandAll={canExpandAll}\n        diffEnabled={diffEnabled}\n        diffMethod={diffMethod}\n        diffTopicPath={diffTopicPath}\n        onDiffTopicPathChange={onDiffTopicPathChange}\n        onToggleDiff={onToggleDiff}\n        onToggleExpandAll={onToggleExpandAll}\n        onTopicPathChange={onTopicPathChange}\n        saveConfig={saveConfig}\n        topicPath={topicPath}\n      />\n      {renderSingleTopicOrDiffOutput()}\n    </Stack>\n  );\n}\n\nconst defaultConfig: RawMessagesPanelConfig = {\n  diffEnabled: false,\n  diffMethod: Constants.CUSTOM_METHOD,\n  diffTopicPath: \"\",\n  showFullMessageForDiff: false,\n  topicPath: \"\",\n};\n\nexport default Panel(\n  Object.assign(RawMessages, {\n    panelType: \"RawMessages\",\n    defaultConfig,\n  }),\n);\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport { isTypedArray as lodashIsTypedArray } from \"lodash\";\n\ntype TypedArray =\n  | Int8Array\n  | Uint8Array\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Float32Array\n  | Float64Array\n  | BigInt64Array\n  | BigUint64Array\n  | Uint8ClampedArray;\n\nexport function isTypedArray(value: unknown): value is TypedArray {\n  return lodashIsTypedArray(value);\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport * as THREE from \"three\";\n\nconst tempQuaternion = new THREE.Quaternion();\nconst tempEuler = new THREE.Euler();\n\n/**\n * Convert a quaternion to roll-pitch-yaw Euler angles.\n */\nexport function quatToEuler(\n  x: number,\n  y: number,\n  z: number,\n  w: number,\n): [roll: number, pitch: number, yaw: number] {\n  tempQuaternion.set(x, y, z, w);\n  tempEuler.setFromQuaternion(tempQuaternion, \"XYZ\");\n  return [\n    THREE.MathUtils.radToDeg(tempEuler.x),\n    THREE.MathUtils.radToDeg(tempEuler.y),\n    THREE.MathUtils.radToDeg(tempEuler.z),\n  ];\n}\n","// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at http://mozilla.org/MPL/2.0/\n\nimport { ReactNode } from \"react\";\nimport tinycolor from \"tinycolor2\";\n\nimport { filterMap } from \"@foxglove/den/collection\";\nimport { isTypicalFilterName } from \"@foxglove/studio-base/components/MessagePathSyntax/isTypicalFilterName\";\nimport { format, formatDuration } from \"@foxglove/studio-base/util/formatTime\";\nimport { quatToEuler } from \"@foxglove/studio-base/util/quatToEuler\";\n\nconst DURATION_20_YEARS_SEC = 20 * 365 * 24 * 60 * 60;\n\nconst PRIMITIVE_TYPES = [\"string\", \"number\", \"bigint\", \"boolean\"];\n\nexport function getItemString(\n  _nodeType: string,\n  data: unknown,\n  itemType: ReactNode,\n  itemString: string,\n  _keyPath: (string | number)[],\n  timezone?: string,\n): ReactNode {\n  if (typeof data !== \"object\" || data == undefined) {\n    return (\n      <span>\n        {itemType} {itemString}\n      </span>\n    );\n  }\n\n  const keys = Object.keys(data);\n  if (keys.length === 2) {\n    const { sec, nsec } = data as { sec?: number; nsec?: number };\n    if (typeof sec === \"number\" && typeof nsec === \"number\") {\n      // Values \"too small\" to be absolute epoch-based times are probably relative durations.\n      return sec < DURATION_20_YEARS_SEC ? (\n        formatDuration({ sec, nsec })\n      ) : (\n        <span>{format({ sec, nsec }, timezone)}</span>\n      );\n    }\n  }\n\n  // for vectors/points display length\n  if (keys.length === 2) {\n    const { x, y } = data as { x?: unknown; y?: unknown };\n    if (typeof x === \"number\" && typeof y === \"number\") {\n      const length = Math.sqrt(x * x + y * y);\n      return (\n        <span>\n          norm = {length.toFixed(2)} {getArrow(x, y)}\n        </span>\n      );\n    }\n\n    const { key, value } = data as { key?: unknown; value?: unknown };\n    if (\n      key != undefined &&\n      value != undefined &&\n      PRIMITIVE_TYPES.includes(typeof key) &&\n      PRIMITIVE_TYPES.includes(typeof value)\n    ) {\n      return `${key}: ${value}`;\n    }\n  } else if (keys.length === 3) {\n    const { x, y, z } = data as { x?: unknown; y?: unknown; z?: unknown };\n    if (typeof x === \"number\" && typeof y === \"number\" && typeof z === \"number\") {\n      const length = Math.sqrt(x * x + y * y + z * z);\n      return (\n        <span>\n          norm = {length.toFixed(2)} {z === 0 ? getArrow(x, y) : undefined}\n        </span>\n      );\n    }\n  } else if (keys.length === 4) {\n    const { x, y, z, w } = data as { x?: unknown; y?: unknown; z?: unknown; w?: unknown };\n    if (\n      typeof x === \"number\" &&\n      typeof y === \"number\" &&\n      typeof z === \"number\" &&\n      typeof w === \"number\"\n    ) {\n      const [roll, pitch, yaw] = quatToEuler(x, y, z, w);\n      return (\n        <span>\n          rpy = [{round(roll)}, {round(pitch)}, {round(yaw)}]\n        </span>\n      );\n    }\n\n    const { r, g, b, a } = data as { r?: unknown; g?: unknown; b?: unknown; a?: unknown };\n    if (\n      typeof r === \"number\" &&\n      typeof g === \"number\" &&\n      typeof b === \"number\" &&\n      typeof a === \"number\"\n    ) {\n      // print the color as hex\n      return <span>{tinycolor({ r: r * 255, g: g * 255, b: b * 255, a }).toHex8String()}</span>;\n    }\n  }\n\n  // Surface typically-used keys directly in the object summary so the user doesn't have to expand it.\n  const filterKeys = filterMap(keys, (key) => {\n    const value = (data as Record<string, unknown>)[key];\n    if (\n      isTypicalFilterName(key) &&\n      (value == undefined || PRIMITIVE_TYPES.includes(typeof value))\n    ) {\n      return `${key}: ${value}`;\n    }\n    return undefined;\n  }).join(\", \");\n  return (\n    <span>\n      {itemType} {filterKeys.length > 0 ? filterKeys : itemString}\n    </span>\n  );\n}\n\nfunction getArrow(x: number, y: number) {\n  if (x === 0 && y === 0) {\n    return;\n  }\n  return (\n    <span style={{ transform: `rotate(${Math.atan2(-y, x)}rad)`, display: \"inline-block\" }}></span>\n  );\n}\n\nfunction round(x: number, precision = 2): number {\n  return Number(x.toFixed(precision));\n}\n"],"names":["_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","isPlainObject","module","val","isObject","isObjectObject","o","ctor","prot","obj","props","fn","isFunction","keys","res","i","key","hash","str","_createClass","defineProperties","target","descriptor","Constructor","protoProps","staticProps","_classCallCheck","instance","_possibleConstructorReturn","self","call","_inherits","subClass","superClass","_class","_React$Component","_this","e","_this2","hoverScheduleId","newState","_this3","hoverOffScheduleId","ids","reactElement","child","children","_this4","_props","className","childProps","noop","_ref","setIsHovering","_ref2","unsetIsHovering","useGetItemStringWithTimezone","timezone","useAppConfigurationValue","AppSetting","type","data","itemType","itemString","getItemString","useMessageDataItem","path","options","historySize","rosPath","parseRosPath","topics","cachedGetMessagePathDataItems","useCachedGetMessagePathDataItems","addMessages","prevValue","messageEvents","newMatches","messageEvent","queriedData","reversed","restore","Constants","useStyles","theme","ToolbarComponent","canExpandAll","diffEnabled","diffMethod","diffTopicPath","onDiffTopicPathChange","onToggleDiff","onToggleExpandAll","onTopicPathChange","saveConfig","topic","topicPath","classes","PanelToolbar","IconButton","UnfoldMore","UnfoldLess","Stack","MessagePathInput","Select","event","MenuItem","Toolbar","React","diffArrow","diffLabels","diffLabelsByLabelText","getDiff","before","after","idLabel","showFullMessageForDiff","idToCompareWith","allItems","candidateIdsToCompareWith","isTypicalFilterName","item","idKey","candidates","beforeItem","afterItem","candidateIdBefore","candidateIdAfter","unmatchedAfterById","diff","id","innerDiff","isDeleted","allKeys","afterIsNotObj","idLabelObj","beforeIsNotObj","beforeText","afterText","DiffSpan","style","DATA_ARRAY_PREVIEW_LIMIT","ROS1_COMMON_MSG_PACKAGES","isTypedArray","generateDeepKeyPaths","maxArrayLength","recurseMapKeys","nestedObj","newPath","value","getChangeCounts","startingCounts","foxgloveDocsLinksByDatatype","schema","url","getMessageDocumentationLink","datatype","parts","pkg","filename","foxgloveDocsLink","DiffStats","ADDED","DELETED","CHANGED","ID","counts","Typography","COLLAPSE_TEXT_OVER_LENGTH","MaybeCollapsedValue","itemLabel","lengthOverLimit","showingEntireLabel","setShowingEntireLabel","expandText","truncatedItemText","Tooltip","copyMessageReplacer","_key","Metadata","diffData","message","diffMessage","latestData","useLatest","latestDiffData","docsLink","copyData","copyDiffData","copyDiff","Link","CopyButton","HighlightedValue","diffArrowStr","splitItemLabel","StyledIconButton","HoverableIconButton","emptyAction","MAX_ACTION_ITEMS","Value","timeOutID","arrLabel","basePath","itemValue","valueAction","openSiblingPanel","copied","setCopied","openPlotPanel","pathSuffix","openStateTransitionsPanel","onFilter","handleCopy","clipboard","availableActions","actions","Check","CopyAll","isPlotableType","isTransitionalType","isMultiSlicePath","ScatterPlot","placeholderActionsForSpacing","cx","pointerOver","setPointerOver","action","isObjectElement","pathItem","structureItem","isArrayElement","getValueActionForValue","rootValue","rootStructureItem","keyPath","singleSlicePath","multiSlicePath","filterPath","typicalFilterName","nextStructureItem","filterValue","getStructureItemForPath","isSingleElemArray","a","dataWithoutWrappingArray","maybeDeepParse","RawMessages","themePreference","useTheme","jsonTreeTheme","config","datatypes","defaultGetItemString","_type","topicRosPath","name","expansion","setExpansion","matchedMessages","diffTopicObj","currTickObj","prevTickObj","inTimetickDiffMode","baseItem","diffItem","autoExpandPaths","v","newTopicPath","newDiffTopicPath","onLabelClick","keypath","old","getValueLabels","constantName","label","array","itemPart","length","renderDiffLabel","valueRenderer","ReactHoverObserver","isHovering","lastKeyPath","childStructureItem","keyPathIndex","field","enumMapping","renderSingleTopicOrDiffOutput","shouldExpandNode","joinedPath","EmptyState","hideWrappingArray","shouldDisplaySingleVal","singleVal","FormControlLabel","Checkbox","raw","_data","_level","valueAsString","rawVal","idValue","addedValue","changedValue","deletedValue","baseStyle","backgroundColor","textDecoration","nestedObjKey","_nodeType","defaultConfig","Panel","tempQuaternion","tempEuler","quatToEuler","x","y","z","w","DURATION_20_YEARS_SEC","PRIMITIVE_TYPES","_keyPath","sec","nsec","getArrow","roll","pitch","yaw","round","r","g","b","tinycolor","filterKeys","filterMap","precision"],"sourceRoot":""}