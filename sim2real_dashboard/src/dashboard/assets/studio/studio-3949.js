"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3949,9839],{42861:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)((0,m.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z"}),"Difference");x.Z=S},56317:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)((0,m.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM14.5 7V5h-2v2h-2v2h2v2h2V9h2V7h-2zm2 6h-6v2h6v-2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm4 16H8V3h6.17L19 7.83V17z"}),"DifferenceOutlined");x.Z=S},27147:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)((0,m.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");x.Z=S},21580:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)((0,m.jsx)("path",{d:"M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z"}),"PowerInput");x.Z=S},42012:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)([(0,m.jsx)("circle",{cx:"7",cy:"14",r:"3"},"0"),(0,m.jsx)("circle",{cx:"11",cy:"6",r:"3"},"1"),(0,m.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot");x.Z=S},96511:(L,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var g=j(o(68671)),m=o(52322),S=(0,g.default)((0,m.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");x.Z=S},22777:(L,x,o)=>{/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(49983);L.exports=function(g){return n(g)||typeof g=="function"||Array.isArray(g)}},49983:(L,x,o)=>{/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(98558);function j(g){return n(g)===!0&&Object.prototype.toString.call(g)==="[object Object]"}L.exports=function(m){var S,b;return!(j(m)===!1||(S=m.constructor,typeof S!="function")||(b=S.prototype,j(b)===!1)||b.hasOwnProperty("isPrototypeOf")===!1)}},98558:L=>{/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */L.exports=function(o){return o!=null&&typeof o=="object"&&Array.isArray(o)===!1}},13e3:(L,x,o)=>{/*!
 * object.omit <https://github.com/jonschlinkert/object.omit>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(22777);L.exports=function(g,m,S){if(!n(g))return{};typeof m=="function"&&(S=m,m=[]),typeof m=="string"&&(m=[m]);for(var b=typeof S=="function",h=Object.keys(g),Q={},N=0;N<h.length;N++){var te=h[N],ne=g[te];(!m||m.indexOf(te)===-1&&(!b||S(ne,te,g)))&&(Q[te]=ne)}return Q}},9839:L=>{function x(o){for(var n=5381,j=o.length;j;)n=n*33^o.charCodeAt(--j);return n>>>0}L.exports=x},52226:(L,x,o)=>{o.r(x),o.d(x,{default:()=>on});var n=o(52322),j=o(47746),g=o(68434),m=o(2940),S=o(41518),b=o(76635),h=o(2784),Q=o(13980),N=o.n(Q),te=o(37320),ne=o.n(te),Ae=o(13e3),De=o.n(Ae);const se=function(){};var X=function(){function e(s,i){for(var t=0;t<i.length;t++){var c=i[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(s,c.key,c)}}return function(s,i,t){return i&&e(s.prototype,i),t&&e(s,t),s}}();function A(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function ce(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:e}function ue(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}var ge=function(e){ue(s,e);function s(i){A(this,s);var t=ce(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,i));return t.state={isHovering:!1},t.onMouseEnter=t.onMouseEnter.bind(t),t.onMouseLeave=t.onMouseLeave.bind(t),t.onMouseOver=t.onMouseOver.bind(t),t.onMouseOut=t.onMouseOut.bind(t),t.setIsHovering=t.setIsHovering.bind(t),t.unsetIsHovering=t.unsetIsHovering.bind(t),t.componentWillUnmount=t.componentWillUnmount.bind(t),t.timerIds=[],t}return X(s,[{key:"onMouseEnter",value:function(t){this.props.onMouseEnter({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseLeave",value:function(t){this.props.onMouseLeave({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOver",value:function(t){this.props.onMouseOver({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOut",value:function(t){this.props.onMouseOut({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"componentWillUnmount",value:function(){this.clearTimers()}},{key:"setIsHovering",value:function(){var t=this;this.clearTimers();var c=setTimeout(function(){var a={isHovering:!0};t.setState(a,function(){t.props.onHoverChanged(a)})},this.props.hoverDelayInMs);this.timerIds.push(c)}},{key:"unsetIsHovering",value:function(){var t=this;this.clearTimers();var c=setTimeout(function(){var a={isHovering:!1};t.setState(a,function(){t.props.onHoverChanged(a)})},this.props.hoverOffDelayInMs);this.timerIds.push(c)}},{key:"clearTimers",value:function(){for(var t=this.timerIds;t.length;)clearTimeout(t.pop())}},{key:"getIsReactComponent",value:function(t){return typeof t.type=="function"}},{key:"shouldDecorateChild",value:function(t){return!!t&&this.getIsReactComponent(t)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(t,c){return(0,h.cloneElement)(t,c)}},{key:"renderChildrenWithProps",value:function(t,c){var a=this;return typeof t=="function"?t(c):h.Children.map(t,function(r){return a.shouldDecorateChild(r)?a.decorateChild(r,c):r})}},{key:"render",value:function(){var t=this.props,c=t.children,a=t.className,r=ne()({},{isHovering:this.state.isHovering},De()(this.props,["children","className","hoverDelayInMs","hoverOffDelayInMs","onHoverChanged","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","shouldDecorateChildren"]));return h.createElement("div",{className:a,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},this.renderChildrenWithProps(c,r))}}]),s}(h.Component);ge.displayName="ReactHoverObserver",ge.defaultProps={hoverDelayInMs:0,hoverOffDelayInMs:0,onHoverChanged:se,onMouseEnter:function(s){var i=s.setIsHovering;return i()},onMouseLeave:function(s){var i=s.unsetIsHovering;return i()},onMouseOver:se,onMouseOut:se,shouldDecorateChildren:!0},ge.propTypes={className:N().string,hoverDelayInMs:N().number,hoverOffDelayInMs:N().number,onHoverChanged:N().func,onMouseEnter:N().func,onMouseLeave:N().func,onMouseOver:N().func,onMouseOut:N().func,shouldDecorateChildren:N().bool};const Le=ge;var ie=o(30650),U=o(8740),C=o(59506),D=o(29268),$=o(93455),G=o(27803),fe=o(84803);function je(){const[e]=(0,G.b)($.o.TIMEZONE);return(0,h.useCallback)((s,i,t,c)=>(0,fe.D)(s,i,t,c,[],e),[e])}var ve=o(94670),ye=o(1012),Ze=o(36922);function Se(e,s){const{historySize:i=1}=s??{},t=(0,h.useMemo)(()=>(0,ye.ZP)(e),[e]),c=(0,h.useMemo)(()=>t?[t.topicName]:[],[t]),a=(0,Ze.Iq)([e]),r=(0,h.useCallback)((l,f)=>{if(f.length===0)return l;const p=[];for(let w=f.length-1;w>=0&&p.length<i;--w){const q=f[w],k=a(e,q);k&&k.length>0&&p.push({messageEvent:q,queriedData:k})}const O=p.reverse();return p.length===i?{matches:O,messageEvents:f,path:e}:{matches:l.matches.concat(O).slice(-i),messageEvents:f,path:e}},[a,i,e]),u=(0,h.useCallback)(l=>{if(!l)return{matches:[],messageEvents:[],path:e};const f=[];for(const p of l.messageEvents){const O=a(e,p);O&&O.length>0&&f.push({messageEvent:p,queriedData:O})}return f.length>0||e!==l.path?{matches:f.slice(-i),messageEvents:l.messageEvents,path:e}:l},[a,i,e]);return(0,C.CC)({topics:c,addMessages:r,restore:u}).matches}var He=o(14075),ct=o(82044),oe=o(93812),ut=o(42861),ft=o(56317),dt=o(26029),ht=o(6377),Ge=o(87037),pt=o(29800),Je=o(80078),Ke=o(43684),gt=o(76479);const re={CUSTOM_METHOD:"custom",PREV_MSG_METHOD:"previous message"};var vt=o(2784);const yt=(0,U.ZL)()(e=>({iconButton:{"&.MuiIconButton-root":{padding:e.spacing(.25)}}}));function mt(e){const{canExpandAll:s,diffEnabled:i,diffMethod:t,diffTopicPath:c,onDiffTopicPathChange:a,onToggleDiff:r,onToggleExpandAll:u,onTopicPathChange:d,saveConfig:l,topic:f,topicPath:p}=e,{classes:O}=yt();return(0,n.jsxs)(gt.Z,{children:[(0,n.jsx)(Ge.Z,{className:O.iconButton,title:"Toggle diff",onClick:r,color:i?"default":"inherit",size:"small",children:i?(0,n.jsx)(ut.Z,{fontSize:"small"}):(0,n.jsx)(ft.Z,{fontSize:"small"})}),(0,n.jsx)(Ge.Z,{className:O.iconButton,title:s?"Expand all":"Collapse all",onClick:u,"data-testid":"expand-all",size:"small",children:s?(0,n.jsx)(ht.Z,{fontSize:"small"}):(0,n.jsx)(dt.Z,{fontSize:"small"})}),(0,n.jsxs)(oe.Z,{fullWidth:!0,paddingLeft:.25,children:[(0,n.jsx)(Ke.ZP,{index:0,path:p,onChange:d,inputStyle:{height:20}}),i&&(0,n.jsxs)(oe.Z,{direction:"row",flex:"auto",children:[(0,n.jsxs)(pt.Z,{variant:"filled",size:"small",title:"Diff method",value:t,MenuProps:{MenuListProps:{dense:!0}},onChange:z=>l({diffMethod:z.target.value}),children:[(0,n.jsx)(Je.Z,{value:re.PREV_MSG_METHOD,children:re.PREV_MSG_METHOD}),(0,n.jsx)(Je.Z,{value:re.CUSTOM_METHOD,children:"custom"})]}),t===re.CUSTOM_METHOD&&(0,n.jsx)(Ke.ZP,{index:1,path:c,onChange:a,inputStyle:{height:"100%"},...f?{prioritizedDatatype:f.schemaName}:{}})]})]})]})}const xt=vt.memo(mt);var Qe=o(60351);const Xe="->",M={ADDED:{labelText:"STUDIO_DIFF___ADDED",color:"#404047",backgroundColor:"#daffe7",invertedBackgroundColor:"#182924",indicator:"+"},DELETED:{labelText:"STUDIO_DIFF___DELETED",color:"#404047",backgroundColor:"#ffdee3",invertedBackgroundColor:"#3d2327",indicator:"-"},CHANGED:{labelText:"STUDIO_DIFF___CHANGED",color:"#eba800"},ID:{labelText:"STUDIO_DIFF___ID"}},Y=(0,b.keyBy)(Object.values(M),"labelText");function Ce({before:e,after:s,idLabel:i,showFullMessageForDiff:t=!1}){if(Array.isArray(e)&&Array.isArray(s)){let r;const u=e.concat(s);if(typeof u[0]=="object"&&u[0]!=null){let d={};u[0].id!=null&&(d.id={before:[],after:[]});for(const l in u[0])(0,Qe.Q)(l)&&(d[l]={before:[],after:[]});(0,b.every)(u,l=>typeof l=="object"&&l)||(d={});for(const[l,f]of Object.entries(d))for(const p of e)p[l]!=null&&f.before.push(p[l]);for(const[l,f]of Object.entries(d))for(const p of s)p[l]!=null&&f.after.push(p[l]);for(const[l,{before:f,after:p}]of Object.entries(d))if((0,b.uniq)(f).length===e.length&&(0,b.uniq)(p).length===s.length){r=l;break}}if(r!=null){const d=(0,b.keyBy)(s,r),l=[];for(const f of e){if(f==null||typeof f!="object")throw new Error("beforeItem is invalid; should have checked this earlier");const p=f[r],O=Ce({before:f,after:d[p],idLabel:r,showFullMessageForDiff:t});if(delete d[p],!(0,b.isEmpty)(O)){const z=Object.keys(O).length===1&&Object.keys(O)[0]===M.DELETED.labelText;l.push(z?O:{[M.ID.labelText]:{[r]:p},...O})}}for(const f of Object.values(d)){const p=Ce({before:void 0,after:f,idLabel:r,showFullMessageForDiff:t});(0,b.isEmpty)(p)||l.push(p)}return l}}if(typeof e=="object"&&typeof s=="object"&&e&&s){const r={},u=Object.keys(e).concat(Object.keys(s));for(const d of(0,b.uniq)(u)){const l=Ce({before:e[d],after:s[d],idLabel:void 0,showFullMessageForDiff:t});(0,b.isEmpty)(l)?t&&(r[d]=e[d]):r[d]=l}return r}if(e===s)return;if(e==null){const r=Array.isArray(s)||typeof s!="object";if(!i||r)return{[M.ADDED.labelText]:s};const u={[M.ID.labelText]:{[i]:{...s}[i]}};return{[M.ADDED.labelText]:{...u,...s}}}if(s==null){const r=Array.isArray(e)||typeof e!="object";if(!i||r)return{[M.DELETED.labelText]:e};const u={[M.ID.labelText]:{[i]:{...e}[i]}};return{[M.DELETED.labelText]:{...u,...e}}}const c=typeof e=="bigint"?e.toString():JSON.stringify(e),a=typeof s=="bigint"?s.toString():JSON.stringify(s);return{[M.CHANGED.labelText]:`${c} ${Xe} ${a}`}}var bt=o(11701),Tt=o(35528),Dt=o(77075);const jt=(0,U.ZL)()(e=>({root:{padding:e.spacing(0,.5),textDecoration:"inherit",whiteSpace:"pre-line"}}));function Ne(e){const{children:s,style:i}=e,{classes:t}=jt();return(0,n.jsx)("span",{className:t.root,style:i,children:s})}var St=o(13900),Ct=o(87472);const Ye=20,we=new Set(Object.keys(St.ros1).map(e=>e.split("/")[0]));we.add("turtlesim");function Mt(e){return Boolean(e!=null&&typeof e=="object"&&ArrayBuffer.isView(e)&&!(e instanceof DataView))}function Et(e,s){const i=new Set,t=(c,a)=>{if(a!=null&&!(typeof a!="object"&&typeof a!="function")&&!(Array.isArray(a)&&a.length>s)&&!Mt(a)){c.length>0&&i.add(c.join("~"));for(const r of Object.getOwnPropertyNames(a)){const u=[r,...c],d=a[r];t(u,d)}}};return t([],e),i}function qe(e,s){for(const i in e)i===M.ADDED.labelText||i===M.CHANGED.labelText||i===M.DELETED.labelText?s[i]++:typeof e[i]=="object"&&e[i]!=null&&qe(e[i],s);return s}const Me=new Map;for(const e of Object.values(Ct.foxgloveMessageSchemas)){const s=`https://foxglove.dev/docs/studio/messages/${(0,b.kebabCase)(e.name)}`;Me.set(`foxglove_msgs/${e.name}`,s),Me.set(`foxglove_msgs/msg/${e.name}`,s),Me.set(`foxglove.${e.name}`,s)}function It(e){const s=e.split(/[/.]/),i=(0,b.first)(s),t=(0,b.last)(s);if(i!=null&&we.has(i))return`https://docs.ros.org/api/${i}/html/msg/${t}.html`;const c=Me.get(e);if(c!=null)return c}const Ot=(0,U.ZL)()(e=>({diff:{float:"right",display:"flex",alignItems:"center",gap:e.spacing(.75),marginRight:e.spacing(.75)},badge:{display:"inline-flex",alignItems:"center",gap:e.spacing(.25),padding:e.spacing(0,.75),borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper},changeIndicator:{display:"inline-block",width:e.spacing(.75),height:e.spacing(.75),borderRadius:"50%",backgroundColor:e.palette.warning.main}}));function Pt({data:e,itemType:s}){const{classes:i}=Ot(),{ADDED:t,DELETED:c,CHANGED:a,ID:r}=M,u=e[r.labelText],d=u?Object.keys(u).map(f=>`${f}: ${u[f]}`).join(", "):void 0,l=qe(e,{[t.labelText]:0,[a.labelText]:0,[c.labelText]:0});return(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsxs)(n.Fragment,{children:[s," ",d]}),(0,n.jsxs)("div",{className:i.diff,children:[(l[t.labelText]!==0||l[c.labelText]!==0)&&(0,n.jsxs)("div",{className:i.badge,children:[l[t.labelText]!==0&&(0,n.jsx)(g.Z,{variant:"caption",color:"success.main",children:`${M.ADDED.indicator}${l[t.labelText]}`}),l[c.labelText]!==0&&(0,n.jsx)(g.Z,{variant:"caption",color:"error.main",children:`${M.DELETED.indicator}${l[c.labelText]}`})]}),l[a.labelText]!==0&&(0,n.jsx)("div",{className:i.changeIndicator})]})]})}var Re=o(20379);const _e=512;function Ee({itemLabel:e}){const s=e.length>=_e,[i,t]=(0,h.useState)(!s),c=(0,h.useCallback)(()=>t(!0),[]),a=i?e:e.slice(0,_e);return s?(0,n.jsx)(Re.Z,{title:i?"":"Text was truncated, click to see all",placement:"top",children:(0,n.jsx)("span",{onClick:c,style:{cursor:i?"inherit":"pointer"},children:`${a}${i?"":"..."}`})}):(0,n.jsx)("span",{children:e})}var At=o(63249),et=o(16003),$e=o(90546),tt=o(27999),Lt=o(49302);function Ie(e,s){if(s!=null)return typeof s=="bigint"?s.toString():(0,Lt.f)(s)?Array.from(s):s}const Zt=(0,U.ZL)()(e=>({button:{padding:e.spacing(.125),".MuiSvgIcon-root":{fontSize:`${e.typography.pxToRem(16)} !important`},".MuiButton-startIcon":{marginRight:e.spacing(.5)},"&:hover":{backgroundColor:"transparent"}}}));function Ht({data:e,diffData:s,diff:i,datatype:t,message:c,diffMessage:a}){const{classes:r}=Zt(),u=(0,et.Z)(e),d=(0,et.Z)(s),l=t?It(t):void 0,f=(0,h.useCallback)(()=>JSON.stringify(u.current,Ie,2)??"",[u]),p=(0,h.useCallback)(()=>JSON.stringify(d.current,Ie,2)??"",[d]),O=(0,h.useCallback)(()=>JSON.stringify(i,Ie,2)??"",[i]);return(0,n.jsxs)(oe.Z,{alignItems:"flex-start",paddingInline:.25,paddingBlockStart:.75,children:[(0,n.jsxs)(oe.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsxs)(g.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:[a?"base":l?(0,n.jsx)(At.Z,{target:"_blank",color:"inherit",variant:"caption",underline:"hover",rel:"noopener noreferrer",href:l,children:t}):t,` @ ${(0,tt.Eo)(c.receiveTime)} sec`]}),(0,n.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:f})]}),a?.receiveTime&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(oe.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsx)(g.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:`diff @ ${(0,tt.Eo)(a.receiveTime)} sec `}),(0,n.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:p})]}),(0,n.jsx)($e.Z,{size:"small",iconSize:"inherit",className:r.button,getText:O,children:"Copy diff of msgs"})]})]})}var Nt=o(42713),Rt=o(98967),$t=o(85321),zt=o(27147),kt=o(21580),Ft=o(42012),Bt=o(96511),Vt=o(76217),nt=o(90873),ot=o(11234),Wt=o(28e3);function Ut({itemLabel:e}){const s=` ${Xe} `,i=`${e}`.split(s);if(i.length===2){const[c,a]=i,r=JSON.parse(JSON.stringify(c)??""),u=JSON.parse(JSON.stringify(a)??"");return(0,n.jsxs)(Ne,{style:{color:M.CHANGED.color},children:[(0,n.jsx)(Ee,{itemLabel:r}),s,(0,n.jsx)(Ee,{itemLabel:u})]})}return(0,n.jsx)(Ne,{children:(0,n.jsx)(Ee,{itemLabel:e})})}var Gt=o(2784);const st=(0,U.D2)(Vt.Z,e=>({root:{"&.MuiIconButton-root":{fontSize:e.typography.pxToRem(16),opacity:.6,padding:0}}})),Jt=(0,U.ZL)()({placeholderActionContainer:{alignItems:"inherit",display:"inherit",gap:"inherit",visibility:"hidden"}}),Kt={key:"",tooltip:"",icon:(0,n.jsx)($t.Z,{fontSize:"inherit"})},Qt=4;function Xt(e){const s=(0,h.useRef)(void 0),{arrLabel:i,basePath:t,itemLabel:c,itemValue:a,valueAction:r,onTopicPathChange:u,openSiblingPanel:d}=e,[l,f]=(0,h.useState)(!1),p=(0,h.useCallback)(T=>()=>(0,nt.openSiblingPlotPanel)(d,`${t}${T}`),[t,d]),O=(0,h.useCallback)(T=>()=>(0,ot.openSiblingStateTransitionsPanel)(d,`${t}${T}`),[t,d]),z=(0,h.useCallback)(()=>u(`${t}${r?.filterPath}`),[t,r,u]),w=(0,h.useCallback)(T=>{Wt.Z.copy(T).then(()=>{f(!0),s.current=setTimeout(()=>f(!1),1500)}).catch(ee=>console.warn(ee))},[]),q=(0,h.useMemo)(()=>{const T=[];if(i.length>0&&T.push({key:"Copy",activeColor:l?"success":"primary",tooltip:l?"Copied":"Copy to Clipboard",icon:l?(0,n.jsx)(Nt.Z,{fontSize:"inherit"}):(0,n.jsx)(Rt.Z,{fontSize:"inherit"}),onClick:()=>w(JSON.stringify(a,Ie,2)??"")}),r!=null){const ee=nt.plotableRosTypes.includes(r.primitiveType),Fe=ot.transitionableRosTypes.includes(r.primitiveType),xe=r.multiSlicePath===r.singleSlicePath;r.filterPath.length>0&&T.push({key:"Filter",tooltip:"Filter on this value",icon:(0,n.jsx)(zt.Z,{fontSize:"inherit"}),onClick:z}),ee&&T.push({key:"line",tooltip:"Plot this value on a line chart",icon:(0,n.jsx)(Bt.Z,{fontSize:"inherit"}),onClick:p(r.singleSlicePath)}),ee&&!xe&&T.push({key:"scatter",tooltip:"Plot this value on a scatter plot",icon:(0,n.jsx)(Ft.Z,{fontSize:"inherit"}),onClick:p(r.multiSlicePath)}),Fe&&xe&&T.push({key:"stateTransitions",tooltip:"View state transitions for this value",icon:(0,n.jsx)(kt.Z,{fontSize:"inherit"}),onClick:O(r.singleSlicePath)})}return T},[i.length,l,w,a,z,p,O,r]),k=(0,h.useMemo)(()=>{const T=[];for(let ee=q.length;ee<Qt;ee++)T.push({...Kt,key:`empty-${ee}`});return T},[q.length]),{classes:_,cx:me}=Jt();(0,h.useEffect)(()=>()=>{s.current!=null&&clearTimeout(s.current)},[]);const[Z,de]=(0,h.useState)(!1);return(0,n.jsxs)(oe.Z,{inline:!0,flexWrap:"wrap",direction:"row",alignItems:"center",gap:.25,onPointerEnter:()=>de(!0),onPointerLeave:()=>de(!1),children:[(0,n.jsx)(Ut,{itemLabel:c}),i,Z&&q.map(T=>(0,n.jsx)(Re.Z,{arrow:!0,title:T.tooltip,placement:"top",children:(0,n.jsx)(st,{size:"small",activeColor:T.activeColor,onClick:T.onClick,color:"inherit",icon:T.icon})},T.key)),(0,n.jsx)("span",{className:me(_.placeholderActionContainer),children:Z&&k.map(T=>(0,n.jsx)(Re.Z,{arrow:!0,title:T.tooltip,placement:"top",children:(0,n.jsx)(st,{size:"small",color:"inherit",icon:T.icon})},T.key))})]})}const it=Gt.memo(Xt),Yt=(e,s,i)=>typeof s=="string"&&i.structureType==="message"&&typeof e=="object",wt=(e,s,i)=>typeof s=="number"&&i.structureType==="array"&&Array.isArray(e);function qt(e,s,i){let t="",c="",a="",r=e,u=s;for(const d of i){if(u==null||r==null)break;if(Yt(r,d,u))u=u.structureType==="message"&&typeof d=="string"?u.nextByName[d]:void 0,r=r[d],c.endsWith("[:]")&&u?.structureType==="primitive"?typeof r=="bigint"?a=`${c}{${d}==${r.toString()}}`:a=`${c}{${d}==${JSON.stringify(r)??""}}`:a="",t+=`.${d}`,c+=`.${d}`;else if(wt(r,d,u)){r=r[d],u=u.structureType==="array"?u.next:void 0,c=`${t}[:]`;let l;if(u?.structureType==="message"&&(l=Object.entries(u.nextByName).find(([f,p])=>p.structureType==="primitive"&&(0,Qe.Q)(f))?.[0]),typeof r=="object"&&r!=null&&typeof l=="string"){const f=r[l];t+=`[:]{${l}==${typeof f=="bigint"?f.toString():JSON.stringify(f)??""}}`}else t+=`[${d}]`}else{if(u.structureType==="primitive")return;throw new Error(`Invalid structureType: ${u.structureType} for value/pathItem.`)}}if(u&&u.structureType==="primitive"&&r!=null)return{singleSlicePath:t,multiSlicePath:c,primitiveType:u.primitiveType,filterPath:a}}const _t=(e,s)=>{let i=e;for(const t of s){if(i==null)break;if(i.structureType==="message"&&typeof t=="string")i=i.nextByName[t];else if(i.structureType==="array"&&typeof t=="number")i=i.next;else{if(i.structureType==="primitive")return i;throw new Error(`Invalid structureType: ${i.structureType} for value/pathItem.`)}}return i},ze=e=>Array.isArray(e)?e.filter(s=>s!=null).length===1:!1,ke=e=>ze(e)&&typeof e[0]=="object"?e[0]:e;function Oe(e){return typeof e=="object"&&e!=null&&"toJSON"in e?e.toJSON():e}const en=(0,U.ZL)()(e=>({topic:{fontFamily:Dt.R.SANS_SERIF,fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`},big:{"&.MuiTypography-root":{fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`}},hoverObserver:{display:"inline-flex",alignItems:"center"}}));function tn(e){const{palette:{mode:s}}=(0,j.Z)(),{classes:i}=en(),t=(0,bt.lk)(),{config:c,saveConfig:a}=e,{openSiblingPanel:r}=(0,ct.R)(),{topicPath:u,diffMethod:d,diffTopicPath:l,diffEnabled:f,showFullMessageForDiff:p}=c,{topics:O,datatypes:z}=(0,C.Ui)(),w=je(),q=(0,h.useMemo)(()=>f?(E,v,P)=>(0,n.jsx)(Pt,{data:v,itemType:P}):w,[w,f]),k=(0,h.useMemo)(()=>(0,ye.ZP)(u),[u]),_=(0,h.useMemo)(()=>k&&O.find(({name:E})=>E===k.topicName),[k,O]),me=(0,h.useMemo)(()=>{if(!(!_||!k||_.schemaName==null))return(0,ve.eT)((0,ve.pb)(z)[_.schemaName],k.messagePath).structureItem},[z,_,k]),[Z,de]=(0,h.useState)(c.expansion),T=Se(u,{historySize:2}),Fe=Se(f?l:"")[0],xe=T[T.length-1],sn=T[T.length-2],rt=f&&d===re.PREV_MSG_METHOD,F=rt?sn:xe,he=rt?xe:Fe,be=(0,h.useMemo)(()=>{if(F){const E=ke(F.queriedData.map(({value:v})=>v));return Et(Oe(E),5)}else return new Set},[F]),Be=(0,h.useMemo)(()=>Z==="none"?!0:Z==="all"?!1:!!(typeof Z=="object"&&Object.values(Z).some(E=>E==="c")),[Z]),Te=(0,h.useCallback)(E=>{de(void 0),a({topicPath:E})},[a]),rn=(0,h.useCallback)(E=>{a({diffTopicPath:E})},[a]),an=(0,h.useCallback)(()=>{a({diffEnabled:!f})},[f,a]),ln=(0,h.useCallback)(()=>{de(Be?"all":"none")},[Be]),Ve=(0,h.useCallback)(E=>{const v=E.join("~");de(P=>P==="all"?{[v]:"c"}:P==="none"?{[v]:"e"}:P==null?{[v]:be.has(v)?"c":"e"}:P[v]?{...P,[v]:P[v]==="c"?"e":"c"}:{...P,[v]:be.has(v)?"c":"e"})},[be]);(0,h.useEffect)(()=>{a({expansion:Z})},[Z,a]);const Pe=(0,h.useCallback)(({constantName:E,label:v,itemValue:P,keyPath:ae})=>{let R=v;typeof P=="bigint"&&(R=P.toString());let B="";if(ArrayBuffer.isView(P)){const J=P,y=J.slice(0,Ye).join(", "),I=J.length;B=`(${I}) [${y}${I>=Ye?", ...":""}] `,R=P.constructor.name}return E!=null&&(R=`${R} (${E})`),ae[0]==="nsec"&&typeof P=="number"&&(R=(0,b.padStart)(R,9,"0")),{arrLabel:B,itemLabel:R}},[]),at=(0,h.useCallback)((E,v)=>{let P;const{arrLabel:ae,itemLabel:R}=Pe({constantName:P,label:E,itemValue:v,keyPath:[]});return(0,n.jsx)(it,{arrLabel:ae,basePath:"",itemLabel:R,itemValue:v,valueAction:void 0,onTopicPathChange:Te,openSiblingPanel:r})},[Pe,Te,r]),We=(0,h.useCallback)((E,v,P,ae,R,...B)=>(0,n.jsx)(Le,{className:i.hoverObserver,children:({isHovering:J})=>{const y=(0,b.last)(B);let I;J&&E&&(I=qt(v[y],E,B.slice(0,-1).reverse()));let H;if(E){const K=_t(E,B.slice(0,-1).reverse());if(K){const le=B.findIndex(Ue=>typeof Ue=="string"),lt=B[le];if(typeof lt=="string"){const Ue=(0,Tt.Hh)(z),un=K.datatype;H=Ue[un]?.[lt]?.[String(R)]}}}const V=P[y]?.path??"",{arrLabel:W,itemLabel:pe}=Pe({constantName:H,label:ae,itemValue:R,keyPath:B});return(0,n.jsx)(it,{arrLabel:W,basePath:V,itemLabel:pe,itemValue:R,valueAction:I,onTopicPathChange:Te,openSiblingPanel:r})}}),[i.hoverObserver,z,Pe,Te,r]),cn=(0,h.useCallback)(()=>{const E=y=>{if(Z==="all")return!0;if(Z==="none")return!1;const I=y.join("~");return Z&&Z[I]==="c"?!1:Z&&Z[I]==="e"?!0:be.has(I)};if(u.length===0)return(0,n.jsx)(D.Z,{children:"No topic selected"});if(f&&d===re.CUSTOM_METHOD&&(!F||!he))return(0,n.jsx)(D.Z,{children:`Waiting to diff next messages from "${u}" and "${l}"`});if(!F)return(0,n.jsx)(D.Z,{children:"Waiting for next message"});const v=ke(F.queriedData.map(({value:y})=>y)),P=F.queriedData.length===1&&typeof F.queriedData[0]?.value=="object",ae=v!=null&&typeof v!="object"||ze(v)&&v[0]!=null&&typeof v[0]!="object",R=ze(v)?v[0]:v,B=he&&ke(he.queriedData.map(({value:y})=>y)),J=f?Ce({before:Oe(v),after:Oe(B),idLabel:void 0,showFullMessageForDiff:p}):{};return(0,n.jsxs)(oe.Z,{className:i.topic,flex:"auto",overflowX:"hidden",paddingLeft:.75,"data-testid":"panel-scroll-container",children:[(0,n.jsx)(Ht,{data:v,diffData:B,diff:J,message:F.messageEvent,..._?{datatype:_.schemaName}:void 0,...he?{diffMessage:he.messageEvent}:void 0}),ae?(0,n.jsx)(g.Z,{className:i.big,variant:"h1",fontWeight:"bold",whiteSpace:"pre-line",style:{wordWrap:"break-word"},children:(0,n.jsx)(Ee,{itemLabel:String(R)})}):f&&(0,b.isEqual)({},J)?(0,n.jsx)(D.Z,{children:"No difference found"}):(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsx)(m.Z,{disableTypography:!0,checked:p,control:(0,n.jsx)(S.Z,{size:"small",defaultChecked:!0,onChange:()=>a({showFullMessageForDiff:!p})}),label:"Show full msg"}),(0,n.jsx)(ie.ZP,{labelRenderer:y=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ne,{children:(0,b.first)(y)}),(0,n.jsx)("span",{style:{fontSize:0},children:"\xA0"})]}),shouldExpandNode:E,onExpand:(y,I,H)=>{Ve(H)},onCollapse:(y,I,H)=>{Ve(H)},hideRoot:!0,invertTheme:!1,getItemString:q,valueRenderer:(y,I,...H)=>f?at(y,I):P?We(me,[v],F.queriedData,y,I,...H,0):We(me,v,F.queriedData,y,I,...H),postprocessValue:y=>{if(y==null)return y;const I=y[M.ID.labelText],H=y[M.ADDED.labelText],V=y[M.CHANGED.labelText],W=y[M.DELETED.labelText];return(H!=null?1:0)+(V!=null?1:0)+(W!=null?1:0)==1&&I==null?H??V??W:Oe(y)},theme:{...t,tree:{margin:0},nestedNode:({style:y},I)=>{const H={...y,paddingTop:2,paddingBottom:2,marginTop:2,textDecoration:"inherit"};if(!f)return{style:H};let V,W;Y[I[0]]&&(V=s==="dark"?Y[I[0]].invertedBackgroundColor:Y[I[0]].backgroundColor,W=I[0]===M.DELETED.labelText?"line-through":"none");const pe=(0,b.get)(J,I.slice().reverse(),{}),K=Object.keys(pe)[0];return K!=null&&Y[K]&&(V=s==="dark"?Y[K].invertedBackgroundColor:Y[K].backgroundColor,W=K===M.DELETED.labelText?"line-through":"none"),{style:{...H,backgroundColor:V,textDecoration:W??"inherit"}}},nestedNodeLabel:({style:y})=>({style:{...y,textDecoration:"inherit"}}),nestedNodeChildren:({style:y})=>({style:{...y,textDecoration:"inherit"}}),value:({style:y},I,H)=>{const V={...y,textDecoration:"inherit"};if(!f)return{style:V};let W,pe;const K=(0,b.get)(J,H.slice().reverse(),{}),le=Object.keys(K)[0];return le!=null&&Y[le]&&(W=s==="dark"?Y[le].invertedBackgroundColor:Y[le].backgroundColor,pe=le===M.DELETED.labelText?"line-through":"none"),{style:{...V,backgroundColor:W,textDecoration:pe??"inherit"}}},label:{textDecoration:"inherit"}},data:f?J:v})]})]})},[be,F,i.big,i.topic,f,he,d,l,Z,q,t,Ve,at,me,a,p,s,_,u,We]);return(0,n.jsxs)(oe.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,n.jsx)(xt,{canExpandAll:Be,diffEnabled:f,diffMethod:d,diffTopicPath:l,onDiffTopicPathChange:rn,onToggleDiff:an,onToggleExpandAll:ln,onTopicPathChange:Te,saveConfig:a,topicPath:u}),cn()]})}const nn={diffEnabled:!1,diffMethod:re.CUSTOM_METHOD,diffTopicPath:"",showFullMessageForDiff:!1,topicPath:""},on=(0,He.Z)(Object.assign(tn,{panelType:"RawMessages",defaultConfig:nn}))},49302:(L,x,o)=>{o.d(x,{f:()=>g});var n=o(76635),j=o.n(n);function g(m){return(0,n.isTypedArray)(m)}},84803:(L,x,o)=>{o.d(x,{D:()=>Ae});var n=o(52322),j=o(1547),g=o(8220),m=o(60351),S=o(85091),b=o(96995);const h=new b._fP,Q=new b.USm;function N(X,A,ce,ue){return h.set(X,A,ce,ue),Q.setFromQuaternion(h,"XYZ"),[b.M8C.radToDeg(Q.x),b.M8C.radToDeg(Q.y),b.M8C.radToDeg(Q.z)]}const te=20*365*24*60*60,ne=["string","number","bigint","boolean"];function Ae(X,A,ce,ue,ge,Le){if(typeof A!="object"||A==null)return(0,n.jsxs)("span",{children:[ce," ",ue]});const ie=Object.keys(A);if(ie.length===2){const{sec:C,nsec:D}=A;if(typeof C=="number"&&typeof D=="number")return C<te?(0,S.LU)({sec:C,nsec:D}):(0,n.jsx)("span",{children:(0,S.WU)({sec:C,nsec:D},Le)})}if(ie.length===2){const{x:C,y:D}=A;if(typeof C=="number"&&typeof D=="number"){const fe=Math.sqrt(C*C+D*D);return(0,n.jsxs)("span",{children:["norm = ",fe.toFixed(2)," ",De(C,D)]})}const{key:$,value:G}=A;if($!=null&&G!=null&&ne.includes(typeof $)&&ne.includes(typeof G))return`${$}: ${G}`}else if(ie.length===3){const{x:C,y:D,z:$}=A;if(typeof C=="number"&&typeof D=="number"&&typeof $=="number"){const G=Math.sqrt(C*C+D*D+$*$);return(0,n.jsxs)("span",{children:["norm = ",G.toFixed(2)," ",$===0?De(C,D):void 0]})}}else if(ie.length===4){const{x:C,y:D,z:$,w:G}=A;if(typeof C=="number"&&typeof D=="number"&&typeof $=="number"&&typeof G=="number"){const[Ze,Se,He]=N(C,D,$,G);return(0,n.jsxs)("span",{children:["rpy = [",se(Ze),", ",se(Se),", ",se(He),"]"]})}const{r:fe,g:je,b:ve,a:ye}=A;if(typeof fe=="number"&&typeof je=="number"&&typeof ve=="number"&&typeof ye=="number")return(0,n.jsx)("span",{children:(0,j.Z)({r:fe*255,g:je*255,b:ve*255,a:ye}).toHex8String()})}const U=(0,g.Z)(ie,C=>{const D=A[C];if((0,m.Q)(C)&&(D==null||ne.includes(typeof D)))return`${C}: ${D}`}).join(", ");return(0,n.jsxs)("span",{children:[ce," ",U.length>0?U:ue]})}function De(X,A){if(!(X===0&&A===0))return(0,n.jsx)("span",{style:{transform:`rotate(${Math.atan2(-A,X)}rad)`,display:"inline-block"},children:"\u2192"})}function se(X,A=2){return Number(X.toFixed(A))}}}]);

//# sourceMappingURL=studio-3949.js.map