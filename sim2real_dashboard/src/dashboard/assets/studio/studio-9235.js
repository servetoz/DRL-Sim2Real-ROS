"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9235],{14571:(C,f,a)=>{a.d(f,{o:()=>p});var s=a(52322),r=a(2784);class p extends r.Component{state={hadError:!1};componentDidCatch(g){this.setState({hadError:!0}),this.props.onError(g)}render(){return this.state.hadError?(0,s.jsx)(s.Fragment,{}):this.props.children}}},96133:(C,f,a)=>{a.d(f,{J:()=>s});function s(r,p){if(typeof r.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(r.value==null)return!1;let d=p;for(const g of r.path)if(typeof d!="object"||d==null||(d=d[g],d==null))return!1;return d!=null&&d==r.value}},62273:(C,f,a)=>{a.d(f,{T:()=>p});var s=a(49302),r=a(96133);function p(d,g){if(d.topic!==g.topicName)return[];const w=[];function P(c,y){const m=g.messagePath[y];if(m==null){w.push(c);return}if(c!=null)switch(m.type){case"slice":{if(!Array.isArray(c)&&!(0,s.f)(c))return;if(typeof m.start=="object"||typeof m.end=="object")throw new Error("Variables in slices are not supported");const{start:A,end:T}=m;for(let E=A;E<c.length&&E<=T;E++)P(c[E],y+1);return}case"filter":return(0,r.J)(m,c)?P(c,y+1):void 0;case"name":return typeof c!="object"?void 0:P(c[m.name],y+1)}}return P(d.message,0),w}},9235:(C,f,a)=>{a.r(f),a.d(f,{default:()=>t0});var s=a(52322),r=a(2784),p=a(28316),d=a(7506),g=a(14571),w=a(14075),P=a(77357),c=a(88724),y=a(76635),m=a(91004),A=a(1012),T=a(62273),E=a(96995);const U=[[.18995,.07176,.23217],[.19483,.08339,.26149],[.19956,.09498,.29024],[.20415,.10652,.31844],[.2086,.11802,.34607],[.21291,.12947,.37314],[.21708,.14087,.39964],[.22111,.15223,.42558],[.225,.16354,.45096],[.22875,.17481,.47578],[.23236,.18603,.50004],[.23582,.1972,.52373],[.23915,.20833,.54686],[.24234,.21941,.56942],[.24539,.23044,.59142],[.2483,.24143,.61286],[.25107,.25237,.63374],[.25369,.26327,.65406],[.25618,.27412,.67381],[.25853,.28492,.693],[.26074,.29568,.71162],[.2628,.30639,.72968],[.26473,.31706,.74718],[.26652,.32768,.76412],[.26816,.33825,.7805],[.26967,.34878,.79631],[.27103,.35926,.81156],[.27226,.3697,.82624],[.27334,.38008,.84037],[.27429,.39043,.85393],[.27509,.40072,.86692],[.27576,.41097,.87936],[.27628,.42118,.89123],[.27667,.43134,.90254],[.27691,.44145,.91328],[.27701,.45152,.92347],[.27698,.46153,.93309],[.2768,.47151,.94214],[.27648,.48144,.95064],[.27603,.49132,.95857],[.27543,.50115,.96594],[.27469,.51094,.97275],[.27381,.52069,.97899],[.27273,.5304,.98461],[.27106,.54015,.9893],[.26878,.54995,.99303],[.26592,.55979,.99583],[.26252,.56967,.99773],[.25862,.57958,.99876],[.25425,.5895,.99896],[.24946,.59943,.99835],[.24427,.60937,.99697],[.23874,.61931,.99485],[.23288,.62923,.99202],[.22676,.63913,.98851],[.22039,.64901,.98436],[.21382,.65886,.97959],[.20708,.66866,.97423],[.20021,.67842,.96833],[.19326,.68812,.9619],[.18625,.69775,.95498],[.17923,.70732,.94761],[.17223,.7168,.93981],[.16529,.7262,.93161],[.15844,.73551,.92305],[.15173,.74472,.91416],[.14519,.75381,.90496],[.13886,.76279,.8955],[.13278,.77165,.8858],[.12698,.78037,.8759],[.12151,.78896,.86581],[.11639,.7974,.85559],[.11167,.80569,.84525],[.10738,.81381,.83484],[.10357,.82177,.82437],[.10026,.82955,.81389],[.0975,.83714,.80342],[.09532,.84455,.79299],[.09377,.85175,.78264],[.09287,.85875,.7724],[.09267,.86554,.7623],[.0932,.87211,.75237],[.09451,.87844,.74265],[.09662,.88454,.73316],[.09958,.8904,.72393],[.10342,.896,.715],[.10815,.90142,.70599],[.11374,.90673,.69651],[.12014,.91193,.6866],[.12733,.91701,.67627],[.13526,.92197,.66556],[.14391,.9268,.65448],[.15323,.93151,.64308],[.16319,.93609,.63137],[.17377,.94053,.61938],[.18491,.94484,.60713],[.19659,.94901,.59466],[.20877,.95304,.58199],[.22142,.95692,.56914],[.23449,.96065,.55614],[.24797,.96423,.54303],[.2618,.96765,.52981],[.27597,.97092,.51653],[.29042,.97403,.50321],[.30513,.97697,.48987],[.32006,.97974,.47654],[.33517,.98234,.46325],[.35043,.98477,.45002],[.36581,.98702,.43688],[.38127,.98909,.42386],[.39678,.99098,.41098],[.41229,.99268,.39826],[.42778,.99419,.38575],[.44321,.99551,.37345],[.45854,.99663,.3614],[.47375,.99755,.34963],[.48879,.99828,.33816],[.50362,.99879,.32701],[.51822,.9991,.31622],[.53255,.99919,.30581],[.54658,.99907,.29581],[.56026,.99873,.28623],[.57357,.99817,.27712],[.58646,.99739,.26849],[.59891,.99638,.26038],[.61088,.99514,.2528],[.62233,.99366,.24579],[.63323,.99195,.23937],[.64362,.98999,.23356],[.65394,.98775,.22835],[.66428,.98524,.2237],[.67462,.98246,.2196],[.68494,.97941,.21602],[.69525,.9761,.21294],[.70553,.97255,.21032],[.71577,.96875,.20815],[.72596,.9647,.2064],[.7361,.96043,.20504],[.74617,.95593,.20406],[.75617,.95121,.20343],[.76608,.94627,.20311],[.77591,.94113,.2031],[.78563,.93579,.20336],[.79524,.93025,.20386],[.80473,.92452,.20459],[.8141,.91861,.20552],[.82333,.91253,.20663],[.83241,.90627,.20788],[.84133,.89986,.20926],[.8501,.89328,.21074],[.85868,.88655,.2123],[.86709,.87968,.21391],[.8753,.87267,.21555],[.88331,.86553,.21719],[.89112,.85826,.2188],[.8987,.85087,.22038],[.90605,.84337,.22188],[.91317,.83576,.22328],[.92004,.82806,.22456],[.92666,.82025,.2257],[.93301,.81236,.22667],[.93909,.80439,.22744],[.94489,.79634,.228],[.95039,.78823,.22831],[.9556,.78005,.22836],[.96049,.77181,.22811],[.96507,.76352,.22754],[.96931,.75519,.22663],[.97323,.74682,.22536],[.97679,.73842,.22369],[.98,.73,.22161],[.98289,.7214,.21918],[.98549,.7125,.2165],[.98781,.7033,.21358],[.98986,.69382,.21043],[.99163,.68408,.20706],[.99314,.67408,.20348],[.99438,.66386,.19971],[.99535,.65341,.19577],[.99607,.64277,.19165],[.99654,.63193,.18738],[.99675,.62093,.18297],[.99672,.60977,.17842],[.99644,.59846,.17376],[.99593,.58703,.16899],[.99517,.57549,.16412],[.99419,.56386,.15918],[.99297,.55214,.15417],[.99153,.54036,.1491],[.98987,.52854,.14398],[.98799,.51667,.13883],[.9859,.50479,.13367],[.9836,.49291,.12849],[.98108,.48104,.12332],[.97837,.4692,.11817],[.97545,.4574,.11305],[.97234,.44565,.10797],[.96904,.43399,.10294],[.96555,.42241,.09798],[.96187,.41093,.0931],[.95801,.39958,.08831],[.95398,.38836,.08362],[.94977,.37729,.07905],[.94538,.36638,.07461],[.94084,.35566,.07031],[.93612,.34513,.06616],[.93125,.33482,.06218],[.92623,.32473,.05837],[.92105,.31489,.05475],[.91572,.3053,.05134],[.91024,.29599,.04814],[.90463,.28696,.04516],[.89888,.27824,.04243],[.89298,.26981,.03993],[.88691,.26152,.03753],[.88066,.25334,.03521],[.87422,.24526,.03297],[.8676,.2373,.03082],[.86079,.22945,.02875],[.8538,.2217,.02677],[.84662,.21407,.02487],[.83926,.20654,.02305],[.83172,.19912,.02131],[.82399,.19182,.01966],[.81608,.18462,.01809],[.80799,.17753,.0166],[.79971,.17055,.0152],[.79125,.16368,.01387],[.7826,.15693,.01264],[.77377,.15028,.01148],[.76476,.14374,.01041],[.75556,.13731,.00942],[.74617,.13098,.00851],[.73661,.12477,.00769],[.72686,.11867,.00695],[.71692,.11268,.00629],[.7068,.1068,.00571],[.6965,.10102,.00522],[.68602,.09536,.00481],[.67535,.0898,.00449],[.66449,.08436,.00424],[.65345,.07902,.00408],[.64223,.0738,.00401],[.63082,.06868,.00401],[.61923,.06367,.0041],[.60746,.05878,.00427],[.5955,.05399,.00453],[.58336,.04931,.00486],[.57103,.04474,.00529],[.55852,.04028,.00579],[.54583,.03593,.00638],[.53295,.03169,.00705],[.51989,.02756,.0078],[.50664,.02354,.00863],[.49321,.01963,.00955],[.4796,.01583,.01055]].map(e=>new E.Pa4().fromArray(e));function k(e){e=Math.max(0,Math.min(1,e));const t=Math.trunc(e*255),i=Math.min(255,t+1),n=e*255-t,l=U[t],o=U[i];return l.clone().lerp(o,n).multiplyScalar(255)}function K(e){const t=k(e);return`rgb(${Math.round(t.x)}, ${Math.round(t.y)}, ${Math.round(t.z)})`}var F=a(67067);function H(e,t){return(0,F.Uy)(e,i=>{switch(t.action){case"perform-node-action":throw new Error(`Unhandled node action: ${t.payload.id}`);case"update":switch(t.payload.path[0]){case"general":(0,y.set)(i,[t.payload.path[1]],t.payload.value);break;default:throw new Error(`Unexpected payload.path[0]: ${t.payload.path[0]}`)}break}})}const Y=["int8","uint8","int16","uint16","int32","uint32","float32","float64","string"];function J(e,t,i){const n=(0,r.useMemo)(()=>({error:i,fields:{path:{label:"Message path",input:"messagepath",value:e.path,error:t,validTypes:Y},minValue:{label:"Min",input:"number",value:e.minValue},maxValue:{label:"Max",input:"number",value:e.maxValue},colorMode:{label:"Color mode",input:"select",value:e.colorMode,options:[{label:"Color map",value:"colormap"},{label:"Gradient",value:"gradient"}]},...e.colorMode==="colormap"&&{colorMap:{label:"Color map",input:"select",value:e.colorMap,options:[{label:"Red to green",value:"red-yellow-green"},{label:"Rainbow",value:"rainbow"},{label:"Turbo",value:"turbo"}]}},...e.colorMode==="gradient"&&{gradient:{label:"Gradient",input:"gradient",value:e.gradient}},reverse:{label:"Reverse",input:"boolean",value:e.reverse}}}),[i,e,t]);return(0,d.O4)({general:n})}const X={path:"",minValue:0,maxValue:1,colorMap:"red-yellow-green",colorMode:"colormap",gradient:["#0000ff","#ff00ff"],reverse:!1};function G(e){if(e.length<=1)return e[0];throw new Error("Message path produced multiple results")}function z(e,t){try{switch(t.type){case"frame":{if(e.pathParseError!=null)return{...e,latestMessage:(0,y.last)(t.messages),error:void 0};let i=e.latestMatchingQueriedData,n=e.latestMessage;if(e.parsedPath)for(const l of t.messages){if(l.topic!==e.parsedPath.topicName)continue;const o=G((0,T.T)(l,e.parsedPath));o!=null&&(i=o,n=l)}return{...e,latestMessage:n,latestMatchingQueriedData:i,error:void 0}}case"path":{const i=(0,A.ZP)(t.path);let n;i?.messagePath.some(h=>h.type==="filter"&&typeof h.value=="object"||h.type==="slice"&&(typeof h.start=="object"||typeof h.end=="object"))===!0&&(n="Message paths using variables are not currently supported");let l,o;try{l=i&&n==null&&e.latestMessage?G((0,T.T)(e.latestMessage,i)):void 0}catch(h){o=h}return{...e,path:t.path,parsedPath:i,latestMatchingQueriedData:l,error:o,pathParseError:n}}case"seek":return{...e,latestMessage:void 0,latestMatchingQueriedData:void 0,error:void 0}}}catch(i){return{...e,latestMatchingQueriedData:void 0,error:i}}}function q(e,t,i,n){let l;switch(e.colorMode){case"colormap":switch(e.colorMap){case"red-yellow-green":l=[{color:"#f00",location:0},{color:"#ff0",location:.5},{color:"#0c0",location:1}];break;case"rainbow":l=[{color:"#f0f",location:0},{color:"#00f",location:1/5},{color:"#0ff",location:2/5},{color:"#0f0",location:3/5},{color:"#ff0",location:4/5},{color:"#f00",location:5/5}];break;case"turbo":{l=new Array(20).fill(void 0).map((h,D)=>({color:K(D/(20-1)),location:D/(20-1)}));break}}break;case"gradient":l=[{color:e.gradient[0],location:0},{color:e.gradient[1],location:1}];break}return e.reverse&&(l=l.map(o=>({color:o.color,location:1-o.location})).reverse()),`conic-gradient(from ${-Math.PI/2+n}rad at 50% ${100*(t/2/i)}%, ${l.map(o=>`${o.color} ${o.location*2*(Math.PI/2-n)}rad`).join(",")}, ${l[0].color})`}function _({context:e}){const[t,i]=(0,r.useState)(()=>()=>{}),[n,l]=(0,r.useState)(()=>({...X,...e.initialState})),[o,h]=(0,r.useReducer)(z,n,({path:M})=>({path:M,parsedPath:(0,A.ZP)(M),latestMessage:void 0,latestMatchingQueriedData:void 0,pathParseError:void 0,error:void 0}));(0,r.useLayoutEffect)(()=>{h({type:"path",path:n.path})},[n.path]),(0,r.useEffect)(()=>{e.saveState(n),e.setDefaultPanelTitle(n.path===""?void 0:n.path)},[n,e]),(0,r.useEffect)(()=>(e.onRender=(M,Q)=>{i(()=>Q),M.didSeek===!0&&h({type:"seek"}),M.currentFrame&&h({type:"frame",messages:M.currentFrame})},e.watch("currentFrame"),e.watch("didSeek"),()=>{e.onRender=void 0}),[e]);const D=(0,r.useCallback)(M=>l(Q=>H(Q,M)),[l]),L=J(n,o.pathParseError,o.error?.message);(0,r.useEffect)(()=>{e.updatePanelSettingsEditor({actionHandler:D,nodes:L})},[e,D,L]),(0,r.useEffect)(()=>(o.parsedPath?.topicName!=null&&e.subscribe([o.parsedPath.topicName]),()=>e.unsubscribeAll()),[e,o.parsedPath?.topicName]),(0,r.useEffect)(()=>{t()},[t]);const V=typeof o.latestMatchingQueriedData=="number"||typeof o.latestMatchingQueriedData=="string"?Number(o.latestMatchingQueriedData):NaN,{minValue:S,maxValue:B}=n,W=(Math.max(S,Math.min(V,B))-S)/(B-S),a0=V<S||V>B,R=.1,x=.5+R,b=.5+R,u=-Math.PI/8,$=.5,v=.4,N=1+2*R,j=Math.max(b-$*Math.sin(u),b-v*Math.sin(u))+R,O=8,r0=.05,[Z]=(0,r.useState)(()=>`gauge-clip-path-${(0,m.Z)()}`);return(0,s.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",overflow:"hidden",padding:8},children:(0,s.jsxs)("div",{style:{width:"100%",overflow:"hidden"},children:[(0,s.jsxs)("div",{style:{position:"relative",maxWidth:"100%",maxHeight:"100%",aspectRatio:`${N} / ${j}`,margin:"0 auto",transform:"scale(1)"},children:[(0,s.jsx)("div",{style:{width:"100%",height:"100%",background:q(n,N,j,u),clipPath:`url(#${Z})`,opacity:o.latestMatchingQueriedData==null?.5:1}}),(0,s.jsx)("div",{style:{backgroundColor:a0?"orange":"white",width:O,height:`${100*($+r0)/j}%`,border:"2px solid black",borderRadius:O/2,position:"absolute",bottom:`${100*(1-b/j)}%`,left:"50%",transformOrigin:"bottom left",margin:"0 auto",transform:["scaleZ(1)",`rotate(${-Math.PI/2+u+W*2*(Math.PI/2-u)}rad)`,`translateX(${-O/2}px)`,`translateY(${O/2}px)`].join(" "),display:Number.isFinite(W)?"block":"none"}})]}),(0,s.jsx)("svg",{style:{position:"absolute"},children:(0,s.jsx)("clipPath",{id:Z,clipPathUnits:"objectBoundingBox",children:(0,s.jsx)("path",{transform:`scale(${1/N}, ${1/j})`,d:[`M ${x-$*Math.cos(u)},${b-$*Math.sin(u)}`,`A 0.5,0.5 0 ${u<0?1:0} 1 ${x+$*Math.cos(u)},${b-$*Math.sin(u)}`,`L ${x+v*Math.cos(u)},${b-v*Math.sin(u)}`,`A ${v},${v} 0 ${u<0?1:0} 0 ${x-v*Math.cos(u)},${b-v*Math.sin(u)}`,"Z"].join(" ")})})})]})})}function e0(e,t){return p.render((0,s.jsx)(r.StrictMode,{children:(0,s.jsx)(g.o,{onError:e,children:(0,s.jsx)(c.Z,{isDark:!0,children:(0,s.jsx)(_,{context:t})})})}),t.panelElement),()=>{p.unmountComponentAtNode(t.panelElement)}}function I(e){const t=(0,d.iY)(),i=(0,r.useMemo)(()=>e0.bind(void 0,t),[t]);return(0,s.jsx)(P._,{config:e.config,saveConfig:e.saveConfig,initPanel:i,highestSupportedConfigVersion:1})}I.panelType="Gauge",I.defaultConfig={};const t0=(0,w.Z)(I)},49302:(C,f,a)=>{a.d(f,{f:()=>p});var s=a(76635),r=a.n(s);function p(d){return(0,s.isTypedArray)(d)}}}]);

//# sourceMappingURL=studio-9235.js.map