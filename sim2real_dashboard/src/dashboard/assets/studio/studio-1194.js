(self.webpackChunk=self.webpackChunk||[]).push([[1194],{97287:(k,D,t)=>{"use strict";t.r(D),t.d(D,{default:()=>je});var e=t(52322),$=t(34425),m=t(68234),x=t(67067),p=t(76635),a=t(2784),d=t(59506),b=t(29268),v=t(14075),U=t(82044),V=t(76479),Z=t(93812),s=t(39367),o=t(21580),g=t(96511),u=t(55878),c=t(27728),N=t(98214),P=t(87037),E=t(70969),B=t(6281),J=t(74073),q=t(20379),Q=t(68434),ae=t(60985),oe=t(24330),ie=t.n(oe),le=t(8740),re=t(90873),_=t(11234),F=t(39192);const ee=.1,te=["b","br","center","code","em","font","i","strong","table","td","th","tr","tt","u","h1","h2","h3","h4","h5","h6","H1","H2","H3","H4","H5","H6"],ce=(0,le.ZL)()(n=>({resizeHandle:{position:"absolute",top:0,bottom:0,width:12,marginLeft:-6,cursor:"col-resize","&:hover, &:active, &:focus":{outline:"none","&::after":{content:'""',position:"absolute",top:0,bottom:0,left:6,marginLeft:-2,width:4,backgroundColor:n.palette.action.focus}}},table:{"@media (pointer: fine)":{[`.${u.Z.root} .${c.Z.root}`]:{visibility:"hidden"},[`.${u.Z.root}:hover .${c.Z.root}`]:{visibility:"visible"}}},tableHeaderRow:{backgroundColor:n.palette.background.paper},htmlTableCell:{"h1, h2, h3, h4, h5, h6":{fontFamily:n.typography.subtitle2.fontFamily,fontSize:n.typography.subtitle2.fontSize,lineHeight:n.typography.subtitle2.lineHeight,letterSpacing:n.typography.subtitle2.letterSpacing,fontWeight:800,margin:0}},iconButton:{"&:hover, &:active, &:focus":{backgroundColor:"transparent"}}}));function ne(n){return{__html:ie()(n,{allowedTags:te,allowedAttributes:{font:["color","size"],td:["colspan"],th:["colspan"]}})}}const se=new RegExp(`<(${te.join("|")})`),de=(0,ae.P1)(n=>n,n=>n.values.map(({key:h,value:r})=>({key:h,keyHtml:se.test(h)?ne(h):void 0,value:r,valueHtml:se.test(r)?ne(r):void 0})));function ue(n){const{onChangeSplitFraction:h,info:r,topicToRender:O,numericPrecision:A,openSiblingPanel:S,splitFraction:C=.5}=n,{classes:f}=ce(),y=(0,a.useRef)(null),G=(0,a.useCallback)(M=>{X(!0),M.preventDefault()},[]),W=(0,a.useCallback)(()=>X(!1),[]),I=(0,a.useCallback)(M=>{if(!y.current)return;const{left:j,right:L}=y.current.getBoundingClientRect(),T=(0,p.clamp)((M.clientX-j)/(L-j),ee,1-ee);h(T)},[h]),[Y,X]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(Y)return window.addEventListener("mousemove",I),window.addEventListener("mouseup",W),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",W)}},[I,W,Y]);const K=(0,a.useCallback)((M,j,L)=>{if(M)return(0,e.jsx)(N.Z,{className:f.htmlTableCell,dangerouslySetInnerHTML:M});let T=j;return A!=null&&fe(j)&&(T=parseFloat(j).toFixed(A)),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(N.Z,{padding:"checkbox",children:(0,e.jsxs)(Z.Z,{direction:"row",gap:1,alignItems:"center",flex:"auto",justifyContent:"space-between",children:[T||"\xA0",L]})})})},[f.htmlTableCell,A]),R=(0,a.useCallback)(()=>de(r.status).map(({key:j,value:L,keyHtml:T,valueHtml:i},l)=>{const z=`${O}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.values[:]{key=="${j}"}.value`;let w;return L.length>0&&(w=isNaN(Number(L))?(0,e.jsx)(P.Z,{className:f.iconButton,title:"Open in State Transitions panel",color:"inherit",size:"small",onClick:()=>(0,_.openSiblingStateTransitionsPanel)(S,z),children:(0,e.jsx)(o.Z,{fontSize:"inherit"})}):(0,e.jsx)(P.Z,{className:f.iconButton,title:"Open in Plot panel",color:"inherit",size:"small","data-testid":"open-plot-icon",onClick:()=>(0,re.openSiblingPlotPanel)(S,z),children:(0,e.jsx)(g.Z,{fontSize:"inherit"})})),(0,e.jsxs)(E.Z,{hover:!0,children:[K(T,j),K(i,L,w)]},l)}),[f.iconButton,r.status,S,K,O]),H={[F.zq.OK]:"success.main",[F.zq.ERROR]:"error.main",[F.zq.WARN]:"warning.main",[F.zq.STALE]:"info.main"};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:f.resizeHandle,style:{left:`${100*C}%`},onMouseDown:G,"data-testid-resizehandle":!0}),(0,e.jsx)(B.Z,{className:f.table,size:"small",ref:y,children:(0,e.jsxs)(J.Z,{children:[(0,e.jsxs)(E.Z,{style:{height:0},children:[(0,e.jsx)(N.Z,{padding:"none",style:{width:`${100*C}%`,borderRight:"none"}}),(0,e.jsx)(N.Z,{padding:"none",style:{borderLeft:"none"}})]}),(0,e.jsx)(E.Z,{className:f.tableHeaderRow,children:(0,e.jsx)(N.Z,{variant:"head","data-testid":"DiagnosticStatus-display-name",colSpan:2,children:(0,e.jsx)(q.Z,{arrow:!0,title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Q.Z,{variant:"body2",children:["Hardware ID: ",(0,e.jsx)("code",{children:r.status.hardware_id})]}),(0,e.jsxs)(Q.Z,{variant:"body2",children:["Name: ",(0,e.jsx)("code",{children:r.status.name})]})]}),children:(0,e.jsx)(Q.Z,{color:H[r.status.level],variant:"subtitle1",fontWeight:800,children:r.displayName})})})}),(0,e.jsx)(E.Z,{hover:!0,children:(0,e.jsx)(N.Z,{colSpan:2,padding:"checkbox",children:(0,e.jsxs)(Z.Z,{direction:"row",flex:"auto",alignItems:"center",justifyContent:"space-between",gap:1,children:[(0,e.jsx)(Q.Z,{flex:"auto",color:H[r.status.level],variant:"inherit",fontWeight:800,children:r.status.message}),(0,e.jsx)(Z.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:1,children:(0,e.jsx)(P.Z,{className:f.iconButton,title:"Open in State Transitions panel",size:"small",onClick:()=>(0,_.openSiblingStateTransitionsPanel)(S,`${O}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.message`),children:(0,e.jsx)(o.Z,{fontSize:"inherit"})})})]})})}),R()]})})]})}function fe(n){return n[0]==="0"&&n.length>1&&(n[1]==="x"||n[1]==="X"||n[1]==="o"||n[1]==="O")?!1:!isNaN(parseFloat(n))&&isFinite(Number(n))}var me=t(30165),ge=t(36537);function he(n,h){let r=!1;for(const O of h){const{status:A}=O.message;if(A.length!==0)for(const S of A){const C=(0,ge.N)(S).hardware_id??"",f=S.name,y=n.get(C);y?!y.has(f)&&f&&(r=!0,y.add(f)):(r=!0,n.set(C,new Set([f])))}}return r?new Map(n):n}const pe=()=>new Map;function ve(n){const h=(0,a.useMemo)(()=>n?[n]:[],[n]);return(0,d.CC)({topics:h,restore:pe,addMessages:he})}var ye=t(99549);const xe=["diagnostic_msgs/DiagnosticArray","diagnostic_msgs/msg/DiagnosticArray","ros.diagnostic_msgs.DiagnosticArray"];function Se(n){const{saveConfig:h,config:r}=n,{topics:O}=(0,d.Ui)(),{openSiblingPanel:A}=(0,U.R)(),{selectedHardwareId:S,selectedName:C,splitFraction:f,topicToRender:y,numericPrecision:G}=r,W=(0,s.W0)(),I=(0,a.useMemo)(()=>{const i=O.filter(l=>l.schemaName!=null&&xe.includes(l.schemaName)).map(l=>l.name);return(0,p.uniq)([...i])},[O]),Y=(0,a.useMemo)(()=>I.includes(y)?y:void 0,[I,y]),X=(0,ye.Z)(Y),K=ve(Y),R=(0,a.useMemo)(()=>{const i=[];for(const[l,z]of K){l&&i.push({label:l,hardwareId:l,name:void 0});for(const w of z)if(w){const Ce=(0,F.Gf)(l,w);i.push({label:Ce,hardwareId:l,name:w})}}return i},[K]),H=(0,a.useMemo)(()=>S!=null?(0,F.Gf)(S,C??""):void 0,[S,C]),M=(0,a.useMemo)(()=>R.find(i=>i.label===H)??null,[R,H]),j=(0,a.useMemo)(()=>{const i=X.get(S??""),l=[];if(i!=null)for(const z of i.values())(C==null||C===z.status.name)&&l.push(z);return l},[X,S,C]),L=R.length>0?"No matches":"Waiting for diagnostics...",T=(0,a.useCallback)(i=>{if(i.action!=="update")return;const{path:l,value:z}=i.payload;h((0,x.Uy)(w=>(0,p.set)(w,l.slice(1),z)))},[h]);return(0,a.useEffect)(()=>{W({actionHandler:T,nodes:(0,me.N)(y,G,I)})},[T,I,y,G,W]),(0,e.jsxs)(Z.Z,{flex:"auto",overflow:"hidden",children:[(0,e.jsx)(V.Z,{children:(0,e.jsx)($.Z,{disablePortal:!0,blurOnSelect:!0,disabled:R.length===0,options:R,value:M??null,noOptionsText:L,onChange:(i,l)=>{if(!l){h({selectedHardwareId:void 0,selectedName:void 0});return}h({selectedHardwareId:l.hardwareId,selectedName:l.name})},fullWidth:!0,size:"small",renderInput:i=>(0,e.jsx)(m.Z,{variant:"standard",...i,InputProps:{...i.InputProps,disableUnderline:!0},placeholder:H??"Filter"})})}),j.length>0?(0,e.jsx)(Z.Z,{flex:"auto",overflowY:"auto",children:(0,p.sortBy)(j,({status:i})=>i.name.toLowerCase()).map(i=>(0,e.jsx)(ue,{info:i,splitFraction:f,onChangeSplitFraction:l=>n.saveConfig({splitFraction:l}),topicToRender:y,numericPrecision:G,openSiblingPanel:A},i.id))}):H?(0,e.jsxs)(b.Z,{children:["Waiting for diagnostics from ",(0,e.jsx)("code",{children:H})]}):(0,e.jsx)(b.Z,{children:"No diagnostic node selected"})]})}const be={topicToRender:"/diagnostics"},je=(0,v.Z)(Object.assign(Se,{panelType:"DiagnosticStatusPanel",defaultConfig:be}))},30165:(k,D,t)=>{"use strict";t.d(D,{N:()=>$,Y:()=>e});function e(m,x,p){const a=p.map(v=>({label:v,value:v})),d=p.includes(x);d||a.unshift({value:x,label:x});const b=d?void 0:`Topic ${x} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:x,error:b,options:a},sortByLevel:{label:"Sort by level",input:"boolean",value:m.sortByLevel}}}}}function $(m,x,p){const a=p.map(v=>({label:v,value:v})),d=p.includes(m);d||a.unshift({value:m,label:m});const b=d?void 0:`Topic ${m} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:m,error:b,options:a},numericPrecision:{label:"Numeric precision",input:"number",min:0,max:17,precision:0,step:1,placeholder:"auto",value:x}}}}}},99549:(k,D,t)=>{"use strict";t.d(D,{Z:()=>a});var e=t(2784),$=t(59506),m=t(39192);function x(d,b){let v=!1;for(const U of b){const{header:V,status:Z}=U.message;for(const s of Z){const o=(0,m.HE)(s,V.stamp),g=s.hardware_id,u=d.get(g);u==null?(v=!0,d.set(g,new Map([[s.name,o]]))):(v=!0,u.set(s.name,o))}}return v?new Map(d):d}const p=()=>new Map;function a(d){const b=(0,e.useMemo)(()=>d?[d]:[],[d]);return(0,$.CC)({topics:b,restore:p,addMessages:x})}},39192:(k,D,t)=>{"use strict";t.d(D,{ON:()=>a,zq:()=>x,KD:()=>p,HE:()=>U,uE:()=>Z,ep:()=>V,Gf:()=>v});var e=t(76635);function $({options:s,filter:o,getText:g,sort:u=!0}){if(o==null||o==="")return s;const c=o.toLowerCase().replace(/[^a-z0-9]/g,"");if(c.length===0)return s;const N=[];for(const P of s){const E=g(P).toLowerCase();let B=-1,J=0;for(const q of c){if(B=E.indexOf(q,B+1),B===-1)break;J+=B}B!==-1&&N.push({option:P,score:J*E.length})}return u&&N.sort((P,E)=>P.score-E.score),N.map(P=>P.option)}const m=5e3,x={OK:0,WARN:1,ERROR:2,STALE:3},p={0:"ok",1:"warn",2:"error",3:"stale"},a=[0,1,2,3];function d(s){return s.startsWith("/")?s.slice(1):s}function b(s,o){const g=d(s);return o!=null?`|${g}|${o}|`:`|${g}|`}function v(s,o){return o.length>0?s.length>0?`${s}: ${o}`:`${o}`:s.length>0?`${s}`:"(empty)"}function U(s,o){const g=v(s.hardware_id,s.name);let u=s;return s.values.some(({value:c})=>c.length>m)&&(u={...s,values:s.values.map(c=>c.value.length>m?{key:c.key,value:(0,e.truncate)(c.value,{length:m})}:c)}),{status:u,stamp:o,id:b(s.hardware_id,s.name),displayName:g}}function V(s){const o=new Map;for(const g of s.values())for(const u of g.values()){const c=o.get(u.status.level);c?c.push(u):o.set(u.status.level,[u])}return o}const Z=(s,o,g)=>{const u=s.filter(({id:c})=>!g.includes(c));return o.length===0?(0,e.sortBy)(u,c=>c.displayName.replace(/^\//,"")):$({options:u,filter:o,getText:({displayName:c})=>c})}},70764:()=>{},45158:()=>{},58635:()=>{},30139:()=>{},63653:()=>{}}]);

//# sourceMappingURL=studio-1194.js.map