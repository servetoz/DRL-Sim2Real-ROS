"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8867],{9771:(z,g,e)=>{var s,P=e(71600);s={value:!0},g.Z=void 0;var l=P(e(68671)),c=e(52322),m=(0,l.default)((0,c.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"}),"PushPin");g.Z=m},48867:(z,g,e)=>{e.r(g),e.d(g,{default:()=>ge});var s=e(52322),P=e(9771),l=e(27728),c=e(38066),m=e(1309),h=e(14218),r=e(15400),p=e(14117),v=e(87037),B=e(82056),A=e(29800),T=e(80078),t=e(68434),a=e(33459),u=e(67067),i=e(76635),n=e(2784),O=e(23509),E=e(8301),I=e(8740),D=e(8220),H=e(59506),G=e(29268),se=e(14075),ae=e(82044),oe=e(76479),U=e(93812),ie=e(99549),le=e(39367);function re(N,S,d=C=>C===S){const C=(0,i.reject)(N,d);return C.length===N.length&&C.push(S),C}var ce=e(30165),L=e(39192),de=e(2784);const X={ok:"success.main",warn:"warning.main",error:"error.main",stale:"text.secondary"},J=(0,I.ZL)()(N=>({listItemButton:{padding:0,[`.${l.Z.root}`]:{visibility:"hidden","&:hover":{backgroundColor:"transparent"}},[`.${c.Z.root}`]:{gap:N.spacing(1),display:"flex"},[`&:hover .${l.Z.root}`]:{visibility:"visible"}},select:{[`.${m.Z.input}.${h.Z.select}.${m.Z.inputSizeSmall}`]:{paddingTop:0,paddingBottom:0,minWidth:40},[`.${c.Z.root}`]:{marginTop:0,marginBottom:0}}})),ue=de.memo(function(S){const{info:d,isPinned:C,onClick:$,onClickPin:j}=S,{classes:y}=J(),x=(0,n.useCallback)(()=>{$(d)},[$,d]),M=(0,n.useCallback)(()=>{j(d)},[j,d]),R=L.KD[d.status.level];return(0,s.jsx)(r.ZP,{dense:!0,disablePadding:!0,"data-testid-diagnostic-row":!0,children:(0,s.jsxs)(p.Z,{className:y.listItemButton,disableGutters:!0,onClick:x,children:[(0,s.jsx)(v.Z,{size:"small",onClick:W=>{M(),W.stopPropagation()},style:C?{visibility:"visible"}:void 0,children:(0,s.jsx)(P.Z,{fontSize:"small",color:C?"inherit":"disabled"})}),(0,s.jsx)(B.Z,{primary:d.displayName,secondary:d.status.message,secondaryTypographyProps:{color:X[R??"stale"]},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})]})})}),me=["diagnostic_msgs/DiagnosticArray","diagnostic_msgs/msg/DiagnosticArray","ros.diagnostic_msgs.DiagnosticArray"];function ve(N){const{config:S,saveConfig:d}=N,{classes:C}=J(),{topics:$}=(0,H.Ui)(),{minLevel:j,topicToRender:y,pinnedIds:x,hardwareIdFilter:M,sortByLevel:R=!0}=S,{openSiblingPanel:W}=(0,ae.R)(),Q=(0,le.W0)(),w=(0,n.useCallback)(o=>{d({pinnedIds:re(x,o.id)})},[x,d]),k=(0,n.useCallback)(o=>{W({panelType:"DiagnosticStatusPanel",siblingConfigCreator:()=>({selectedHardwareId:o.status.hardware_id,selectedName:o.status.name,topicToRender:y,collapsedSections:[]}),updateIfExists:!0})},[y,W]),q=(0,n.useCallback)(o=>{const f=o.data[o.index];return(0,s.jsx)("div",{style:{...o.style},children:(0,s.jsx)(ue,{info:f,isPinned:x.includes(f.id),onClick:k,onClickPin:w},f.id)})},[x,k,w]),K=(0,n.useMemo)(()=>{const o=$.filter(f=>f.schemaName!=null&&me.includes(f.schemaName)).map(f=>f.name);return(0,i.uniq)([...o])},[$]),he=(0,n.useMemo)(()=>K.includes(y)?y:void 0,[K,y]),b=(0,ie.Z)(he),pe=(0,n.useMemo)(()=>{if(b.size===0)return(0,s.jsxs)(G.Z,{children:["Waiting for ",(0,s.jsx)("code",{children:y})," messages"]});const o=(0,D.Z)(x,Z=>{const[ee,te,ne]=Z.split("|");return ne==null||te==null?void 0:b.get(te)?.get(ne)}),f=(0,L.ep)(b),F=Array.from(f.keys()).sort().reverse(),V=R?[].concat(...F.map(Z=>(0,L.uE)(f.get(Z)??[],M,x))):(0,L.uE)([].concat(...f.values()),M,x),Y=[...(0,i.compact)(o),...V].filter(({status:Z})=>Z.level>=j);return Y.length===0?null:(0,s.jsx)(O.qj,{children:({height:Z,width:ee})=>(0,s.jsx)(E.t7,{width:ee,height:Z,style:{outline:"none"},itemSize:30,itemData:Y,itemCount:Y.length,overscanCount:10,children:q})})},[b,M,x,q,R,j,y]),_=(0,n.useCallback)(o=>{if(o.action!=="update")return;const{path:f,value:F}=o.payload;d((0,u.Uy)(V=>(0,i.set)(V,f.slice(1),F)))},[d]);return(0,n.useEffect)(()=>{Q({actionHandler:_,nodes:(0,ce.Y)(S,y,K)})},[_,K,S,y,Q]),(0,s.jsxs)(U.Z,{flex:"auto",children:[(0,s.jsx)(oe.Z,{children:(0,s.jsxs)(U.Z,{flex:"auto",direction:"row",gap:1,children:[(0,s.jsx)(A.Z,{className:C.select,value:j,id:"status-filter-menu",color:"secondary",size:"small",onChange:o=>d({minLevel:o.target.value}),MenuProps:{MenuListProps:{dense:!0}},children:L.ON.map(o=>(0,s.jsx)(T.Z,{value:o,children:(0,s.jsx)(t.Z,{variant:"inherit",color:X[L.KD[o]??"stale"],children:L.KD[o]?.toUpperCase()})},o))}),(0,s.jsx)(a.ZP,{value:M,placeholder:"Filter",onChange:o=>d({hardwareIdFilter:o.target.value}),style:{flex:"auto",font:"inherit"}})]})}),(0,s.jsx)(U.Z,{flex:"auto",children:pe})]})}const fe={minLevel:0,pinnedIds:[],hardwareIdFilter:"",topicToRender:"/diagnostics",sortByLevel:!0},ge=(0,se.Z)(Object.assign(ve,{panelType:"DiagnosticSummary",defaultConfig:fe}))},30165:(z,g,e)=>{e.d(g,{N:()=>P,Y:()=>s});function s(l,c,m){const h=m.map(v=>({label:v,value:v})),r=m.includes(c);r||h.unshift({value:c,label:c});const p=r?void 0:`Topic ${c} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:c,error:p,options:h},sortByLevel:{label:"Sort by level",input:"boolean",value:l.sortByLevel}}}}}function P(l,c,m){const h=m.map(v=>({label:v,value:v})),r=m.includes(l);r||h.unshift({value:l,label:l});const p=r?void 0:`Topic ${l} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:l,error:p,options:h},numericPrecision:{label:"Numeric precision",input:"number",min:0,max:17,precision:0,step:1,placeholder:"auto",value:c}}}}}},99549:(z,g,e)=>{e.d(g,{Z:()=>h});var s=e(2784),P=e(59506),l=e(39192);function c(r,p){let v=!1;for(const B of p){const{header:A,status:T}=B.message;for(const t of T){const a=(0,l.HE)(t,A.stamp),u=t.hardware_id,i=r.get(u);i==null?(v=!0,r.set(u,new Map([[t.name,a]]))):(v=!0,i.set(t.name,a))}}return v?new Map(r):r}const m=()=>new Map;function h(r){const p=(0,s.useMemo)(()=>r?[r]:[],[r]);return(0,P.CC)({topics:p,restore:m,addMessages:c})}},39192:(z,g,e)=>{e.d(g,{ON:()=>h,zq:()=>c,KD:()=>m,HE:()=>B,uE:()=>T,ep:()=>A,Gf:()=>v});var s=e(76635);function P({options:t,filter:a,getText:u,sort:i=!0}){if(a==null||a==="")return t;const n=a.toLowerCase().replace(/[^a-z0-9]/g,"");if(n.length===0)return t;const O=[];for(const E of t){const I=u(E).toLowerCase();let D=-1,H=0;for(const G of n){if(D=I.indexOf(G,D+1),D===-1)break;H+=D}D!==-1&&O.push({option:E,score:H*I.length})}return i&&O.sort((E,I)=>E.score-I.score),O.map(E=>E.option)}const l=5e3,c={OK:0,WARN:1,ERROR:2,STALE:3},m={0:"ok",1:"warn",2:"error",3:"stale"},h=[0,1,2,3];function r(t){return t.startsWith("/")?t.slice(1):t}function p(t,a){const u=r(t);return a!=null?`|${u}|${a}|`:`|${u}|`}function v(t,a){return a.length>0?t.length>0?`${t}: ${a}`:`${a}`:t.length>0?`${t}`:"(empty)"}function B(t,a){const u=v(t.hardware_id,t.name);let i=t;return t.values.some(({value:n})=>n.length>l)&&(i={...t,values:t.values.map(n=>n.value.length>l?{key:n.key,value:(0,s.truncate)(n.value,{length:l})}:n)}),{status:i,stamp:a,id:p(t.hardware_id,t.name),displayName:u}}function A(t){const a=new Map;for(const u of t.values())for(const i of u.values()){const n=a.get(i.status.level);n?n.push(i):a.set(i.status.level,[i])}return a}const T=(t,a,u)=>{const i=t.filter(({id:n})=>!u.includes(n));return a.length===0?(0,s.sortBy)(i,n=>n.displayName.replace(/^\//,"")):P({options:i,filter:a,getText:({displayName:n})=>n})}}}]);

//# sourceMappingURL=studio-8867.js.map