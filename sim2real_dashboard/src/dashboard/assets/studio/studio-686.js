(self.webpackChunk=self.webpackChunk||[]).push([[686],{72278:Be=>{(function(){function R(u){return u[0]}var i={Lexer:void 0,ParserRules:[{name:"main$ebnf$1",symbols:["messagePath"],postprocess:R},{name:"main$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"main$ebnf$2",symbols:["modifier"],postprocess:R},{name:"main$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"main",symbols:["topicName","main$ebnf$1","main$ebnf$2"],postprocess:u=>({topicName:u[0].value,topicNameRepr:u[0].repr,messagePath:u[1]||[],modifier:u[2]})},{name:"id$ebnf$1",symbols:[/[a-zA-Z0-9_-]/]},{name:"id$ebnf$1",symbols:["id$ebnf$1",/[a-zA-Z0-9_-]/],postprocess:function(m){return m[0].concat([m[1]])}},{name:"id",symbols:["id$ebnf$1"],postprocess:u=>u[0].join("")},{name:"integer$ebnf$1",symbols:[{literal:"-"}],postprocess:R},{name:"integer$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"integer$ebnf$2",symbols:[/[0-9]/]},{name:"integer$ebnf$2",symbols:["integer$ebnf$2",/[0-9]/],postprocess:function(m){return m[0].concat([m[1]])}},{name:"integer",symbols:["integer$ebnf$1","integer$ebnf$2"],postprocess:u=>({value:BigInt((u[0]??"")+u[1].join("")),repr:(u[0]??"")+u[1].join("")})},{name:"string$ebnf$1",symbols:[]},{name:"string$ebnf$1",symbols:["string$ebnf$1",/[^']/],postprocess:function(m){return m[0].concat([m[1]])}},{name:"string",symbols:[{literal:"'"},"string$ebnf$1",{literal:"'"}],postprocess:u=>({value:u[1].join(""),repr:`'${u[1].join("")}'`})},{name:"string$ebnf$2",symbols:[]},{name:"string$ebnf$2",symbols:["string$ebnf$2",/[^"]/],postprocess:function(m){return m[0].concat([m[1]])}},{name:"string",symbols:[{literal:'"'},"string$ebnf$2",{literal:'"'}],postprocess:u=>({value:u[1].join(""),repr:`"${u[1].join("")}"`})},{name:"variable$ebnf$1",symbols:["id"],postprocess:R},{name:"variable$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"variable",symbols:[{literal:"$"},"variable$ebnf$1"],postprocess:(u,m)=>({value:{variableName:u[1]||"",startLoc:m},repr:`$${u[1]||""}`})},{name:"value",symbols:["integer"],postprocess:u=>u[0]},{name:"value",symbols:["string"],postprocess:u=>u[0]},{name:"value$string$1",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(m){return m.join("")}},{name:"value",symbols:["value$string$1"],postprocess:u=>({value:!0,repr:"true"})},{name:"value$string$2",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(m){return m.join("")}},{name:"value",symbols:["value$string$2"],postprocess:u=>({value:!1,repr:"false"})},{name:"value",symbols:["variable"],postprocess:u=>u[0]},{name:"topicName$ebnf$1",symbols:["slashID"]},{name:"topicName$ebnf$1",symbols:["topicName$ebnf$1","slashID"],postprocess:function(m){return m[0].concat([m[1]])}},{name:"topicName",symbols:["topicName$ebnf$1"],postprocess:u=>({value:u[0].join(""),repr:u[0].join("")})},{name:"topicName$ebnf$2",symbols:[]},{name:"topicName$ebnf$2",symbols:["topicName$ebnf$2","slashID"],postprocess:function(m){return m[0].concat([m[1]])}},{name:"topicName",symbols:["id","topicName$ebnf$2"],postprocess:u=>({value:u[0]+u[1].join(""),repr:u[0]+u[1].join("")})},{name:"topicName",symbols:["quotedString"],postprocess:R},{name:"slashID$ebnf$1",symbols:["id"],postprocess:R},{name:"slashID$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"slashID",symbols:[{literal:"/"},"slashID$ebnf$1"],postprocess:u=>u.join("")},{name:"quotedString$ebnf$1",symbols:[]},{name:"quotedString$ebnf$1$subexpression$1",symbols:[/[^"\\]/]},{name:"quotedString$ebnf$1$subexpression$1$string$1",symbols:[{literal:"\\"},{literal:"\\"}],postprocess:function(m){return m.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$1"],postprocess:u=>"\\"},{name:"quotedString$ebnf$1$subexpression$1$string$2",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(m){return m.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$2"],postprocess:u=>'"'},{name:"quotedString$ebnf$1",symbols:["quotedString$ebnf$1","quotedString$ebnf$1$subexpression$1"],postprocess:function(m){return m[0].concat([m[1]])}},{name:"quotedString",symbols:[{literal:'"'},"quotedString$ebnf$1",{literal:'"'}],postprocess:u=>({value:u[1].join(""),repr:`"${u[1].join("").replace(/[\\"]/g,m=>`\\${m}`)}"`})},{name:"messagePath$ebnf$1",symbols:[]},{name:"messagePath$ebnf$1",symbols:["messagePath$ebnf$1","messagePathElement"],postprocess:function(m){return m[0].concat([m[1]])}},{name:"messagePath$ebnf$2",symbols:[{literal:"."}],postprocess:R},{name:"messagePath$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"messagePath",symbols:["messagePath$ebnf$1","messagePath$ebnf$2"],postprocess:u=>u[0].reduce((m,E)=>m.concat(E),[]).concat(u[1]?[{type:"name",name:"",repr:""}]:[])},{name:"messagePathElement$ebnf$1",symbols:["slice"],postprocess:R},{name:"messagePathElement$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"messagePathElement$ebnf$2",symbols:["filter"],postprocess:R},{name:"messagePathElement$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"messagePathElement",symbols:[{literal:"."},"name","messagePathElement$ebnf$1","messagePathElement$ebnf$2"],postprocess:u=>[u[1],u[2],u[3]].filter(m=>m!==null)},{name:"messagePathElement",symbols:["filter"],postprocess:R},{name:"name",symbols:["id"],postprocess:u=>({type:"name",name:u[0],repr:u[0]})},{name:"name",symbols:["quotedString"],postprocess:u=>({type:"name",name:u[0].value,repr:u[0].repr})},{name:"sliceVal",symbols:["integer"],postprocess:u=>Number(u[0].value)},{name:"sliceVal",symbols:["variable"],postprocess:u=>u[0].value},{name:"slice",symbols:[{literal:"["},"sliceVal",{literal:"]"}],postprocess:u=>({type:"slice",start:u[1],end:u[1]})},{name:"slice$ebnf$1",symbols:["sliceVal"],postprocess:R},{name:"slice$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"slice$ebnf$2",symbols:["sliceVal"],postprocess:R},{name:"slice$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"slice",symbols:[{literal:"["},"slice$ebnf$1",{literal:":"},"slice$ebnf$2",{literal:"]"}],postprocess:u=>({type:"slice",start:u[1]===null?0:u[1],end:u[3]===null?1/0:u[3]})},{name:"simplePath$ebnf$1",symbols:[]},{name:"simplePath$ebnf$1$subexpression$1",symbols:[{literal:"."},"id"]},{name:"simplePath$ebnf$1",symbols:["simplePath$ebnf$1","simplePath$ebnf$1$subexpression$1"],postprocess:function(m){return m[0].concat([m[1]])}},{name:"simplePath",symbols:["id","simplePath$ebnf$1"],postprocess:u=>[u[0]].concat(u[1].map(m=>m[1]))},{name:"filter$ebnf$1",symbols:["simplePath"],postprocess:R},{name:"filter$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$1",{literal:"}"}],postprocess:(u,m)=>({type:"filter",path:u[1]||[],value:void 0,nameLoc:m+1,valueLoc:m+1,repr:(u[1]||[]).join(".")})},{name:"filter$ebnf$2",symbols:["simplePath"],postprocess:R},{name:"filter$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"filter$string$1",symbols:[{literal:"="},{literal:"="}],postprocess:function(m){return m.join("")}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$2","filter$string$1","value",{literal:"}"}],postprocess:(u,m)=>({type:"filter",path:u[1]||[],value:u[3].value,nameLoc:m+1,valueLoc:m+1+(u[1]||[]).join(".").length+u[2].length,repr:`${(u[1]||[]).join(".")}==${u[3].repr}`})},{name:"modifier$string$1",symbols:[{literal:"."},{literal:"@"}],postprocess:function(m){return m.join("")}},{name:"modifier$ebnf$1",symbols:["id"],postprocess:R},{name:"modifier$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"modifier",symbols:["modifier$string$1","modifier$ebnf$1"],postprocess:u=>u[1]||""}],ParserStart:"main"};typeof Be.exports<"u"?Be.exports=i:window.grammar=i})()},84929:(Be,R,i)=>{"use strict";i.d(R,{fQ:()=>D,BL:()=>u,jK:()=>E,mN:()=>P,HF:()=>c,nK:()=>B});class u{#e;constructor(x){this.#e={compute:x}}async get(){if(this.#e.promise)return await this.#e.promise;const x=this.#e.compute();return this.#e={promise:x},await x}}var m=i(79044);class E{value;#e=new m.WU;constructor(x){this.value=x}async runExclusive(x){return await this.#e.runExclusive(async()=>await x(this.value))}}function c(n){let x=!1,F;const L=(...Q)=>{x?F=Q:q(Q)};function q(Q){x=!0,F=void 0,L.currentPromise=n(...Q).finally(()=>{x=!1,L.currentPromise=void 0,F&&q(F)})}return L}class P extends Error{name="PromiseTimeoutError"}async function B(n,x){return await new Promise((F,L)=>{const q=setTimeout(()=>{L(new P(`Promise timed out after ${x}ms`))},x);n.then(F,L).finally(()=>{clearTimeout(q)})})}class D{#e=[];async wait(){await new Promise(x=>{this.#e.push(x)})}notifyOne(){this.#e.shift()?.()}notifyAll(){for(const x of this.#e)x();this.#e.length=0}}},8220:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>u});function u(m,E){const c=[];let P=0;for(const B of m){const D=E(B,P++);D&&c.push(D)}return c}},7506:(Be,R,i)=>{"use strict";i.d(R,{de:()=>me,br:()=>c,iY:()=>ce,vE:()=>B,qe:()=>D,yV:()=>A,Iq:()=>se,UG:()=>oe,O4:()=>ge,t2:()=>M,R5:()=>Ee,tC:()=>ve,Wk:()=>Te});var u=i(2784),m=i(88665),E=i.n(m);function c(b,{initiallyTrue:C}){const I=(0,u.useRef)(C?void 0:b),le=!E()(I.current,b);return I.current=b,le}var P=i(76635);function B(b){const C=(0,u.useRef)(b);return(0,P.isEqual)(b,C.current)?C.current:(C.current=b,b)}function D(b,C){const I=(0,u.useContext)(b);if(I==null)throw new Error(`useGuaranteedContext got null for contextType${C!=null?`: '${C}'`:""}`);return I}var n=i(23503),x="../../packages/hooks/src/useMustNotChange.ts";const F=n.ZP.getLogger(x),L=b=>{const C=useRef(b);C.current!==b&&F.error("Value must not change",C.current),C.current=b},se=()=>{};function ae(b){const[C,I]=useState(void 0);return useCallback((...le)=>{try{return b(...le)}catch(O){I(()=>{throw O})}},[b])}function ge(b){const C=(0,u.useRef)(b);return E()(b,C.current)?C.current:(C.current=b,b)}var T="../../packages/hooks/src/useValueChangedDebugLog.ts";const Z=n.ZP.getLogger(T),$=()=>{};function V(b,C){const I=useRef(b);I.current!==b&&Z.debug(`value changed: ${C}`),useLayoutEffect(()=>{I.current=b})}const Ee=$;function ve(){const[b,C]=(0,u.useState)(document.visibilityState);return(0,u.useEffect)(()=>{C(document.visibilityState);const I=()=>C(document.visibilityState);return document.addEventListener("visibilitychange",I),()=>document.removeEventListener("visibilitychange",I)},[]),b}var Ce="../../packages/hooks/src/useWarnImmediateReRender.ts";const _=n.ZP.getLogger(Ce),Te=()=>{};var re="../../packages/hooks/src/useMemoryInfo.ts";const G=n.ZP.getLogger(re);function A(b){const{refreshIntervalMs:C}=b,[I,le]=(0,u.useState)(window.performance.memory);return(0,u.useEffect)(()=>{if(!window.performance.memory){G.info("No memory information available");return}const O=setInterval(()=>{le(window.performance.memory)},C);return()=>{clearInterval(O)}},[C]),I}var v="../../packages/hooks/src/selectWithUnstableIdentityWarning.ts";const w=n.ZP.getLogger(v);function me(b,C){return C(b)}function ue(b,C){throw C}function ce(){const[b,C]=(0,u.useReducer)(ue,void 0);return C}function oe(b){const[C,I]=(0,u.useState)(sessionStorage.getItem(b)??void 0),le=(0,u.useCallback)(j=>{j?(sessionStorage.setItem(b,j),window.dispatchEvent(new StorageEvent("storage",{key:b,newValue:j,storageArea:sessionStorage}))):(sessionStorage.removeItem(b),window.dispatchEvent(new StorageEvent("storage",{key:b,newValue:void 0,storageArea:sessionStorage})))},[b]),O=(0,u.useCallback)(j=>{j.key===b&&I(j.newValue??void 0)},[b]);return(0,u.useEffect)(()=>(window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)),[O]),[C??void 0,le]}function M(){const b=(0,u.useRef)(!1),C=(0,u.useCallback)(()=>b.current,[]);return(0,u.useLayoutEffect)(()=>(b.current=!0,()=>{b.current=!1}),[]),C}},93455:(Be,R,i)=>{"use strict";i.d(R,{o:()=>u});var u;(function(m){m.COLOR_SCHEME="colorScheme",m.TIMEZONE="timezone",m.TIME_FORMAT="time.format",m.MESSAGE_RATE="messageRate",m.UPDATES_ENABLED="updates.enabled",m.LANGUAGE="language",m.ROS_PACKAGE_PATH="ros.ros_package_path",m.TELEMETRY_ENABLED="telemetry.telemetryEnabled",m.CRASH_REPORTING_ENABLED="telemetry.crashReportingEnabled",m.SHOW_DEBUG_PANELS="showDebugPanels",m.HIDE_SIGN_IN_PROMPT="hideSignInPrompt",m.LAUNCH_PREFERENCE="launchPreference",m.SHOW_OPEN_DIALOG_ON_STARTUP="ui.open-dialog-startup",m.ENABLE_LAYOUT_DEBUGGING="enableLayoutDebugging",m.ENABLE_MEMORY_USE_INDICATOR="dev.memory-use-indicator"})(u||(u={}))},59506:(Be,R,i)=>{"use strict";i.d(R,{Bv:()=>Ce,Um:()=>Te,Ui:()=>n,CC:()=>ge,V7:()=>$});var u=i(2784),m=i(42741);function E(re){return re.datatypes}function c(re){return re.sortedTopics}function P(re){return re.playerState.activeData?.startTime}function B(re){return re.playerState.capabilities}function D(re){return re.playerState.playerId}function n(){const re=(0,m.An)(E),G=(0,m.An)(c),A=(0,m.An)(P),v=(0,m.An)(B),w=(0,m.An)(D);return(0,u.useMemo)(()=>({topics:G,datatypes:re,capabilities:v,startTime:A,playerId:w}),[v,re,w,A,G])}var x=i(91004),F=i(7506),L=i(23503),q=i(77861),Q="../../packages/studio-base/src/PanelAPI/useMessageReducer.ts";const se=L.ZP.getLogger(Q);function ae(re){return re.setSubscriptions}function ge(re){const[G]=(0,u.useState)(()=>(0,x.Z)()),{restore:A,addMessage:v,addMessages:w,preloadType:me="partial"}=re;if([re.addMessage,re.addMessages].filter(Boolean).length!==1)throw new Error("useMessageReducer must be provided with exactly one of addMessage or addMessages");(0,q.Z)(re.restore,()=>se.warn("useMessageReducer restore() is changing frequently. restore() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")),(0,q.Z)(re.addMessage,()=>se.warn("useMessageReducer addMessage() is changing frequently. addMessage() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")),(0,q.Z)(re.addMessages,()=>se.warn("useMessageReducer addMessages() is changing frequently. addMessages() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)"));const ue=(0,F.O4)(re.topics),ce=(0,u.useMemo)(()=>ue.map(b=>({topic:b,preloadType:me})),[me,ue]),oe=(0,m.An)(ae);(0,u.useEffect)(()=>oe(G,ce),[G,oe,ce]),(0,u.useEffect)(()=>()=>{oe(G,[])},[G,oe]);const M=(0,u.useRef)();return(0,m.An)((0,u.useCallback)(function(C){const I=C.messageEventsBySubscriberId.get(G),le=C.playerState.activeData?.lastSeekTime;let O;if(!M.current||le!==M.current.lastSeekTime?O=A(void 0):A!==M.current.restore||v!==M.current.addMessage||w!==M.current.addMessages?O=A(M.current.reducedValue):O=M.current.reducedValue,I&&I.length>0&&I!==M.current?.messageEvents){if(w)I.length>0&&(O=w(O,I));else if(v)for(const j of I)O=v(O,j)}return M.current={messageEvents:I,lastSeekTime:le,reducedValue:O,restore:A,addMessage:v,addMessages:w},M.current.reducedValue},[G,v,w,A]))}var T=i(76635);function Z(re,G,A){const v=A-G.length,w=v<=0?[]:re.slice(-v),me=A-w.length;for(let ue=Math.max(0,G.length-me);ue<G.length;++ue)w.push(G[ue]);return w}function $(re){const{historySize:G,topics:A}=re,v=(0,F.vE)(A),w=(0,u.useCallback)((ue,ce)=>{const oe=(0,T.groupBy)(ce,"topic"),M={...ue};return Object.entries(oe).forEach(([b,C])=>{const I=M[b];I&&(M[b]=Z(I,C,G))}),M},[G]),me=(0,u.useCallback)(ue=>{const ce={};for(const oe of v){const M=ue?.[oe];ce[oe]=M?.slice(-G)??[]}return ce},[v,G]);return ge({topics:v,restore:me,addMessages:w})}var V=i(5817),H=i.n(V);const Ee=H()((re,G)=>{if(!re)return{};const A={};for(const v of G){const w=re.messagesByTopic[v];w&&(A[v]=w)}return A}),ve=re=>{const[G]=(0,u.useState)(()=>(0,x.Z)()),A=(0,m.An)((0,u.useCallback)(({setSubscriptions:w})=>w,[])),v=(0,u.useMemo)(()=>re.map(w=>({topic:w,preloadType:"full"})),[re]);(0,u.useEffect)(()=>A(G,v),[G,A,v]),(0,u.useEffect)(()=>()=>{A(G,[])},[G,A])};function Ce(re){const G=(0,F.O4)(re);ve(G);const A=(0,m.An)((0,u.useCallback)(w=>w.playerState.progress.messageCache?.blocks,[]));return(0,u.useMemo)(()=>A?A.map(w=>Ee(w,G)):[],[A,G])}var _=i(88099),be=i(23571);function Te(re){const{getCurrentLayoutState:G,savePanelConfigs:A}=(0,_._B)(),v=(0,u.useCallback)(ue=>{if(re!=null)return(0,be.Y)(ue.selectedLayout?.data?.configById?.[re])},[re]),w=(0,_.NS)(v),me=(0,u.useCallback)(ue=>{if(re!=null)if(typeof ue=="function"){const ce=G().selectedLayout?.data?.configById[re];ce&&A({configs:[{id:re,config:ue(ce)}]})}else A({configs:[{id:re,config:ue}]})},[G,re,A]);return[w,me]}},30280:(Be,R,i)=>{"use strict";i.d(R,{h:()=>u});const u=44},90546:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>q});var u=i(52322),m=i(42713),E=i(98967),c=i(20379),P=i(87037),B=i(86232),D=i(68434),n=i(2784),x=i(28e3),F=i(2784);function L(Q){const{children:se,className:ae,color:ge="primary",edge:T,size:Z="medium",iconSize:$="medium",getText:V}=Q,[H,Ee]=(0,n.useState)(!1),ve=(0,n.useCallback)(()=>{x.Z.copy(V()).then(()=>{Ee(!0),setTimeout(()=>Ee(!1),1500)}).catch(Ce=>console.warn(Ce))},[V]);return se==null?(0,u.jsx)(c.Z,{arrow:!0,title:H?"Copied":"Copy to clipboard",children:(0,u.jsx)(P.Z,{edge:T,className:ae,size:Z,onClick:ve,color:H?"success":ge,children:H?(0,u.jsx)(m.Z,{fontSize:$}):(0,u.jsx)(E.Z,{fontSize:$})})}):(0,u.jsx)(B.Z,{size:Z,color:"inherit",className:ae,onClick:ve,startIcon:H?(0,u.jsx)(m.Z,{fontSize:$,color:"success"}):(0,u.jsx)(E.Z,{fontSize:$,color:"primary"}),children:(0,u.jsx)(D.Z,{color:H?"text.primary":ge,variant:"body2",children:se})})}const q=F.memo(L)},29796:(Be,R,i)=>{"use strict";i.d(R,{v:()=>Ce});var u=i(52322),m=i(2784),E=i(16003),c=i(42741),P=i(44668),B=i(27332),D=i(24304);const n=new Map;function x(_,be){return .7*(_??be)+.3*be}function F(_,be,Te,re){if(be==null||Te==null){const A=(0,P.toSec)(re);return A>0?_/A:void 0}if(_<2||(0,P.areEqual)(be,Te))return;const G=(0,P.toSec)((0,B.Ai)(Te,be));if(G>0)return(_-1)/G}function L(_,be){const Te=(0,P.toSec)(be);return Te>0?_/Te:void 0}const q=({playerState:_})=>_.activeData?.currentTime,Q=({playerState:_})=>_.activeData?.startTime,se=({playerState:_})=>_.activeData?.endTime,ae=_=>_.playerState.activeData?.topicStats??n,ge=_=>_.playerState.capabilities,T={};function Z(){const _=(0,c.An)(q),be=(0,c.An)(Q),Te=(0,c.An)(se),re=(0,c.An)(ae),G=(0,c.An)(ge),A=(0,m.useMemo)(()=>Te&&be?(0,B.Ai)(Te,be):{sec:0,nsec:0},[Te,be]),v=(0,m.useRef)({}),w=(0,m.useMemo)(()=>G.includes(D.C.playbackControl),[G]);return(0,m.useMemo)(()=>{if(!_)return T;const ue=(0,P.fromMillis)(Date.now()),ce={};for(const[oe,M]of re)if(w){const b=F(M.numMessages,M.firstMessageTime,M.lastMessageTime,A);ce[oe]=b}else{const b=v.current[oe];if(b==null)v.current[oe]={time:ue,count:M.numMessages,frequency:void 0};else{const C=M.numMessages-b.count;if(C>0){const I=(0,B.Ai)(ue,b.time),le=L(C,I);if(le!=null){const O=x(b.frequency,le);b.frequency=O,b.count=M.numMessages,b.time=ue}}ce[oe]=b.frequency}}return ce},[_,A,w,re])}const $="\u2014",V=new Map,H=_=>_.playerState.activeData?.topicStats??V,Ee=_=>_.playerState.playerId,ve=_=>_.playerState.capabilities;function Ce({interval:_=1}){const be=(0,c.An)(H),Te=(0,c.An)(ve),re=(0,c.An)(Ee),G=(0,E.Z)(be),A=(0,m.useRef)(0),v=(0,m.useRef)(null),w=(0,m.useRef)({}),me=Z(),ue=(0,E.Z)(me),ce=(0,m.useMemo)(()=>Te.includes(D.C.playbackControl),[Te]),oe=(0,m.useCallback)(()=>{v.current&&v.current.parentElement?.querySelectorAll("[data-topic]").forEach(M=>{if(!(M instanceof HTMLElement)||!M.dataset.topic)return;const b=M.dataset.topic,C=G.current.get(b);if(M.dataset.topicStat==="count"&&(C?M.innerText=C.numMessages.toLocaleString():M.innerText=$),M.dataset.topicStat==="frequency"){const I=ue.current[b];M.innerText=I!=null?`${I.toFixed(2)} Hz`:$}})},[ue,G]);return(0,m.useEffect)(()=>{A.current++%_===0&&oe()},[oe,_,be,ce]),(0,m.useEffect)(()=>{w.current={}},[re]),(0,m.useLayoutEffect)(()=>{oe()},[oe]),(0,u.jsx)("div",{ref:v,style:{display:"none"}})}},44449:(Be,R,i)=>{"use strict";i.d(R,{v:()=>se});var u=i(52322),m=i(68434),E=i(63249),c=i(2784),P=i(8533),B=i(68588),D=i(28219),n=i(8740),x=i(39347),F=i(93812),L=i(88099),q=i(40301);const Q=(0,n.ZL)()(ae=>({root:{backgroundColor:ae.palette.background.paper,width:"100%",height:"100%",overflowY:"auto"},dropTarget:{width:"100%",height:"100%",minHeight:0},isOver:{"&:after":{content:"''",borderColor:`1px solid ${ae.palette.action.selected}`,backgroundColor:ae.palette.action.focus,position:"absolute",top:0,right:0,left:0,bottom:0,zIndex:ae.zIndex.appBar}}})),se=({tabId:ae})=>{const{classes:ge,cx:T}=Q(),{addPanel:Z}=(0,L._B)(),{t:$}=(0,B.$G)("addPanel"),[{isOver:V},H]=(0,P.L)({accept:D.vv.WINDOW,drop:()=>({tabId:ae}),collect:ve=>({isOver:ve.isOver()})}),Ee=(0,c.useCallback)(({type:ve,config:Ce,relatedConfigs:_})=>{const be=(0,q.nJ)(ve);Z({tabId:ae,id:be,config:Ce,relatedConfigs:_})},[Z,ae]);return(0,u.jsx)("div",{ref:H,"data-testid":"empty-drop-target",className:T(ge.dropTarget,{[ge.isOver]:V}),children:(0,u.jsx)("div",{className:ge.root,children:(0,u.jsxs)(F.Z,{paddingBottom:2,children:[(0,u.jsxs)(m.Z,{variant:"body2",paddingX:2,paddingTop:2,children:[$("selectPanelToAddToLayout")," ",(0,u.jsx)(E.Z,{color:"primary",target:"_blank",href:"https://foxglove.dev/docs/studio/layouts",children:$("learnMore",{ns:"general"})})]}),(0,u.jsx)(x.B,{mode:"grid",onPanelSelect:Ee})]})})})}},29268:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>B});var u=i(52322),m=i(68434),E=i(8740),c=i(93812);const P=(0,E.ZL)()(D=>({root:{whiteSpace:"pre-line",code:{color:D.palette.primary.main,background:"transparent",padding:0}}}));function B({children:D,className:n}){const{classes:x,cx:F}=P();return(0,u.jsx)(c.Z,{className:F(x.root,n),flex:"auto",alignItems:"center",justifyContent:"center",fullHeight:!0,paddingX:1,children:(0,u.jsx)(m.Z,{variant:"body2",color:"text.secondary",lineHeight:1.4,align:"center",children:D})})}},38256:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>F});var u=i(52322),m=i(86232),E=i(68434),c=i(63249),P=i(2784),B=i(93812),D=i(2661),n=i(53542),x=i(54329);class F extends P.Component{state={currentError:void 0};componentDidCatch(q,Q){(0,D.e)(new n.g(q,Q)),this.setState({currentError:{error:q,errorInfo:Q}})}render(){if(this.state.currentError){const q=this.props.actions??(0,u.jsx)(B.Z,{fullHeight:!0,flex:"auto",alignItems:"flex-end",justifyContent:"flex-end",direction:"row",children:(0,u.jsx)(m.Z,{variant:"outlined",color:"secondary",onClick:()=>this.setState({currentError:void 0}),children:"Dismiss"})});return(0,u.jsx)(x.Z,{showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,content:(0,u.jsxs)(E.Z,{children:["Something went wrong."," ",(0,u.jsx)(c.Z,{color:"inherit",onClick:()=>this.setState({currentError:void 0}),children:"Dismiss this error"})," ","to continue using the app. If the issue persists, try restarting the app."]}),actions:q})}return this.props.children}}},54329:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>q});var u=i(52322),m=i(68434),E=i(56961),c=i(63249),P=i(2784),B=i(8740),D=i(93812);const n=(0,B.ZL)()(Q=>({grid:{display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%",padding:Q.spacing(2),overflowY:"auto"},errorDetailStack:{fontSize:Q.typography.body2.fontSize,lineHeight:"1.3em",paddingLeft:Q.spacing(2)},errorDetailContainer:{overflowY:"auto",background:Q.palette.background.paper,padding:Q.spacing(1),minHeight:Q.spacing(10)},actions:{flex:"auto",paddingTop:Q.spacing(2),textAlign:"right"}}));function x(Q){return Q.replace(/\s+\(.+\)$/gm,"").replace(/\s+https?:\/\/.+$/gm,"")}function F({stack:Q,hideSourceLocations:se}){const{classes:ae}=n(),ge=(se?x(Q):Q).trim().replace(/^\s*at /gm,"").split(`
`).map(T=>T.trim());return(0,u.jsx)("pre",{className:ae.errorDetailStack,children:ge.map((T,Z)=>{const $=/^(.+)\s(\(.+$)/.exec(T);return $?(0,u.jsxs)("span",{children:[(0,u.jsxs)("span",{children:[$[1]," "]}),(0,u.jsx)("span",{children:$[2]}),`
`]},Z):T+`
`})})}function L(Q){const{classes:se}=n(),{error:ae,errorInfo:ge,hideErrorSourceLocations:T=!1}=Q,[Z,$]=(0,P.useState)(Q.showErrorDetails??!1),V=(0,P.useMemo)(()=>{if(!Z)return null;let H=ae?.stack??"";const Ee=ae?.toString()??"";return H.startsWith(Ee)&&(H=H.substring(Ee.length)),(0,u.jsxs)("div",{children:[(0,u.jsx)(m.Z,{fontWeight:"bold",children:"Error stack:"}),(0,u.jsx)(F,{stack:H,hideSourceLocations:T}),ge&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m.Z,{fontWeight:"bold",children:"Component stack:"}),(0,u.jsx)(F,{stack:ge.componentStack,hideSourceLocations:T})]})]})},[ae,ge,T,Z]);return(0,u.jsxs)("div",{className:se.grid,children:[(0,u.jsxs)(D.Z,{gap:2,paddingBottom:2,children:[(0,u.jsxs)(D.Z,{children:[(0,u.jsx)(m.Z,{variant:"h4",gutterBottom:!0,children:Q.title??"The app encountered an unexpected error"}),(0,u.jsx)(m.Z,{variant:"body1",children:Q.content})]}),(0,u.jsx)(E.Z,{}),(0,u.jsx)(m.Z,{variant:"subtitle2",component:"code",fontWeight:"bold",children:ae?.message}),(0,u.jsxs)(c.Z,{color:"secondary",onClick:()=>$(!Z),children:[Z?"Hide":"Show"," details"]})]}),V&&(0,u.jsx)("div",{className:se.errorDetailContainer,children:V}),!V&&(0,u.jsx)("div",{}),(0,u.jsx)("div",{className:se.actions,children:Q.actions})]})}const q=L},76217:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>P});var u=i(52322),m=i(87037),E=i(2784);const c=(0,E.forwardRef)((B,D)=>{const{icon:n,activeIcon:x,color:F,activeColor:L,onMouseLeave:q,onMouseEnter:Q,...se}=B,[ae,ge]=(0,E.useState)(!1),T=(0,E.useCallback)($=>{Q?.($),B.disabled!==!0&&ge(!0)},[Q,B.disabled]),Z=(0,E.useCallback)($=>{q?.($),ge(!1)},[q]);return(0,E.useEffect)(()=>{B.disabled===!0&&ge(!1)},[B.disabled]),(0,u.jsx)(m.Z,{ref:D,...se,component:"button",onMouseEnter:T,onMouseLeave:Z,color:L!=null&&ae?L:F,children:x!=null&&ae?x:n})});c.displayName="HoverableIconButton";const P=c},47824:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>Z});var u=i(52322),m=i(85321),E=i(68434),c=i(8739),P=i(76635),B=i(8740),D=i(93812),n=i(77075);const x=$=>typeof $=="string"?$:Object.keys($).map(V=>`${V}: ${$[V]}`).join(", ");var F=i(2784);const{useState:L,useCallback:q,useRef:Q,useLayoutEffect:se,useEffect:ae}=F,ge=(0,B.ZL)()($=>({editor:{backgroundColor:"transparent !important",font:"inherit !important",fontFamily:`${n.R.MONOSPACE} !important`,overflow:"auto"},error:{"*":{color:`${$.palette.error.main} !important`}}}));function T({dataTestId:$,dataValidator:V=()=>{},onChange:H,onError:Ee,parse:ve,readOnly:Ce=!1,maxHeight:_,stringify:be,value:Te}){const{classes:re,cx:G}=ge(),[A,v]=L(""),[w,me]=L(""),ue=Q(""),ce=Q(null),[oe,M]=L(!1),b=q((I,le)=>{let O,j;if(I.trim()==="")O=Array.isArray(Te)?[]:{};else try{O=ve(I)}catch(U){j=U.message}if(j!=null){v(j);return}v("");const K=V(O);if(K!=null){v(x(K));return}le&&le(O)},[V,ve,Te]);se(()=>{if(!oe&&Te!==ue.current){if((0,P.isEqual)(Te,ue.current))return;let I="",le;try{I=be(Te)}catch(O){le=`Error stringifying the new value, using "" as default. ${O.message}`}if(me(I),ue.current=Te,le!=null){v(le);return}b(I)}},[Te,be,b,oe]);const C=q(I=>{const le=I.currentTarget.value;oe||M(!0),me(le),b(le,H)},[oe,b,H]);return ae(()=>{Ee&&A.length>0&&Ee(A)},[A,Ee]),se(()=>{if(!oe){const I=ce.current;I&&(I.scrollTop=I.scrollHeight)}},[oe,w]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.Z,{className:G(re.editor,{[re.error]:A.length>0}),readOnly:Ce,"data-testid":$??`validated-input-${JSON.stringify(w)}`,ref:ce,value:w,onChange:C,language:"json",onBlur:()=>M(!1),padding:12,style:{maxHeight:_??300}}),A.length>0&&(0,u.jsxs)(D.Z,{direction:"row",alignItems:"center",gap:.25,padding:.5,children:[(0,u.jsx)(m.Z,{fontSize:"inherit",color:"error"}),(0,u.jsx)(E.Z,{variant:"caption",color:"error.main",children:A})]})]})}function Z($){function V(H){return H==='""'?H:JSON.stringify(H,void 0,2)??""}return(0,u.jsx)(D.Z,{children:(0,u.jsx)(T,{parse:JSON.parse,stringify:V,...$,maxHeight:"none"})})}},86451:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>c});var u=i(52322),m=i(2784);function E(P,B){if(P&&typeof P[B.key]=="function"){let D=!0;try{D=P[B.key]?.(B)??!0}finally{D&&B.preventDefault()}}}function c(P){const B=(0,m.useRef)(null),D=(0,m.useCallback)(n=>{if(!(n instanceof KeyboardEvent))return;const{target:x,type:F}=n;if(!(x instanceof HTMLInputElement||x instanceof HTMLTextAreaElement||x instanceof HTMLElement&&x.isContentEditable))switch(F){case"keydown":E(P.keyDownHandlers,n);break;case"keypress":E(P.keyPressHandlers,n);break;case"keyup":E(P.keyUpHandlers,n);break;default:break}},[P.keyDownHandlers,P.keyPressHandlers,P.keyUpHandlers]);return(0,m.useEffect)(()=>{const n=P.global===!0?document:B.current?.parentElement;return n?.addEventListener("keydown",D),n?.addEventListener("keypress",D),n?.addEventListener("keyup",D),()=>{n?.removeEventListener("keydown",D),n?.removeEventListener("keypress",D),n?.removeEventListener("keyup",D)}},[D,P.global]),(0,u.jsx)("div",{style:{display:"none"},ref:B})}},43684:(Be,R,i)=>{"use strict";i.d(R,{ZP:()=>le});var u=i(52322),m=i(60536),E=i(76635),c=i(2784),P=i(59506),B=i(43749),D=i(7165),n=i(47746),x=i(34425),F=i(68234),L=i(80078),q=i(16037),Q=i(62515),se=i(8740),ae=i(68434),ge=i(8301),T=i(2784);const Z=Object.freeze({LISTBOX_PADDING:8,ROW_HEIGHT:26});function $(O){const{data:j,index:K,style:U}=O,Y=j[K],z={...U,top:U.top+Z.LISTBOX_PADDING};return(0,u.jsx)(ae.Z,{component:"li",noWrap:!0,style:z,children:Y})}const V=T.createContext({}),H=T.forwardRef((O,j)=>{const K=T.useContext(V);return(0,u.jsx)("div",{ref:j,...O,...K})});H.displayName="OuterElement";const Ee=T.forwardRef(function(j,K){const{children:U,...Y}=j,z=[];U.forEach(ne=>{z.push(ne),z.push(...ne.children??[])});const X=2*Z.LISTBOX_PADDING+Z.ROW_HEIGHT*(0,E.clamp)(z.length,16);return(0,u.jsx)("div",{ref:K,children:(0,u.jsx)(V.Provider,{value:Y,children:(0,u.jsx)(ge.t7,{height:X,itemCount:z.length,itemData:z,itemSize:Z.ROW_HEIGHT,outerElementType:H,width:"100%",children:$})})})}),ve=200,Ce=(0,se.ZL)()(O=>({root:{".MuiInputBase-root.MuiInputBase-sizeSmall":{backgroundColor:"transparent",paddingInline:0,"&:focus-within":{backgroundColor:O.palette.mode==="dark"?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)"},"&:hover, &:focus-within":{paddingRight:O.spacing(2.5)}}},clearIndicator:{marginRight:O.spacing(-.25),opacity:O.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},inputError:{input:{color:O.palette.error.main}},item:{padding:6,cursor:"pointer",minHeight:"100%",lineHeight:"calc(100% - 10px)",overflowWrap:"break-word",color:O.palette.text.primary,whiteSpace:"pre"},itemSelected:{backgroundColor:(0,D.Fq)(O.palette.primary.main,O.palette.action.selectedOpacity+O.palette.action.hoverOpacity)},itemHighlighted:{backgroundColor:O.palette.action.hover}}));function _(O){return function(j){if(typeof j=="string")return j;if(j!=null&&typeof j=="object"&&typeof j.value=="string")return j.value;throw new Error(`you need to provide an implementation of ${O}`)}}const be=new Set;function Te(O){return{item:O,score:0,positions:be,start:0,end:0}}const re=O=>{const j=(0,n.Z)(),U=O.str.split("").map((Y,z)=>O.indices.has(z)?(0,u.jsx)("b",{style:{color:j.palette.info.main},children:Y},z):(0,u.jsx)("span",{style:{whiteSpace:"pre"},children:Y},z));return(0,u.jsx)(u.Fragment,{children:U})},G=c.forwardRef(function(j,K){const U=(0,c.useRef)(null),{classes:Y,cx:z}=Ce(),[X,ne]=(0,c.useState)(void 0),Se=(0,c.useMemo)(()=>j.getItemText??_("getItemText"),[j.getItemText]),Ie=(0,c.useMemo)(()=>j.getItemValue??_("getItemValue"),[j.getItemValue]),{selectedItem:we,value:De=X??(we?Se(we):void 0),disabled:Le,filterText:Ge=De??"",items:He,onBlur:$e,onChange:Fe,onSelect:ot,placeholder:Ke,readOnly:Re,selectOnFocus:Me,sortWhenFiltering:Ve=!0}=j,Xe=(0,c.useMemo)(()=>He.map(Qe=>Te(Qe)),[He]),rt=(0,c.useMemo)(()=>new q.Av(He,{fuzzy:"v2",sort:Ve,limit:ve,selector:Se}),[Se,He,Ve]),yt=(0,c.useMemo)(()=>Ge?rt.find(Ge):Xe,[Ge,rt,Xe]),Ct=Boolean(j.hasError??(yt.length===0&&De?.length)),lt=we!=null?Ie(we):void 0,At=(0,c.useCallback)((Qe,et)=>{U.current?.focus(),U.current?.setSelectionRange(Qe,et)},[]),We=(0,c.useCallback)(()=>{U.current?.focus()},[]),Je=(0,c.useCallback)(()=>{U.current?.blur(),$e?.()},[$e]);(0,c.useImperativeHandle)(K,()=>({setSelectionRange:At,focus:We,blur:Je}),[At,We,Je]);const _e=(0,c.useCallback)((Qe,et)=>{Fe?Qe&&Fe(Qe,et):ne(et)},[Fe]),ze=(0,c.useCallback)((Qe,et)=>{et!=null&&typeof et!="string"&&(ne(void 0),ot(et.item,{setSelectionRange:At,focus:We,blur:Je}))},[ot,Je,We,At]);(0,Q.NB)({handleHeight:!1,onResize:()=>U.current?.blur(),refreshMode:"debounce",refreshRate:0,skipOnMount:!0,targetRef:U});const te=(0,c.useCallback)(Qe=>Qe,[]);return(0,u.jsx)(x.Z,{className:Y.root,clearIcon:(0,u.jsx)(B.Z,{fontSize:"small"}),componentsProps:{paper:{elevation:8},clearIndicator:{size:"small",className:Y.clearIndicator}},disableCloseOnSelect:!0,disabled:Le,freeSolo:!0,fullWidth:!0,getOptionLabel:Qe=>typeof Qe=="string"?Qe:Ie(Qe.item),filterOptions:te,ListboxComponent:Ee,onChange:ze,onInputChange:_e,openOnFocus:!0,options:yt,readOnly:Re,renderInput:Qe=>(0,u.jsx)(F.Z,{...Qe,variant:"filled",inputRef:U,"data-testid":"autocomplete-textfield",placeholder:Ke,className:z({[Y.inputError]:Ct}),size:"small"}),renderOption:(Qe,et,{selected:st})=>{const ft=Ie(et.item);return(0,c.createElement)(L.Z,{dense:!0,...Qe,key:ft,component:"span","data-highlighted":st,"data-testid":"autocomplete-item",className:z(Y.item,{[Y.itemHighlighted]:st,[Y.itemSelected]:lt!=null&&ft===lt})},(0,u.jsx)(re,{str:Se(et.item),indices:et.positions}))},selectOnFocus:Me,size:"small",value:De??null})});var A=i(36423),v=i(35528),w=i(94670),me=i(1012),ue=i(2784),ce=i(67649).Z;function oe(O,j){const K=new Map;for(const U of O)U.schemaName!=null&&M((0,me.dH)(U.name),U.schemaName,j,[],K);return K}function M(O,j,K,U,Y){const z=K.get(j);if(z){for(const X of z.definitions)if(!U.includes(X.type)&&X.isConstant!==!0){const ne=`${O}.${(0,me.UY)(X.name)}`;Y.set(ne,X),X.isComplex===!0&&M(ne,X.type,K,[...U,X.type],Y)}}}function b(O,j){const U=new Map().get(O);return U?(j({[O]:U}),!0):!1}function C(O,j,K){const{messagePath:U}=O,Y=Object.keys(j);return(0,E.flatMap)(U,z=>{const X=[];if(z.type==="filter"&&typeof z.value=="object"&&!Y.includes(z.value.variableName)){const[ne,Se]=[z.value.variableName,z.valueLoc];X.push({variableName:ne,loc:Se})}else if(z.type==="slice"){if(typeof z.start=="object"&&!Y.includes(z.start.variableName)){const[ne,Se]=[z.start.variableName,z.start.startLoc];X.push({variableName:ne,loc:Se})}if(typeof z.end=="object"&&!Y.includes(z.end.variableName)){const[ne,Se]=[z.end.variableName,z.end.startLoc];X.push({variableName:ne,loc:Se})}}return X}).filter(({variableName:z})=>!b(z,K))[0]}function I(O){switch(O){case"string":return'""';case"bool":return"true";case"float32":case"float64":case"uint8":case"uint16":case"uint32":case"uint64":case"int8":case"int16":case"int32":case"int64":return"0"}}const le=ue.memo(function(j){const{globalVariables:K,setGlobalVariables:U}=(0,A.Z)(),{datatypes:Y,topics:z}=P.Ui(),{supportsMathModifiers:X,path:ne,prioritizedDatatype:Se,validTypes:Ie,autoSize:we,placeholder:De,noMultiSlices:Le,inputStyle:Ge,disableAutocomplete:He=!1}=j,$e=(0,c.useMemo)(()=>oe(z,Y),[Y,z]),Fe=j.onChange,ot=(0,c.useCallback)((Qe,et)=>{let st=et;if(Qe.nativeEvent.data==="{"){const ft=Qe.target,ie=ft.selectionEnd??0;st=`${st.slice(0,ie)}}${st.slice(ie)}`,ce(()=>ft.setSelectionRange(ie,ie))}Fe(st,j.index)},[Fe,j.index]),Ke=(0,c.useCallback)((Qe,et,st,ft)=>{const ie=ne.slice(0,ft.start),mt=ne.slice(ft.end),Lt=ie+Qe+mt,It=$e.get(Lt),Tt=It!=null&&It.isComplex!==!0,ut=Ie==null||Ie.includes("message"),ht=st==="topicName"&&!ut&&!Tt,vt=ht?Qe+".":Qe;if(Fe(ie+vt+mt,j.index),ht||vt.includes("{")||ne.includes("{")){const Jt=ft.start+vt.length;ce(()=>et.setSelectionRange(Jt,Jt))}else et.blur()},[Fe,ne,j.index,$e,Ie]),Re=(0,c.useMemo)(()=>(0,me.ZP)(ne),[ne]),Me=(0,c.useMemo)(()=>{if(!Re)return;const{topicName:Qe}=Re;return z.find(({name:et})=>et===Qe)},[Re,z]),Ve=(0,c.useMemo)(()=>(0,w.pb)(Y),[Y]),Xe=(0,c.useMemo)(()=>{if(!(!Me||!Re?.messagePath))return Me.schemaName==null?{valid:!0,msgPathPart:void 0,structureItem:{structureType:"message",nextByName:{},datatype:""}}:(0,w.eT)(Ve[Me.schemaName],Re.messagePath)},[Ve,Re?.messagePath,Me]),rt=(0,c.useMemo)(()=>{if(Re)return C(Re,K,U)},[K,Re,U]),yt=(0,c.useMemo)(()=>z.map(({name:Qe})=>(0,me.dH)(Qe)),[z]),Ct=(0,c.useMemo)(()=>yt.concat(Array.from($e.keys())),[$e,yt]),lt=(0,c.useMemo)(()=>{if(Re)if(Me){if(Xe==null||!Xe.valid||!(0,w.Ky)(Xe.structureItem,Ie))return"messagePath"}else return"topicName";else return"topicName";if(rt)return"globalVariables"},[rt,Xe,Ie,Re,Me]),{autocompleteItems:At,autocompleteFilterText:We,autocompleteRange:Je}=(0,c.useMemo)(()=>{if(He)return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}};if(lt==="topicName")return{autocompleteItems:ne?Ct:yt,autocompleteFilterText:ne,autocompleteRange:{start:0,end:1/0}};if(lt==="messagePath"&&Me&&Re)if(Xe&&!Xe.valid&&Xe.msgPathPart?.type==="filter"&&Xe.structureItem?.structureType==="message"){const{msgPathPart:Qe}=Xe,et=[];for(const ft of Object.keys(Xe.structureItem.nextByName)){const ie=Xe.structureItem.nextByName[ft];ie?.structureType==="primitive"&&et.push(`${ft}==${I(ie.primitiveType)}`)}const st=Qe.path.join(".");return{autocompleteItems:et,autocompleteFilterText:st,autocompleteRange:{start:Qe.nameLoc,end:Qe.nameLoc+st.length}}}else{const Qe=Re.messagePath[0]?.type==="filter"?Re.messagePath[0].repr.length+2:0;return{autocompleteItems:Me.schemaName==null?[]:(0,w.fz)(Me.schemaName,Y,{validTypes:Ie,noMultiSlices:Le,messagePath:Re.messagePath}).filter(et=>et!==""&&!et.endsWith(".header.seq")),autocompleteRange:{start:Re.topicNameRepr.length+Qe,end:1/0},autocompleteFilterText:ne.substring(Re.topicNameRepr.length).replace(/\{[^}]*\}/g,"")}}else if(rt)return{autocompleteItems:Object.keys(K).map(Qe=>`$${Qe}`),autocompleteRange:{start:rt.loc,end:rt.loc+rt.variableName.length+1},autocompleteFilterText:rt.variableName};return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}}},[He,lt,Me,Re,rt,ne,yt,Ct,Xe,Y,Ie,Le,K]),_e=(0,c.useMemo)(()=>Se==null?At:(0,E.flatten)((0,E.partition)(At,Qe=>(0,v.N_)(z)[Qe]?.schemaName===Se)),[At,Se,z]),te=(X==null||!X)&&ne.includes(".@")||lt!=null&&!He&&ne.length>0;return(0,u.jsx)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1,flexShrink:0,spacing:.25,children:(0,u.jsx)(G,{items:_e,disabled:j.disabled,readOnly:j.readOnly,filterText:We,value:ne,onChange:ot,onSelect:(Qe,et)=>Ke(Qe,et,lt,Je),hasError:te,placeholder:De!=null&&De!==""?De:"/some/topic.msgs[0].field",autoSize:we,inputStyle:Ge,disableAutoSelect:!0})})})},60351:(Be,R,i)=>{"use strict";i.d(R,{H:()=>u,Q:()=>E});const u=["id","_id","ID","Id","key"],m=/^id$|_id$|I[dD]$|^key$/;function E(c){return m.test(c)}},94670:(Be,R,i)=>{"use strict";i.d(R,{pb:()=>Z,fz:()=>V,eT:()=>H,Ky:()=>$});var u=i(76635),m=i(5817),E=i.n(m),c=i(60351),P=i(1012),B=i(10363),D=i(71747);const n=(0,D.Z)({insensitive:!0});function x(Ee){return Ee==null?n:(ve,Ce)=>n(ve[Ee],Ce[Ee])}const F=x,q=Object.keys({bool:void 0,int8:void 0,uint8:void 0,int16:void 0,uint16:void 0,int32:void 0,uint32:void 0,int64:void 0,uint64:void 0,float32:void 0,float64:void 0,string:void 0}),Q=["int8","uint8","int16","uint16","int32","uint32","int64","uint64"];function se(Ee){return q.includes(Ee)}function ae(Ee){return Ee.structureType==="primitive"&&Q.includes(Ee.primitiveType)}let ge,T;function Z(Ee){if(ge===Ee&&T)return T;ge=void 0;const ve=(0,u.memoize)((Ce,_)=>{const be={},Te=Ee.get(Ce);if(!Te){if(Ce==="time"||Ce==="duration")return{structureType:"message",nextByName:{sec:{structureType:"primitive",primitiveType:"uint32",datatype:""},nsec:{structureType:"primitive",primitiveType:"uint32",datatype:""}},datatype:Ce};throw new Error(`datatype not found: "${Ce}"`)}return Te.definitions.forEach(re=>{if(re.isConstant===!0||_.includes(re.type))return;const G=se(re.type)?{structureType:"primitive",primitiveType:re.type,datatype:Ce}:ve(re.type,[..._,re.type]);re.isArray===!0?be[re.name]={structureType:"array",next:G,datatype:Ce}:be[re.name]=G}),{structureType:"message",nextByName:be,datatype:Ce}});T={};for(const[Ce]of Ee)T[Ce]=ve(Ce,[]);return ge=Ee,T}function $(Ee,ve){return!!Ee&&(!ve||ve.includes(Ee.structureType)||ve.includes(Ee.datatype)||Ee.structureType==="primitive"&&ve.includes(Ee.primitiveType))}function V(Ee,ve,{validTypes:Ce,noMultiSlices:_,messagePath:be=[]}={}){let Te=[...be];const re=[];function G(v,w){if($(v,Ce)&&re.push(w),v.structureType==="message")for(const[me,ue]of Object.entries(v.nextByName))G(ue,`${w}.${(0,P.UY)(me)}`);else if(v.structureType==="array")if(v.next.structureType==="message"){const me=Object.entries(v.next.nextByName).find(([ue])=>(0,c.Q)(ue));if(me){const[ue,ce]=me,oe=Te.find(M=>M.type==="filter"&&M.path[0]===ue);oe?(Te=Te.filter(M=>M!==oe),G(v.next,`${w}[:]{${ue}==${typeof oe.value=="object"?`$${oe.value.variableName}`:oe.value}}`)):ae(ce)?G(v.next,`${w}[:]{${ue}==0}`):G(v.next,`${w}[0]`)}else G(v.next,`${w}[0]`)}else _!==!0?G(v.next,`${w}[:]`):G(v.next,`${w}[0]`)}const A=Z(ve)[Ee];return A!=null&&G(A,""),re.sort(F())}const H=E()((Ee,ve)=>{let Ce=Ee;if(!Ce)return{valid:!1,msgPathPart:void 0,structureItem:void 0};for(const _ of ve){if(!Ce)return{valid:!1,msgPathPart:_,structureItem:Ce};if(_.type==="name"){if(Ce.structureType!=="message")return{valid:!1,msgPathPart:_,structureItem:Ce};Ce=Ce.nextByName[_.name]}else if(_.type==="slice"){if(Ce.structureType!=="array")return{valid:!1,msgPathPart:_,structureItem:Ce};Ce=Ce.next}else if(_.type==="filter"){if(Ce.structureType!=="message"||_.path.length===0||_.value==null)return{valid:!1,msgPathPart:_,structureItem:Ce};let be=Ce;for(const Te of _.path){if(be.structureType!=="message")return{valid:!1,msgPathPart:_,structureItem:Ce};if(be=be.nextByName[Te],be==null)return{valid:!1,msgPathPart:_,structureItem:Ce}}}else(0,B.v)(_,`Invalid msgPathPart.type: ${_.type}`)}return{valid:!0,msgPathPart:void 0,structureItem:Ce}})},1012:(Be,R,i)=>{"use strict";i.d(R,{UU:()=>Q,UY:()=>F,ZP:()=>q,dH:()=>x});var u=i(76635),m=i.n(u),E=i(43614),c=i.n(E),P=i(8220),B=i(72278),D=i.n(B);const n=E.Grammar.fromCompiled(D());function x(se){return se.match(/^[a-zA-Z0-9_/-]+$/)?se:`"${se.replace(/[\\"]/g,ae=>`\\${ae}`)}"`}function F(se){return se.match(/^[a-zA-Z0-9_-]+$/)?se:`"${se.replace(/[\\"]/g,ae=>`\\${ae}`)}"`}const L=(0,u.memoize)(se=>{const ae=new E.Parser(n);try{return ae.feed(se).results[0]}catch{return}}),q=L;function Q(se){return(0,u.uniq)((0,P.Z)(se,ae=>{const ge=L(ae);return ge?ge.topicName:void 0}))}},42741:(Be,R,i)=>{"use strict";i.d(R,{D2:()=>oe,An:()=>me,m7:()=>w});var u=i(52322),m=i(76635),E=i(2784),c=i(12294),P=i(7506),B=i(93455),D=i(27803),n=i(23503),x=i(44668),F=i(27999),L="../../packages/studio-base/src/components/MessagePipeline/MessageOrderTracker.ts";const q=1,Q=1,se=n.ZP.getLogger(L);class ae{#e=[];#t;#n;#s;#a;#o;#i=!1;#c=[];update(I){if(!I.activeData)return[];const le=[],{messages:O,currentTime:j,lastSeekTime:K,messagesRecomputed:U}=I.activeData;let Y=!1;if(this.#a!==K&&(this.#a=K,this.#o&&(clearTimeout(this.#o),this.#o=void 0,this.#c=[]),this.#o=this.#n=this.#t=void 0,this.#e=[],Y=!0),this.#e!==O||this.#t!==j){this.#e=O,this.#t=j;for(const z of O){const X=z.receiveTime;if(Y||Math.abs((0,x.toSec)((0,x.subtract)(X,j)))>q&&(this.#i&&this.#c.push(z),this.#o||(this.#o=setTimeout(()=>{this.#o=void 0;const Se={currentTime:j,lastSeekTime:K,messageTime:X,incorrectMessages:this.#i?this.#c:"not being tracked"};this.#c=[],se.warn("Message receiveTime very different from player.currentTime; without updating lastSeekTime",Se)},Q*1e3))),U!==!0&&this.#n&&this.#s!=null&&(0,x.isLessThan)(X,this.#n)){const ne=(0,F.AB)(X),Se=(0,F.AB)(this.#n),Ie=`Processed a message on ${z.topic} at ${ne} which is earlier than last processed message on ${this.#s} at ${Se}.`;le.push({severity:"warn",message:"Data went back in time",error:new Error(Ie)})}this.#s=z.topic,this.#n=X}}return le}}const ge=ae;var T=i(84929),Z=i(42146);const $=5e3;async function V(C){try{await(0,T.nK)(Promise.all(C.map(async({promise:I})=>await I)),$)}catch(I){if(!(I instanceof T.mN)){(0,Z.ZP)("Player ",I,"app","error");return}}}var H=i(88665),Ee=i.n(H),ve=i(42893),Ce=i(24304),_=i(10363);function be(){return{presence:Ce.m.NOT_PRESENT,progress:{},capabilities:[],profile:void 0,playerId:"",activeData:void 0}}function Te({promisesToWaitForRef:C,initialPlayer:I}){return(0,ve.M)((le,O)=>({player:I,dispatch(j){le(K=>A(K,j))},publishersById:{},allPublishers:[],subscriptionsById:new Map,subscriberIdsByTopic:new Map,newTopicsBySubscriberId:new Map,lastMessageEventByTopic:new Map,lastCapabilities:[],public:{playerState:be(),messageEventsBySubscriberId:new Map,subscriptions:[],sortedTopics:[],datatypes:new Map,setSubscriptions(j,K){O().dispatch({type:"update-subscriber",id:j,payloads:K})},setPublishers(j,K){O().dispatch({type:"set-publishers",id:j,payloads:K}),O().player?.setPublishers(O().allPublishers)},setParameter(j,K){O().player?.setParameter(j,K)},publish(j){O().player?.publish(j)},async callService(j,K){const U=O().player;if(U)return await U.callService(j,K);throw new Error("callService called when player is not present")},startPlayback:void 0,playUntil:void 0,pausePlayback:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0,pauseFrame(j){const K=new T.fQ;return C.current.push({name:j,promise:K.wait()}),()=>{K.notifyAll()}}}}))}function re(C,I){const le=C.subscriptionsById,O=new Map(C.newTopicsBySubscriberId),j=O.get(I.id);if(j){const z=le.get(I.id),X=new Set(z?.map(ne=>ne.topic)??[]);for(const{topic:ne}of I.payloads)X.has(ne)||j.add(ne)}else{const z=I.payloads.map(X=>X.topic);O.set(I.id,new Set(z))}const K=new Map(le);I.payloads.length===0?K.delete(I.id):K.set(I.id,I.payloads);const U=new Map,Y=[];for(const[z,X]of K)for(const ne of X){const Se=ne.topic,Ie=U.get(Se)??[];Ie.push(z),U.set(Se,Ie),Y.push(ne)}return{...C,subscriptionsById:K,subscriberIdsByTopic:U,newTopicsBySubscriberId:O,public:{...C.public,subscriptions:Y}}}function G(C,I){const le=I.playerState.activeData?.messages,O=new Set,j=new Map,K=C.subscriptionsById,U=C.subscriberIdsByTopic,Y=C.lastMessageEventByTopic,z=new Map(C.newTopicsBySubscriberId);if(le&&le!==C.public.playerState.activeData?.messages)for(const we of le){Y.set(we.topic,we),O.add(we.topic);const De=U.get(we.topic);if(De)for(const Le of De){let Ge=j.get(Le);Ge||(Ge=[],j.set(Le,Ge)),Ge.push(we)}}for(const we of K.keys()){const De=z.get(we);if(De){for(const Le of De){if(O.has(Le))continue;const Ge=Y.get(Le);if(Ge){const He=j.get(we)??[];He.unshift(Ge),j.set(we,He)}}De.clear()}}const X={...C.public,playerState:I.playerState,messageEventsBySubscriberId:j},ne=I.playerState.activeData?.topics;ne!==C.public.playerState.activeData?.topics&&(X.sortedTopics=ne?[...ne].sort((we,De)=>we.name.localeCompare(De.name)):[]),I.playerState.activeData?.datatypes!==C.public.playerState.activeData?.datatypes&&(X.datatypes=I.playerState.activeData?.datatypes??new Map);const Se=I.playerState.capabilities,Ie=C.player;return Ie&&!Ee()(Se,C.lastCapabilities)&&(X.startPlayback=Se.includes(Ce.C.playbackControl)?Ie.startPlayback?.bind(Ie):void 0,X.playUntil=Se.includes(Ce.C.playbackControl)?Ie.playUntil?.bind(Ie):void 0,X.pausePlayback=Se.includes(Ce.C.playbackControl)?Ie.pausePlayback?.bind(Ie):void 0,X.setPlaybackSpeed=Se.includes(Ce.C.setSpeed)?Ie.setPlaybackSpeed?.bind(Ie):void 0,X.seekPlayback=Se.includes(Ce.C.playbackControl)?Ie.seekPlayback?.bind(Ie):void 0),{...C,newTopicsBySubscriberId:z,renderDone:I.renderDone,public:X,lastCapabilities:Se}}function A(C,I){switch(I.type){case"update-player-state":return G(C,I);case"update-subscriber":return re(C,I);case"set-publishers":{const le={...C.publishersById,[I.id]:I.payloads};return{...C,publishersById:le,allPublishers:(0,m.flatten)(Object.values(le))}}case"set-player":return I.player===C.player?C:{...C,player:I.player,lastCapabilities:[],lastMessageEventByTopic:new Map,public:{...C.public,sortedTopics:[],datatypes:new Map,messageEventsBySubscriberId:new Map,startPlayback:void 0,pausePlayback:void 0,playUntil:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0}}}(0,_.v)(I,`Unhandled message pipeline action type ${I.type}`)}const v=(0,E.createContext)(void 0);function w(){const C=(0,P.qe)(v);return(0,E.useCallback)(()=>C.getState().public,[C])}function me(C){const I=(0,P.qe)(v);return(0,c.oR)(I,(0,E.useCallback)(le=>C(le.public),[C]))}const ue=C=>C.renderDone,ce=C=>C.public.subscriptions;function oe({children:C,player:I,globalVariables:le}){const O=(0,E.useRef)([]),[j]=(0,E.useState)(()=>Te({promisesToWaitForRef:O,initialPlayer:I}));(0,E.useEffect)(()=>{j.getState().dispatch({type:"set-player",player:I}),I?.setPublishers(j.getState().allPublishers)},[I,j]);const K=(0,c.oR)(j,ce),U=(0,E.useMemo)(()=>(0,m.debounce)(Se=>{I?.setSubscriptions(Se)}),[I]);(0,E.useEffect)(()=>()=>{U.cancel()},[U]),(0,E.useEffect)(()=>U(K),[U,K]);const[Y]=(0,D.b)(B.o.MESSAGE_RATE),z=(0,c.oR)(j,ue);(0,E.useLayoutEffect)(()=>{z?.()},[z]);const X=(0,E.useRef)(16);X.current=1e3/(Y??60);const ne=j.getState().dispatch;return(0,E.useEffect)(()=>{if(!I){ne({type:"update-player-state",playerState:be(),renderDone:void 0});return}const{listener:Se,cleanupListener:Ie}=b({msPerFrameRef:X,promisesToWaitForRef:O,dispatch:ne});return I.setListener(Se),()=>{Ie(),I.close(),ne({type:"update-player-state",playerState:be(),renderDone:void 0})}},[I,ne]),(0,E.useEffect)(()=>{I?.setGlobalVariables(le)},[I,le]),(0,u.jsx)(v.Provider,{value:j,children:C})}function M(C,I){return I.length===0?C:{...C,problems:I.concat(C.problems??[])}}function b(C){const{msPerFrameRef:I,promisesToWaitForRef:le,dispatch:O}=C,j=new ge;let K=!1,U;return{listener:async z=>{if(K)return;if(U)throw new Error("New playerState was emitted before last playerState was rendered.");const X=j.update(z),ne=M(z,X),Se=new Promise(Le=>{U=()=>{U=void 0,Le()}}),Ie=Date.now();let we=!1;function De(){if(we)return;we=!0;const Le=Date.now()-Ie,Ge=Math.max(0,I.current-Le);setTimeout(async()=>{if(K)return;const He=le.current;He.length>0&&(le.current=[],await V(He)),U&&U()},Ge)}return O({type:"update-player-state",playerState:ne,renderDone:De}),await Se},cleanupListener(){K=!0,U=void 0}}}},93723:(Be,R,i)=>{"use strict";i.d(R,{x:()=>m});var u=i(2784);const m=(0,u.createContext)(void 0)},14075:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>ce});var u=i(52322),m=i(24155),E=i(214),c=i(11224),P=i(69401),B=i(47746),D=i(86232),n=i(76635),x=i(2784),F=i(28219),L=i(17568),q=i(87438),Q=i(8740),se=i(7506),ae=i(59506),ge=i(86451),T=i(93723),Z=i(82044),$=i(63249),V=i(93812),H=i(2661),Ee=i(53542),ve=i(54329);class Ce extends x.Component{state={currentError:void 0};componentDidCatch(M,b){(0,H.e)(new Ee.g(M,b)),this.setState({currentError:{error:M,errorInfo:b}})}render(){return this.state.currentError?(0,u.jsx)(ve.Z,{title:"This panel encountered an unexpected error",error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,content:(0,u.jsxs)("p",{children:["Something went wrong in this panel."," ",(0,u.jsx)($.Z,{color:"inherit",onClick:()=>this.setState({currentError:void 0}),children:"Dismiss this error"})," ","to continue using this panel. If the issue persists, try resetting the panel."]}),actions:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(V.Z,{direction:"row-reverse",gap:1,children:[(0,u.jsx)(D.Z,{variant:"outlined",color:"secondary",onClick:()=>this.setState({currentError:void 0}),children:"Dismiss"}),(0,u.jsx)(D.Z,{variant:"outlined",title:"Reset panel settings to default values",color:"error",onClick:()=>{this.setState({currentError:void 0}),this.props.onResetPanel()},children:"Reset Panel"}),(0,u.jsx)(D.Z,{variant:"text",title:"Remove this panel from the layout",color:"error",onClick:this.props.onRemovePanel,children:"Remove Panel"})]})})}):this.props.children}}var _=i(84877),be=i(88099),Te=i(48105),re=i(54490),G=i(42689);function A(oe){const{tabId:M,panelId:b,onDragStart:C,onDragEnd:I}=oe,{mosaicWindowActions:le}=(0,x.useContext)(F.Jy),O=(0,be.Sr)(),{getCurrentLayoutState:j,startDrag:K,endDrag:U}=(0,be._B)(),[,Y,z]=(0,G.c)({type:F.vv.WINDOW,item:()=>{C&&C();const{selectedLayout:X}=j();if(!X?.data)return null;const{layout:ne,configById:Se}=X.data,Ie=le.getPath(),we=(0,n.defer)(()=>{K({path:Ie,sourceTabId:M})});return{mosaicId:O,deferredHide:we,originalLayout:ne,originalConfigById:Se}},end:(X,ne)=>{if(I&&I(),X.originalLayout==null)return;window.clearTimeout(X.deferredHide);const Se=le.getPath(),Ie=ne.getDropResult()??{},{position:we,path:De,tabId:Le}=Ie;b!=null&&U({originalLayout:X.originalLayout,originalSavedProps:X.originalConfigById,panelId:b,sourceTabId:M,targetTabId:Le,position:we,destinationPath:De,ownPath:Se})}});return[Y,z]}var v=i(11701),w=i(40301);const me=(0,Q.ZL)()(oe=>({actionsOverlay:{cursor:"pointer",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1e5,backgroundColor:oe.palette.background.paper,display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",flexDirection:"column",flexWrap:"wrap",visibility:"hidden",pointerEvents:"none",[`.${_.DY}:hover > &`]:{visibility:"visible",pointerEvents:"auto"},".hoverForScreenshot &":{visible:"visible",pointerEvents:"auto"}},perfInfo:{position:"absolute",whiteSpace:"pre-line",bottom:2,left:2,fontSize:9,opacity:.7,userSelect:"none",mixBlendMode:"difference"},container:{padding:oe.spacing(2),maxWidth:300,margin:"auto",gap:oe.spacing(1)},button:{flexDirection:"column",alignItems:"center",textAlign:"center",whiteSpace:"nowrap",padding:oe.spacing(1,2),width:"50%",flex:"auto",".MuiButton-startIcon":{margin:0}}})),ue="$unknown_id";function ce(oe){function M(b){const{childId:C=ue,overrideConfig:I,tabId:le,...O}=b,j=(0,B.Z)(),{classes:K,cx:U}=me(),Y=(0,q.Z)(),{mosaicActions:z}=(0,x.useContext)(F.DF),{mosaicWindowActions:X}=(0,x.useContext)(F.Jy),{selectedPanelIds:ne,setSelectedPanelIds:Se,selectAllPanels:Ie,togglePanelSelected:we,getSelectedPanelIds:De}=(0,be.iy)(),Le=(0,x.useMemo)(()=>ne.includes(C),[C,ne]),Ge=(0,x.useMemo)(()=>Le?ne.length:0,[Le,ne]),{savePanelConfigs:He,updatePanelConfigs:$e,createTabPanel:Fe,closePanel:ot,swapPanel:Ke,getCurrentLayoutState:Re}=(0,be._B)(),[Me,Ve]=(0,x.useState)(!1),[Xe,rt]=(0,x.useState)(!1),[yt,Ct]=(0,x.useState)(void 0),[lt,At]=(0,x.useState)(!1),We=(0,x.useRef)(null),Je=(0,Te.v)(),_e=(0,x.useContext)(T.x),ze=_e!=null&&_e.length===0&&le==null,te=(0,x.useContext)(Z.Z),Qe=oe.panelType,et=(0,x.useMemo)(()=>Je.getPanelByType(Qe)?.title??"",[Je,Qe]),st=oe.defaultConfig,[ft,ie]=(0,ae.Um)(C),mt=(0,x.useCallback)(()=>{ie(st)},[st,ie]),Lt=(0,x.useRef)(!1);(0,x.useLayoutEffect)(()=>{Lt.current||(!ft||Object.keys(ft).length===0?(Lt.current=!0,ie(st)):Object.entries(st).some(([ct,bt])=>bt!=null&&!(ct in ft))&&(Lt.current=!0,ie({...st,...ft})))},[st,ie,ft]);const It=(0,x.useMemo)(()=>({...st,...ft,...I}),[ft,st,I]),Tt=(0,x.useCallback)(async({panelType:ct,siblingConfigCreator:bt,updateIfExists:Cn})=>{const un=Re().selectedLayout?.data;if(!un)return;let Vt={};const nn=Je.getPanelByType(ct);if(nn){const En=await nn.module();if(!Y())return;Vt=En.default.defaultConfig}const Xt=X.getPath();if(Cn){const En=(0,n.last)(Xt),Js=En!=null?(0,F.Gv)(En):"second",qs=Xt.slice(0,-1).concat(Js),Un=(0,F.PC)(z.getRoot(),qs);if(typeof Un=="string"&&(0,w.$k)(Un)===ct){const _s={...Vt,...un.configById[Un]};He({configs:[{id:Un,config:bt(_s),defaultConfig:Vt}]});return}}const $s=Xt.concat("second"),Is=bt(Vt);X.split({type:ct,panelConfig:Is}).then(()=>{const En=(0,F.PC)(z.getRoot(),$s);He({configs:[{id:En,config:Is,defaultConfig:Vt}]})})},[Re,Y,z,X,Je,He]),ut=(0,x.useCallback)((ct,bt)=>{Ke({tabId:le,originalId:C,type:ct,root:z.getRoot(),path:X.getPath(),config:bt})},[C,z,X,Ke,le]),ht=(0,re.Q)(re.VI.selectPanelSettingsOpen),vt=(0,x.useCallback)(ct=>{ht?(ct.stopPropagation(),Se([C])):(ct.metaKey||ct.shiftKey||Le)&&(ct.stopPropagation(),we(C,le))},[C,le,we,Le,Se,ht]),Jt=(0,x.useCallback)(()=>{const ct=Re().selectedLayout?.data?.layout;ct!=null&&Fe({idToReplace:C,layout:ct,idsToRemove:De(),singleTab:!0})},[Re,De,Fe,C]),je=(0,x.useCallback)(()=>{const ct=Re().selectedLayout?.data?.layout;ct!=null&&Fe({idToReplace:C,layout:ct,idsToRemove:De(),singleTab:!1})},[Re,De,Fe,C]),wn=(0,x.useCallback)(()=>{ot({path:X.getPath(),root:z.getRoot(),tabId:le})},[ot,z,X,le]),cs=(0,x.useCallback)(()=>{const ct=Re().selectedLayout?.data?.configById;if(!ct)return;const bt=le!=null?ct[le]:void 0;if(le!=null&&bt!=null){const Cn=(0,w.nJ)(oe.panelType),un=bt.tabs[bt.activeTabIdx]?.layout;if(un==null)return;const Vt=(0,w.p9)(C,un),nn=(0,F.Xw)(un,[{path:Vt,spec:{$set:{first:C,second:Cn,direction:"row"}}}]),Xt=(0,w.p1)(nn,bt);He({configs:[{id:le,config:Xt},{id:Cn,config:It}]})}else X.split({type:oe.panelType})},[C,Re,X,It,He,le]),{enterFullscreen:Fn,exitFullscreen:qt}=(0,x.useMemo)(()=>({enterFullscreen:()=>{Ct(We.current?.getBoundingClientRect()),rt(!0),te?.setHasFullscreenDescendant(!0)},exitFullscreen:()=>{rt(!1)}}),[te]),vn=(0,x.useCallback)(ct=>{At(ct),te?.setHasFullscreenDescendant(ct)},[te]),{keyUpHandlers:cn,keyDownHandlers:zn}=(0,x.useMemo)(()=>({keyUpHandlers:{"`":()=>Ve(!1),"~":()=>Ve(!1)},keyDownHandlers:{a:ct=>{ct.preventDefault(),ct.metaKey&&Ie()},"`":()=>Ve(!0),"~":()=>Ve(!0)}}),[Ie]),Wt=(0,x.useMemo)(()=>({Escape:()=>qt()}),[qt]),tn=(0,se.O4)(O),dn=(0,x.useMemo)(()=>({config:It,saveConfig:ie,...tn}),[tn,It,ie]),bn=(0,x.useMemo)(()=>(0,u.jsx)(oe,{...dn}),[dn]),Oe=(0,x.useRef)(0),Ze=(0,x.useRef)(null),tt=(0,x.useRef)(null),Pt=(0,x.useCallback)(()=>{const ct=tt.current;ct&&(ct.style.opacity="0",setTimeout(()=>ct.style.opacity="1",0))},[]),Et={tabId:le,panelId:C,onDragStart:Pt},[xn,Ye]=A(Et),[Ts,Gn]=A(Et);return(0,u.jsx)(x.Profiler,{id:C,onRender:(ct,bt,Cn,un,Vt,nn,Xt)=>{Ze.current&&(Ze.current.innerText=`${++Oe.current}
${Cn.toFixed(1)}ms`)},children:(0,u.jsxs)(Z.Z.Provider,{value:{type:Qe,id:C,title:et,config:It,saveConfig:ie,updatePanelConfigs:$e,openSiblingPanel:Tt,replacePanel:ut,enterFullscreen:Fn,exitFullscreen:qt,setHasFullscreenDescendant:vn,isFullscreen:Xe,tabId:le,connectToolbarDragHandle:ze?void 0:Ts},children:[(0,u.jsx)(ge.Z,{global:!0,keyUpHandlers:cn,keyDownHandlers:zn}),Xe&&(0,u.jsx)(ge.Z,{global:!0,keyDownHandlers:Wt}),(0,u.jsx)(L.ZP,{in:Xe,onExited:()=>vn(!1),nodeRef:We,timeout:{exit:j.transitions.duration.shorter},children:ct=>(0,u.jsxs)(_.OS,{onClick:vt,hasFullscreenDescendant:lt,fullscreenState:ct,sourceRect:yt,selected:Le,"data-testid":U("panel-mouseenter-container",C),ref:bt=>{We.current=bt,ze||(Ye(bt),Gn(bt))},children:[Le&&!Xe&&Ge>1&&(0,u.jsx)("div",{className:K.actionsOverlay,children:(0,u.jsxs)(V.Z,{className:K.container,children:[(0,u.jsx)(D.Z,{fullWidth:!0,size:"large",variant:"contained",startIcon:(0,u.jsx)(P.Z,{fontSize:"large"}),onClick:Jt,children:"Group in tab"}),(0,u.jsxs)(D.Z,{fullWidth:!0,size:"large",variant:"contained",startIcon:(0,u.jsx)(c.Z,{fontSize:"large"}),onClick:je,children:["Create ",Ge," tabs"]})]})}),Qe!==v.bm&&Me&&!Xe&&(0,u.jsx)("div",{className:K.actionsOverlay,ref:bt=>{tt.current=bt,ze||xn(bt)},children:(0,u.jsxs)(V.Z,{className:K.container,direction:"row",children:[(0,u.jsx)(D.Z,{className:K.button,size:"large",variant:"contained",startIcon:(0,u.jsx)(E.Z,{fontSize:"large"}),onClick:bt=>{bt.stopPropagation(),wn()},children:"Remove"}),(0,u.jsx)(D.Z,{className:K.button,size:"large",variant:"contained",startIcon:(0,u.jsx)(m.Z,{fontSize:"large"}),onClick:cs,children:"Split"})]})}),(0,u.jsx)(Ce,{onRemovePanel:wn,onResetPanel:mt,children:(0,u.jsx)(x.StrictMode,{children:bn})}),!1]})})]})})}return Object.assign(x.memo(M),{defaultConfig:oe.defaultConfig,panelType:oe.panelType,displayName:`Panel(${oe.displayName??oe.name})`})}},39347:(Be,R,i)=>{"use strict";i.d(R,{B:()=>K});var u=i(52322),m=i(92679),E=i(31563),c=i(68234),P=i(87037),B=i(88601),D=i.n(B),n=i(76635),x=i(2784),F=i(68588),L=i(8740),q=i(29268),Q=i(93812),se=i(48105),ae=i(36537),ge=i(36754),T=i(96027),Z=i(35109),$=i(13843),V=i(49565),H=i(68434);const Ee=(0,L.ZL)()(U=>({root:{".TextHighlight-highlight":{color:U.palette.primary.main,fontWeight:"bold"}}}));function ve({targetStr:U="",searchText:Y=""}){const{classes:z}=Ee();if(Y.length===0)return(0,u.jsx)(u.Fragment,{children:U});const X=D().single(Y,U),ne=X?D().highlight(X,"<span class='TextHighlight-highlight'>","</span>"):void 0;return(0,u.jsx)("span",{className:z.root,children:ne!=null&&ne.length>0?(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:ne}}):U})}const Ce=(0,L.ZL)()(U=>({fullHeight:{height:"100%"},imagePlaceholder:{paddingBottom:`${200/280*100}%`,backgroundColor:U.palette.background.default},cardContent:{flex:"auto"}}));function _(U){const{searchQuery:Y,panel:z,onClick:X}=U,{classes:ne}=Ce(),Se=z.extensionNamespace?`${z.title} [${z.extensionNamespace}]`:z.title,Ie=(0,x.useCallback)(we=>{we.stopPropagation(),X()},[X]);return(0,u.jsx)(T.Z,{className:ne.fullHeight,children:(0,u.jsx)(Z.Z,{onClick:Ie,className:ne.fullHeight,children:(0,u.jsxs)(Q.Z,{fullHeight:!0,children:[z.thumbnail!=null?(0,u.jsx)($.Z,{component:"img",image:z.thumbnail,alt:z.title}):(0,u.jsx)("div",{className:ne.imagePlaceholder}),(0,u.jsxs)(V.Z,{className:ne.cardContent,children:[(0,u.jsx)(H.Z,{variant:"subtitle2",gutterBottom:!0,children:(0,u.jsx)("span",{"data-testid":`panel-menu-item ${z.title}`,children:(0,u.jsx)(ve,{targetStr:Se,searchText:Y})})}),(0,u.jsx)(H.Z,{variant:"body2",color:"text.secondary",children:(0,u.jsx)(ve,{targetStr:z.description??"",searchText:Y})})]})]})})})}const be=(0,L.ZL)()(U=>({grid:{display:"grid !important",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:U.spacing(2)}}));function Te(U){const{filteredPanels:Y,onPanelSelect:z,searchQuery:X=""}=U,{classes:ne}=be(),Se=(0,x.useCallback)(Ie=>{const{title:we,type:De,config:Le,relatedConfigs:Ge}=Ie;return(0,u.jsx)(_,{panel:Ie,searchQuery:X,onClick:()=>{z({type:De,config:Le,relatedConfigs:Ge})}},`${De}-${we}`)},[z,X]);return(0,u.jsx)(ge.Z,{className:ne.grid,maxWidth:!1,children:Y.map(Se)})}var re=i(81774),G=i(88099),A=i(69802),v=i(20379),w=i(17055),me=i(15400),ue=i(14117),ce=i(82056),oe=i(42689),M=i(28219);const b=(0,L.ZL)()((U,Y,z)=>({listItemButton:{height:U.spacing(4),cursor:"grab",[`&:not(:hover) .${z.dragIcon}`]:{visibility:"hidden"}},dragIcon:{cursor:"grab",marginRight:U.spacing(-1),color:U.palette.text.disabled}}));function C(U){const{searchQuery:Y,panel:z,onClick:X,onDragStart:ne,onDrop:Se,checked:Ie=!1,highlighted:we=!1,mosaicId:De}=U,{classes:Le}=b(),Ge=(0,x.useRef)(null),[,He]=(0,oe.c)({type:M.vv.WINDOW,item:()=>(ne?.(),{mosaicId:De}),options:{dropEffect:"copy"},end:(Ke,Re)=>{const Me=Re.getDropResult()??{},{position:Ve,path:Xe,tabId:rt}=Me;if((Ve==null||Xe==null)&&rt==null){X();return}const{type:yt,config:Ct,relatedConfigs:lt}=z;Se({type:yt,config:Ct,relatedConfigs:lt,position:Ve,path:Xe,tabId:rt})}});(0,x.useEffect)(()=>{if(we&&Ge.current){const Ke=Ge.current.getBoundingClientRect(),Re=Ge.current.parentElement?.parentElement?.parentElement;if(Re){const Me=Re.getBoundingClientRect().top;Ke.top>=0&&Ke.top>=Me&&Ke.top+50<=window.innerHeight||Ge.current.scrollIntoView()}}},[we]);const $e=(0,x.useCallback)(Ke=>{He(Ke),Ge.current=Ke},[He,Ge]),Fe=z.extensionNamespace?`${z.title} [${z.extensionNamespace}]`:z.title,ot=(0,x.useCallback)(Ke=>{Ke.stopPropagation(),X()},[X]);return(0,u.jsx)(v.Z,{placement:"right",enterDelay:500,leaveDelay:0,TransitionComponent:w.Z,title:(0,u.jsxs)(Q.Z,{paddingTop:.25,style:{width:200},children:[z.thumbnail!=null&&(0,u.jsx)("img",{src:z.thumbnail,alt:z.title}),(0,u.jsxs)(Q.Z,{padding:1,gap:.5,children:[(0,u.jsx)(H.Z,{variant:"body2",fontWeight:"bold",children:z.title}),(0,u.jsx)(H.Z,{variant:"body2",style:{opacity:.6},children:z.description})]})]}),children:(0,u.jsx)(me.ZP,{dense:!0,disablePadding:!0,children:(0,u.jsxs)(ue.Z,{selected:we,className:Le.listItemButton,disabled:Ie,ref:$e,onClick:ot,children:[(0,u.jsx)(ce.Z,{children:(0,u.jsx)("span",{"data-testid":`panel-menu-item ${z.title}`,children:(0,u.jsx)(ve,{targetStr:Fe,searchText:Y})})}),(0,u.jsx)(A.WeO,{className:Le.dragIcon})]})})})}function I(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function le(U){const{filteredPanels:Y,highlightedPanelIdx:z,onDragStart:X,onPanelSelect:ne,selectedPanelType:Se,searchQuery:Ie=""}=U,{dropPanel:we}=(0,G._B)(),De=(0,G.Sr)(),Le=(0,x.useCallback)(({config:$e,relatedConfigs:Fe,type:ot,position:Ke,path:Re,tabId:Me})=>{we({newPanelType:ot,destinationPath:Re,position:Ke,tabId:Me,config:$e,relatedConfigs:Fe}),I()},[we]),Ge=(0,x.useMemo)(()=>z!=null?Y[z]:void 0,[Y,z]),He=(0,x.useCallback)($e=>{const{title:Fe,type:ot,config:Ke,relatedConfigs:Re}=$e;return(0,u.jsx)(C,{mosaicId:De,panel:$e,onDragStart:X,onDrop:Le,onClick:()=>{ne({type:ot,config:Ke,relatedConfigs:Re}),I()},checked:ot===Se,highlighted:Ge?.title===Fe,searchQuery:Ie},`${ot}-${Fe}`)},[Ge?.title,De,X,Le,ne,Ie,Se]);return(0,u.jsx)(re.Z,{dense:!0,disablePadding:!0,children:Y.map(He)})}const O=(0,L.ZL)()(U=>{const{spacing:Y,palette:z}=U;return{toolbar:{position:"sticky",top:-.5,zIndex:100,display:"flex",justifyContent:"stretch",padding:U.spacing(1.5),backgroundImage:`linear-gradient(to top, transparent, ${z.background.paper} ${Y(1.5)}) !important`},toolbarMenu:{backgroundImage:`linear-gradient(to top, transparent, ${z.background.menu} ${Y(1.5)}) !important`},toolbarGrid:{padding:U.spacing(2)}}});function j(U){const Y=new Map;for(const z of U){const{title:X,type:ne,config:Se}=(0,ae.N)(z),Ie=X??ne??"<unnamed>";if(ne==null||ne.length===0)throw new Error(`Panel component ${X} must declare a unique \`static panelType\``);const we=(0,ae.N)(Y.get(ne));if(we&&(0,n.isEmpty)(we.config)&&(0,n.isEmpty)(Se)){const Le=we.title??we.type??"<unnamed>";throw new Error(`Two components have the same panelType ('${ne}') and no preset configs: ${Le} and ${Ie}`)}Y.set(ne,z)}}const K=(0,x.forwardRef)(function(Y,z){const{isMenu:X=!1,onDragStart:ne,onPanelSelect:Se,selectedPanelType:Ie,mode:we="list"}=Y,{classes:De,cx:Le}=O(),{t:Ge}=(0,F.$G)("addPanel"),[He,$e]=(0,x.useState)(""),[Fe,ot]=(0,x.useState)(),Ke=(0,x.useCallback)(_e=>{const ze=_e.target.value;$e(ze),ot(ze?0:void 0)},[]),Re=(0,se.v)(),Me=(0,x.useMemo)(()=>{const _e=Re.getPanels(),ze=(0,n.countBy)(_e,te=>te.title);return _e.map(te=>(ze[te.title]??0)>1?te:{...te,namespace:void 0})},[Re]),{allRegularPanels:Ve,allPreconfiguredPanels:Xe}=(0,x.useMemo)(()=>{const _e=Me,ze=_e.filter(et=>!et.config),te=_e.filter(et=>et.config),Qe=(et,st)=>et.title.localeCompare(st.title,void 0,{ignorePunctuation:!0,sensitivity:"base"});return{allRegularPanels:[...ze].sort(Qe),allPreconfiguredPanels:[...te].sort(Qe)}},[Me]);(0,x.useEffect)(()=>{j([...Ve,...Xe])},[Ve,Xe]);const rt=(0,x.useCallback)(_e=>He.length>0?D().go(He,_e,{keys:["title","description"],scoreFn:ze=>Math.max(ze[0]?ze[0].score:-1e3,ze[1]?ze[1].score-100:-1e3),threshold:-900}).map(ze=>ze.obj):_e,[He]),{filteredRegularPanels:yt,filteredPreconfiguredPanels:Ct}=(0,x.useMemo)(()=>({filteredRegularPanels:rt(Ve),filteredPreconfiguredPanels:rt(Xe)}),[rt,Ve,Xe]),lt=(0,x.useMemo)(()=>[...Ct,...yt],[Ct,yt]),At=(0,x.useMemo)(()=>Fe!=null?lt[Fe]:void 0,[lt,Fe]),We=lt.length===0,Je=(0,x.useCallback)(_e=>{_e.key!=="Escape"&&_e.stopPropagation(),we!=="grid"&&(_e.key==="ArrowDown"?ot(ze=>ze==null?0:(ze+1)%lt.length):_e.key==="ArrowUp"?ot(ze=>{if(!(lt.length<=0))return ze==null?lt.length-1:(ze-1+lt.length)%lt.length}):_e.key==="Enter"&&At&&Se({type:At.type,config:At.config,relatedConfigs:At.relatedConfigs}))},[lt.length,At,we,Se]);return(0,u.jsxs)(Q.Z,{fullHeight:!0,ref:z,children:[(0,u.jsx)("div",{className:Le(De.toolbar,{[De.toolbarMenu]:X,[De.toolbarGrid]:we==="grid"}),children:(0,u.jsx)(c.Z,{fullWidth:!0,placeholder:Ge("searchPanels"),value:He,onChange:Ke,onKeyDown:Je,autoFocus:!0,"data-testid":"panel-list-textfield",InputProps:{startAdornment:(0,u.jsx)(E.Z,{fontSize:"small",color:"primary"}),endAdornment:He&&(0,u.jsx)(P.Z,{size:"small",edge:"end",onClick:()=>$e(""),children:(0,u.jsx)(m.Z,{fontSize:"small"})})}})}),we==="grid"?(0,u.jsx)(Te,{searchQuery:He,filteredPanels:lt,onPanelSelect:Se}):(0,u.jsx)(le,{searchQuery:He,filteredPanels:lt,selectedPanelType:Ie,highlightedPanelIdx:Fe,onDragStart:ne,onPanelSelect:Se}),We&&(0,u.jsx)(Q.Z,{padding:2,children:(0,u.jsx)(q.Z,{children:Ge("noPanelsMatchSearchCriteria")})})]})})},82044:(Be,R,i)=>{"use strict";i.d(R,{R:()=>E,Z:()=>c});var u=i(2784);const m=u.createContext(void 0);m.displayName="PanelContext";function E(){const P=u.useContext(m);if(!P)throw new Error("Tried to use PanelContext outside a <PanelContext.Provider />");return P}const c=m},77357:(Be,R,i)=>{"use strict";i.d(R,{_:()=>U});var u=i(52322),m=i(47746),E=i(2784),c=i(16003),P=i(91004),B=i(7506),D=i(23503),n=i(44668),x=i(42741),F=i(82044),L=i(76479),q=i(82799),Q=i(51390),se=i(86495),ae=i(36423),ge=i(24304),T=i(39367),Z=i(10363),$=i(72283),V=i(96027),H=i(49565),Ee=i(68434),ve=i(68588),Ce=i(8740);const _=(0,Ce.ZL)()({root:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}});function be(){const{t:Y}=(0,ve.$G)("panelConfigVersionGuard"),{classes:z}=_();return(0,u.jsx)($.Z,{className:z.root,children:(0,u.jsx)(V.Z,{children:(0,u.jsxs)(H.Z,{children:[(0,u.jsx)(Ee.Z,{variant:"subtitle1",children:Y("warning")}),(0,u.jsx)(Ee.Z,{variant:"subtitle1",children:Y("instructions")})]})})})}var Te=i(5817),re=i.n(Te),G=i(8220),A=i(76635);function v(Y,z){return Y+`
`+z}function w(Y,z,X){const ne=v(Y.topic,Y.schemaName),Se=z.get(ne);for(const Ie of Se??[]){const we=Ie.converter(Y.message,Y);X.push({topic:Y.topic,schemaName:Ie.toSchemaName,receiveTime:Y.receiveTime,message:we,originalMessageEvent:Y,sizeInBytes:Y.sizeInBytes})}}function me(Y,z){const X=new Map;for(const[ne,Se]of Y.entries()){const Ie=(0,A.difference)(Se,z?.get(ne)??[]);Ie.length>0&&X.set(ne,Ie)}return X}function ue(Y,z,X){const ne=new Map,Se=new Set;for(const Ie of Y){if(!Ie.convertTo){Se.add(Ie.topic);continue}const we=z.find(Fe=>Fe.name===Ie.topic&&Fe.schemaName===Ie.convertTo);if(we){Se.add(we.name);continue}const De=z.find(Fe=>Fe.name===Ie.topic);if(!De)continue;const Le=v(Ie.topic,De.schemaName??"<no-schema>");let Ge=ne.get(Le);if(Ge?.find(Fe=>Fe.toSchemaName===Ie.convertTo))continue;const $e=X?.find(Fe=>Fe.fromSchemaName===De.schemaName&&Fe.toSchemaName===Ie.convertTo);$e&&(Ge??=[],Ge.push($e),ne.set(Le,Ge))}return{unconvertedSubscriptionTopics:Se,topicSchemaConverters:ne}}function ce(Y,z,X){const ne=Array(Y.length).fill(0);if(Y.length!==0)for(;;){let Se;for(let we=0;we<ne.length;we++){const De=ne[we],Le=Y[we];if(De>=Le.length)continue;const Ge=Le[De];if(Se==null)Se=we;else{const He=Y[Se][ne[Se]];z(Ge,He)<0&&(Se=we)}}if(Se==null)break;const Ie=Y[Se][ne[Se]];if(Ie!=null)X(Ie),ne[Se]++;else break}}const oe=new Map;function M(){let Y=ae.X,z,X,ne,Se,Ie,we,De;const Le=new Map,Ge=re()(me),He=re()(ue),$e={};return function(ot){const{appSettings:Ke,colorScheme:Re,currentFrame:Me,globalVariables:Ve,hoverValue:Xe,messageConverters:rt,playerState:yt,sharedPanelState:Ct,sortedTopics:lt,subscriptions:At,watchedFields:We}=ot;let Je=!1;const _e=yt?.activeData,ze=$e,te=He(At,lt,rt),{unconvertedSubscriptionTopics:Qe,topicSchemaConverters:et}=te,st=De!==te,ft=Ge(et,De?.topicSchemaConverters);if(X!==_e?.lastSeekTime&&Le.clear(),We.has("didSeek")){const ie=X!==_e?.lastSeekTime;ie!==ze.didSeek&&(ze.didSeek=ie,Je=!0),X=_e?.lastSeekTime}if(We.has("parameters")){const ie=_e?.parameters??oe;ie!==ze.parameters&&(Je=!0,ze.parameters=ie)}if(We.has("sharedPanelState")&&Ct!==Ie&&(Je=!0,Ie=Ct,ze.sharedPanelState=Ct),We.has("variables")&&Ve!==Y&&(Je=!0,Y=Ve,ze.variables=new Map(Object.entries(Ve))),We.has("topics")&&(lt!==ne||Se!==rt)){Je=!0;const ie=lt.map(mt=>{const Lt={name:mt.name,datatype:mt.schemaName??"",schemaName:mt.schemaName??""};if(rt){const It=[];for(const Tt of rt)Tt.fromSchemaName===mt.schemaName&&(It.includes(Tt.toSchemaName)||It.push(Tt.toSchemaName));It.length>0&&(Lt.convertibleTo=It)}return Lt});ze.topics=ie,ne=lt}if(We.has("currentFrame")){if(Me&&Me!==we){const ie=[];for(const mt of Me)Qe.has(mt.topic)&&ie.push(mt),w(mt,et,ie),Le.set(mt.topic,mt);ze.currentFrame=ie,Je=!0}else if(st){const ie=[];for(const mt of Le.values())w(mt,ft,ie);ze.currentFrame=ie,Je=!0}else Me!==we&&(ze.currentFrame=Me,Je=!0);we=Me}if(We.has("allFrames")){const ie=yt?.progress.messageCache?.blocks;if(ie&&z!==ie||st){Je=!0;const mt=ie??z??[],Lt=ze.allFrames=[],It=Array.from(new Set((0,G.Z)(At,Tt=>Tt.preload===!0?Tt.topic:void 0)));for(const Tt of mt)Tt&&ce(It.map(ut=>Tt.messagesByTopic[ut]??[]),(ut,ht)=>(0,n.compare)(ut.receiveTime,ht.receiveTime),ut=>{Qe.has(ut.topic)&&Lt.push(ut),w(ut,et,Lt)})}z=ie}if(We.has("currentTime")&&ze.currentTime!==_e?.currentTime&&(ze.currentTime=_e?.currentTime,Je=!0),We.has("startTime")&&ze.startTime!==_e?.startTime&&(ze.startTime=_e?.startTime,Je=!0),We.has("endTime")&&ze.endTime!==_e?.endTime&&(ze.endTime=_e?.endTime,Je=!0),We.has("previewTime")){const ie=_e?.startTime;if(ie!=null&&Xe!=null){const mt=(0,n.toSec)(ie)+Xe.value;mt!==ze.previewTime&&(Je=!0),ze.previewTime=mt}else ze.previewTime!=null&&(Je=!0),ze.previewTime=void 0}if(We.has("colorScheme")&&Re!==ze.colorScheme&&(Je=!0,ze.colorScheme=Re),We.has("appSettings")&&ze.appSettings!==Ke&&(Je=!0,ze.appSettings=Ke),Se=rt,De=te,!!Je)return ze}}var b="../../packages/studio-base/src/components/PanelExtensionAdapter/PanelExtensionAdapter.tsx";const C=D.ZP.getLogger(b),I="foxgloveConfigVersion";function le(Y){return Y!=null&&typeof Y=="object"&&I in Y&&typeof Y[I]=="number"}function O(Y){return Y}function j(Y){return Y.installedMessageConverters}function K(Y){const{initPanel:z,config:X,saveConfig:ne,highestSupportedConfigVersion:Se}=Y,Ie=(0,c.Z)(X),we=(0,x.An)(O),{playerState:De,pauseFrame:Le,setSubscriptions:Ge,seekPlayback:He,sortedTopics:$e}=we,{capabilities:Fe,profile:ot}=De,{openSiblingPanel:Ke}=(0,F.R)(),[Re]=(0,E.useState)(()=>(0,P.Z)()),Me=(0,B.t2)(),[Ve,Xe]=(0,E.useState)(),[rt,yt]=(0,E.useState)(new Set),Ct=(0,Q.I)(j),[lt,At]=(0,E.useState)([]),[We,Je]=(0,E.useState)(new Map),[_e,ze]=(0,E.useState)([]),[te,Qe]=(0,E.useState)(),et=(0,E.useRef)(!1),[st,ft]=(0,E.useState)(!1),[,ie]=(0,T._N)(),{globalVariables:mt,setGlobalVariables:Lt}=(0,ae.Z)(),It=(0,se.hx)({componentId:`PanelExtensionAdapter:${Re}`,isTimestampScale:!0}),Tt=(0,se.D4)(),ut=(0,se.Js)(),ht=(0,E.useRef)(new Map),{palette:{mode:vt}}=(0,m.Z)(),Jt=(0,q.H)(),je=(0,x.m7)(),[wn,cs]=(0,E.useState)(()=>M()),[Fn,qt]=(0,T.ro)();(0,E.useEffect)(()=>{const Oe=new Map;for(const tt of _e){const Pt=Et=>{Je(xn=>(xn.set(tt,Et),new Map(xn)))};Oe.set(tt,Pt),Jt.addChangeListener(tt,Pt)}const Ze=new Map;for(const tt of _e)Ze.set(tt,Jt.get(tt));return Je(Ze),()=>{for(const[tt,Pt]of Oe.entries())Jt.removeChangeListener(tt,Pt)}},[Jt,_e]);const vn=(0,E.useMemo)(()=>we.messageEventsBySubscriberId.get(Re),[we.messageEventsBySubscriberId,Re]),cn=(0,E.useRef)(!1);(0,E.useLayoutEffect)(()=>{if(!te||!et.current)return;const Oe=wn({appSettings:We,colorScheme:vt,currentFrame:vn,globalVariables:mt,hoverValue:It,messageConverters:Ct,playerState:De,sharedPanelState:Fn,sortedTopics:$e,subscriptions:lt,watchedFields:rt});if(!Oe)return;if(cn.current){ft(!0);return}ft(!1);const Ze=Le(Re);cn.current=!0;try{Xe(void 0);let tt=!1;te(Oe,()=>{if(tt){C.warn(`${Re} called render done function twice`);return}tt=!0,Ze(),cn.current=!1})}catch(tt){Xe(tt)}},[We,wn,vt,mt,It,lt,Ct,vn,Re,Le,De,te,Fn,$e,rt]);const zn=(0,T.W0)(),Wt=(0,E.useMemo)(()=>{const Oe={addPanel({position:Ze,type:tt,updateIfExists:Pt,getState:Et}){if(Me())switch(Ze){case"sibling":Ke({panelType:tt,updateIfExists:Pt,siblingConfigCreator:xn=>Et(xn)});return;default:(0,Z.v)(Ze,`Unsupported position for addPanel: ${Ze}`)}}};return{initialState:Ie.current,saveState:Ze=>{Me()&&ne(Ze)},layout:Oe,seekPlayback:He?Ze=>{if(!Me())return;const tt=typeof Ze=="object"?Ze:(0,n.fromSec)(Ze);He(tt)}:void 0,dataSourceProfile:ot,setParameter:(Ze,tt)=>{Me()&&je().setParameter(Ze,tt)},setVariable:(Ze,tt)=>{Me()&&Lt({[Ze]:tt})},setPreviewTime:Ze=>{if(Me())if(Ze==null)ut("PanelExtensionAdatper");else{const Pt=je().playerState.activeData?.startTime;if(!Pt)return;const Et=Ze-(0,n.toSec)(Pt);Tt({type:"PLAYBACK_SECONDS",componentId:"PanelExtensionAdatper",value:Et})}},setSharedPanelState:qt,watch:Ze=>{Me()&&yt(tt=>{if(tt.has(Ze))return tt;const Pt=new Set(tt);return Pt.add(Ze),Pt})},subscribe:Ze=>{if(!Me())return;const tt=Ze.map(Et=>typeof Et=="string"?{topic:Et,preloadType:"full"}:{topic:Et.topic,convertTo:Et.convertTo,preloadType:Et.preload===!0?"full":"partial"}),Pt=Ze.map(Et=>typeof Et=="string"?{topic:Et,preload:!0}:Et);At(Pt),Ge(Re,tt)},advertise:Fe.includes(ge.C.advertise)?(Ze,tt,Pt)=>{if(!Me())return;const Et={topic:Ze,schemaName:tt,options:Pt};ht.current.set(Ze,Et),je().setPublishers(Re,Array.from(ht.current.values()))}:void 0,unadvertise:Fe.includes(ge.C.advertise)?Ze=>{Me()&&(ht.current.delete(Ze),je().setPublishers(Re,Array.from(ht.current.values())))}:void 0,publish:Fe.includes(ge.C.advertise)?(Ze,tt)=>{Me()&&je().publish({topic:Ze,msg:tt})}:void 0,callService:Fe.includes(ge.C.callServices)?async(Ze,tt)=>{if(!Me())throw new Error("Service call after panel was unmounted");return await je().callService(Ze,tt)}:void 0,unsubscribeAll:()=>{Me()&&(At([]),Ge(Re,[]))},subscribeAppSettings:Ze=>{Me()&&ze(Ze)},updatePanelSettingsEditor:Ze=>{Me()&&zn(Ze)},setDefaultPanelTitle:Ze=>{Me()&&ie(Ze)}}},[Fe,ut,ot,je,Ie,Me,Ke,Re,ne,He,ie,Lt,Tt,qt,Ge,zn]),tn=(0,E.useRef)(null);(0,B.R5)(z,"initPanel"),(0,B.R5)(Re,"panelId"),(0,B.R5)(Wt,"partialExtensionContext");const dn=(0,E.useMemo)(()=>{const Oe=Ie.current;return le(Oe)&&Se!=null&&Oe[I]>Se},[Ie,Se]);(0,E.useLayoutEffect)(()=>{if(!tn.current)throw new Error("Expected panel container to be mounted");if(dn)return;Qe(void 0),cn.current=!1,ft(!1),cs(()=>M());const Oe=document.createElement("div");Oe.style.width="100%",Oe.style.height="100%",Oe.style.overflow="hidden",tn.current.appendChild(Oe),C.info(`Init panel ${Re}`);const Ze=z({panelElement:Oe,...Wt,set onRender(tt){Qe(()=>tt)}});return et.current=!0,()=>{Ze&&Ze(),et.current=!1,Oe.remove(),je().setSubscriptions(Re,[]),je().setPublishers(Re,[])}},[z,Re,Wt,je,dn]);const bn={};if(st&&(bn.borderColor="orange",bn.borderWidth="1px",bn.borderStyle="solid"),Ve)throw Ve;return(0,u.jsxs)("div",{style:{alignItems:"stretch",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",width:"100%",zIndex:0,...bn},children:[(0,u.jsx)(L.Z,{}),dn&&(0,u.jsx)(be,{}),Y.children,(0,u.jsx)("div",{style:{flex:1,overflow:"hidden"},ref:tn})]})}const U=K},13688:(Be,R,i)=>{"use strict";i.d(R,{D:()=>be,Z:()=>v});var u=i(52322),m=i(3104),E=i(2784),c=i(8533),P=i(28219),B=i(8740),D=i(44449),n=i(29268),x=i(15116),F=i(88099),L=i(51390),q=i(48105),Q=i(40301),se=i(38256),ae=i(93723),ge=i(96715);function T({children:w,id:me,tabId:ue}){const ce=(0,E.useCallback)(M=>M.sequenceNumbers[me]??0,[me]),oe=(0,ge.J)(ce);return(0,u.jsx)(E.Fragment,{children:w},`${me}${ue??""}${oe}`)}var Z=i(14075),$=i(76479),V=i(93812);function H(w){const{config:me,saveConfig:ue}=w;return(0,u.jsxs)(V.Z,{flex:"auto",alignItems:"center",justifyContent:"center","data-testid":me.id,children:[(0,u.jsx)($.Z,{isUnknownPanel:!0}),(0,u.jsxs)(n.Z,{children:["Unknown panel type: ",me.type,"."]})]})}H.panelType="unknown",H.defaultConfig={};const Ee=(0,Z.Z)(H);var ve=i(24426);const Ce=(0,B.ZL)()({hideTopLevelDropTargets:{margin:0,".mosaic-root + .drop-target-container":{display:"none !important"},"& > .mosaic-window > .drop-target-container":{display:"none !important"}}});function _({tabId:w,children:me}){const{classes:ue,cx:ce}=Ce(),[,oe]=(0,c.L)({accept:P.vv.WINDOW,drop:(M,b)=>{const C=b.getDropResult();if(C)return{tabId:w,...C}}});return(0,u.jsx)("div",{className:ce(ue.hideTopLevelDropTargets,"mosaic-tile"),ref:oe,children:me})}function be(w){const{savePanelConfigs:me}=(0,F._B)(),ue=(0,F.Sr)(),{layout:ce,onChange:oe,tabId:M}=w,b=(0,E.useCallback)(j=>{const K="RosOut",U=j?.type?j.type:K,Y=(0,Q.nJ)(U);return j?.panelConfig&&me({configs:[{id:Y,config:j.panelConfig}]}),Y},[me]),C=(0,q.v)(),I=(0,E.useMemo)(()=>new Map(C.getPanels().map(j=>[j.type,E.lazy(j.module)])),[C]),le=(0,E.useCallback)((j,K)=>{if(j==null||typeof j!="string")return(0,u.jsx)(u.Fragment,{});const U=(0,Q.$k)(j);let Y;const z=I.get(U);z?Y=(0,u.jsx)(z,{childId:j,tabId:M}):Y=(0,u.jsx)(Ee,{childId:j,tabId:M,overrideConfig:{type:U,id:j}});const X=(0,u.jsx)(P.h1,{title:"",path:K,createNode:b,renderPreview:()=>{},children:(0,u.jsx)(E.Suspense,{fallback:(0,u.jsx)(n.Z,{children:(0,u.jsx)(m.Z,{size:28})}),children:(0,u.jsx)(ae.x.Provider,{value:K,children:(0,u.jsx)(T,{id:j,tabId:M,children:Y})})})},j);return U==="Tab"?(0,u.jsx)(_,{tabId:j,children:X}):X},[I,b,M]),O=(0,E.useMemo)(()=>ce!=null?(0,u.jsx)(P.wB,{renderTile:le,className:"mosaic-foxglove-theme",resize:{minimumPaneSizePercentage:2},value:ce,onChange:j=>oe(j??void 0),mosaicId:ue}):(0,u.jsx)(D.v,{tabId:M}),[ce,ue,oe,le,M]);return(0,u.jsx)(se.Z,{children:O})}function Te(){return(0,u.jsx)(n.Z,{children:(0,u.jsx)(m.Z,{size:28})})}const re=w=>w.selectedLayout?.loading,G=w=>w.selectedLayout?.data!=null,A=w=>w.selectedLayout?.data?.layout;function v(){const{layoutEmptyState:w}=(0,x.b)(),{changePanelLayout:me}=(0,F._B)(),ue=(0,F.NS)(G),ce=(0,F.NS)(re),oe=(0,F.NS)(A),M=(0,L.I)(C=>C.installedExtensions),b=(0,E.useCallback)(C=>{C!=null&&me({layout:C})},[me]);return M==null?(0,u.jsx)(Te,{}):ue?(0,u.jsx)(be,{layout:oe,onChange:b}):ce===!0?(0,u.jsx)(Te,{}):w||(0,u.jsx)(u.Fragment,{})}},84877:(Be,R,i)=>{"use strict";i.d(R,{DY:()=>B,OS:()=>n});var u=i(52322),m=i(7165),E=i(2784),c=i(8740),P=i(30280);const B="FoxglovePanelRoot-root",D=(0,c.ZL)()((x,F)=>{const{palette:L,transitions:q}=x,{sourceRect:Q,hasFullscreenDescendant:se}=F,ae=q.duration.shorter;return{root:{display:"flex",flexDirection:"column",flex:"1 1 auto",overflow:"hidden",backgroundColor:L.background.default,border:`0px solid ${(0,m.Fq)(L.primary.main,.67)}`,transition:q.create("border-width",{duration:ae}),"::after":{content:"''",top:0,left:0,right:0,bottom:0,inset:1,opacity:0,border:`1px solid ${L.primary.main}`,position:"absolute",pointerEvents:"none",transition:"opacity 0.05s ease-out",zIndex:1e4+1}},rootSelected:{"::after":{opacity:1,transition:"opacity 0.125s ease-out"}},entering:{position:"fixed",top:Q?.top??0,left:Q?.left??0,right:Q?window.innerWidth-Q.right:0,bottom:Q?window.innerHeight-Q.bottom:0,zIndex:1e4},entered:{borderWidth:4,position:"fixed",top:P.h,left:0,right:0,bottom:77,zIndex:1e4,transition:q.create(["border-width","top","right","bottom","left"],{duration:ae})},exiting:{position:"fixed",top:Q?.top??0,left:Q?.left??0,right:Q?window.innerWidth-Q.right:0,bottom:Q?window.innerHeight-Q.bottom:0,zIndex:1e4,transition:q.create(["border-width","top","right","bottom","left"],{duration:ae})},exited:{position:"relative",top:0,left:0,right:0,bottom:0,zIndex:se?"auto":1}}}),n=(0,E.forwardRef)(function(F,L){const{fullscreenState:q,selected:Q,sourceRect:se,hasFullscreenDescendant:ae,className:ge,...T}=F,{classes:Z,cx:$}=D({sourceRect:se,hasFullscreenDescendant:ae}),V=$(B,ge,Z.root,{[Z.entering]:q==="entering",[Z.entered]:q==="entered",[Z.exiting]:q==="exiting",[Z.exited]:q==="exited",[Z.rootSelected]:Q});return(0,u.jsx)("div",{ref:L,className:V,...T,children:F.children})})},49318:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>B});var u=i(52322),m=i(87037),E=i(2784),c=i(8740);const P=(0,c.ZL)()(D=>({root:{padding:D.spacing(.375),fontSize:"0.875rem",".MuiSvgIcon-root, svg:not(.MuiSvgIcon-root)":{height:"1em",width:"1em",fontSize:"inherit"}}})),B=(0,E.forwardRef)(function(n,x){const{className:F,...L}=n,{classes:q,cx:Q}=P();return(0,u.jsx)(m.Z,{ref:x,className:Q(q.root,F),...L})})},76479:(Be,R,i)=>{"use strict";i.d(R,{B:()=>C,Z:()=>le});var u=i(52322),m=i(63436),E=i(68434),c=i(2784),P=i(8740),B=i(82044),D=i(49318),n=i(39367),x=i(40301),F=i(13264),L=i(93812),q=i(88099),Q=i(48105),se=i(96715),ae=i(26775),ge=i(72994),T=i(78404),Z=i(24957),$=i(28319),V=i(50985),H=i(3925),Ee=i(80078),ve=i(56961),Ce=i(28219),_=i(71259),be=i(6693),Te=i(72283),re=i(83050),G=i(39347);const A=(0,P.ZL)()(O=>({paper:{backgroundColor:O.palette.background.menu,maxHeight:`calc(100vh - ${O.spacing(12)})`,overflow:"auto",WebkitOverflowScrolling:"touch"}}));function v({tabId:O,anchorEl:j,onClose:K}){const{classes:U}=A(),Y=(0,c.useContext)(B.Z),{mosaicActions:z}=(0,c.useContext)(Ce.DF),{mosaicWindowActions:X}=(0,c.useContext)(Ce.Jy),{swapPanel:ne}=(0,q._B)(),Se=Boolean(j),Ie=(0,c.useCallback)(De=>({type:Le,config:Ge,relatedConfigs:He})=>{if(Le===Y?.type){K();return}ne({tabId:O,originalId:De??"",type:Le,root:z.getRoot(),path:X.getPath(),config:Ge??{},relatedConfigs:He})},[K,z,X,Y?.type,ne,O]),we={};return(0,u.jsx)(_.Z,{...we,id:"change-panel-menu",open:Se,role:void 0,anchorEl:j,transition:!0,placement:"right-start",style:{zIndex:1e4},popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["right-start","left-start"]}}]},children:({TransitionProps:De,placement:Le})=>(0,u.jsx)(be.Z,{...De,style:{transformOrigin:Le==="right-start"?"top left":"top right"},children:(0,u.jsx)(Te.Z,{elevation:8,className:U.paper,children:(0,u.jsx)(re.Z,{onClickAway:K,children:(0,u.jsx)(G.B,{mode:"list",isMenu:!0,selectedPanelType:Y?.type,onPanelSelect:Ie(Y?.id)})})})})})}function w(O,j){if(!O||!j)return;const K=(0,Ce.PC)(j.getRoot(),O.getPath());if(typeof K!="string")throw new Error(`Used getPanelTypeFromMosaic on non-leaf node: ${JSON.stringify(K)}`);return(0,x.$k)(K)}const me=(0,P.ZL)()(O=>({error:{color:O.palette.error.main},icon:{marginRight:O.spacing(-1)},menuItem:{display:"flex",gap:O.spacing(1),alignItems:"center",".root-span":{display:"flex",marginLeft:O.spacing(-.25)},"&.Mui-selected":{backgroundColor:O.palette.action.hover,"&:hover":{backgroundColor:O.palette.action.hover}}}}));function ue({isUnknownPanel:O}){const{classes:j,cx:K}=me(),[U,Y]=(0,c.useState)(void 0),[z,X]=(0,c.useState)(void 0),ne=Boolean(U),Se=Boolean(z),Ie=(0,c.useContext)(B.Z),we=Ie?.tabId,{mosaicActions:De}=(0,c.useContext)(Ce.DF),{mosaicWindowActions:Le}=(0,c.useContext)(Ce.Jy),{getCurrentLayoutState:Ge,closePanel:He,splitPanel:$e}=(0,q._B)(),Fe=(0,c.useCallback)(()=>w(Le,De),[De,Le]),ot=We=>{X(void 0),Y(We.currentTarget)},Ke=()=>{X(void 0),Y(void 0)},Re=We=>{z!==We.currentTarget&&X(We.currentTarget),Y(void 0)},Me=(0,c.useCallback)(()=>{X(void 0)},[]),Ve=We=>{X(We.currentTarget)},Xe=(0,c.useCallback)(()=>{He({tabId:we,root:De.getRoot(),path:Le.getPath()}),Ke()},[He,De,Le,we]),rt=(0,c.useCallback)((We,Je)=>{const _e=Fe();if(We==null||_e==null)throw new Error("Trying to split unknown panel!");const ze=Ge().selectedLayout?.data?.configById[We]??{};$e({id:We,tabId:we,direction:Je,root:De.getRoot(),path:Le.getPath(),config:ze}),Ke()},[Ge,Fe,De,Le,$e,we]),yt=(0,c.useCallback)(()=>{Ie?.enterFullscreen(),Ke()},[Ie]),Ct=(0,c.useMemo)(()=>{const We=[];return O||We.push({key:"vsplit",text:"Split right",icon:(0,u.jsx)(ge.dzo,{}),onClick:()=>rt(Ie?.id,"row")},{key:"hsplit",text:"Split down",icon:(0,u.jsx)(ge.Kqs,{}),onClick:()=>rt(Ie?.id,"column")}),Ie?.isFullscreen!==!0&&We.push({key:"enter-fullscreen",text:"Fullscreen",icon:(0,u.jsx)(T.gW,{}),onClick:yt,"data-testid":"panel-menu-fullscreen"}),We.push({key:"divider",type:"divider"}),We.push({key:"remove",text:"Remove panel",icon:(0,u.jsx)(Z.Kx2,{}),onClick:Xe,"data-testid":"panel-menu-remove",className:j.error}),We},[j.error,Xe,yt,O,Ie?.id,Ie?.isFullscreen,rt]),lt=(0,c.useRef)(null);return Fe()==null?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)("div",{ref:lt,children:[(0,u.jsx)(D.Z,{id:"panel-menu-button","aria-controls":ne?"panel-menu":void 0,"aria-haspopup":"true","aria-expanded":ne?"true":void 0,onClick:ot,"data-testid":"panel-menu",title:"More",children:(0,u.jsx)(V.Z,{})}),(0,u.jsxs)(H.Z,{id:"panel-menu",anchorEl:U,open:ne,onClose:Ke,anchorOrigin:{vertical:"bottom",horizontal:"left"},MenuListProps:{"aria-labelledby":"panel-menu-button",dense:!0},children:[(0,u.jsxs)(Ee.Z,{className:j.menuItem,selected:Se,id:"change-panel-button","aria-controls":Se?"change-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":Se?"true":void 0,onClick:Re,onMouseEnter:Ve,children:[(0,u.jsx)(ge.rpi,{}),"Change panel",(0,u.jsx)($.Z,{className:j.icon,fontSize:"small"})]}),(0,u.jsx)(v,{anchorEl:z,onClose:Me,tabId:we}),(0,u.jsx)(ve.Z,{variant:"middle"}),Ct.map((We,Je)=>We.type==="divider"?(0,u.jsx)(ve.Z,{variant:"middle"},`divider-${Je}`):(0,u.jsxs)(Ee.Z,{onClick:_e=>{_e.stopPropagation(),We.onClick?.()},onMouseEnter:()=>X(void 0),className:K(j.menuItem,We.className),"data-testid":We["data-testid"],children:[We.icon,We.text]},We.key))]})]})}var ce=i(2784);const oe=(0,c.forwardRef)((O,j)=>{const{additionalIcons:K,isUnknownPanel:U}=O,{id:Y,type:z}=(0,c.useContext)(B.Z)??{},X=(0,c.useContext)(Q.Z),{setSelectedPanelIds:ne}=(0,q.iy)(),{openPanelSettings:Se}=(0,ae.W)(),Ie=(0,c.useCallback)(He=>Y?He.settingsTrees[Y]!=null:!1,[Y]),we=(0,c.useMemo)(()=>z!=null?X?.getPanelByType(z):void 0,[X,z]),De=(0,se.J)(Ie),Le=(0,c.useCallback)(async()=>{Y&&(ne([Y]),Se())},[Y,ne,Se]),Ge=we?.hasCustomToolbar!==!0||De;return(0,u.jsxs)(L.Z,{direction:"row",alignItems:"center",paddingLeft:1,ref:j,children:[K,Ge&&(0,u.jsx)(D.Z,{title:"Settings",onClick:Le,children:(0,u.jsx)(F.Z,{})}),(0,u.jsx)(ue,{isUnknownPanel:U})]})});oe.displayName="PanelToolbarControls";const M=ce.memo(oe);var b=i(2784);const C=30,I=(0,P.ZL)()(O=>({root:{transition:"transform 80ms ease-in-out, opacity 80ms ease-in-out",cursor:"auto",flex:"0 0 auto",alignItems:"center",justifyContent:"flex-end",padding:O.spacing(.25,.75),display:"flex",minHeight:C,backgroundColor:O.palette.background.paper,width:"100%",left:0,zIndex:O.zIndex.appBar}})),le=b.memo(function({additionalIcons:j,backgroundColor:K,children:U,className:Y,isUnknownPanel:z=!1}){const{classes:X,cx:ne}=I(),{isFullscreen:Se,exitFullscreen:Ie,config:{[x.xS]:we=void 0}={}}=(0,c.useContext)(B.Z)??{},De=(0,c.useContext)(B.Z),Le=(0,c.useMemo)(()=>(0,u.jsxs)(u.Fragment,{children:[j,Se===!0&&(0,u.jsx)(D.Z,{value:"exit-fullscreen",title:"Exit fullscreen",onClick:Ie,children:(0,u.jsx)(m.Z,{})})]}),[j,Se,Ie]),Ge=z||U!=null?void 0:De?.connectToolbarDragHandle,He=z||U==null?void 0:De?.connectToolbarDragHandle,[$e]=(0,n._N)(),ot=(we!=null&&typeof we=="string"&&we.length>0?we:$e)??De?.title;return(0,u.jsxs)("header",{className:ne(X.root,Y),"data-testid":"mosaic-drag-handle",ref:Ge,style:{backgroundColor:K,cursor:Ge!=null?"grab":"auto"},children:[U??(ot&&(0,u.jsx)(E.Z,{noWrap:!0,variant:"body2",color:"text.secondary",flex:"auto",children:ot})),(0,u.jsx)(M,{additionalIcons:Le,isUnknownPanel:!!z,ref:He})]})})},23144:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>P});var u=i(52322),m=i(86495),E=i(63718),c=i(2784);const P=c.memo(function({children:D,componentId:n,isTimestampScale:x,scales:F}){const L=(0,m.hx)({componentId:n,isTimestampScale:x});return(0,u.jsx)(E.G,{scales:F,xValue:L?.value,children:D})})},63718:(Be,R,i)=>{"use strict";i.d(R,{G:()=>P});var u=i(52322),m=i(2784),E=i(8740);const c=(0,E.D2)("div",()=>({root:{top:0,bottom:0,position:"absolute",pointerEvents:"none",willChange:"transform",visibility:"hidden"}}));function P({children:B,scales:D,xValue:n}){const x=(0,m.useMemo)(()=>{const L=D?.x;if(!L||n==null)return;const q=L.pixelMax-L.pixelMin,Q=L.max-L.min;if(q===0||Q===0)return;const se=(n-L.min)/(Q/q)+L.pixelMin;if(!(se<L.pixelMin||se>L.pixelMax))return se},[D?.x,n]),F=(0,m.useMemo)(()=>x==null||isNaN(x)?{visibility:"hidden",transform:void 0}:{visibility:"visible",transform:`translateX(${x}px)`},[x]);return(0,u.jsx)(c,{style:F,children:B})}},80204:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>P,z:()=>c});var u=i(2784);class m{logEvent(){}}const E=(0,u.createContext)(new m);E.displayName="AnalyticsContext";function c(){return(0,u.useContext)(E)}const P=E},82799:(Be,R,i)=>{"use strict";i.d(R,{H:()=>E,Z:()=>c});var u=i(2784);const m=(0,u.createContext)(void 0);m.displayName="AppConfigurationContext";function E(){const P=(0,u.useContext)(m);if(!P)throw new Error("An AppConfigurationContext provider is required to useAppConfiguration");return P}const c=m},15116:(Be,R,i)=>{"use strict";i.d(R,{b:()=>E});var u=i(2784);const m=(0,u.createContext)({});m.displayName="AppContext";function E(){return(0,u.useContext)(m)}},88099:(Be,R,i)=>{"use strict";i.d(R,{ZP:()=>ge,_B:()=>Q,NS:()=>se,Sr:()=>q,iy:()=>ae});var u=i(2784),m=i(28219),E=i(7506),c=i(23503),P=i(77861),B=i(76635),D=i(40301);function n(T,Z,$,V){const H=[],Ee=$[T];if((0,D.lD)(T)&&Ee){const{activeTabIdx:re,tabs:G}=Ee,A=G[re]?.layout;if(A!=null){const v=(0,D.CD)(A,$);H.push(...v)}}const ve=(0,D.m2)($);let Ce=Z;const _=[];for(;Ce!=null;)_.push(Ce),Ce=ve[Ce];H.push(..._);const be=(0,B.xor)(V,[T]);return(0,B.without)(be,...H)}var x="../../packages/studio-base/src/context/CurrentLayoutContext/index.ts";const F=c.ZP.getLogger(x),L=(0,u.createContext)(void 0);L.displayName="CurrentLayoutContext";function q(){return(0,E.qe)(L).mosaicId}function Q(){return(0,E.qe)(L).actions}function se(T){const Z=(0,E.qe)(L),[$,V]=(0,u.useReducer)(Ee=>Ee+1,0);(0,P.Z)(T,()=>F.warn("useCurrentLayoutSelector is changing frequently. Rewrite your selector as a stable function."));const H=(0,u.useRef)(void 0);return(!H.current||T!==H.current.selector)&&(H.current={value:(0,E.de)(Z.actions.getCurrentLayoutState(),T),selector:T}),(0,u.useLayoutEffect)(()=>{let Ee=!0;const ve=Ce=>{if(!Ee)return;const _=(0,E.de)(Ce,T);_!==H.current?.value&&(H.current={value:_,selector:T},V())};return ve(Z.actions.getCurrentLayoutState()),Z.addLayoutStateListener(ve),()=>{Ee=!1,Z.removeLayoutStateListener(ve)}},[Z,T]),H.current.value}function ae(){const T=(0,E.qe)(L),[Z,$]=(0,u.useState)(()=>T.getSelectedPanelIds());(0,u.useLayoutEffect)(()=>{const _=be=>$(be);return T.addSelectedPanelIdsListener(_),()=>T.removeSelectedPanelIdsListener(_)},[T]);const V=(0,E.qe)(L).setSelectedPanelIds,H=(0,E.qe)(L).getSelectedPanelIds,{getCurrentLayoutState:Ee}=Q(),ve=(0,u.useCallback)(()=>{const _=(0,m.fY)(Ee().selectedLayout?.data?.layout??null);V(_)},[Ee,V]),Ce=(0,u.useCallback)((_,be)=>{V(Te=>{const{selectedLayout:re}=Ee();return re?.data?n(_,be,re.data.configById,Te):Te})},[V,Ee]);return(0,E.O4)({getSelectedPanelIds:H,selectedPanelIds:Z,setSelectedPanelIds:V,selectAllPanels:ve,togglePanelSelected:Ce})}const ge=L},7545:(Be,R,i)=>{"use strict";i.d(R,{T2:()=>c,xJ:()=>E});var u=i(2784);const m=(0,u.createContext)({currentUser:void 0});m.displayName="CurrentUserContext";function E(){return(0,u.useContext)(m)}function c(){const B=E();return B.currentUser==null?"unauthenticated":B.currentUser.org.isEnterprise?"authenticated-enterprise":B.currentUser.orgPaid===!0?"authenticated-team":"authenticated-free"}var P=null},51390:(Be,R,i)=>{"use strict";i.d(R,{I:()=>P,d:()=>c});var u=i(2784),m=i(12294),E=i(7506);const c=(0,u.createContext)(void 0);function P(B,D){const n=(0,E.qe)(c);return(0,m.oR)(n,B,D)}},48105:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>c,v:()=>E});var u=i(2784);const m=(0,u.createContext)(void 0);m.displayName="PanelCatalogContext";function E(){const P=(0,u.useContext)(m);if(!P)throw new Error("A PanelCatalogContext provider is required to usePanelCatalog");return P}const c=m},96715:(Be,R,i)=>{"use strict";i.d(R,{J:()=>P,c:()=>c});var u=i(2784),m=i(12294),E=i(7506);const c=(0,u.createContext)(void 0);function P(B,D){const n=(0,E.qe)(c);return(0,m.oR)(n,B,D)}},39471:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>c,n:()=>E});var u=i(2784);const m=(0,u.createContext)({selectSource:()=>{},selectRecent:()=>{},selectedSource:void 0,availableSources:[],recentSources:[]});m.displayName="PlayerSelectionContext";function E(){return(0,u.useContext)(m)}const c=m},86495:(Be,R,i)=>{"use strict";i.d(R,{D4:()=>n,Gu:()=>c,Js:()=>B,hx:()=>x,oA:()=>F});var u=i(2784),m=i(12294),E=i(7506);const c=(0,u.createContext)(void 0),P=L=>L.clearHoverValue;function B(){return F(P)}const D=L=>L.setHoverValue;function n(){return F(D)}function x(L){const q=!!L,Q=L?.componentId,se=L?.isTimestampScale??!1,ae=(0,u.useCallback)(ge=>{if(!q)return ge.hoverValue;if(ge.hoverValue!=null)return ge.hoverValue.type==="PLAYBACK_SECONDS"&&se||ge.hoverValue.componentId===Q?ge.hoverValue:void 0},[q,Q,se]);return F(ae)}function F(L,q){const Q=(0,E.qe)(c);return(0,m.oR)(Q,L,q)}},31748:(Be,R,i)=>{"use strict";i.d(R,{BQ:()=>n,Vh:()=>D});var u=i(52322),m=i(2784),E=i(7506),c=i(1375),P=i(23621);const B=(0,m.createContext)(void 0);B.displayName="UserNodeStateContext";function D({children:x}){const[F,L]=(0,m.useState)({rosLib:P.k,typesLib:(0,c.ym)(),nodeStates:{}}),q=(0,m.useCallback)((Z,$)=>{L(V=>({...V,nodeStates:{...V.nodeStates,[Z]:{logs:[],...V.nodeStates[Z],diagnostics:$}}}))},[]),Q=(0,m.useCallback)((Z,$)=>{L(V=>({...V,nodeStates:{...V.nodeStates,[Z]:{diagnostics:[],...V.nodeStates[Z],logs:(V.nodeStates[Z]?.logs??[]).concat($)}}}))},[]),se=(0,m.useCallback)(Z=>{L($=>({...$,nodeStates:{...$.nodeStates,[Z]:{diagnostics:[],...$.nodeStates[Z],logs:[]}}}))},[]),ae=(0,m.useCallback)(Z=>{L($=>({...$,rosLib:Z}))},[]),ge=(0,m.useCallback)(Z=>{L($=>({...$,typesLib:Z}))},[]),T=(0,E.O4)({state:F,setUserNodeDiagnostics:q,addUserNodeLogs:Q,clearUserNodeLogs:se,setUserNodeRosLib:ae,setUserNodeTypesLib:ge});return(0,u.jsx)(B.Provider,{value:T,children:x})}function n(){return(0,E.qe)(B,"UserNodeStateContext")}},54490:(Be,R,i)=>{"use strict";i.d(R,{C5:()=>D,Q:()=>x,VI:()=>n,gx:()=>P,q2:()=>B});var u=i(2784),m=i(12294),E=i(7506);const c=null,P=["panel-settings","topics","problems"],B=["events","variables","studio-logs-settings"],D=(0,u.createContext)(void 0);D.displayName="WorkspaceContext";const n={selectPanelSettingsOpen:F=>F.sidebars.legacy.item==="panel-settings"||F.sidebars.left.open&&F.sidebars.left.item==="panel-settings"};function x(F,L){const q=(0,E.qe)(D);return(0,m.oR)(q,F,L)}},26775:(Be,R,i)=>{"use strict";i.d(R,{W:()=>Q});var u=i(67067),m=i(76635),E=i(2784),c=i(7506),P=i(7545),B=i(39471),D=i(54490),n=i(21023),x=i.n(n);async function F(se){try{window.document.getElementById("studio-file-input")?.remove();let ae=window.document.createElement("input");ae.type="file",ae.id="studio-file-input",ae.style.display="none",se?.types&&(ae.accept=se.types.map(T=>T.accept?.["application/octet-stream"]).join(",")),window.document.body.appendChild(ae),ae=window.document.getElementById("studio-file-input"),ae.click();const ge=await new Promise((T,Z)=>{ae.onchange=()=>{if(!ae.files){Z(new Error("No files selected"));return}T(ae.files)}});return Array.from(ge).map(T=>({getFile:async()=>T,kind:"file",name:T.name,isDirectory:!1,isFile:!0,createSyncAccessHandle:()=>Promise.resolve(),isSameEntry:()=>!1,queryPermission:()=>Promise.resolve("granted"),requestPermission:()=>Promise.resolve("granted"),removeEntry:()=>Promise.resolve(),createWritable:()=>Promise.resolve({write:async Z=>{const $=new Blob([Z]),V=URL.createObjectURL($),H=document.createElement("a");H.href=V,H.download=T.name,H.click(),URL.revokeObjectURL(V)},close:()=>Promise.resolve(),seek:()=>Promise.resolve(),truncate:()=>Promise.resolve(),locked:!1,abort:()=>Promise.resolve(),getWriter:()=>Promise.resolve()})}))}catch(ae){if(ae.name==="AbortError")return[];throw ae}}function L(se){const{selectSource:ae}=(0,B.n)(),ge=(0,E.useMemo)(()=>se.reduce((T,Z)=>Z.supportedFileTypes?[...T,...Z.supportedFileTypes]:T,[]),[se]);return(0,E.useCallback)(async()=>{const[T]=await F({types:[{description:ge.join(", "),accept:{"application/octet-stream":ge}}]});if(!T)return;const Z=await T.getFile(),$=se.filter(H=>{if(!H.supportedFileTypes||H.type!=="file")return!1;const Ee=x().extname(Z.name);return H.supportedFileTypes.includes(Ee)});if($.length>1)throw new Error(`Multiple source matched ${Z.name}. This is not supported.`);const V=$[0];if(!V)throw new Error(`Cannot find source to handle ${Z.name}`);ae(V.id,{type:"file",handle:T})},[ge,ae,se])}function q(se,ae){return se instanceof Function?se(ae):se}function Q(){const{setState:se}=(0,c.qe)(D.C5),{signIn:ae}=(0,P.xJ)(),ge=ae!=null,{availableSources:T}=(0,B.n)(),Z=L(T),$=(0,E.useCallback)(V=>{se((0,u.Uy)(V))},[se]);return(0,E.useMemo)(()=>({dialogActions:{dataSource:{close:()=>{$(V=>{V.dialogs.dataSource={activeDataSource:void 0,item:void 0,open:!1}})},open:(V,H)=>{$(Ee=>{Ee.dialogs.dataSource.activeDataSource=H,Ee.dialogs.dataSource.item=V,Ee.dialogs.dataSource.open=!0})}},openFile:{open:Z},preferences:{close:()=>$(V=>{V.dialogs.preferences={open:!1,initialTab:void 0}}),open:V=>{$(H=>{H.dialogs.preferences={open:!0,initialTab:V}})}}},featureTourActions:{startTour:V=>{$(H=>{H.featureTours.active=V})},finishTour:V=>{$(H=>{H.featureTours.active=void 0,H.featureTours.shown=(0,m.union)(H.featureTours.shown,[V])})}},openAccountSettings:()=>ge&&$(V=>{V.sidebars.legacy.item="account"}),openPanelSettings:()=>$(V=>{V.sidebars.left.item="panel-settings",V.sidebars.left.open=!0}),openLayoutBrowser:()=>$(V=>{V.sidebars.legacy.item="layouts"}),playbackControlActions:{setRepeat:V=>{$(H=>{const Ee=q(V,H.playbackControls.repeat);H.playbackControls.repeat=Ee})}},sidebarActions:{legacy:{selectItem:V=>{$(V==="app-settings"?H=>{H.dialogs.preferences={open:!0,initialTab:void 0}}:V==="app-bar-tour"?H=>{H.featureTours.active="appBar"}:H=>{H.sidebars.legacy.item=V})}},left:{selectItem:V=>{$(H=>{H.sidebars.left.item=V,H.sidebars.left.open=V!=null})},setOpen:V=>{$(H=>{const Ee=q(V,H.sidebars.left.open);if(Ee){const ve=D.gx.find(Ce=>Ce===H.sidebars.left.item);H.sidebars.left.open=Ee,H.sidebars.left.item=ve??"panel-settings"}else H.sidebars.left.open=!1})},setSize:V=>$(H=>{H.sidebars.left.size=V})},right:{selectItem:V=>{$(H=>{H.sidebars.right.item=V,H.sidebars.right.open=V!=null})},setOpen:V=>{$(H=>{const Ee=q(V,H.sidebars.right.open),ve=D.q2.find(Ce=>Ce===H.sidebars.right.item);Ee?(H.sidebars.right.open=Ee,H.sidebars.right.item=ve??"variables"):H.sidebars.right.open=!1})},setSize:V=>$(H=>{H.sidebars.right.size=V})}}}),[Z,$,ge])}},74602:(Be,R,i)=>{"use strict";i.d(R,{b:()=>u.b,v:()=>n});var u=i(27803),m=i(54764),E=i.n(m),c=i(2784),P=i(93455),B=i(85091),D=i(27999);function n(){const[x,F]=(0,u.b)(P.o.TIME_FORMAT),[L]=(0,u.b)(P.o.TIMEZONE),q=(0,c.useMemo)(()=>x==="SEC"?"SEC":"TOD",[x]),Q=(0,c.useCallback)(ge=>(0,B.p6)(ge,L),[L]),se=(0,c.useCallback)(ge=>q==="TOD"?(0,B.mr)(ge,L):(0,D.Eo)(ge),[q,L]),ae=(0,c.useCallback)(ge=>q==="TOD"?E().duration(ge.sec*1e3).format("h:mm:ss",{trim:!1})+`.${ge.nsec}`:(0,D.Eo)(ge),[q]);return{formatDate:Q,formatTime:se,formatDuration:ae,setTimeFormat:F,timeFormat:q,timeZone:L}}},27803:(Be,R,i)=>{"use strict";i.d(R,{b:()=>E});var u=i(2784),m=i(82799);function E(c){const P=(0,m.H)(),[B,D]=(0,u.useState)(()=>{const x=P.get(c);if(!(typeof x=="string"&&x.length===0))return x});(0,u.useEffect)(()=>{const x=F=>{D(F)};return P.addChangeListener(c,x),()=>P.removeChangeListener(c,x)},[c,P]);const n=(0,u.useCallback)(async x=>(D(x),await P.set(c,x)),[P,c]);return[B,n]}},36423:(Be,R,i)=>{"use strict";i.d(R,{X:()=>m,Z:()=>c});var u=i(88099);const m=Object.freeze({}),E=P=>P.selectedLayout?.data?.globalVariables??m;function c(){const{setGlobalVariables:P,overwriteGlobalVariables:B}=(0,u._B)(),D=(0,u.NS)(E);return{setGlobalVariables:P,overwriteGlobalVariables:B,globalVariables:D}}},77861:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>m});var u=i(2784);function m(E,c){const P=(0,u.useRef)(E),B=(0,u.useRef)(E),D=(0,u.useRef)(Date.now());return E!==P.current&&P.current!==B.current&&Date.now()-D.current<200&&c(),B.current=P.current,P.current=E,D.current=Date.now(),E}},13258:(Be,R,i)=>{"use strict";i.d(R,{gV:()=>wg,oQ:()=>C.o,Gm:()=>n0,sl:()=>Om,z8:()=>$0,s6:()=>U0,EU:()=>T0,Yc:()=>w0,w0:()=>k0,VO:()=>_0,Vu:()=>F0,initI18n:()=>Im,installDevtoolsFormatters:()=>Ng,bt:()=>Hh,overwriteFetch:()=>Og.Z,waitForFonts:()=>kg});var u={};i.r(u),i.d(u,{addPanel:()=>zg,appBar:()=>Gg,appSettings:()=>Ug,dataSourceInfo:()=>Wg,general:()=>Qg,incompatibleLayoutVersion:()=>Yg,log:()=>Hg,openDialog:()=>Vg,panelConfigVersionGuard:()=>Xg,panelSettings:()=>$g,panels:()=>Kg,plot:()=>Jg,settingsEditor:()=>qg,threeDee:()=>_g});var m={};i.r(m),i.d(m,{addPanel:()=>sm,appBar:()=>um,appSettings:()=>em,dataSourceInfo:()=>rm,general:()=>tm,log:()=>am,openDialog:()=>lm,panelSettings:()=>om,panels:()=>nm,plot:()=>im,settingsEditor:()=>cm,threeDee:()=>dm});var E={};i.r(E),i.d(E,{addPanel:()=>gm,appBar:()=>Em,appSettings:()=>pm,dataSourceInfo:()=>vm,general:()=>fm,log:()=>ym,openDialog:()=>bm,panelSettings:()=>mm,panels:()=>hm,plot:()=>Am,settingsEditor:()=>xm,threeDee:()=>Cm});var c=i(2784);const P=(0,c.createContext)(void 0);P.displayName="DialogHostIdContext";function B(){return useContext(P)}const D=null;var n=i(52322),x=i(12238),F=i(78683),L=i(47746),q=i(49440);function Q(){const e=(0,L.Z)();return(0,n.jsx)(q.Z,{styles:{"html, body":{boxSizing:"border-box",margin:0,padding:0,height:"100%",width:"100%",lineHeight:1.15},"*, *:before, *:after":{boxSizing:"inherit"},body:{background:e.palette.background.default,color:e.palette.text.primary,font:"inherit",fontFamily:e.typography.body2.fontFamily,fontFeatureSettings:e.typography.body2.fontFeatureSettings,fontSize:e.typography.body2.fontSize,fontWeight:e.typography.body2.fontWeight,overscrollBehavior:"none"},"#root":{height:"100%",width:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden",zIndex:0}}})}var se=i(42893),ae=i(12294),ge=i(7506);const T=(0,c.createContext)(void 0);function Z(e,t){const s=(0,ge.qe)(T);return(0,ae.oR)(s,e,t)}const $=[];function V(){return(0,se.M)(e=>({eventFetchCount:0,events:{loading:!1,value:$},filter:"",selectedEventId:void 0,eventsSupported:!1,deviceId:void 0,refreshEvents:()=>e(t=>({eventFetchCount:t.eventFetchCount+1})),selectEvent:t=>e({selectedEventId:t}),setEvents:t=>e({events:t,selectedEventId:void 0}),setFilter:t=>e({filter:t}),setEventsSupported:t=>e({eventsSupported:t}),setDeviceId:t=>e({deviceId:t})}))}function H({children:e}){const[t]=(0,c.useState)(V);return(0,n.jsx)(T.Provider,{value:t,children:e})}var Ee=i(76940),ve=i(23503);const Ce=(0,c.createContext)(void 0);function _(){const e=(0,ge.qe)(Ce);return(0,ae.oR)(e)}var be="../../packages/studio-base/src/providers/StudioLogsSettingsProvider/store.ts";const Te=ve.ZP.getLogger(be),re="warn";function G(e){const t=(0,ve.A_)(e?.globalLevel??re),s=e?.disabledChannels??[];Te.debug(`Initializing log Config. ${s.length} disabled channels.`);const o=[],a=new Map,r=ve.ZP.channels().sort((d,p)=>d.name().localeCompare(p.name()));for(const d of r){const p=d.name()?d.name():"<root>";s.includes(p)?d.setLevel("warn"):d.setLevel(t),a.has(p)||o.push({name:p,enabled:d.isLevelOn(t)});const h=a.get(p)??[];h.push(d),a.set(p,h)}function l(d,p){const h=d().globalLevel;let f=!1;for(const g of o){const y=a.get(g.name);if(!y)continue;const S=y[0];S&&S.isLevelOn(h)!==g.enabled&&(g.enabled=!g.enabled,f=!0)}f&&p({channels:[...o]})}return(0,se.M)((d,p)=>({globalLevel:t,channels:o,setGlobalLevel(h){Te.debug(`Set global level: ${h}`);for(const[f,g]of a)for(const y of g)y.setLevel(h);d({globalLevel:h}),l(p,d)},enableChannel(h){Te.debug(`Enable channel: ${h}`);const f=a.get(h)??[];for(const g of f)g.setLevel("debug");l(p,d)},disableChannel(h){Te.debug(`Disable channel: ${h}`);const f=a.get(h)??[];for(const g of f)g.setLevel("warn");l(p,d)},enablePrefix(h){Te.debug(`Enable prefix ${h}`);for(const[f,g]of a)if(f.startsWith(h))for(const y of g)y.setLevel("debug");l(p,d)},disablePrefix(h){Te.debug(`Disable prefix ${h}`);for(const[f,g]of a)if(f.startsWith(h))for(const y of g)y.setLevel("warn");l(p,d)}}))}function A(e){const[t,s]=(0,Ee.Z)("fox.studio-logs-settings",{}),[o,a]=(0,c.useState)(()=>G(t)),r=(0,c.useRef)(t);return(0,c.useEffect)(()=>{r.current=t}),(0,c.useEffect)(()=>{const l=o.getState().channels.length,d=setInterval(()=>{l!==ve.ZP.channels().length&&a(G(r.current))},1e3);return()=>clearInterval(d)},[o,t]),(0,c.useEffect)(()=>o.subscribe(l=>{const d=[];for(const p of l.channels)p.enabled||d.push(p.name);s({globalLevel:l.globalLevel,disabledChannels:d})}),[o,s]),(0,n.jsx)(Ce.Provider,{value:o,children:e.children})}var v=i(76635),w=i(86495);function me(){return(0,se.M)(e=>({eventsAtHoverValue:{},globalBounds:void 0,hoveredEvent:void 0,hoverValue:void 0,clearHoverValue:t=>e(s=>({hoverValue:s.hoverValue?.componentId===t?void 0:s.hoverValue})),setEventsAtHoverValue:t=>e({eventsAtHoverValue:(0,v.keyBy)(t,s=>s.event.id)}),setGlobalBounds:t=>{e(typeof t=="function"?s=>({globalBounds:t(s.globalBounds)}):{globalBounds:t})},setHoveredEvent:t=>{e(t?{hoveredEvent:t,hoverValue:{componentId:`event_${t.event.id}`,type:"PLAYBACK_SECONDS",value:t.secondsSinceStart}}:{hoveredEvent:void 0,hoverValue:void 0})},setHoverValue:t=>e(s=>({hoverValue:(0,v.isEqual)(t,s.hoverValue)?s.hoverValue:t}))}))}function ue({children:e}){const[t]=(0,c.useState)(me());return(0,n.jsx)(w.Gu.Provider,{value:t,children:e})}var ce=i(56770),oe=i(21023),M=i.n(oe),b=i(8740),C=i(93455),I=i(85108),le=i(72994),O=i(29022),j=i(6989),K=i(87037),U=i(86232),Y=i(20379),z=i(77668),X=i(68588),ne=i(1547),Se=i(92532);const Ie=(0,b.ZL)()(e=>({tooltip:{marginTop:`${e.spacing(.5)} !important`},iconButton:{borderRadius:0,fontSize:24,padding:e.spacing(1.25),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"},"&:hover":{backgroundColor:(0,ne.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}}})),we=(0,c.forwardRef)((e,t)=>{const{title:s,className:o,children:a,color:r="inherit",...l}=e,{classes:d,cx:p}=Ie();return(0,n.jsx)(Y.Z,{disableInteractive:!0,classes:{tooltip:d.tooltip},title:s,arrow:!1,enterDelay:200,children:(0,n.jsx)("span",{children:(0,n.jsx)(K.Z,{color:r,ref:t,className:p(d.iconButton,o),...l,children:a})})})});we.displayName="AppBarIconButton";var De=i(3925);const Le=16,Ge=(0,b.ZL)()(()=>({root:{display:"flex",justifyContent:"flex-start",overflow:"hidden"},start:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexShrink:1},end:{whiteSpace:"nowrap",flexBasis:"content",flexGrow:0,flexShrink:0,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"}}));function He({text:e,endTextLength:t,className:s,style:o}){const{classes:a,cx:r}=Ge();let l=Math.max(0,e.length-(t==null||t===0?Le:t));for(;l<e.length&&e.charAt(l).match(/\s/);)l+=2;const d=e.substring(0,l),p=e.substring(l);return d?(0,n.jsxs)("div",{"data-testid":"text-middle-truncate",className:r(s,a.root),title:e,style:o,children:[(0,n.jsx)("div",{className:a.start,children:d}),(0,n.jsx)("div",{className:a.end,children:p})]}):(0,n.jsx)("div",{className:r(a.end,s),style:o,children:p})}var $e=i(80204),Fe=i(7545),ot=i(39471),Ke=i(54490),Re=i(26775),Me=i(28904),Ve=i(80078),Xe=i(56961);const rt=(0,b.ZL)()((e,t,s)=>({menu:{pointerEvents:"none"},paper:{pointerEvents:"auto",marginTop:e.spacing(-1)},menuItem:{justifyContent:"space-between",cursor:"pointer",gap:e.spacing(2),"&.Mui-selected, &.Mui-selected:hover":{backgroundColor:e.palette.action.hover},[`:not(:hover, :focus) .${s.endIcon}`]:{opacity:.6},kbd:{font:"inherit",color:e.palette.text.disabled}},menuList:{minWidth:180,maxWidth:220},endIcon:{marginRight:e.spacing(-.75)}}));function yt(e){const{classes:t}=rt(),{children:s,items:o,open:a,onPointerEnter:r,id:l}=e,[d,p]=(0,c.useState)(void 0),h=()=>{l&&r(l)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Ve.Z,{id:l,ref:f=>p(f??void 0),selected:a,className:t.menuItem,onPointerEnter:h,"data-testid":l,children:[s,(0,n.jsx)(I.l7K,{className:t.endIcon})]}),(0,n.jsx)(De.Z,{classes:{root:t.menu,paper:t.paper},open:a,disablePortal:!0,anchorEl:d,onClose:()=>p(void 0),onMouseLeave:()=>{p(void 0)},anchorOrigin:{vertical:"top",horizontal:"right"},MenuListProps:{dense:!0,className:t.menuList},autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,hideBackdrop:!0,children:o.map((f,g)=>f.type!=="divider"?(0,n.jsxs)(Ve.Z,{className:t.menuItem,onClick:f.onClick,disabled:f.disabled,children:[f.label,f.shortcut?(0,n.jsx)("kbd",{children:f.shortcut}):void 0]},f.key):(0,n.jsx)(Xe.Z,{variant:"middle"},`${g}-divider`))})]})}const Ct=(0,b.ZL)()({menuList:{minWidth:180,maxWidth:220},truncate:{alignSelf:"center !important"}}),lt=e=>e;function At(e){const{open:t,handleClose:s,anchorEl:o,anchorReference:a,anchorPosition:r,disablePortal:l}=e,{classes:d}=Ct(),{t:p}=(0,X.$G)("appBar"),[h,f]=(0,c.useState)(),g=(0,Fe.T2)(),y=(0,$e.z)(),{recentSources:S,selectRecent:N}=(0,ot.n)(),{sidebars:{left:{open:k},right:{open:W}}}=(0,Ke.Q)(lt,Se.X),{sidebarActions:J,dialogActions:pe}=(0,Re.W)(),ye=(0,c.useCallback)(()=>{f(void 0),s()},[s]),fe=(0,c.useCallback)(Ue=>{f(Ue)},[]),de=(0,c.useCallback)(Ue=>{y.logEvent(Me.q.APP_MENU_CLICK,{user:g,cta:Ue})},[y,g]),ee=(0,c.useMemo)(()=>{const Ue=[{type:"item",label:p("open"),key:"open",onClick:()=>{pe.dataSource.open("start"),de("open-data-source-dialog"),ye()}},{type:"item",label:p("openLocalFile"),key:"open-file",onClick:()=>{de("open-file"),ye(),pe.openFile.open().catch(console.error)}},{type:"item",label:p("openConnection"),key:"open-connection",onClick:()=>{pe.dataSource.open("connection"),de("open-connection"),ye()}},{type:"divider"},{type:"item",label:p("recentDataSources"),key:"recent-sources",disabled:!0}];return S.slice(0,5).map(dt=>{Ue.push({type:"item",key:dt.id,onClick:()=>{de("open-recent"),N(dt.id),ye()},label:(0,n.jsx)(He,{text:dt.title,className:d.truncate})})}),Ue},[d.truncate,pe,de,ye,S,N,p]),Pe=(0,c.useMemo)(()=>[{type:"item",label:p(k?"hideLeftSidebar":"showLeftSidebar"),key:"left-sidebar",shortcut:"[",onClick:()=>{J.left.setOpen(!k),ye()}},{type:"item",label:p(W?"hideRightSidebar":"showRightSidebar"),key:"right-sidebar",shortcut:"]",onClick:()=>{J.right.setOpen(!W),ye()}}],[ye,k,W,J.left,J.right,p]),Ae=(0,c.useCallback)(()=>{pe.preferences.open("about"),de("about"),ye()},[pe.preferences,de,ye]),at=(0,c.useCallback)(()=>{de("docs"),window.open("https://foxglove.dev/docs","_blank"),ye()},[de,ye]),pt=(0,c.useCallback)(()=>{de("join-slack"),window.open("https://foxglove.dev/slack","_blank"),ye()},[de,ye]),xe=(0,c.useCallback)(()=>{pe.dataSource.open("demo"),de("demo"),ye()},[pe.dataSource,de,ye]),ke=(0,c.useMemo)(()=>[{type:"item",key:"about",label:p("about"),onClick:Ae},{type:"divider"},{type:"item",key:"docs",label:p("viewOurDocs"),onClick:at,external:!0},{type:"item",key:"join-slack",label:p("joinOurSlack"),onClick:pt,external:!0},{type:"divider"},{type:"item",key:"demo",label:p("exploreSampleData"),onClick:xe}],[Ae,xe,at,pt,p]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(De.Z,{anchorEl:o,anchorReference:a,anchorPosition:r,disablePortal:l,id:"app-menu",open:t,disableAutoFocusItem:!0,onClose:ye,MenuListProps:{"aria-labelledby":"app-menu-button",dense:!0,className:d.menuList},PaperProps:{"data-tourid":"app-menu"},children:[(0,n.jsx)(yt,{onPointerEnter:fe,items:ee,open:h==="app-menu-file",id:"app-menu-file",children:p("file")}),(0,n.jsx)(yt,{onPointerEnter:fe,items:Pe,open:h==="app-menu-view",id:"app-menu-view",children:p("view")}),(0,n.jsx)(yt,{onPointerEnter:fe,items:ke,open:h==="app-menu-help",id:"app-menu-help",children:p("help")})]})})}var We=i(22499),Je=i(92679),_e=i(38875),ze=i(63832),te=i(93812);const Qe=(0,b.ZL)()(e=>({closeButton:{":hover":{backgroundColor:e.palette.error.main}}}));function et({isMaximized:e=!1,onMinimizeWindow:t,onMaximizeWindow:s,onUnmaximizeWindow:o,onCloseWindow:a}){const{classes:r}=Qe();return(0,n.jsxs)(te.Z,{direction:"row",gap:1,paddingX:1,children:[(0,n.jsx)(K.Z,{size:"small",color:"inherit",onClick:t,"data-testid":"win-minimize",children:(0,n.jsx)(ze.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(K.Z,{size:"small",color:"inherit",onClick:e?o:s,"data-testid":"win-maximize",children:e?(0,n.jsx)(_e.Z,{fontSize:"inherit",color:"inherit"}):(0,n.jsx)(We.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(K.Z,{className:r.closeButton,size:"small",color:"inherit",onClick:a,"data-testid":"win-close",children:(0,n.jsx)(Je.Z,{fontSize:"inherit",color:"inherit"})})]})}var st=i(15328);function ft(e){return(0,n.jsxs)(st.Z,{viewBox:"0 0 400 400",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("ellipse",{cx:"143.854",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"255.89",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"311.161",cy:"200",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("path",{d:"M143.899 64C153.005 64 161.384 67.1164 168.028 72.3414C176.674 79.3821 187.705 83.603 199.722 83.603C211.739 83.603 222.77 79.3821 231.416 72.3414C238.06 67.1164 246.438 64 255.545 64C277.126 64 294.621 81.5031 294.621 103.094C294.621 124.685 277.126 142.189 255.545 142.189C246.438 142.189 238.06 139.072 231.416 133.847C222.77 126.806 211.739 122.586 199.722 122.586C187.705 122.586 176.674 126.806 168.028 133.847C161.384 139.072 153.005 142.189 143.899 142.189C122.318 142.189 104.823 124.685 104.823 103.094C104.823 81.5031 122.318 64 143.899 64Z"}),(0,n.jsx)("path",{d:"M88.0761 161.177C97.1825 161.177 105.561 164.294 112.205 169.519C120.851 176.559 131.882 180.78 143.899 180.78C155.916 180.78 166.947 176.559 175.593 169.519C182.237 164.294 190.616 161.177 199.722 161.177C221.303 161.177 238.798 178.68 238.798 200.272C238.798 221.863 221.303 239.366 199.722 239.366C190.616 239.366 182.237 236.249 175.593 231.024C166.947 223.984 155.916 219.763 143.899 219.763C131.882 219.763 120.851 223.984 112.205 231.024C105.561 236.249 97.1825 239.366 88.0761 239.366C66.495 239.366 49 221.863 49 200.272C49 178.68 66.495 161.177 88.0761 161.177Z"})]})]})}var ie=i(68434);const mt=(0,b.ZL)()(e=>({root:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",position:"relative",width:50,flex:"1 0 50px",fontSize:e.typography.caption.fontSize,overflow:"hidden"},label:{fontWeight:"bold"},text:{lineHeight:1.1}}));function Lt(e){return e/1024/1024}function It(){const e=(0,ge.yV)({refreshIntervalMs:5e3}),{classes:t,cx:s}=mt();if(!e)return(0,n.jsx)(n.Fragment,{});const o=e.usedJSHeapSize/e.jsHeapSizeLimit*100,a=Lt(e.usedJSHeapSize).toLocaleString(),r=Lt(e.jsHeapSizeLimit).toLocaleString();return(0,n.jsx)(Y.Z,{arrow:!1,title:`Used (MB): ${a} / ${r}`,placement:"bottom",children:(0,n.jsxs)("div",{className:t.root,children:[(0,n.jsx)(ie.Z,{className:s(t.label,t.text),variant:"caption",children:"MEM"}),(0,n.jsxs)(ie.Z,{className:t.text,variant:"caption",children:[o.toFixed(2),"%"]})]})})}var Tt=i(15116),ut=i(88099),ht=i(74602),vt=i(77075),Jt=i(39347),je=i(40301);function wn(){const{addPanel:e}=(0,ut._B)();return(0,c.useCallback)(({type:t,config:s,relatedConfigs:o})=>{const a=(0,je.nJ)(t);e({id:a,config:s,relatedConfigs:o})},[e])}const cs=(0,b.ZL)()(e=>({menuList:{minWidth:270,paddingBottom:e.spacing(1)}}));function Fn(e){const{classes:t}=cs(),{anchorEl:s,anchorPosition:o,anchorReference:a,disablePortal:r,handleClose:l,open:d}=e,p=wn();return(0,n.jsx)(De.Z,{id:"add-panel-menu",anchorEl:s,anchorPosition:o,anchorReference:a,disablePortal:r,open:d,onClose:l,MenuListProps:{dense:!0,disablePadding:!0,"aria-labelledby":"add-panel-button",className:t.menuList},anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{"data-tourid":"add-panel-menu"},children:(0,n.jsx)(Jt.B,{isMenu:!0,onDragStart:l,onPanelSelect:h=>{p(h),l()}})})}var qt=i(52498),vn=i(28165),cn=i(53748),zn=i(65992),Wt=i(7165),tn=i(3104),dn=i(51460),bn=i(85101),Oe=i(42741),Ze=i(38642),tt=i(60536);const Pt=i.p+"fa1041107bbf6dc79fdc.png",Et=(0,b.ZL)()({image:{maxWidth:"24rem"}});function xn(e){const{playerProblems:t}=e,{classes:s}=Et(),[o,a]=(0,c.useState)(!0),[r,l]=(0,c.useState)(!1),d=()=>{a(!1),l(!0)},p=t?.find(h=>h.severity==="error"&&h.message==="Insecure WebSocket connection");return r||!p?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(Ze.Z,{open:o,onClose:d,children:[(0,n.jsxs)(tt.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(ie.Z,{variant:"h3",paddingTop:1,children:"WebSocket SSL Error"}),(0,n.jsx)(K.Z,{onClick:()=>a(!1),edge:"end",children:(0,n.jsx)(Je.Z,{})})]}),(0,n.jsxs)(tt.Z,{paddingX:3,paddingY:2,rowGap:2,children:[(0,n.jsxs)(ie.Z,{variant:"body1",color:"text.secondary",children:["By default, Chrome prevents a secure ",(0,n.jsx)("code",{children:"https://"})," page from connecting to an insecure ",(0,n.jsx)("code",{children:"ws://"}),' WebSocket server. To allow the connection, enable "Unsafe Scripts" for this page.']}),(0,n.jsx)(ie.Z,{variant:"body1",color:"text.secondary",children:'Click the shield icon at the end of your address bar, and then click "Load Unsafe Scripts."'}),(0,n.jsx)("img",{src:Pt,alt:"WSS screenshot",className:s.image})]})]})}var Ye=i(24304),Ts=i(2784);const Gn=18,ct=(0,b.ZL)()((e,t,s)=>({sourceName:{font:"inherit",fontSize:e.typography.body2.fontSize,display:"flex",alignItems:"center",gap:e.spacing(.5),padding:e.spacing(1.5),paddingInlineEnd:e.spacing(.75),whiteSpace:"nowrap",minWidth:0},adornment:{display:"flex",flex:"none",alignItems:"center",justifyContent:"center",position:"relative",color:e.palette.appBar.primary,width:Gn,height:Gn,marginLeft:e.spacing(1.2),marginRight:e.spacing(1.2)},adornmentError:{color:e.palette.error.main},spinner:{position:"absolute",top:0,right:0,left:0,bottom:0,margin:"auto"},textTruncate:{maxWidth:"30vw",overflow:"hidden"},iconButton:{padding:0,position:"relative",zIndex:1,fontSize:Gn-2,"svg:not(.MuiSvgIcon-root)":{fontSize:"1rem"}}})),bt=e=>e.playerState.presence,Cn=e=>e.playerState.problems;function un(){const{t:e}=(0,X.$G)("appBar"),{classes:t,cx:s}=ct(),o=(0,Oe.An)(bt),a=(0,Oe.An)(Cn)??[],{sidebarActions:r,dialogActions:l}=(0,Re.W)(),d=o===Ye.m.RECONNECTING,p=o===Ye.m.INITIALIZING,h=o===Ye.m.ERROR||a.some(Ae=>Ae.severity==="error"),f=d||p,[g,y]=Ts.useState(null),[S,N]=Ts.useState(null),k=Boolean(g),W=Ae=>{y(Ae.currentTarget)},{selectedSource:J,availableSources:pe,selectSource:ye}=(0,ot.n)(),fe=(Ae,at)=>{if(y(null),Ae==null||at!=null||at=="backdropClick"||at=="escapeKeyDown")return;let pt=Ae.currentTarget.getAttribute("data-source"),xe=pe.find(ke=>ke.id===pt)?.id;if(xe){if(xe=="ros1-local-bagfile"){l.openFile.open().catch(console.error);return}ye(xe,{type:"connection",params:{url:"ws://localhost:9090"}})}};(0,c.useEffect)(()=>{J!=null&&J.id!=S&&N(J.id??null)},[J?.id]),(0,c.useLayoutEffect)(()=>{S==null&&J?.id==null&&ye("rosbridge-websocket",{type:"connection",params:{url:"ws://localhost:9090"}})},[S]);const de=(0,vn.F4)`
  0% {
    opacity: 1;
  }
    30% {
    opacity: 0.5;
  }
  60% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
`,ee=[{key:"rosbridge-websocket",el:(0,n.jsxs)(Ve.Z,{onClick:fe,selected:S==="rosbridge-websocket",disableRipple:!0,"data-source":"rosbridge-websocket",children:[(0,n.jsx)(cn.Z,{label:"LIVE",color:"error",sx:{height:20,width:"auto",marginRight:1,paddingLeft:0,paddingRight:0,"& .MuiChip-label":{fontSize:9,paddingLeft:1,paddingRight:1}}})," ROS Bridge"]},"rosbridge-websocket"),displayEl:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(cn.Z,{label:"LIVE",color:"error",sx:{animation:`${de} 5s ease infinite`,height:20,width:"auto",marginRight:1,paddingLeft:0,paddingRight:0,"& .MuiChip-label":{fontSize:9,paddingLeft:1,paddingRight:1}}})," ROS Bridge"]})},{key:"ros1-local-bagfile",el:(0,n.jsxs)(Ve.Z,{onClick:fe,disableRipple:!0,"data-source":"ros1-local-bagfile",selected:S==="ros1-local-bagfile",children:[(0,n.jsx)(dn.Z,{})," ROS Bag"]},"ros1-local-bagfile"),displayEl:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(dn.Z,{sx:{fontSize:22,marginRight:1.9,marginLeft:.8}})," ROS Bag"]})}],Pe=(0,zn.ZP)(Ae=>(0,n.jsx)(De.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...Ae}))(({theme:Ae})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:Ae.spacing(1),minWidth:180,padding:0,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:22,marginRight:Ae.spacing(1.9),marginLeft:Ae.spacing(.8)},"&:active":{backgroundColor:(0,Wt.Fq)(Ae.palette.primary.main,Ae.palette.action.selectedOpacity)}}}}));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(xn,{playerProblems:a}),(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(U.Z,{id:"select-source-button","aria-controls":k?"select-source-menu":void 0,"aria-haspopup":"true","aria-expanded":k?"true":void 0,variant:"contained",disableElevation:!0,onClick:W,endIcon:(0,n.jsx)(bn.Z,{}),children:ee.find(Ae=>Ae.key===S)?.displayEl??e("selectSource")}),(0,n.jsx)(Pe,{id:"select-source-menu",MenuListProps:{"aria-labelledby":"select-source-button"},anchorEl:g,open:k,onClose:fe,children:ee.map(Ae=>Ae.el)})]}),(0,n.jsxs)("div",{className:s(t.adornment,{[t.adornmentError]:h}),children:[f&&(0,n.jsx)(tn.Z,{size:Gn,color:"inherit",className:t.spinner,variant:"indeterminate"}),h&&(0,n.jsx)(K.Z,{color:"inherit",className:t.iconButton,onClick:()=>{r.left.setOpen(!0),r.left.selectItem("problems")},children:(0,n.jsx)(qt.VaY,{})})]})]})]})}var Vt=i(35936),nn=i(48907),Xt=i(60189),$s=i(78107);function Is(e){const t=e.onComplete,s=(0,c.useRef)(!1),o=(0,c.useCallback)(r=>{s.current||(s.current=!0,t(r))},[t]);(0,$s.Z)("Enter",()=>o("ok")),(0,c.useEffect)(()=>()=>o("cancel"),[o]);const a=[e.cancel!==!1&&(0,n.jsx)(U.Z,{size:"large",variant:"outlined",color:"inherit",onClick:()=>o("cancel"),children:e.cancel??"Cancel"},"cancel"),(0,n.jsx)(U.Z,{variant:"contained",size:"large",color:e.variant==="danger"?"error":"primary",type:"submit",children:e.ok??"OK"},"confirm")];return e.variant==="danger"&&a.reverse(),(0,n.jsx)(Ze.Z,{open:!0,onClose:()=>o("cancel"),maxWidth:"xs",fullWidth:!0,children:(0,n.jsxs)("form",{onSubmit:r=>{r.preventDefault(),o("ok")},children:[(0,n.jsx)(Vt.Z,{children:e.title}),(0,n.jsx)(nn.Z,{children:e.prompt}),(0,n.jsx)(Xt.Z,{children:a})]})})}function En(){const[e,t]=(0,c.useState)();return[(0,c.useCallback)(async o=>await new Promise(a=>{t((0,n.jsx)(Is,{...o,onComplete:r=>{a(r),t(void 0)}}))}),[]),e]}var Js="../../packages/studio-base/src/components/AppBar/UserMenu.tsx",qs=i(63136).Z;const Un=ve.ZP.getLogger(Js),_s=(0,b.ZL)()({menuList:{minWidth:200}});function ji({anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:o,handleClose:a,open:r}){const{classes:l}=_s(),{currentUser:d,signIn:p,signOut:h}=(0,Fe.xJ)(),f=(0,Fe.T2)(),g=(0,$e.z)(),{enqueueSnackbar:y}=(0,ce.Ds)(),[S,N]=En(),{dialogActions:k}=(0,Re.W)(),W=(0,c.useCallback)(async()=>{try{await h?.()}catch(Pe){Un.error(Pe),y(Pe.toString(),{variant:"error"})}},[y,h]),J=(0,c.useCallback)(()=>{S({title:"Are you sure you want to sign out?",ok:"Sign out"}).then(Pe=>{Pe==="ok"&&W()})},[W,S]),pe=(0,c.useCallback)(()=>{g.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:f,cta:"sign-in"}),p?.()},[g,f,p]),ye=(0,c.useCallback)(Pe=>{g.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:f,cta:"app-settings-dialog"}),k.preferences.open(Pe)},[g,f,k.preferences]),fe=(0,c.useCallback)(()=>{g.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:f,cta:"profile"}),window.open(qs.env.FOXGLOVE_ACCOUNT_PROFILE_URL,"_blank")},[g,f]),de=(0,c.useCallback)(()=>{g.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:f,cta:"docs"}),window.open("https://foxglove.dev/docs","_blank")},[g,f]),ee=(0,c.useCallback)(()=>{g.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:f,cta:"join-slack"}),window.open("https://foxglove.dev/slack","_blank")},[g,f]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(De.Z,{anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:o,id:"user-menu",open:r,onClose:a,onClick:a,MenuListProps:{className:l.menuList,dense:!0},PaperProps:{"data-tourid":"user-menu"},children:[d&&(0,n.jsx)(Ve.Z,{disabled:!0,children:d.email}),(0,n.jsx)(Ve.Z,{onClick:()=>ye(),children:"Settings"}),(0,n.jsx)(Ve.Z,{onClick:()=>ye("extensions"),children:"Extensions"}),d&&(0,n.jsx)(Ve.Z,{onClick:fe,children:"User profile"}),(0,n.jsx)(Xe.Z,{variant:"middle"}),(0,n.jsx)(Ve.Z,{onClick:de,children:"Documentation"}),(0,n.jsx)(Ve.Z,{onClick:ee,children:"Join Slack community"}),p!=null&&(0,n.jsx)(Xe.Z,{variant:"middle"}),d?(0,n.jsx)(Ve.Z,{onClick:J,children:"Sign out"}):p!=null?(0,n.jsx)(Ve.Z,{onClick:pe,children:"Sign in"}):void 0]}),N]})}var na=i(30280);const Ri=(0,b.ZL)()((e,{leftInset:t,debugDragRegion:s=!1},o)=>{const a={WebkitAppRegion:"drag"},r={WebkitAppRegion:"no-drag"};return s&&(a.backgroundColor="green",r.backgroundColor="red"),{appBar:{gridArea:"appbar",boxShadow:"none",backgroundColor:e.palette.common.white,borderBottom:`2px solid ${e.palette.divider}`,color:e.palette.appBar.main,height:na.h,paddingLeft:t,paddingRight:"calc(100% - env(titlebar-area-x) - env(titlebar-area-width))",...a},toolbar:{display:"grid",width:"100%",gridTemplateAreas:'"start middle end"',gridTemplateColumns:"1fr auto 1fr",alignItems:"center"},logo:{padding:e.spacing(.75,.5),fontSize:"2rem",color:e.palette.appBar.primary,borderRadius:0,marginLeft:e.spacing(1),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em",color:e.palette.appBar.primary,fill:"currentColor"},"&:hover":{backgroundColor:(0,ne.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,color:e.palette.common.white},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}},dropDownIcon:{fontSize:"12px !important"},start:{gridArea:"start",display:"flex",flex:1,alignItems:"center"},startInner:{display:"flex",alignItems:"center",...r},middle:{gridArea:"middle",justifySelf:"center",overflow:"hidden",maxWidth:"100%",...r},end:{gridArea:"end",flex:1,display:"flex",justifyContent:"flex-end"},endInner:{display:"flex",alignItems:"center",...r},keyEquivalent:{fontFamily:vt.R.MONOSPACE,background:(0,ne.Z)(e.palette.common.white).darken(45).toString(),padding:e.spacing(0,.5),aspectRatio:1,borderRadius:e.shape.borderRadius,marginLeft:e.spacing(1)},tooltip:{marginTop:`${e.spacing(.5)} !important`},avatar:{color:e.palette.common.white,backgroundColor:(0,ne.Z)(e.palette.appBar.main).lighten().toString(),height:e.spacing(3.5),width:e.spacing(3.5)},iconButton:{padding:e.spacing(1),borderRadius:0,"&:hover":{backgroundColor:(0,ne.Z)(e.palette.common.white).setAlpha(.08).toString(),[`.${o.avatar}`]:{backgroundColor:(0,ne.Z)(e.palette.appBar.main).lighten(20).toString()}},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,[`.${o.avatar}`]:{backgroundColor:(0,ne.Z)(e.palette.appBar.main).setAlpha(.3).toString()}}},button:{marginInline:e.spacing(1),backgroundColor:e.palette.appBar.primary,"&:hover":{backgroundColor:e.palette.augmentColor({color:{main:e.palette.appBar.primary}}).dark}}}}),Li=({selectedLayout:e})=>e?.id,Ni=e=>e;function Oi(e){const{debugDragRegion:t,disableSignIn:s=!1,isMaximized:o,leftInset:a,onCloseWindow:r,onDoubleClick:l,onMaximizeWindow:d,onMinimizeWindow:p,onUnmaximizeWindow:h,showCustomWindowControls:f=!1}=e,{classes:g,cx:y,theme:S}=Ri({leftInset:a,debugDragRegion:t}),{currentUser:N,signIn:k}=(0,Fe.xJ)(),{t:W}=(0,X.$G)("appBar"),{appBarLayoutButton:J}=(0,Tt.b)(),pe=(0,$e.z)(),[ye=!1]=(0,ht.b)(C.o.ENABLE_MEMORY_USE_INDICATOR),fe=(0,ut.NS)(Li),{sidebars:{left:{open:de},right:{open:ee}}}=(0,Ke.Q)(Ni,Se.X),{sidebarActions:Pe}=(0,Re.W)(),[Ae,at]=(0,c.useState)(void 0),[pt,xe]=(0,c.useState)(void 0),[ke,Ue]=(0,c.useState)(void 0),dt=Boolean(Ae),jt=Boolean(pt),Ut=Boolean(ke);(0,c.useLayoutEffect)(()=>{let gt=document.getElementById("app-top-bar");if(gt){let nt=document.getElementById("menu-button"),kt=document.getElementById("menu-button-2");kt&&(nt?.style.setProperty("display","none"),kt.classList.remove("d-none"),gt.prepend(kt))}let Ne=document.getElementById("3d-panel-nav-link");Ne&&Ne.classList.add("active")},[]);const wt=(0,c.useCallback)(gt=>{gt.stopPropagation(),gt.preventDefault(),l?.()},[l]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{className:g.appBar,position:"relative",color:"inherit",elevation:0,onDoubleClick:wt,"data-tourid":"app-bar",children:(0,n.jsxs)("div",{className:g.toolbar,children:[(0,n.jsx)("div",{className:g.start,children:(0,n.jsxs)("div",{className:g.startInner,id:"app-top-bar",children:[(0,n.jsxs)(K.Z,{className:y(g.logo,{"Mui-selected":dt}),color:"inherit",id:"app-menu-button",title:"Menu","aria-controls":dt?"app-menu":void 0,"aria-haspopup":"true","aria-expanded":dt?"true":void 0,"data-tourid":"app-menu-button",onClick:gt=>{at(gt.currentTarget)},children:[(0,n.jsx)(ft,{fontSize:"inherit",color:"inherit"}),(0,n.jsx)(I.Xqf,{className:g.dropDownIcon,primaryFill:S.palette.appBar.primary})]}),(0,n.jsx)(At,{open:dt,anchorEl:Ae,handleClose:()=>at(void 0)}),(0,n.jsx)(we,{className:y({"Mui-selected":Ut}),color:"inherit",disabled:fe==null,id:"add-panel-button","data-tourid":"add-panel-button",title:"Add panel","aria-label":"Add panel button","aria-controls":Ut?"add-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":Ut?"true":void 0,onClick:gt=>{Ue(gt.currentTarget)},children:(0,n.jsx)(le.xcP,{})})]})}),(0,n.jsx)("div",{className:g.middle,children:(0,n.jsx)(un,{})}),(0,n.jsx)("div",{className:g.end,children:(0,n.jsxs)("div",{className:g.endInner,children:[ye&&(0,n.jsx)(It,{}),J,(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center","data-tourid":"sidebar-button-group",children:[(0,n.jsx)(we,{title:(0,n.jsxs)(n.Fragment,{children:[de?"Hide":"Show"," left sidebar---"," ",(0,n.jsx)("kbd",{className:g.keyEquivalent,children:"["})]}),"aria-label":`${de?"Hide":"Show"} left sidebar`,onClick:()=>Pe.left.setOpen(!de),"data-tourid":"left-sidebar-button",children:de?(0,n.jsx)(O.JaP,{}):(0,n.jsx)(O.iek,{})}),(0,n.jsx)(we,{title:(0,n.jsxs)(n.Fragment,{children:[ee?"Hide":"Show"," right sidebar---"," ",(0,n.jsx)("kbd",{className:g.keyEquivalent,children:"]"})]}),"aria-label":`${ee?"Hide":"Show"} right sidebar`,onClick:()=>Pe.right.setOpen(!ee),"data-tourid":"right-sidebar-button",children:ee?(0,n.jsx)(O.heV,{}):(0,n.jsx)(O.K1j,{})})]}),!s&&!N&&k!=null&&(0,n.jsx)(U.Z,{variant:"contained",color:"primary",className:g.button,size:"small",onClick:()=>{k(),pe.logEvent(Me.q.APP_BAR_CLICK_CTA,{user:"unauthenticated",cta:"sign-in"})},children:W("signIn")}),(0,n.jsx)(Y.Z,{classes:{tooltip:g.tooltip},title:N?.email??"Profile",arrow:!1,children:(0,n.jsx)(K.Z,{className:y(g.iconButton,{"Mui-selected":jt}),"aria-label":"User profile menu button",color:"inherit",id:"user-button","data-tourid":"user-button","aria-controls":jt?"user-menu":void 0,"aria-haspopup":"true","aria-expanded":jt?"true":void 0,onClick:gt=>xe(gt.currentTarget),"data-testid":"user-button",children:(0,n.jsx)(z.Z,{src:N?.avatarImageUrl??void 0,className:g.avatar,variant:"rounded"})})}),f&&(0,n.jsx)(et,{onMinimizeWindow:p,isMaximized:o,onUnmaximizeWindow:h,onMaximizeWindow:d,onCloseWindow:r})]})})]})}),(0,n.jsx)(Fn,{anchorEl:ke,open:Ut,handleClose:()=>Ue(void 0)}),(0,n.jsx)(ji,{anchorEl:pt,open:jt,handleClose:()=>xe(void 0)})]})}var ds=i(87438),Kt=i(96995);const ki=(0,b.ZL)()({container:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}});function sa({effect:e}){const{classes:t}=ki(),s=(0,c.useRef)(null);return(0,c.useLayoutEffect)(()=>{let o;const a=s.current;if(!a)return;const r=new Kt.xsS,l=new Kt.iKG,d=e==="snow"?75:100,p=new Float32Array(d*3),h=new Float32Array(d*3),f=new Float32Array(d),g=new Float32Array(d),y=new Kt.Pa4,S=new Kt.Ilk;for(let ee=0;ee<d;ee++)y.x=Math.random(),y.y=Math.random(),y.z=-1,y.toArray(p,ee*3),e==="snow"?S.setRGB(1,1,1):S.setHSL(Math.random(),1,.5),S.toArray(h,ee*3),f[ee]=Math.random(),g[ee]=Math.random()*Math.PI;const N=new Kt.u9r;N.setAttribute("position",new Kt.TlE(p,3)),N.setAttribute("color",new Kt.TlE(h,3)),N.setAttribute("size",new Kt.TlE(f,1)),N.setAttribute("phase",new Kt.TlE(g,1));const k=new Kt.jyz({uniforms:{time:{value:1},yspeed:{value:e==="snow"?.1:.2},wind:{value:e==="snow"?.02:0}},vertexShader:`
      uniform float time;
      uniform float yspeed;
      uniform float wind;
      attribute vec3 color;
      attribute float size;
      attribute float phase;
      const float xspeed = 10.0;
      const float amplitude = 0.03;
      const float minsize = 5.0;
      const float maxsize = 12.0;
      varying vec4 vcolor;
      void main() {
        vcolor = vec4(color, 1.0);
        float x = mix(-1.0, 1.0, mod(
          position.x + sin(phase + time * xspeed * yspeed) * amplitude + time * xspeed * yspeed * wind,
          1.0));
				float y = mix(-1.0, 1.0, mod(position.y - time * yspeed * mix(0.2, 1.0, size), 1.0));
				gl_PointSize = mix(minsize, maxsize, size);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(x, y, position.z, 1.0);
			}
      `,fragmentShader:`
      varying vec4 vcolor;
			void main() {
        if (length(gl_PointCoord * 2.0 - 1.0) > 1.0) {
          discard;
        }
				gl_FragColor = vcolor;
			}
      `}),W=new Kt.woe(N,k);r.add(W);const J=new Kt.CP7({alpha:!0});J.setPixelRatio(window.devicePixelRatio),J.setSize(a.clientWidth,a.clientHeight),a.appendChild(J.domElement);const pe=new Date;function ye(){const ee=(new Date().getTime()-pe.getTime())/1e3;k.uniforms.time={value:ee},J.render(r,l)}let fe=!0;function de(){fe&&(o=requestAnimationFrame(de),ye())}return de(),()=>{fe=!1,N.dispose(),k.dispose(),J.dispose(),a.removeChild(J.domElement),cancelAnimationFrame(o)}},[e]),(0,n.jsx)("div",{className:t.container,ref:s})}var oa=i(86432),Ps=i(52296),pn=i(41574),Wn=i(88687),sn=i(63249),us=i(2043),Zi=i(75988),eo=i(71092),Bn=i(24957),ps=i(78404);function Fi(e){return(0,n.jsx)(st.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("rect",{x:"8.07",y:"5.38",width:"7.87",height:"7.87",rx:"2"}),(0,n.jsx)("path",{d:"M12,1.53A10.5,10.5,0,1,0,22.5,12,10.51,10.51,0,0,0,12,1.53ZM18.41,19l-1.67-2.61a2.47,2.47,0,0,0-2-1H9.26a2.48,2.48,0,0,0-2,1L5.59,19a9.5,9.5,0,1,1,12.82,0Z"})]})})}function zi(e){return(0,n.jsx)(st.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M22.5,12A10.5,10.5,0,1,0,5.08,19.87l0,0,.35.28a10,10,0,0,0,1.55,1l.24.12.6.29.4.16.48.17.45.14.48.13c.15,0,.3.07.46.09a5,5,0,0,0,.56.09l.39.05c.32,0,.65.05,1,.05s.66,0,1-.05l.39-.05a5,5,0,0,0,.56-.09,3.41,3.41,0,0,0,.46-.1,3.59,3.59,0,0,0,.47-.12l.47-.14.46-.17.42-.17.55-.26.29-.15a9.84,9.84,0,0,0,1.54-1l.35-.28,0,0A10.44,10.44,0,0,0,22.5,12Zm-5.12,7.82-.15.11-.58.34-.2.12-.61.29a1,1,0,0,1-.18.08,6.77,6.77,0,0,1-.75.28l-.35.1-.48.12-.37.08-.53.08-.31,0c-.29,0-.58,0-.87,0s-.58,0-.87,0l-.31,0-.53-.08-.37-.08-.48-.12L9.09,21a6.77,6.77,0,0,1-.75-.28,1,1,0,0,1-.18-.08l-.61-.29-.2-.12c-.2-.11-.39-.22-.58-.35l-.15-.1-.22-.17L8.06,17a1.51,1.51,0,0,1,1.22-.62h5.44a1.51,1.51,0,0,1,1.21.6l1.67,2.65A1.84,1.84,0,0,1,17.38,19.82Zm-.63-3.38a2.49,2.49,0,0,0-2-1H9.28a2.5,2.5,0,0,0-2,1.07L5.62,19a9.5,9.5,0,1,1,12.76,0Z"}),(0,n.jsx)("path",{d:"M14,5.36h-3.9a2,2,0,0,0-2,2v3.9a2,2,0,0,0,2,2H14a2,2,0,0,0,2-2V7.36A2,2,0,0,0,14,5.36Zm1,5.9a1,1,0,0,1-1,1h-3.9a1,1,0,0,1-1-1V7.36a1,1,0,0,1,1-1H14a1,1,0,0,1,1,1Z"})]})})}var aa;function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},to.apply(this,arguments)}var Gi=function(t){return c.createElement("svg",to({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),aa||(aa=c.createElement("g",{fill:"currentColor"},c.createElement("path",{d:"m22.6 19.07-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32Zm-4.78.18c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}),c.createElement("path",{d:"M4 6v12c0 .69.32 1.29.77 1.78.45.48 1.08.88 1.79 1.2 1.43.64 3.35 1.02 5.43 1.02.51 0 .53-.02 1.01-.07-.42-.52-.46-.84-.88-1.43-1.87-.01-3.78-.36-4.95-.89-.6-.27-1.04-.57-1.32-.86-.28-.29-.37-.54-.37-.75V8.39c.32.22.68.42 1.07.59C7.98 9.62 9.9 10 11.98 10s4-.38 5.43-1.02c.39-.17.75-.37 1.07-.59v3.43h.75c.49 0 .75.56.75.56V6.01c0-.69-.32-1.29-.77-1.78-.45-.48-1.08-.88-1.79-1.2-1.43-.64-3.35-1.02-5.43-1.02s-4 .38-5.43 1.02c-.71.32-1.34.72-1.79 1.2C4.31 4.72 4 5.32 4 6.01Zm1.5 0c0-.21.09-.46.36-.75.28-.3.72-.6 1.32-.86 1.2-.54 2.9-.89 4.82-.89s3.62.35 4.82.89c.6.27 1.04.57 1.32.86.27.29.36.54.36.75s-.09.46-.36.75c-.28.3-.72.6-1.32.86-1.19.54-2.9.89-4.82.89s-3.62-.35-4.82-.89c-.6-.27-1.04-.57-1.32-.86-.27-.29-.36-.54-.36-.75Z"}))))};const Ui=Gi;var ia;function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},no.apply(this,arguments)}var Wi=function(t){return c.createElement("svg",no({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ia||(ia=c.createElement("path",{fill:"currentColor",d:"M19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h14.5c1.52 0 2.75-1.23 2.75-2.75V6.75C22 5.23 20.77 4 19.25 4Zm1.25 2.75v4.5h-3.27V5.5h2.02c.69 0 1.25.56 1.25 1.25Zm-8.06 6h3.29v5.75h-3.29v-5.75Zm0-1.5V5.5h3.29v5.75h-3.29Zm-8.94 6V6.75c0-.69.56-1.25 1.25-1.25h6.19v13H4.75c-.69 0-1.25-.56-1.25-1.25Zm15.75 1.25h-2.02v-5.75h3.27v4.5c0 .69-.56 1.25-1.25 1.25Z"})))};const Qi=Wi;var ra;function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},so.apply(this,arguments)}var Yi=function(t){return c.createElement("svg",so({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ra||(ra=c.createElement("g",{fill:"currentColor"},c.createElement("path",{d:"M4.75 18.5c-.69 0-1.25-.56-1.25-1.25V6.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v4.98c.55.29 1.05.65 1.5 1.08V6.75C22 5.23 20.77 4 19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h6.75c-.2-.47-.34-.98-.42-1.5H4.75Z"}),c.createElement("path",{d:"m22.28 18.82-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32ZM17.5 19c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}))))};const Hi=Yi,Vi={Add:(0,n.jsx)(us.F1F,{}),AddIn:(0,n.jsx)(us.OPr,{}),BacklogList:(0,n.jsx)(Zi.HHE,{}),Blockhead:(0,n.jsx)(zi,{}),BlockheadFilled:(0,n.jsx)(Fi,{}),BookStar:(0,n.jsx)(eo.M02,{}),Cancel:(0,n.jsx)(Bn.a3k,{}),DatabaseSettings:(0,n.jsx)(Ui,{}),Delete:(0,n.jsx)(Bn.tlh,{}),Edit:(0,n.jsx)(qt.Np1,{}),ErrorBadge:(0,n.jsx)(Bn.w2A,{}),FileASPX:(0,n.jsx)(Bn.nkr,{}),FiveTileGrid:(0,n.jsx)(Qi,{}),Flow:(0,n.jsx)(qt.AIp,{}),GenericScan:(0,n.jsx)(eo.Y$Z,{}),OpenFile:(0,n.jsx)(Bn.rQu,{}),PanelSettings:(0,n.jsx)(Hi,{}),RectangularClipping:(0,n.jsx)(le.xcP,{}),Settings:(0,n.jsx)(le.zTZ,{}),Sparkle:(0,n.jsx)(le.iu5,{}),Variable2:(0,n.jsx)(eo.Xni,{}),ROS:(0,n.jsx)(ps.Jw2,{})};function Xi(e){return e.name==null?(0,n.jsx)(n.Fragment,{}):Vi[e.name]}var Mt=i(68234),Ki=i(89745);function $i(e){const[t,s]=(0,c.useState)(),o=e.field,a=r=>{s(void 0);const l=o.validate?.(r.target.value);if(l instanceof Error){s(l.message),e.onError(l.message);return}e.onChange(r.target.value)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(Mt.Z,{fullWidth:!0,disabled:e.disabled,label:o.label,error:t!=null,helperText:t,FormHelperTextProps:{variant:"standard"},placeholder:o.placeholder,defaultValue:o.defaultValue,onChange:a,variant:"outlined",InputProps:{notched:!1},InputLabelProps:{shrink:!0}},o.label),(0,n.jsx)(Ki.Z,{children:o.description})]})}var oo=i(49001);const Ji=(0,b.ZL)()(e=>({content:{display:"flex",flexDirection:"column",flexGrow:1,height:"100%",justifyContent:"space-between",gap:e.spacing(2),overflowY:"auto"}}));function qi(e){const{onOpen:t}=e,{classes:s}=Ji(),{dialogActions:o}=(0,Re.W)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:s.content,children:e.children}),(0,n.jsxs)(te.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:4,paddingBottom:4,paddingTop:2,children:[(0,n.jsx)(U.Z,{startIcon:(0,n.jsx)(oo.Z,{fontSize:"large"}),onClick:()=>o.dataSource.open("start"),size:"large",children:"Back"}),(0,n.jsxs)(te.Z,{direction:"row",gap:2,children:[(0,n.jsx)(U.Z,{size:"large",color:"inherit",variant:"outlined",onClick:()=>o.dataSource.close(),children:"Cancel"}),(0,n.jsx)(U.Z,{size:"large",variant:"contained",onClick:t,disabled:t==null,children:"Open"})]})]})]})}const _i=(0,b.ZL)()(e=>({grid:{padding:e.spacing(4,4,0),columnGap:e.spacing(4),rowGap:e.spacing(2),[e.breakpoints.up("md")]:{overflow:"hidden",display:"grid",padding:e.spacing(4,4,0,4),gridTemplateAreas:`
        "header header"
        "sidebar form"
      `,gridTemplateColumns:"240px 1fr",gridTemplateRows:"auto auto"}},header:{gridArea:"header"},form:{gridArea:"form",overflowY:"auto"},formInner:{[e.breakpoints.up("md")]:{height:e.spacing(43)}},sidebar:{gridArea:"sidebar",overflowY:"auto"},tab:{"> svg:not(.MuiSvgIcon-root)":{display:"flex",flex:"none",color:e.palette.primary.main,marginRight:e.spacing(1.5)},[e.breakpoints.up("md")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("md")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),er=e=>e.dialogs.dataSource;function tr(){const{classes:e}=_i(),t=(0,L.Z)(),s=(0,oa.Z)(t.breakpoints.up("md")),{activeDataSource:o}=(0,Ke.Q)(er),{dialogActions:a}=(0,Re.W)(),{availableSources:r,selectSource:l}=(0,ot.n)(),d=(0,$e.z)(),p=(0,c.useMemo)(()=>r.filter(fe=>fe.type==="connection"&&fe.hidden!==!0),[r]),h=(0,c.useMemo)(()=>{const fe=p.filter(ee=>ee.disabledReason==null),de=p.filter(ee=>ee.disabledReason);return[...fe,...de]},[p]),[f,g]=(0,c.useState)(()=>{const fe=p.findIndex(ee=>ee===o),de=fe<0?0:fe;return d.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"live",data:h[de]?.id}),de}),y=(0,c.useMemo)(()=>h[f],[h,f]),[S,N]=(0,c.useState)(new Map),[k,W]=(0,c.useState)({});(0,c.useLayoutEffect)(()=>{const fe=p.findIndex(de=>de===o);fe>=0&&g(fe)},[o,p]),(0,c.useLayoutEffect)(()=>{const fe={};for(const de of y?.formConfig?.fields??[])de.defaultValue!=null&&(fe[de.id]=de.defaultValue);W(fe)},[y]);const J=(0,c.useCallback)(()=>{y&&(l(y.id,{type:"connection",params:k}),d.logEvent(Me.q.DIALOG_CLOSE,{activeDataSource:o}),a.dataSource.close())},[y,l,k,d,o,a.dataSource]),pe=y?.disabledReason!=null||S.size>0,ye=(0,c.useCallback)(fe=>{fe.preventDefault(),pe||J()},[pe,J]);return(0,n.jsx)(qi,{onOpen:pe?void 0:J,children:(0,n.jsxs)(te.Z,{className:e.grid,children:[(0,n.jsx)("header",{className:e.header,children:(0,n.jsx)(ie.Z,{variant:"h3",fontWeight:600,gutterBottom:!0,children:"Open a new connection"})}),(0,n.jsx)("div",{className:e.sidebar,children:(0,n.jsx)(Ps.Z,{classes:{indicator:e.indicator},variant:"scrollable",textColor:"inherit",orientation:s?"vertical":"horizontal",onChange:(fe,de)=>{g(de),d.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"live",data:h[de]?.id})},value:f,children:h.map((fe,de)=>{const{id:ee,iconName:Pe,displayName:Ae}=fe;return(0,n.jsx)(pn.Z,{value:de,icon:s?(0,n.jsx)(Xi,{name:Pe??"Flow"}):void 0,label:Ae,className:e.tab},ee)})})}),(0,n.jsx)(te.Z,{className:e.form,flex:"1 0",children:(0,n.jsx)("form",{onSubmit:ye,children:(0,n.jsxs)(te.Z,{className:e.formInner,gap:2,children:[y?.disabledReason==null&&y?.warning!=null&&(0,n.jsx)(Wn.Z,{severity:"warning",children:y.warning}),y?.disabledReason!=null&&(0,n.jsx)(Wn.Z,{severity:"warning",children:y.disabledReason}),y?.description&&(0,n.jsx)(ie.Z,{children:y.description}),y?.formConfig!=null&&(0,n.jsx)(te.Z,{flexGrow:1,justifyContent:"space-between",children:(0,n.jsx)(te.Z,{gap:2,children:y.formConfig.fields.map(fe=>(0,n.jsx)($i,{field:fe,disabled:y.disabledReason!=null,onError:de=>{N(ee=>(ee.set(fe.id,de),new Map(ee)))},onChange:de=>{N(ee=>(ee.delete(fe.id),new Map(ee))),W(ee=>({...ee,[fe.id]:de}))}},fe.id))})}),(0,n.jsx)(te.Z,{direction:"row",gap:1,children:(y?.docsLinks??[]).map(fe=>(0,n.jsx)(sn.Z,{color:"primary",href:fe.url,target:"_blank",rel:"noreferrer",children:fe.label?`View docs for ${fe.label}`:"View docs"},fe.url))})]})})},y?.id)]})})}var Qn=i(81774),Yn=i(15400),ao=i(14117);function la(e){return(0,n.jsxs)(st.Z,{viewBox:"0 0 909 204",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M313.65 92.55H295.05V156H269.85V92.55H258.15V80.25L270.15 73.8V69.9C270.15 59.3 272.55 51.9 277.35 47.7C282.15 43.4 289.25 41.25 298.65 41.25C302.95 41.25 306.85 41.6 310.35 42.3C313.95 43 317.25 43.85 320.25 44.85L314.25 62.25C312.75 61.85 311.05 61.45 309.15 61.05C307.25 60.65 305.15 60.45 302.85 60.45C300.15 60.45 298.15 61.3 296.85 63C295.65 64.6 295.05 66.9 295.05 69.9V73.65H313.65V92.55ZM402.362 114.6C402.362 128.4 398.712 139 391.412 146.4C384.212 153.8 374.312 157.5 361.712 157.5C353.912 157.5 346.962 155.85 340.862 152.55C334.862 149.15 330.112 144.3 326.612 138C323.212 131.6 321.512 123.8 321.512 114.6C321.512 101 325.112 90.55 332.312 83.25C339.612 75.85 349.562 72.15 362.162 72.15C369.962 72.15 376.862 73.8 382.862 77.1C388.962 80.4 393.712 85.2 397.112 91.5C400.612 97.8 402.362 105.5 402.362 114.6ZM347.162 114.6C347.162 122.3 348.312 128.15 350.612 132.15C352.912 136.05 356.712 138 362.012 138C367.212 138 370.962 136.05 373.262 132.15C375.562 128.15 376.712 122.3 376.712 114.6C376.712 107 375.562 101.3 373.262 97.5C370.962 93.6 367.162 91.65 361.862 91.65C356.662 91.65 352.912 93.6 350.612 97.5C348.312 101.3 347.162 107 347.162 114.6ZM434.075 114L408.125 73.65H436.775L451.175 98.4L465.725 73.65H494.375L468.125 114L495.575 156H466.925L451.175 129.3L435.425 156H406.775L434.075 114ZM533.61 72.15C539.01 72.15 543.61 73.2 547.41 75.3C551.21 77.4 554.36 80.3 556.86 84H557.46L559.41 73.65H581.01V156.15C581.01 167.85 577.46 176.75 570.36 182.85C563.36 188.95 552.76 192 538.56 192C532.36 192 526.76 191.65 521.76 190.95C516.76 190.25 511.86 189 507.06 187.2V166.65C512.16 168.75 517.16 170.3 522.06 171.3C526.96 172.4 532.46 172.95 538.56 172.95C550.06 172.95 555.81 167.7 555.81 157.2V155.55C555.81 154.15 555.86 152.55 555.96 150.75C556.16 148.85 556.36 147.05 556.56 145.35H555.81C553.41 149.25 550.31 152.25 546.51 154.35C542.81 156.45 538.36 157.5 533.16 157.5C523.86 157.5 516.46 153.8 510.96 146.4C505.56 139 502.86 128.5 502.86 114.9C502.86 101.2 505.61 90.65 511.11 83.25C516.71 75.85 524.21 72.15 533.61 72.15ZM542.46 92.1C533.16 92.1 528.51 99.85 528.51 115.35C528.51 123.05 529.66 128.75 531.96 132.45C534.36 136.05 537.96 137.85 542.76 137.85C548.06 137.85 551.86 136.3 554.16 133.2C556.46 130.1 557.61 125 557.61 117.9V114.75C557.61 107.05 556.46 101.35 554.16 97.65C551.96 93.95 548.06 92.1 542.46 92.1ZM628.064 156H602.714V42H628.064V156ZM726.386 114.6C726.386 128.4 722.736 139 715.436 146.4C708.236 153.8 698.336 157.5 685.736 157.5C677.936 157.5 670.986 155.85 664.886 152.55C658.886 149.15 654.136 144.3 650.636 138C647.236 131.6 645.536 123.8 645.536 114.6C645.536 101 649.136 90.55 656.336 83.25C663.636 75.85 673.586 72.15 686.186 72.15C693.986 72.15 700.886 73.8 706.886 77.1C712.986 80.4 717.736 85.2 721.136 91.5C724.636 97.8 726.386 105.5 726.386 114.6ZM671.186 114.6C671.186 122.3 672.336 128.15 674.636 132.15C676.936 136.05 680.736 138 686.036 138C691.236 138 694.986 136.05 697.286 132.15C699.586 128.15 700.736 122.3 700.736 114.6C700.736 107 699.586 101.3 697.286 97.5C694.986 93.6 691.186 91.65 685.886 91.65C680.686 91.65 676.936 93.6 674.636 97.5C672.336 101.3 671.186 107 671.186 114.6ZM761.399 156L730.049 73.65H756.449L771.449 121.35C771.949 123.05 772.399 125.15 772.799 127.65C773.299 130.05 773.599 132.25 773.699 134.25H774.299C774.399 132.15 774.649 129.95 775.049 127.65C775.549 125.35 776.099 123.3 776.699 121.5L791.999 73.65H818.249L786.899 156H761.399ZM864.582 72.15C876.182 72.15 885.382 75.35 892.182 81.75C898.982 88.05 902.382 97.35 902.382 109.65V121.35H850.332C850.532 126.75 852.282 131.05 855.582 134.25C858.882 137.45 863.582 139.05 869.682 139.05C874.882 139.05 879.632 138.55 883.932 137.55C888.332 136.55 892.832 134.95 897.432 132.75V151.5C893.332 153.6 888.982 155.1 884.382 156C879.882 157 874.282 157.5 867.582 157.5C859.282 157.5 851.882 156 845.382 153C838.982 150 833.932 145.4 830.232 139.2C826.632 132.9 824.832 124.95 824.832 115.35C824.832 105.65 826.482 97.6 829.782 91.2C833.082 84.8 837.682 80.05 843.582 76.95C849.582 73.75 856.582 72.15 864.582 72.15ZM865.032 89.7C861.132 89.7 857.882 90.95 855.282 93.45C852.782 95.85 851.282 99.7 850.782 105H879.132C879.032 100.7 877.832 97.1 875.532 94.2C873.232 91.2 869.732 89.7 865.032 89.7Z",fill:"currentColor"}),(0,n.jsx)("circle",{cx:"63.4983",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"138.498",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"175.498",cy:"101",r:"26",fill:"currentColor"}),(0,n.jsx)("path",{d:"M63.5281 10C69.6242 10 75.2332 12.0853 79.6808 15.5814C85.4685 20.2924 92.8532 23.1167 100.898 23.1167C108.942 23.1167 116.327 20.2924 122.114 15.5814C126.562 12.0853 132.171 10 138.267 10C152.714 10 164.426 21.7116 164.426 36.1587C164.426 50.6057 152.714 62.3174 138.267 62.3174C132.171 62.3174 126.562 60.2321 122.114 56.736C116.327 52.0249 108.942 49.2007 100.898 49.2007C92.8532 49.2007 85.4685 52.0249 79.6808 56.736C75.2332 60.2321 69.6242 62.3174 63.5281 62.3174C49.081 62.3174 37.3694 50.6057 37.3694 36.1587C37.3694 21.7116 49.081 10 63.5281 10Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M26.1587 75.023C32.2548 75.023 37.8638 77.1083 42.3114 80.6044C48.0991 85.3155 55.4838 88.1397 63.5282 88.1397C71.5726 88.1397 78.9574 85.3155 84.745 80.6044C89.1927 77.1083 94.8017 75.023 100.898 75.023C115.345 75.023 127.056 86.7347 127.056 101.182C127.056 115.629 115.345 127.34 100.898 127.34C94.8017 127.34 89.1927 125.255 84.745 121.759C78.9574 117.048 71.5726 114.224 63.5282 114.224C55.4838 114.224 48.0991 117.048 42.3114 121.759C37.8638 125.255 32.2548 127.34 26.1587 127.34C11.7116 127.34 0 115.629 0 101.182C0 86.7347 11.7116 75.023 26.1587 75.023Z",fill:"currentColor"})]})]})}const io=(0,b.ZL)()(e=>({logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},grid:{[e.breakpoints.up("md")]:{display:"grid",gridTemplateAreas:`
        "header spacer"
        "content sidebar"
      `,gridTemplateRows:"content auto",gridTemplateColumns:"1fr 375px"}},header:{padding:e.spacing(6),gridArea:"header",[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},content:{padding:e.spacing(0,6,6),overflow:"hidden",gridArea:"content",[e.breakpoints.down("md")]:{padding:e.spacing(0,4,4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},spacer:{gridArea:"spacer",backgroundColor:(0,ne.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},sidebar:{gridArea:"sidebar",backgroundColor:(0,ne.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),padding:e.spacing(0,5,5),[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},button:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},connectionButton:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2,3),gap:e.spacing(1.5),borderColor:e.palette.divider,".MuiButton-startIcon .MuiSvgIcon-fontSizeLarge":{fontSize:28}},recentListItemButton:{overflow:"hidden",color:e.palette.primary.main,"&:hover":{backgroundColor:"transparent",color:e.palette.primary[e.palette.mode==="dark"?"light":"dark"]}},recentSourceSecondary:{color:"inherit"},featureList:{paddingLeft:e.spacing(1.5),"li:not(:last-of-type)":{marginBottom:e.spacing(.5)}}}));function nr(e){const{icon:t,onClick:s,text:o,secondaryText:a,href:r,target:l}=e,{classes:d}=io(),p=(0,n.jsx)(U.Z,{className:d.connectionButton,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",startIcon:t,onClick:s,children:(0,n.jsxs)(te.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(ie.Z,{variant:"subtitle1",color:"text.primary",children:o}),(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:a})]})});return r?(0,n.jsx)(sn.Z,{href:r,target:l,style:{textDecoration:"none"},children:p}):p}function sr(e){const{onSelectView:t}=e,{signIn:s}=(0,Fe.xJ)(),o=(0,Fe.T2)(),a=(0,$e.z)(),{classes:r}=io(),{t:l}=(0,X.$G)("openDialog"),{freeUser:d,teamOrEnterpriseUser:p}=(0,c.useMemo)(()=>{const f={id:"new",title:l("newToFoxgloveStudio"),text:l("newToFoxgloveStudioDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{onClick:()=>{t("demo"),a.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"demo"}),a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"demo"})},className:r.button,variant:"outlined",children:l("exploreSampleData")}),(0,n.jsx)(U.Z,{href:"https://foxglove.dev/docs/studio/connection/data-sources",target:"_blank",className:r.button,onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"docs"})},children:l("viewOurDocs")})]})};return{freeUser:[f],teamOrEnterpriseUser:[f,{id:"join-community",title:l("joinOurCommunity"),text:l("joinOurCommunityDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{href:"https://foxglove.dev/slack",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"join-slack"})},children:l("joinOurSlack")}),(0,n.jsx)(U.Z,{href:"https://github.com/foxglove/studio/issues/new/choose",target:"_blank",className:r.button,onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"go-to-github"})},children:l("openAGitHubIssue")})]})},{id:"need-help",title:l("needHelp"),text:l("needHelpDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{href:"https://foxglove.dev/docs/studio",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"docs"})},children:l("viewOurDocs")}),(0,n.jsx)(U.Z,{href:"https://foxglove.dev/tutorials",target:"_blank",className:r.button,onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"tutorials"})},children:l("seeTutorials")})]})}]}},[a,r.button,o,t,l]),h=(0,c.useMemo)(()=>{switch(o){case"unauthenticated":return[...d,{id:"collaborate",title:l("collaborateTitle"),text:(0,n.jsxs)("ul",{className:r.featureList,children:[(0,n.jsx)("li",{children:l("secureStorageOfData")}),(0,n.jsx)("li",{children:l("convenientWebInterface")}),(0,n.jsx)("li",{children:l("canBeShared")})]}),actions:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{className:r.button,variant:"outlined",onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"create-account"}),s()},children:l("createAFreeAccount")}),(0,n.jsx)(U.Z,{className:r.button,onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"sign-in"}),s()},children:l("signIn")})]}):(0,n.jsx)(U.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"create-account"})},children:l("learnMore")})}];case"authenticated-free":return[{id:"start-collaborating",title:l("startCollaborating"),text:l("startCollaboratingDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{href:"https://console.foxglove.dev/recordings",target:"_blank",variant:"outlined",className:r.button,onClick:()=>{a.logEvent(Me.q.DIALOG_CLICK_CTA,{user:o,cta:"upload-to-dp"})},children:l("uploadToDataPlatform")}),(0,n.jsx)(U.Z,{href:"https://foxglove.dev/docs/studio/layouts#team-layouts",target:"_blank",className:r.button,children:l("shareLayouts")})]})},...d];case"authenticated-team":return p;case"authenticated-enterprise":return p}},[a,r.button,r.featureList,o,d,s,p,l]);return(0,n.jsx)(n.Fragment,{children:h.map(f=>(0,n.jsxs)(te.Z,{children:[(0,n.jsx)(ie.Z,{variant:"h5",gutterBottom:!0,children:f.title}),(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",children:f.text}),f.actions!=null&&(0,n.jsx)(te.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",gap:1,paddingTop:1.5,children:f.actions})]},f.id))})}function or(){const{recentSources:e,selectRecent:t}=(0,ot.n)(),{classes:s}=io(),o=(0,$e.z)(),{t:a}=(0,X.$G)("openDialog"),{dialogActions:r}=(0,Re.W)(),l=(0,c.useMemo)(()=>[{key:"open-local-file",text:a("openLocalFile"),secondaryText:a("openLocalFileDescription"),icon:(0,n.jsx)(st.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1955 1533l-163-162v677h-128v-677l-163 162-90-90 317-317 317 317-90 90zM256 1920h1280v128H128V0h1115l549 549v475h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293z"})}),onClick:()=>{r.dataSource.open("file"),o.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"local"})}},{key:"open-url",text:a("openUrl"),secondaryText:a("openUrlDescription"),icon:(0,n.jsx)(st.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M256 1920h512v128H128V0h1115l549 549v91h-640V128H256v1792zM1280 512h293l-293-293v293zm128 256q133 0 249 50t204 137 137 203 50 250q0 133-50 249t-137 204-203 137-250 50q-133 0-249-50t-204-137-137-203-50-250q0-133 50-249t137-204 203-137 250-50zm0 1152q21 0 37-14t28-38 21-53 15-57 9-53 6-41h-230q2 14 5 39t10 53 16 58 21 52 27 39 35 15zm126-384q1-32 1-64t1-64q0-63-3-128h-250q-3 65-3 128 0 64 3 128h251zm-638-128q0 32 4 64t12 64h243q-3-64-3-128 0-63 3-128H912q-8 32-12 64t-4 64zm512-512q-19 0-34 15t-27 39-21 53-15 57-10 53-6 39h225q-2-13-6-37t-11-53-16-58-20-54-27-39-32-15zm253 384q3 65 3 128v64q0 32-2 64h242q8-32 12-64t4-64q0-32-4-64t-12-64h-243zm190-128q-43-75-108-131t-145-88q21 52 32 107t19 112h202zm-637-218q-78 32-142 88t-107 130h200q13-111 49-218zm-249 730q42 73 106 129t142 88q-21-51-31-106t-17-111H965zm642 215q77-32 139-87t105-128h-198q-5 51-15 109t-31 106z"})}),iconProps:{iconName:"FileASPX"},href:"https://console.foxglove.dev/recordings",onClick:()=>{o.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"data-platform"})}},{key:"open-connection",text:a("openConnection"),secondaryText:a("openConnectionDescription"),icon:(0,n.jsx)(st.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1408 256h640v640h-640V640h-120l-449 896H640v256H0v-640h640v256h120l449-896h199V256zM512 1664v-384H128v384h384zm1408-896V384h-384v384h384z"})}),onClick:()=>{r.dataSource.open("connection"),o.logEvent(Me.q.DIALOG_SELECT_VIEW,{type:"live"})}}],[o,r.dataSource,a]);return(0,n.jsxs)(te.Z,{className:s.grid,children:[(0,n.jsx)("header",{className:s.header,children:(0,n.jsx)(la,{color:"primary",className:s.logo})}),(0,n.jsx)(te.Z,{className:s.content,children:(0,n.jsxs)(te.Z,{gap:4,children:[(0,n.jsxs)(te.Z,{gap:1,children:[(0,n.jsx)(ie.Z,{variant:"h5",gutterBottom:!0,children:a("openDataSource")}),l.map(d=>(0,n.jsx)(nr,{text:d.text,secondaryText:d.secondaryText,icon:d.icon,onClick:d.onClick,href:d.href,target:"_blank"},d.key))]}),e.length>0&&(0,n.jsxs)(te.Z,{gap:1,children:[(0,n.jsx)(ie.Z,{variant:"h5",gutterBottom:!0,children:a("recentDataSources")}),(0,n.jsx)(Qn.Z,{disablePadding:!0,children:e.slice(0,5).map(d=>(0,n.jsx)(Yn.ZP,{disablePadding:!0,id:d.id,children:(0,n.jsx)(ao.Z,{disableGutters:!0,onClick:()=>t(d.id),className:s.recentListItemButton,children:(0,n.jsx)(He,{className:s.recentSourceSecondary,text:d.title})})},d.id))})]})]})}),(0,n.jsx)("div",{className:s.spacer}),(0,n.jsx)(te.Z,{gap:4,className:s.sidebar,children:(0,n.jsx)(sr,{onSelectView:r.dataSource.open})})]})}const ty=null,ar=(0,b.ZL)()(e=>({paper:{maxWidth:`calc(min(${e.breakpoints.values.md}px, 100% - ${e.spacing(4)}))`},closeButton:{position:"absolute",right:0,top:0,margin:e.spacing(3)}})),ir=e=>e.dialogs.dataSource;function rr(e){const{backdropAnimation:t}=e,{classes:s}=ar(),{availableSources:o,selectSource:a}=(0,ot.n)(),{dialogActions:r}=(0,Re.W)(),{activeDataSource:l,item:d}=(0,Ke.Q)(ir),p=(0,ds.Z)(),h=(0,c.useMemo)(()=>o.find(N=>N.type==="sample"),[o]),f=(0,$e.z)(),g=(0,c.useCallback)(()=>{f.logEvent(Me.q.DIALOG_CLOSE,{activeDataSource:l}),r.dataSource.close()},[f,l,r.dataSource]);(0,c.useLayoutEffect)(()=>{d==="file"?r.openFile.open().catch(N=>{console.error(N)}).finally(()=>{p()&&r.dataSource.open("start")}):d==="demo"&&h&&a(h.id)},[d,r,h,p,a]);const y=(0,c.useMemo)(()=>{const N=new Date;if(t!==!1){if(N>=new Date(N.getFullYear(),11,25))return(0,n.jsx)(sa,{effect:"snow"});if(N<new Date(N.getFullYear(),0,2))return(0,n.jsx)(sa,{effect:"confetti"})}},[t]),S=(0,c.useMemo)(()=>{switch(d){case"demo":return{title:"",component:(0,n.jsx)(n.Fragment,{})};case"connection":return{title:"Open new connection",component:(0,n.jsx)(tr,{})};default:return{title:"Get started",component:(0,n.jsx)(or,{})}}},[d]);return(0,n.jsxs)(Ze.Z,{open:!0,onClose:g,fullWidth:!0,maxWidth:"lg",BackdropProps:{children:y},PaperProps:{square:!1,elevation:4,className:s.paper},children:[(0,n.jsx)(K.Z,{className:s.closeButton,onClick:g,edge:"end",children:(0,n.jsx)(Je.Z,{})}),(0,n.jsx)(te.Z,{flexGrow:1,fullHeight:!0,justifyContent:"space-between",overflow:d==="connection"?"hidden":void 0,children:S.component})]})}const lr=(0,b.ZL)()(e=>({outer:{background:(0,Wt.Fq)(e.palette.background.paper,.84),backgroundImage:`linear-gradient(${e.palette.action.hover}, ${e.palette.action.hover})`,pointerEvents:"none",padding:e.spacing(5),boxShadow:"none",maxHeight:"none"},inner:{borderRadius:16,height:"100%",border:`2px dashed ${e.palette.text.primary}`,display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:800,padding:e.spacing(5),lineHeight:"normal"}}));function cr(e){const{classes:t}=lr();return(0,n.jsx)(Ze.Z,{fullScreen:!0,open:e.open,style:{zIndex:1e7},classes:{paperFullScreen:t.outer},children:(0,n.jsx)("div",{className:t.inner,children:(0,n.jsx)(ie.Z,{variant:"h1",align:"center",children:e.children})})})}const dr=cr;var ur="../../packages/studio-base/src/components/DocumentDropListener.tsx";const pr=ve.ZP.getLogger(ur);function fr(e){const[t,s]=(0,c.useState)(!1),{onDrop:o,allowedExtensions:a}=e,{enqueueSnackbar:r}=(0,ce.Ds)(),l=(0,c.useCallback)(async h=>{if(s(!1),!h.dataTransfer||!a)return;let f=[];const g=[],y=[],S=[],N=h.dataTransfer.items;for(const J of Array.from(N)){window.isSecureContext&&"getAsFileSystemHandle"in J?g.push(J.getAsFileSystemHandle()):pr.info("getAsFileSystemHandle not available on a dropped item. Features requiring handles will not be available for the item",J);const pe=J.webkitGetAsEntry();if(pe?.isFile===!0){const ye=J.getAsFile();ye&&y.push(ye)}else pe?.isDirectory===!0&&S.push(pe)}if(S.length===0)for(const J of g){const pe=await J;pe instanceof FileSystemFileHandle&&f.push(pe)}if(y.length===0&&S.length===0&&f.length===0)return;for(const J of S){const pe=await new Promise((ye,fe)=>{J.createReader().readEntries(ye,fe)});for(const ye of pe)if(ye.isFile){const fe=await new Promise((de,ee)=>{ye.file(de,ee)});y.push(fe)}}(S.length>0||f.length===0)&&(f=void 0);const k=y.filter(J=>a.includes((0,oe.extname)(J.name))),W=f?.filter(J=>a.includes((0,oe.extname)(J.name)));if(k.length===0&&W?.length===0){r("The file format is unsupported.",{variant:"error"});return}h.preventDefault(),h.stopPropagation(),o?.({files:k,handles:W})},[r,o,a]),d=(0,c.useCallback)(h=>{if(!a)return;const{dataTransfer:f}=h;f?.types.includes("Files")===!0&&(h.stopPropagation(),h.preventDefault(),f.dropEffect="copy",s(!0))},[a]),p=(0,c.useCallback)(()=>{s(!1)},[]);return(0,c.useLayoutEffect)(()=>(document.addEventListener("dragover",d),document.addEventListener("drop",l),document.addEventListener("dragleave",p),()=>{document.removeEventListener("dragover",d),document.removeEventListener("drop",l),document.removeEventListener("dragleave",p)}),[p,d,l]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",style:{display:"none"},onChange:h=>{h.target.files&&e.onDrop?.({files:Array.from(h.target.files)})},"data-puppeteer-file-upload":!0,multiple:!0}),(0,n.jsx)(dr,{open:t,children:"Drop a file here"})]})}var Ms=i(54675),ws=i(31563);function ro({text:e,highlight:t}){if(t==null||!t.trim())return(0,n.jsx)("span",{children:e});const s=new RegExp(`(${(0,v.escapeRegExp)(t)})`,"gi"),o=e.split(s);return(0,n.jsx)("span",{children:o.filter(a=>a).map((a,r)=>s.test(a)?(0,n.jsx)("mark",{children:a},r):(0,n.jsx)("span",{children:a},r))})}var hr=i(2784);const gr=(0,b.ZL)()((e,t,s)=>({spacer:{cursor:"default",height:e.spacing(1),gridColumn:"span 2"},event:{display:"contents",cursor:"pointer","&:hover":{[`.${s.eventMetadata}`]:{backgroundColor:(0,Wt.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}}},eventSelected:{[`.${s.eventMetadata}`]:{backgroundColor:(0,Wt.Fq)(e.palette.info.main,e.palette.action.activatedOpacity),borderColor:e.palette.info.main,boxShadow:`0 0 0 1px ${e.palette.info.main}`}},eventHovered:{[`.${s.eventMetadata}`]:{backgroundColor:(0,Wt.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}},eventMetadata:{padding:e.spacing(1),backgroundColor:e.palette.background.default,borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,"&:nth-of-type(odd)":{borderLeft:`1px solid ${e.palette.divider}`},"&:first-of-type":{borderTop:`1px solid ${e.palette.divider}`,borderTopLeftRadius:e.shape.borderRadius},"&:nth-of-type(2)":{borderTop:`1px solid ${e.palette.divider}`,borderTopRightRadius:e.shape.borderRadius},"&:nth-last-of-type(2)":{borderBottomRightRadius:e.shape.borderRadius},"&:nth-last-of-type(3)":{borderBottomLeftRadius:e.shape.borderRadius}}}));function mr(e){if(e.durationNanos==="0")return"-";if(!e.durationNanos)return"";const t=BigInt(e.durationNanos);return t>=BigInt(1e9)?`${Number(t/BigInt(1e9))}s`:t>=BigInt(1e6)?`${Number(t/BigInt(1e6))}ms`:t>=BigInt(1e3)?`${Number(t/BigInt(1e3))}\xB5s`:`${e.durationNanos}ns`}function yr(e){const{event:t,filter:s,formattedTime:o,isHovered:a,isSelected:r,onClick:l,onHoverStart:d,onHoverEnd:p}=e,{classes:h,cx:f}=gr(),g=(0,v.compact)([["timestamp",o],Number(t.event.durationNanos)>0&&["duration",mr(t.event)],...Object.entries(t.event.metadata)]);return(0,n.jsxs)("div",{"data-testid":"sidebar-event",className:f(h.event,{[h.eventSelected]:r,[h.eventHovered]:a}),onClick:()=>l(t),onMouseEnter:()=>d(t),onMouseLeave:()=>p(t),children:[g.map(([y,S])=>(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(ro,{text:y??"",highlight:s})}),(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(ro,{text:S??"",highlight:s})})]},y)),(0,n.jsx)("div",{className:h.spacer})]})}const Ar=hr.memo(yr),vr=(0,b.ZL)()(e=>({appBar:{top:-1,zIndex:e.zIndex.appBar-1,display:"flex",flexDirection:"row",padding:e.spacing(1),gap:e.spacing(1),alignItems:"center",borderBottom:`1px solid ${e.palette.divider}`},grid:{display:"grid",flexShrink:1,gridTemplateColumns:"auto 1fr",overflowY:"auto",padding:e.spacing(1)},root:{backgroundColor:e.palette.background.paper,maxHeight:"100%"}})),br=e=>e.seekPlayback,xr=e=>e.filter,Cr=e=>e.setFilter,Er=e=>e.events,Sr=e=>e.hoveredEvent,Tr=e=>e.setHoveredEvent,Ir=e=>e.eventsAtHoverValue,Pr=e=>e.selectedEventId,Mr=e=>e.selectEvent;function wr(){const e=Z(Er),t=Z(Pr),s=Z(Mr),{formatTime:o}=(0,ht.v)(),a=(0,Oe.An)(br),r=(0,w.oA)(Ir),l=(0,w.oA)(Sr),d=(0,w.oA)(Tr),p=Z(xr),h=Z(Cr),f=(0,c.useMemo)(()=>(e.value??[]).map(W=>({...W,formattedTime:o(W.event.startTime)})),[e,o]),g=(0,c.useCallback)(()=>{h("")},[h]),y=(0,c.useCallback)(W=>{W.event.id===t?s(void 0):s(W.event.id),a&&a(W.event.startTime)},[a,s,t]),S=(0,c.useCallback)(()=>{d(void 0)},[d]),N=(0,c.useCallback)(W=>{d(W)},[d]),{classes:k}=vr();return(0,n.jsxs)(te.Z,{className:k.root,fullHeight:!0,children:[(0,n.jsx)(j.Z,{className:k.appBar,position:"sticky",color:"inherit",elevation:0,children:(0,n.jsx)(Mt.Z,{variant:"filled",fullWidth:!0,value:p,onChange:W=>h(W.currentTarget.value),placeholder:"Search by key, value, or key:value",InputProps:{startAdornment:(0,n.jsx)(ws.Z,{fontSize:"small"}),endAdornment:p!==""&&(0,n.jsx)(K.Z,{edge:"end",onClick:g,size:"small",children:(0,n.jsx)(Ms.Z,{fontSize:"small"})})}})}),e.loading&&(0,n.jsx)(te.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(tn.Z,{})}),e.error&&(0,n.jsx)(te.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(ie.Z,{align:"center",color:"error",children:"Error loading events."})}),e.value&&e.value.length===0&&(0,n.jsx)(te.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(ie.Z,{align:"center",color:"text.secondary",children:"No Events"})}),(0,n.jsx)("div",{className:k.grid,children:f.map(W=>(0,n.jsx)(Ar,{event:W,filter:p,formattedTime:W.formattedTime,isHovered:l?W.event.id===l.event.id:r[W.event.id]!=null,isSelected:W.event.id===t,onClick:y,onHoverStart:N,onHoverEnd:S},W.event.id))})]})}var ca=i(86451),Br=i(2784);function da({children:e,providers:t}){const s=t.reduceRight((o,a)=>Br.cloneElement(a,void 0,o),e);return(0,n.jsx)(n.Fragment,{children:s})}var Dr=i(13688),jr=i(70714),ua=i(59506),Hn=i(29268),lo=i(50985),Rr=i(2784);const Lr=(0,b.ZL)()(e=>({iconButtonSmall:{padding:e.spacing(.91125),borderRadius:0}}));function Nr({allowShare:e,onReset:t,onShare:s,fontSize:o="medium"}){const{classes:a,cx:r}=Lr(),[l,d]=Rr.useState(),{t:p}=(0,X.$G)("panelSettings"),h=Boolean(l),f=y=>{d(y.currentTarget)},g=()=>{d(void 0)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(K.Z,{className:r({[a.iconButtonSmall]:o==="small"}),id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:f,children:(0,n.jsx)(lo.Z,{fontSize:o})}),(0,n.jsxs)(De.Z,{id:"basic-menu",anchorEl:l,open:h,onClose:g,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(Ve.Z,{disabled:!e,onClick:()=>{s(),g()},children:p("importOrExportSettingsWithEllipsis")}),(0,n.jsx)(Ve.Z,{onClick:()=>{t(),g()},children:p("resetToDefaults")})]})]})}var Or=i(5817),Qt=i.n(Or),pa=i(43749),co=i(85321),fa=i(34425),kr=i(80051),Vn=i(50799),Yt=i(75254),uo=i(29800),Ft=i(91004),Zr=i(43684),po=i(74352),Fr=i(86635),ha=i(14648),fo=i(94225);const zr=(0,b.ZL)()(e=>({container:{padding:e.spacing(2)},picker:{"&.react-colorful":{width:"100%",gap:e.spacing(.75)},".react-colorful__last-control":{borderRadius:0},".react-colorful__saturation":{borderRadius:0},".react-colorful__hue":{order:-1},".react-colorful__hue-pointer":{zIndex:4}}}));function ga(e,t){return t==="alpha"?/^[0-9a-f]{8}$/i.test(e):/^[0-9a-f]{6}$/i.test(e)}function ho(e){const{alphaType:t,onChange:s,value:o,onEnterKey:a}=e,{classes:r}=zr(),l=(0,c.useMemo)(()=>o?(0,ne.Z)(o):void 0,[o]),p=(t==="alpha"?l?.toHex8String():l?.toHexString())??"#00000044",[h,f]=(0,c.useState)(""),g=h.length>0&&!ga(h,t),y=(0,fo.y1)(N=>{s(N)}),S=(0,c.useCallback)(N=>{f(N),ga(N,t)&&s(`#${N}`)},[t,s]);return(0,c.useEffect)(()=>{f((t==="alpha"?l?.toHex8():l?.toHex())??"")},[t,l]),(0,n.jsxs)(te.Z,{className:r.container,gap:1,children:[t==="alpha"?(0,n.jsx)(ha.L_,{className:r.picker,color:p,onChange:N=>y(N)}):(0,n.jsx)(ha.gW,{className:r.picker,color:p,onChange:N=>y(N)}),(0,n.jsx)(Mt.Z,{size:"small",error:g,InputProps:{onFocus:N=>N.target.select(),role:"input",startAdornment:(0,n.jsx)(Fr.Z,{fontSize:"small"}),style:{fontFamily:vt.R.MONOSPACE}},placeholder:t==="alpha"?"RRGGBBAA":"RRGGBB",value:h,onKeyDown:N=>N.key==="Enter"&&a?.(),onChange:N=>S(N.target.value)})]})}function Gr(e,t){const s=(0,ne.Z)(t);return s.isValid()?e.palette.getContrastText(s.toHexString()):e.palette.text.primary}const Ur=(0,b.ZL)()(e=>({root:{backgroundImage:"linear-gradient(to bottom right, white 50%, black 50%)",borderRadius:e.shape.borderRadius,display:"inline-flex",aspectRatio:"1/1",flexShrink:0},swatch:{aspectRatio:"1/1"},sizeSmall:{height:e.spacing(2),width:e.spacing(2)},sizeMedium:{height:e.spacing(2),width:e.spacing(2)},sizeLarge:{height:e.spacing(3),width:e.spacing(3)}}));function go(e){const{color:t,size:s="medium",className:o,...a}=e,{classes:r,cx:l,theme:d}=Ur();return(0,n.jsx)("div",{className:l(r.root,{[r.sizeSmall]:s==="small",[r.sizeMedium]:s==="medium",[r.sizeLarge]:s==="large"},o),...a,children:(0,n.jsx)("div",{title:t,className:r.swatch,style:{backgroundColor:t,border:`1px solid ${Gr(d,t)}`}})})}const Wr=(0,b.ZL)()((e,t,s)=>({root:{position:"relative"},rootDisabled:{pointerEvents:"none"},textField:{".MuiInputBase-formControl.MuiInputBase-root":{padding:0},".MuiInputBase-root":{cursor:"pointer",[`:not(:hover) .${s.iconButton}`]:{visibility:"hidden"}},".MuiInputBase-input":{alignItems:"center",fontFeatureSettings:`${vt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}},iconButton:{marginRight:e.spacing(.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},colorSwatch:{marginLeft:e.spacing(.75)}}));function ma(e){const{alphaType:t,disabled:s,onChange:o,readOnly:a,hideClearButton:r,value:l}=e,{classes:d,cx:p}=Wr(),[h,f]=(0,c.useState)(void 0),g=(0,c.useMemo)(()=>l?(0,ne.Z)(l):void 0,[l]),y=t==="alpha"?g?.toHex8String():g?.toHexString(),S=y??"#00000044",N=(0,c.useCallback)(ye=>{f(ye.currentTarget)},[]),k=(0,c.useCallback)(()=>{f(void 0)},[]),W=(0,c.useCallback)(()=>{o(void 0)},[o]),J=Boolean(h),pe=(y??"")===""||(r??!1);return(0,n.jsxs)(te.Z,{className:p(d.root,{[d.rootDisabled]:s===!0||a===!0}),children:[(0,n.jsx)(Mt.Z,{className:d.textField,fullWidth:!0,disabled:s,placeholder:e.placeholder,size:"small",value:y??"",variant:"filled",InputProps:{readOnly:!0,startAdornment:(0,n.jsx)(go,{className:d.colorSwatch,color:S,onClick:N,size:"small"}),endAdornment:!pe&&(0,n.jsx)(K.Z,{size:"small",className:d.iconButton,onClick:W,disabled:s,children:(0,n.jsx)(pa.Z,{})})}}),(0,n.jsx)(po.ZP,{open:J,anchorEl:h,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(ho,{alphaType:t,value:l,onChange:o,onEnterKey:k})})]})}function Qr({colors:e,disabled:t=!1,onChange:s,readOnly:o=!1}){const[a,r]=(0,c.useState)(void 0),[l,d]=(0,c.useState)(void 0),p=(0,c.useCallback)(W=>{o||(r(W.currentTarget),d(void 0))},[o]),h=(0,c.useCallback)(W=>{o||(r(void 0),d(W.currentTarget))},[o]),f=(0,c.useCallback)(()=>{r(void 0),d(void 0)},[]),g=e?.[0]??"#000000",y=e?.[1]??"#FFFFFF",S=(0,ne.Z)(g).isValid()?g:"#000000",N=(0,ne.Z)(y).isValid()?y:"#FFFFFF",k=(0,L.Z)();return(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",position:"relative",paddingX:.75,style:{opacity:t?.5:1,pointerEvents:t?"none":"auto",background:`linear-gradient(to right, ${S}, ${N}), repeating-conic-gradient(transparent 0 90deg, ${k.palette.action.disabled} 90deg 180deg) top left/10px 10px repeat`},children:[(0,n.jsx)(go,{color:S,onClick:p}),(0,n.jsx)(Mt.Z,{variant:"filled",size:"small",fullWidth:!0,value:`${g} / ${y}`,style:{visibility:"hidden"}}),(0,n.jsx)(go,{color:N,onClick:h}),(0,n.jsx)(po.ZP,{open:a!=null,anchorEl:a,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(ho,{value:g,alphaType:"alpha",onChange:W=>s([W,y]),onEnterKey:f})}),(0,n.jsx)(po.ZP,{open:l!=null,anchorEl:l,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(ho,{value:y,alphaType:"alpha",onChange:W=>s([g,W]),onEnterKey:f})})]})}var Yr=i(28319),fs=i(16003);const Hr=(0,b.ZL)()(e=>({iconButton:{"&.MuiIconButton-edgeStart":{marginLeft:e.spacing(-.75),borderTopRightRadius:0,borderBottomRightRadius:0},"&.MuiIconButton-edgeEnd":{marginRight:e.spacing(-.75),borderTopLeftRadius:0,borderBottomLeftRadius:0}},textField:{".MuiInputBase-formControl.MuiInputBase-root":{paddingTop:0,paddingBottom:0},".MuiInputBase-input":{textAlign:"center",fontFamily:vt.R.MONOSPACE,cursor:"ew-resize","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{appearance:"none",margin:0}},"@media (pointer: fine)":{".MuiIconButton-root":{visibility:"hidden"},"&:hover .MuiIconButton-root":{visibility:"visible"}}},textFieldReadonly:{".MuiInputBase-input":{cursor:"auto"}}}));function Xn(e){const{classes:t,cx:s}=Hr(),{value:o,iconDown:a,iconUp:r,step:l=1,min:d,max:p,onChange:h,disabled:f,readOnly:g,precision:y=2}=e,S=(0,c.useRef)(null),N=(0,c.useRef)(0),k=(0,fs.Z)(o),W=(0,v.isFinite)(Number(e.placeholder))?Number(e.placeholder):void 0,J=(0,c.useCallback)(ee=>{if(f===!0||g===!0)return;const Pe=ee==null?void 0:(0,v.clamp)(ee,d??Number.NEGATIVE_INFINITY,p??Number.POSITIVE_INFINITY);h(Pe!=null?Number(Pe.toFixed(y)):Pe)},[f,g,d,p,h,y]),pe=(0,c.useCallback)(ee=>{ee.currentTarget.setPointerCapture(ee.pointerId);const Pe=k.current??W??0;N.current=(0,v.isFinite)(Pe)?Pe:0},[k,W]),ye=(0,c.useCallback)(ee=>{ee.currentTarget.releasePointerCapture(ee.pointerId)},[]),fe=(0,c.useCallback)(ee=>{if(ee.buttons===1){ee.preventDefault(),ee.currentTarget.blur();const Pe=ee.shiftKey?10:1,Ae=Math.sign(ee.movementX)*Math.pow(Math.abs(ee.movementX),1.5)*.1*l*Pe;N.current+=Ae,J(N.current)}},[l,J]),de=S.current===document.activeElement?o:o?.toFixed(y);return(0,n.jsx)(Mt.Z,{...e,value:de??"",onChange:ee=>J(ee.target.value.length>0?Number(ee.target.value):void 0),type:"number",className:s(t.textField,{[t.textFieldReadonly]:g}),inputProps:{ref:S,step:l,onPointerDown:pe,onPointerUp:ye,onPointerMove:fe},InputProps:{readOnly:g,startAdornment:(0,n.jsx)(K.Z,{className:t.iconButton,size:"small",edge:"start",tabIndex:-1,onClick:ee=>J((o??W??0)-(ee.shiftKey?l*10:l)),children:a??(0,n.jsx)(oo.Z,{fontSize:"small"})}),endAdornment:(0,n.jsx)(K.Z,{className:t.iconButton,size:"small",edge:"end",tabIndex:-1,onClick:ee=>J((o??W??0)+(ee.shiftKey?l*10:l)),children:r??(0,n.jsx)(Yr.Z,{fontSize:"small"})})}})}function Vr(e){const{disabled:t=!1,onChange:s,precision:o,readOnly:a=!1,step:r,value:l,min:d,max:p,placeholder:h}=e,f=(0,c.useCallback)((g,y)=>{const S=[...l??[0,0]];S[g]=y,s(S)},[s,l]);return(0,n.jsxs)(te.Z,{gap:.25,children:[(0,n.jsx)(Xn,{size:"small",disabled:t,readOnly:a,variant:"filled",fullWidth:!0,precision:o,step:r,placeholder:h?.[0],value:l?.[0],min:d,max:p,onChange:g=>f(0,g)}),(0,n.jsx)(Xn,{size:"small",disabled:t,readOnly:a,variant:"filled",fullWidth:!0,precision:o,step:r,placeholder:h?.[1],value:l?.[1],min:d,max:p,onChange:g=>f(1,g)})]})}function Xr(e){const{disabled:t=!1,onChange:s,precision:o,readOnly:a=!1,step:r,value:l,min:d,max:p,placeholder:h}=e,f=(0,c.useCallback)((g,y)=>{const S=[...l??[0,0,0]];S[g]=y,s(S)},[s,l]);return(0,n.jsxs)(te.Z,{gap:.25,children:[(0,n.jsx)(Xn,{size:"small",disabled:t,readOnly:a,variant:"filled",fullWidth:!0,precision:o,step:r,placeholder:h?.[0],value:l?.[0],min:d,max:p,onChange:g=>f(0,g)}),(0,n.jsx)(Xn,{size:"small",disabled:t,readOnly:a,variant:"filled",fullWidth:!0,precision:o,step:r,placeholder:h?.[1],value:l?.[1],min:d,max:p,onChange:g=>f(1,g)}),(0,n.jsx)(Xn,{size:"small",disabled:t,readOnly:a,variant:"filled",fullWidth:!0,precision:o,step:r,placeholder:h?.[2],value:l?.[2],min:d,max:p,onChange:g=>f(2,g)})]})}var Kr=i(2784);const Dn=(0,Ft.Z)(),ya=(0,Ft.Z)(),mo=(0,b.ZL)()((e,t,s)=>{const o=e.palette.mode==="dark",a=o?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)";return{autocomplete:{".MuiInputBase-root.MuiInputBase-sizeSmall":{paddingInline:0,paddingBlock:e.spacing(.3125)}},clearIndicator:{marginRight:e.spacing(-.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},error:{},fieldLabel:{color:e.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fieldWrapper:{minWidth:e.spacing(14),marginRight:e.spacing(.5),[`&.${s.error} .MuiInputBase-root, .MuiInputBase-root.${s.error}`]:{outline:`1px ${e.palette.error.main} solid`,outlineOffset:-1}},multiLabelWrapper:{display:"grid",gridTemplateColumns:"1fr auto",columnGap:e.spacing(.5),height:"100%",width:"100%",alignItems:"center",textAlign:"end"},pseudoInputWrapper:{borderRadius:e.shape.borderRadius,fontSize:"0.75em",backgroundColor:a,input:{height:"1.77em"},"&:hover":{backgroundColor:o?"rgba(255, 255, 255, 0.13)":"rgba(0, 0, 0, 0.09)","@media (hover: none)":{backgroundColor:a}},"&:focus-within":{backgroundColor:a}},styledToggleButtonGroup:{backgroundColor:e.palette.action.hover,gap:e.spacing(.25),overflowX:"auto","& .MuiToggleButtonGroup-grouped":{margin:e.spacing(.55),borderRadius:e.shape.borderRadius,paddingTop:0,paddingBottom:0,borderColor:"transparent !important",lineHeight:1.75,"&.Mui-selected":{background:e.palette.background.paper,borderColor:"transparent","&:hover":{borderColor:e.palette.action.active}},"&:not(:first-of-type)":{borderRadius:e.shape.borderRadius},"&:first-of-type":{borderRadius:e.shape.borderRadius}}}}});function $r({actionHandler:e,field:t,path:s}){const{classes:o,cx:a}=mo();switch(t.input){case"autocomplete":return(0,n.jsx)(fa.Z,{className:o.autocomplete,size:"small",freeSolo:!0,value:t.value,disabled:t.disabled,readOnly:t.readonly,ListboxComponent:kr.Z,ListboxProps:{dense:!0},renderOption:(r,l,{selected:d})=>(0,n.jsx)(Ve.Z,{selected:d,...r,children:l}),componentsProps:{clearIndicator:{size:"small",className:o.clearIndicator}},clearIcon:(0,n.jsx)(pa.Z,{fontSize:"small"}),renderInput:r=>(0,n.jsx)(Mt.Z,{...r,variant:"filled",size:"small",placeholder:t.placeholder}),onInputChange:(r,l)=>e({action:"update",payload:{path:s,input:"autocomplete",value:l}}),onChange:(r,l)=>e({action:"update",payload:{path:s,input:"autocomplete",value:l??void 0}}),options:t.items});case"number":return(0,n.jsx)(Xn,{size:"small",variant:"filled",value:t.value,disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,fullWidth:!0,max:t.max,min:t.min,precision:t.precision,step:t.step,onChange:r=>e({action:"update",payload:{path:s,input:"number",value:r}})});case"toggle":return(0,n.jsx)(Vn.Z,{className:o.styledToggleButtonGroup,fullWidth:!0,value:t.value??Dn,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,l)=>{l!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"toggle",value:l===Dn?void 0:l}})},children:t.options.map(r=>(0,n.jsx)(Yt.Z,{value:(typeof r=="object"?r.value:r)??Dn,children:typeof r=="object"?r.label:r},(typeof r=="object"?r.value:r)??Dn))});case"string":return(0,n.jsx)(Mt.Z,{variant:"filled",size:"small",fullWidth:!0,disabled:t.disabled,value:t.value??"",placeholder:t.placeholder,InputProps:{readOnly:t.readonly},onChange:r=>e({action:"update",payload:{path:s,input:"string",value:r.target.value}})});case"boolean":return(0,n.jsxs)(Vn.Z,{className:o.styledToggleButtonGroup,fullWidth:!0,value:t.value??!1,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,l)=>{l!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"boolean",value:l}})},children:[(0,n.jsx)(Yt.Z,{value:!1,children:"Off"}),(0,n.jsx)(Yt.Z,{value:!0,children:"On"})]});case"rgb":return(0,n.jsx)(ma,{alphaType:"none",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>e({action:"update",payload:{path:s,input:"rgb",value:r}}),hideClearButton:t.hideClearButton});case"rgba":return(0,n.jsx)(ma,{alphaType:"alpha",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>e({action:"update",payload:{path:s,input:"rgba",value:r}})});case"messagepath":return(0,n.jsx)(te.Z,{className:o.pseudoInputWrapper,direction:"row",children:(0,n.jsx)(Zr.ZP,{path:t.value??"",disabled:t.disabled,readOnly:t.readonly,supportsMathModifiers:t.supportsMathModifiers,onChange:r=>e({action:"update",payload:{path:s,input:"messagepath",value:r}}),validTypes:t.validTypes})});case"select":{const r=t.options.findIndex(f=>f.value===t.value),l=t.options[r],d=t.options.length===0;let p=t.value;l?p==null&&(p=Dn):p=ya;const h=!l&&(!d||t.value!=null);return(0,n.jsxs)(uo.Z,{className:a({[o.error]:h}),size:"small",displayEmpty:!0,fullWidth:!0,disabled:t.disabled,readOnly:t.readonly,variant:"filled",value:p,renderValue:f=>{const g=t.value;for(const y of t.options)if(y.value===g)return y.label.trim();return g},onChange:f=>e({action:"update",payload:{path:s,input:"select",value:f.target.value===Dn?void 0:f.target.value}}),MenuProps:{MenuListProps:{dense:!0}},children:[t.options.map(({label:f,value:g=Dn})=>(0,n.jsx)(Ve.Z,{value:g,children:f},g)),d&&(0,n.jsx)(Ve.Z,{disabled:!0,children:"No options"}),!l&&(0,n.jsx)(Ve.Z,{style:{display:"none"},value:ya})]})}case"gradient":return(0,n.jsx)(Qr,{colors:t.value,disabled:t.disabled,readOnly:t.readonly,onChange:r=>e({action:"update",payload:{path:s,input:"gradient",value:r}})});case"vec3":return(0,n.jsx)(Xr,{step:t.step,placeholder:t.placeholder,value:t.value,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>e({action:"update",payload:{path:s,input:"vec3",value:r}})});case"vec2":return(0,n.jsx)(Vr,{step:t.step,value:t.value,placeholder:t.placeholder,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>e({action:"update",payload:{path:s,input:"vec2",value:r}})})}}function Jr({field:e}){const{classes:t}=mo();if(e.input==="vec2"){const s=e.labels??["X","Y"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(ie.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((o,a)=>(0,n.jsx)(ie.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:a===0?"span 1":"2 / span 1"},flex:"auto",children:o},o))]})})}else if(e.input==="vec3"){const s=e.labels??["X","Y","Z"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(ie.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((o,a)=>(0,n.jsx)(ie.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:a===0?"span 1":"2 / span 1"},flex:"auto",children:o},o))]})})}else return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ie.Z,{className:t.fieldLabel,title:e.help??e.label,variant:"subtitle2",children:e.label})})}function qr({actionHandler:e,field:t,path:s}){const a=.75+2*(Math.min(s.length,4)-1),{classes:r,cx:l}=mo();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",gap:.5,paddingLeft:a,fullHeight:!0,children:[t.error&&(0,n.jsx)(Y.Z,{arrow:!0,placement:"top",title:(0,n.jsx)(ie.Z,{variant:"subtitle2",children:t.error}),children:(0,n.jsx)(co.Z,{color:"error",fontSize:"small"})}),(0,n.jsx)(Jr,{field:t})]}),(0,n.jsx)("div",{className:l(r.fieldWrapper,{[r.error]:t.error!=null}),children:(0,n.jsx)($r,{actionHandler:e,field:t,path:s})}),(0,n.jsx)(te.Z,{paddingBottom:.25,style:{gridColumn:"span 2"}})]})}const yo=Kr.memo(qr);var Ao=i(48105),vo=i(96715),Kn=i(65643),_r=i(89507),Bs=i(42713),el=i(29754),Aa=i(79562),va=i(60705),on=i(8220),bo=i(83993),Sn=i(82056),tl=i(14118),Ds=i(93553),nl=i(55505),sl=i(29113),ol=i(66177),al=i(6163),il=i(47743),rl=i(80516),ll=i(46772),cl=i(3602),dl=i(61024),ul=i(88182),pl=i(14734),fl=i(83808),hl=i(66714),gl=i(3567),ml=i(97730),yl=i(31384),Al=i(57156),vl=i(77653),bl=i(5918),xl=i(21262),Cl=i(23324),El=i(39773),Sl=i(48882),Tl=i(13264),Il=i(16522),Pl=i(78393),Ml=i(17713),wl=i(91316),Bl=i(37727),Dl=i(26029),jl=i(6377),Rl=i(46309),Ll=i(81198),Nl=i(10212);const xo={Add:Ds.Z,Addchart:nl.Z,Background:hl.Z,Camera:Cl.Z,Cells:Rl.Z,Check:Bs.Z,Circle:ol.Z,Clear:Ms.Z,Clock:tl.Z,Collapse:Dl.Z,Cube:Ll.Z,Delete:al.Z,Expand:jl.Z,Flag:rl.Z,Folder:ll.Z,FolderOpen:cl.Z,Grid:dl.Z,Hive:ul.Z,ImageProjection:Nl.Z,Map:gl.Z,Move:xl.Z,MoveDown:ml.Z,MoveUp:yl.Z,NorthWest:Al.Z,Note:bl.Z,NoteFilled:vl.Z,Points:sl.Z,PrecisionManufacturing:El.Z,Radar:Sl.Z,Settings:Tl.Z,Shapes:pl.Z,Share:Il.Z,SouthEast:Pl.Z,Star:Ml.Z,Timeline:wl.Z,Topic:Bl.Z,Walk:il.Z,World:fl.Z};function Ol({actions:e,onSelectAction:t}){const[s,o]=(0,c.useState)(void 0),a=Boolean(s),r=p=>{o(p.currentTarget)},l=p=>{t(p),o(void 0)},d=e.some(p=>p.type==="action"&&p.icon);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Z,{title:"More actions","aria-controls":a?"node-actions-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,onClick:r,"data-testid":"node-actions-menu-button",size:"small",children:(0,n.jsx)(lo.Z,{fontSize:"small"})}),(0,n.jsx)(De.Z,{id:"basic-menu",anchorEl:s,open:a,onClose:()=>o(void 0),MenuListProps:{"aria-label":"node actions button",dense:!0},children:e.map((p,h)=>{if(p.type==="divider")return(0,n.jsx)(Xe.Z,{variant:d?"inset":"fullWidth"},`divider_${h}`);const f=p.icon?xo[p.icon]:void 0;return(0,n.jsxs)(Ve.Z,{onClick:()=>l(p.id),children:[f&&(0,n.jsx)(bo.Z,{children:(0,n.jsx)(f,{fontSize:"small"})}),(0,n.jsx)(Sn.Z,{inset:!f&&d,disableTypography:!0,children:p.label})]},p.id)})})]})}var $n=i(41518);const kl=(0,b.ZL)()(e=>({checkbox:{borderRadius:e.shape.borderRadius,padding:e.spacing(1),"&:hover":{backgroundColor:e.palette.action.hover}},checkboxSizeSmall:{padding:e.spacing(.625)}}));function Zl(e){const{className:t,onChange:s,...o}=e,{classes:a,cx:r}=kl(),l=(d,p)=>{s?.(d,p),d.currentTarget.blur()};return(0,n.jsx)($n.Z,{className:r(t,a.checkbox,{[a.checkboxSizeSmall]:e.size==="small"}),onChange:l,...o,title:"Toggle visibility",icon:(0,n.jsx)(st.Z,{fontSize:"small",viewBox:"0 0 16 16",color:"disabled",children:(0,n.jsx)("path",{fill:"currentColor",d:"M13.508 7.801c.556-.527 1.036-1.134 1.422-1.801h-1.185C12.48 7.814 10.378 9 8 9 5.622 9 3.52 7.814 2.254 6H1.07c.386.667.866 1.274 1.421 1.801L.896 9.396l.708.707L3.26 8.446c.71.523 1.511.932 2.374 1.199l-.617 2.221.964.268.626-2.255C7.06 9.96 7.525 10 8 10c.475 0 .94-.041 1.392-.12l.626 2.254.964-.268-.617-2.221c.863-.267 1.663-.676 2.374-1.2l1.657 1.658.708-.707-1.595-1.595z",fillRule:"nonzero"})}),checkedIcon:(0,n.jsx)(st.Z,{fontSize:"small",viewBox:"0 0 16 16",children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M8 10c1.105 0 2-.895 2-2 0-1.105-.895-2-2-2-1.104 0-2 .895-2 2 0 1.105.896 2 2 2z",fillRule:"nonzero"}),(0,n.jsx)("path",{d:"M8 4c2.878 0 5.378 1.621 6.635 4-1.257 2.379-3.757 4-6.635 4-2.878 0-5.377-1.621-6.635-4C2.623 5.621 5.122 4 8 4zm0 7c-2.3 0-4.322-1.194-5.478-3C3.678 6.194 5.7 5 8 5c2.3 0 4.322 1.194 5.479 3C12.322 9.806 10.3 11 8 11z",fillRule:"evenodd"})]})})})}function ba(e){return(0,v.sortBy)(Object.entries(e).filter(t=>t[1]!=null),t=>t[1].order)}function xa(e,t){const s={};return Object.entries(e).forEach(([o,a])=>{if(a==null)return;const r=xa(a.children??{},t);Object.values(r).length>0&&(s[o]={...a,children:r}),(a.label??o).toLocaleLowerCase().includes(t.toLocaleLowerCase())&&(s[o]=a)}),s}var Fl=i(2784);const zl=35,Ca=(0,b.ZL)()(e=>({actionButton:{padding:e.spacing(.5)},editNameField:{font:"inherit",gridColumn:"span 2",width:"100%",".MuiInputBase-input":{fontSize:"0.75rem",padding:e.spacing(.75,1)}},focusedNode:{animation:`
      ${(0,Aa.F4)`
      from {
        background-color: ${(0,ne.Z)(e.palette.primary.main).setAlpha(.3).toRgbString()};
      }
      to {
        background-color: transparent;
      }`}
      0.5s ease-in-out
    `},fieldPadding:{gridColumn:"span 2",height:e.spacing(.5)},iconWrapper:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",left:0,transform:"translate(-97.5%, -50%)"},nodeHeader:{display:"flex",gridColumn:"span 2",paddingRight:e.spacing(.5),minHeight:zl,"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"hidden"},"&:hover":{backgroundColor:e.palette.action.hover,".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"visible"}}}},nodeHeaderVisible:{"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"hidden"},"&:hover":{".MuiCheckbox-root":{visibility:"visible"}}}},nodeHeaderToggle:{display:"grid",alignItems:"center",gridTemplateColumns:"auto 1fr auto",opacity:.6,position:"relative",userSelect:"none",width:"100%"},nodeHeaderToggleHasProperties:{cursor:"pointer"},nodeHeaderToggleVisible:{opacity:1},errorTooltip:{whiteSpace:"pre-line",maxHeight:"15vh",overflowY:"auto"}}));function Gl({expanded:e}){const{classes:t}=Ca(),s=e?Kn.Z:_r.Z;return(0,n.jsx)("div",{className:t.iconWrapper,children:(0,n.jsx)(s,{})})}const Co=Qt()((e,t)=>[...e,t]),Ul=e=>[{label:e("listAll"),value:"all"},{label:e("listVisible"),value:"visible"},{label:e("listInvisible"),value:"invisible"}];function Wl(e){return e.visible!==!1}function Ql(e){return e.visible!==!0}const Yl=e=>({input:"select",label:e("filterList"),help:e("filterListHelp"),options:Ul(e)});function Hl(e){const{actionHandler:t,defaultOpen:s=!0,filter:o,focusedPath:a,settings:r={}}=e,[l,d]=(0,va.x)({editing:!1,focusedPath:void 0,open:s,visibilityFilter:"all"}),{t:p}=(0,X.$G)("settingsEditor"),{classes:h,cx:f,theme:g}=Ca(),y=e.path.length,S=e.settings?.visible!=null,N=e.settings?.visible!==!1,k=e.settings?.enableVisibilityFilter===!0,W=Ne=>{Ne.action==="update"&&Ne.payload.input==="select"&&d(nt=>{nt.visibilityFilter=Ne.payload.value})},J=()=>{t({action:"update",payload:{input:"boolean",path:[...e.path,"visible"],value:!N}})},pe=Ne=>{t({action:"perform-node-action",payload:{id:Ne,path:e.path}})},ye=(0,v.isEqual)(a,e.path);(0,c.useEffect)(()=>{a!=null&&(0,v.isEqual)(e.path,a.slice(0,e.path.length))&&d(nt=>{nt.open=!0}),ye&&Ae.current?.scrollIntoView()},[a,ye,e.path,d]);const{fields:fe,children:de}=r,ee=de!=null&&Object.keys(de).length>0,Pe=fe!=null||ee,Ae=(0,c.useRef)(null),at=(0,on.Z)(Object.entries(fe??{}),([Ne,nt])=>nt?(0,n.jsx)(yo,{field:nt,path:Co(e.path,Ne),actionHandler:t},Ne):void 0),pt=l.visibilityFilter==="visible"?Wl:l.visibilityFilter==="invisible"?Ql:void 0,xe=(0,on.Z)(ba(de??{}),([Ne,nt])=>!pt||pt(nt)?(0,n.jsx)(Ea,{actionHandler:t,defaultOpen:nt.defaultExpansionState!=="collapsed",filter:o,focusedPath:a,settings:nt,path:Co(e.path,Ne)},Ne):void 0),ke=r.icon?xo[r.icon]:void 0,Ue=(0,c.useCallback)(Ne=>{r.renamable===!0&&t({action:"update",payload:{path:[...e.path,"label"],input:"string",value:Ne.target.value}})},[t,e.path,r.renamable]),dt=(0,c.useCallback)(()=>{d(Ne=>{Ne.editing=!Ne.editing})},[d]),jt=(0,c.useCallback)(()=>{d(Ne=>{Ne.editing||(Ne.open=!Ne.open)})},[d]),Ut=(0,c.useCallback)(Ne=>{(Ne.key==="Enter"||Ne.key==="Escape")&&dt()},[dt]),[wt,gt]=(0,c.useMemo)(()=>(0,v.partition)(r.actions,Ne=>Ne.type==="action"&&Ne.display==="inline"),[r.actions]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:f(h.nodeHeader,{[h.focusedNode]:ye,[h.nodeHeaderVisible]:N}),ref:Ae,children:[(0,n.jsxs)("div",{className:f(h.nodeHeaderToggle,{[h.nodeHeaderToggleHasProperties]:Pe,[h.nodeHeaderToggleVisible]:N}),style:{marginLeft:g.spacing(.75+2*y)},onClick:jt,"data-testid":`settings__nodeHeaderToggle__${e.path.join("-")}`,children:[Pe&&(0,n.jsx)(Gl,{expanded:l.open}),ke&&(0,n.jsx)(ke,{fontSize:"small",color:"inherit",style:{marginRight:g.spacing(.5),opacity:.8}}),l.editing?(0,n.jsx)(Mt.Z,{className:h.editNameField,autoFocus:!0,variant:"filled",onChange:Ue,value:r.label,onBlur:dt,onKeyDown:Ut,onFocus:Ne=>Ne.target.select(),InputProps:{endAdornment:(0,n.jsx)(K.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ne=>{Ne.stopPropagation(),dt()},children:(0,n.jsx)(Bs.Z,{fontSize:"small"})})}}):(0,n.jsx)(ie.Z,{noWrap:!0,flex:"auto",variant:"subtitle2",fontWeight:y<2?600:400,color:N?"text.primary":"text.disabled",children:(0,n.jsx)(ro,{text:r.label??p("general"),highlight:o})})]}),(0,n.jsxs)(te.Z,{alignItems:"center",direction:"row",children:[r.renamable===!0&&!l.editing&&(0,n.jsx)(K.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ne=>{Ne.stopPropagation(),dt()},children:(0,n.jsx)(el.Z,{fontSize:"small"})}),r.visible!=null&&(0,n.jsx)(Zl,{size:"small",checked:N,onChange:J,style:{opacity:S?1:0},disabled:!S}),wt.map(Ne=>{const nt=Ne.icon?xo[Ne.icon]:void 0,kt=()=>t({action:"perform-node-action",payload:{id:Ne.id,path:e.path}});return nt?(0,n.jsx)(K.Z,{onClick:kt,title:Ne.label,className:h.actionButton,children:(0,n.jsx)(nt,{fontSize:"small"})},Ne.id):(0,n.jsx)(U.Z,{onClick:kt,size:"small",color:"inherit",className:h.actionButton,children:Ne.label},Ne.id)}),e.settings?.error&&(0,n.jsx)(Y.Z,{arrow:!0,title:(0,n.jsx)(ie.Z,{variant:"subtitle2",className:h.errorTooltip,children:e.settings.error}),children:(0,n.jsx)(K.Z,{size:"small",color:"error",children:(0,n.jsx)(co.Z,{fontSize:"small"})})}),gt.length>0&&(0,n.jsx)(Ol,{actions:gt,onSelectAction:pe})]})]}),l.open&&at.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:h.fieldPadding}),at,(0,n.jsx)("div",{className:h.fieldPadding})]}),l.open&&k&&ee&&(0,n.jsx)(yo,{field:{...Yl(p),value:l.visibilityFilter},path:Co(e.path,"visibilityFilter"),actionHandler:W},"visibilityFilter"),l.open&&xe,y===1&&(0,n.jsx)(Xe.Z,{style:{gridColumn:"span 2"}})]})}const Ea=Fl.memo(Hl),Vl=(0,b.ZL)()(e=>({appBar:{top:0,marginRight:1,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},fieldGrid:{display:"grid",gridTemplateColumns:"minmax(20%, 20ch) auto",columnGap:e.spacing(1)},textField:{".MuiOutlinedInput-notchedOutline":{border:"none"}},startAdornment:{display:"flex"}})),Xl=Qt()(e=>[e]);function Sa({settings:e}){const{classes:t}=Vl(),{actionHandler:s,focusedPath:o}=e,[a,r]=(0,c.useState)(""),{t:l}=(0,X.$G)("settingsEditor"),d=(0,c.useMemo)(()=>a.length>0?xa(e.nodes,a):e.nodes,[e.nodes,a]),p=(0,c.useMemo)(()=>ba(d),[d]),{selectedPanelIds:h}=(0,ut.iy)(),f=(0,c.useMemo)(()=>h.length===1?h[0]:void 0,[h]),g=(0,Ao.v)(),y=(0,c.useMemo)(()=>f!=null?(0,je.$k)(f):void 0,[f]),S=(0,c.useMemo)(()=>y!=null?g.getPanelByType(y):void 0,[g,y]),[N,k]=(0,ua.Um)(f),W=(0,vo.J)(de=>f?de.defaultTitles[f]:void 0),J=typeof N?.[je.xS]=="string"?N[je.xS]:void 0,pe=(0,c.useMemo)(()=>({input:"string",label:l("title"),placeholder:W??S?.title,value:J}),[J,W,S?.title,l]),ye=(0,c.useCallback)(de=>{de.action==="update"&&de.payload.path[0]===je.xS&&k({[je.xS]:de.payload.value})},[k]),fe=a.length===0&&S?.hasCustomToolbar!==!0;return(0,n.jsxs)(te.Z,{fullHeight:!0,children:[e.enableFilter===!0&&(0,n.jsx)("header",{className:t.appBar,children:(0,n.jsx)(Mt.Z,{id:"settings-filter",variant:"filled","data-testid":"settings-filter-field",onChange:de=>r(de.target.value),value:a,className:t.textField,fullWidth:!0,placeholder:l("searchPanelSettings"),InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:t.startAdornment,htmlFor:"settings-filter",children:(0,n.jsx)(ws.Z,{fontSize:"small"})}),endAdornment:a&&(0,n.jsx)(K.Z,{size:"small",title:l("clearSearch"),onClick:()=>r(""),edge:"end",children:(0,n.jsx)(Ms.Z,{fontSize:"small"})})}})}),(0,n.jsxs)("div",{className:t.fieldGrid,children:[fe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(te.Z,{paddingBottom:.5,style:{gridColumn:"span 2"}}),(0,n.jsx)(yo,{field:pe,path:[je.xS],actionHandler:ye})]}),p.map(([de,ee])=>(0,n.jsx)(Ea,{actionHandler:s,defaultOpen:ee.defaultExpansionState!=="collapsed",filter:a,focusedPath:o,path:Xl(de),settings:ee},de))]})]})}var Kl=i(50334),$l=i(16554),Eo=i(90546),jn=i(76217),Jl=i(55433);const ql=(0,b.ZL)()(e=>({textarea:{[`.${$l.Z.root}`]:{backgroundColor:e.palette.action.hover,fontFamily:vt.R.MONOSPACE,maxHeight:"60vh",overflowY:"auto",padding:e.spacing(.25)}}}));function _l({initialValue:e={},onChange:t,onRequestClose:s,title:o}){const{classes:a}=ql(),[r,l]=(0,c.useState)(JSON.stringify(e,void 0,2)??""),{decodedValue:d,error:p}=(0,c.useMemo)(()=>{try{return{decodedValue:JSON.parse(r===""?"{}":r),error:void 0}}catch(y){return{decodedValue:void 0,error:y}}},[r]),h=(0,c.useCallback)(()=>{t(d),s()},[d,t,s]),f=(0,c.useCallback)(()=>{(0,Jl.W)(r,"layout.json")},[r]),g=(0,c.useCallback)(()=>r,[r]);return(0,n.jsxs)(Ze.Z,{open:!0,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(te.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(te.Z,{children:(0,n.jsx)(ie.Z,{variant:"h4",fontWeight:600,gutterBottom:!0,children:o})}),(0,n.jsx)(K.Z,{onClick:s,edge:"end",children:(0,n.jsx)(Je.Z,{})})]}),(0,n.jsx)(nn.Z,{children:(0,n.jsx)(Mt.Z,{className:a.textarea,fullWidth:!0,multiline:!0,rows:10,value:r,onChange:y=>l(y.target.value),autoFocus:!0,error:p!=null,helperText:p?"The JSON provided is invalid.":" ",inputProps:{"data-testid":"share-json-input"},FormHelperTextProps:{variant:"standard"},spellCheck:!1})}),(0,n.jsxs)(Xt.Z,{children:[(0,n.jsxs)(te.Z,{direction:"row",gap:1,children:[(0,n.jsx)(K.Z,{onClick:f,title:"Download","aria-label":"Download",children:(0,n.jsx)(us.oVw,{})}),(0,n.jsx)(Eo.Z,{color:"default",getText:g}),(0,n.jsx)(jn.Z,{activeColor:"error",onClick:()=>l("{}"),title:"Clear","aria-label":"Clear",icon:(0,n.jsx)(Kl.Z,{})})]}),(0,n.jsx)(te.Z,{flex:"auto"}),(0,n.jsx)(U.Z,{disabled:p!=null,variant:"contained",size:"large",onClick:h,children:"Apply"})]})]})}var Tn=i(11701);const ec=e=>typeof e.selectedLayout?.data?.layout=="string"?e.selectedLayout.data.layout:void 0,tc=e=>e.incrementSequenceNumber,nc=Object.freeze({actionHandler:()=>{},nodes:{}});function sc({selectedPanelIdsForTests:e}){const{t}=(0,X.$G)("panelSettings"),s=(0,ut.NS)(ec),{selectedPanelIds:o,setSelectedPanelIds:a,selectAllPanels:r}=(0,ut.iy)(),l=e??o;(0,c.useEffect)(()=>{l.length===0&&s!=null&&r()},[r,l,s]);const d=(0,c.useMemo)(()=>l.length===1?l[0]:void 0,[l]);(0,jr.Z)(()=>{d!=null&&a([])});const p=(0,Ao.v)(),{getCurrentLayoutState:h,savePanelConfigs:f}=(0,ut._B)(),g=(0,c.useMemo)(()=>d!=null?(0,je.$k)(d):void 0,[d]),y=(0,c.useMemo)(()=>g!=null?p.getPanelByType(g):void 0,[p,g]),S=(0,vo.J)(tc),[N,k]=(0,c.useState)(!1),W=(0,c.useMemo)(()=>{const ee=h().selectedLayout?.data?.configById;return d==null||!N||!ee?null:(0,n.jsx)(_l,{onRequestClose:()=>k(!1),initialValue:ee[d]??{},onChange:Pe=>{f({configs:[{id:d,config:Pe,override:!0}]}),S(d)},title:t("importOrExportSettings")})},[h,d,N,f,S,t]),[J]=(0,ua.Um)(d),pe=(0,vo.J)(ee=>d?ee.settingsTrees[d]:void 0),ye=(0,c.useCallback)(()=>{d&&(f({configs:[{id:d,config:{},override:!0}]}),S(d))},[S,f,d]);if(d==null)return(0,n.jsx)(Hn.Z,{children:t("selectAPanelToEditItsSettings")});if(!J)return(0,n.jsx)(Hn.Z,{children:t("loadingPanelSettings")});const fe=y!=null&&y.hasCustomToolbar!==!0,de=y?.title??t("unknown");return(0,n.jsxs)(te.Z,{fullHeight:!0,flex:"auto",gap:1,children:[W,(0,n.jsx)(te.Z,{gap:2,justifyContent:"flex-start",flex:"auto",children:(0,n.jsxs)(te.Z,{flex:"auto",children:[pe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(te.Z,{paddingLeft:.75,direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(ie.Z,{variant:"subtitle2",children:t("panelName",{title:de})}),(0,n.jsx)(Nr,{fontSize:"small",allowShare:g!==Tn.bm,onReset:ye,onShare:()=>k(!0)},1)]}),(0,n.jsx)(Xe.Z,{})]}),pe||fe?(0,n.jsx)(Sa,{settings:pe??nc},d):(0,n.jsx)(te.Z,{flex:"auto",alignItems:"center",justifyContent:"center",paddingX:1,children:(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",align:"center",children:t("panelDoesNotHaveSettings")})})]})})]})}var js=i(69802),he=i(44668),oc=i(63079),Ta=i(48982),Rn=i(50553),Ia=i(51160),So=i(66088),ac="../../packages/studio-base/src/components/CreateEventDialog.tsx";const ic=ve.ZP.getLogger(ac),rc=(0,Aa.F4)`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,lc=(0,b.ZL)()((e,t,s)=>({grid:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:e.spacing(1),overflow:"auto",alignContent:"flex-start"},row:{animation:`${rc} 0.2s ease-in-out`,display:"contents"},toggleButton:{border:"none",lineHeight:1},toggleButtonGroup:{marginRight:e.spacing(-1),gap:e.spacing(.25),[`.${s.toggleButton}`]:{borderRadius:`${e.shape.borderRadius}px !important`,marginLeft:"0px !important",borderLeft:"none !important"}}})),cc=e=>e.playerState.activeData?.currentTime,dc=e=>e.refreshEvents,uc=e=>e.deviceId;function pc(e){const{onClose:t}=e,{classes:s}=lc(),o=Z(dc),a=(0,Oe.An)(cc),[r,l]=(0,va.x)({startTime:a?(0,he.toDate)(a):void 0,duration:0,durationUnit:"sec",metadataEntries:[{key:"",value:""}]}),d=(0,c.useCallback)((fe,de,ee)=>{l(Pe=>{const Ae=Pe.metadataEntries[fe];Ae&&(Ae[de]=ee,fe===Pe.metadataEntries.length-1&&Ae.key.length>0&&Ae.value.length>0&&Pe.metadataEntries.push({key:"",value:""}))})},[l]),{formatTime:p}=(0,ht.v)(),{createEvent:h}=(0,Tt.b)(),f=(0,v.countBy)(r.metadataEntries,fe=>fe.key),g=Object.entries(f).find(([fe,de])=>fe.length>0&&de>1),y=r.startTime!=null&&r.duration!=null&&!g,S=Z(uc),[N,k]=(0,So.Z)(async()=>{if(r.startTime==null||r.duration==null||S==null)return;const fe=r.metadataEntries.filter(ee=>ee.key.length>0&&ee.value.length>0),de=Object.fromEntries(fe.map(ee=>[ee.key.trim(),ee.value.trim()]));await h?.({deviceId:S,timestamp:r.startTime.toISOString(),durationNanos:(0,he.toNanoSec)(r.durationUnit==="sec"?{sec:r.duration,nsec:0}:{sec:0,nsec:r.duration}).toString(),metadata:de}),t(),o()},[h,S,r,t,o]),W=(0,c.useCallback)(fe=>{fe.key==="Enter"&&k().catch(de=>ic.error(de))},[k]),J=(0,c.useCallback)(fe=>{l(de=>{de.metadataEntries.splice(fe+1,0,{key:"",value:""})})},[l]),pe=(0,c.useCallback)(fe=>{l(de=>{de.metadataEntries.length>1&&de.metadataEntries.splice(fe,1)})},[l]),ye=a?p(a):"-";return(0,n.jsxs)(Ze.Z,{open:!0,onClose:t,fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(te.Z,{paddingX:3,paddingTop:2,children:(0,n.jsx)(ie.Z,{variant:"h2",children:"Create event"})}),(0,n.jsx)(te.Z,{paddingX:3,paddingTop:2,children:(0,n.jsxs)("div",{className:s.grid,children:[(0,n.jsxs)(Ta.Z,{children:[(0,n.jsx)(Rn.Z,{children:"Start Time"}),(0,n.jsx)(ie.Z,{paddingY:1,children:ye})]}),(0,n.jsx)(Mt.Z,{value:r.duration??"",fullWidth:!0,label:"Duration",onChange:fe=>{const de=Number(fe.currentTarget.value);l(ee=>({...ee,duration:de>0?de:void 0}))},type:"number",InputProps:{endAdornment:(0,n.jsxs)(Vn.Z,{className:s.toggleButtonGroup,size:"small",exclusive:!0,value:r.durationUnit,onChange:(fe,de)=>{r.durationUnit!==de&&l(ee=>({...ee,durationUnit:de}))},children:[(0,n.jsx)(Yt.Z,{className:s.toggleButton,tabIndex:-1,value:"sec",children:"sec"}),(0,n.jsx)(Yt.Z,{className:s.toggleButton,tabIndex:-1,value:"nsec",children:"nsec"})]})}}),(0,n.jsxs)(Ia.Z,{style:{visibility:"hidden"},children:[(0,n.jsx)(K.Z,{tabIndex:-1,"data-testid":"add",children:(0,n.jsx)(Ds.Z,{})}),(0,n.jsx)(K.Z,{tabIndex:-1,children:(0,n.jsx)(Ds.Z,{})})]})]})}),(0,n.jsxs)(te.Z,{paddingX:3,paddingTop:2,children:[(0,n.jsx)(Rn.Z,{children:"Metadata"}),(0,n.jsx)("div",{className:s.grid,children:r.metadataEntries.map(({key:fe,value:de},ee)=>{const Pe=((fe.length>0?f[fe]:void 0)??0)>1;return(0,n.jsxs)("div",{className:s.row,children:[(0,n.jsx)(Mt.Z,{fullWidth:!0,value:fe,autoFocus:ee===0,placeholder:"Key (string)",error:Pe,onKeyDown:W,onChange:Ae=>d(ee,"key",Ae.currentTarget.value)}),(0,n.jsx)(Mt.Z,{fullWidth:!0,value:de,placeholder:"Value (string)",error:Pe,onKeyDown:W,onChange:Ae=>d(ee,"value",Ae.currentTarget.value)}),(0,n.jsxs)(Ia.Z,{children:[(0,n.jsx)(K.Z,{tabIndex:-1,onClick:()=>J(ee),children:(0,n.jsx)(Ds.Z,{})}),(0,n.jsx)(K.Z,{tabIndex:-1,onClick:()=>pe(ee),style:{visibility:r.metadataEntries.length>1?"visible":"hidden"},children:(0,n.jsx)(oc.Z,{})})]})]},ee)})})]}),(0,n.jsxs)(Xt.Z,{children:[(0,n.jsx)(U.Z,{variant:"outlined",size:"large",onClick:t,children:"Cancel"}),(0,n.jsxs)(U.Z,{variant:"contained",size:"large",onClick:k,disabled:!y||N.loading,children:[N.loading&&(0,n.jsx)(tn.Z,{color:"inherit",size:"1rem",style:{marginRight:"0.5rem"}}),"Create Event"]})]}),g&&(0,n.jsxs)(Wn.Z,{severity:"error",children:["Duplicate key ",g[0]]}),N.error?.message&&(0,n.jsx)(Wn.Z,{severity:"error",children:N.error.message})]})}var Jn=i(90454),qn=i(27999);const fc=(0,b.ZL)()({numericValue:{fontFeatureSettings:`${vt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}});function hc(e){const{classes:t}=fc(),{disableDate:s=!1,horizontal:o=!1,time:a,title:r}=e,{formatDate:l,formatTime:d}=(0,ht.v)(),p=(0,c.useMemo)(()=>d(a),[a,d]),h=(0,c.useMemo)(()=>(0,qn.Eo)(a),[a]),f=(0,c.useMemo)(()=>l(a),[l,a]);return(0,qn.D3)(a)?(0,n.jsxs)(te.Z,{title:r,gap:o?0:1,flexWrap:o?"nowrap":"wrap",direction:o?"row":"column",alignItems:o?"center":"flex-start",justifyContent:o?"flex-start":"center",children:[!s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ie.Z,{className:t.numericValue,noWrap:!0,fontWeight:o?void 0:700,variant:"inherit",children:f}),o&&(0,n.jsx)(n.Fragment,{children:"\xA0"})]}),(0,n.jsx)(te.Z,{direction:"row",alignItems:"center",flexShrink:0,gap:.5,children:(0,n.jsx)(ie.Z,{variant:"inherit",className:t.numericValue,children:p})})]}):(0,n.jsx)(te.Z,{title:r,direction:"row",alignItems:"center",flexGrow:0,children:(0,n.jsx)(ie.Z,{className:t.numericValue,variant:"inherit",children:h})})}var gc=i(27332),hs=i(85091);function mc(e){const{text:t}=e;return(0,n.jsx)(n.Fragment,{children:t.split(`
`).map(s=>(0,n.jsx)(He,{text:s},s))})}var yc=i(2784);const Ac=(0,b.ZL)()({overline:{opacity:.6},numericValue:{fontFeatureSettings:`${vt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}}),vc=e=>e.playerState.activeData?.startTime,bc=e=>e.playerState.activeData?.endTime,xc=e=>e.playerState.name,Cc=({playerState:e})=>e.presence,Ec=e=>e.seekPlayback;function Sc(e){const{disableSource:t=!1,durationRef:s,endTimeRef:o,playerName:a,playerPresence:r,startTime:l}=e,{classes:d}=Ac(),{t:p}=(0,X.$G)("dataSourceInfo"),h=e.isLiveConnection;return(0,n.jsxs)(te.Z,{gap:1.5,children:[!t&&(0,n.jsxs)(te.Z,{children:[(0,n.jsx)(ie.Z,{className:d.overline,display:"block",variant:"overline",children:p("currentSource")}),r===Ye.m.INITIALIZING?(0,n.jsx)(ie.Z,{variant:"inherit",children:(0,n.jsx)(Jn.Z,{animation:"wave",width:"40%"})}):r===Ye.m.RECONNECTING?(0,n.jsx)(ie.Z,{variant:"inherit",children:p("waitingForConnection")}):a?(0,n.jsx)(ie.Z,{variant:"inherit",component:"span",children:(0,n.jsx)(mc,{text:a})}):(0,n.jsx)(ie.Z,{className:d.numericValue,variant:"inherit",children:"\u2014"})]}),(0,n.jsxs)(te.Z,{children:[(0,n.jsx)(ie.Z,{className:d.overline,variant:"overline",children:p("startTime")}),r===Ye.m.INITIALIZING?(0,n.jsx)(Jn.Z,{animation:"wave",width:"50%"}):l?(0,n.jsx)(hc,{horizontal:!0,time:l}):(0,n.jsx)(ie.Z,{className:d.numericValue,variant:"inherit",children:"\u2014"})]}),!h&&(0,n.jsxs)(te.Z,{children:[(0,n.jsx)(ie.Z,{className:d.overline,variant:"overline",children:p("endTime")}),r===Ye.m.INITIALIZING?(0,n.jsx)(Jn.Z,{animation:"wave",width:"50%"}):(0,n.jsx)(ie.Z,{className:d.numericValue,variant:"inherit",ref:o,children:"\u2014"})]}),(0,n.jsxs)(te.Z,{children:[(0,n.jsx)(ie.Z,{className:d.overline,variant:"overline",children:p("duration")}),r===Ye.m.INITIALIZING?(0,n.jsx)(Jn.Z,{animation:"wave",width:100}):(0,n.jsx)(ie.Z,{className:d.numericValue,variant:"inherit",ref:s,children:"\u2014"})]})]})}const Tc=yc.memo(Sc),Pa="\u2014";function Ic({disableSource:e}){const t=(0,Oe.An)(vc),s=(0,Oe.An)(bc),o=(0,Oe.An)(xc),a=(0,Oe.An)(Cc),r=(0,Oe.An)(Ec),l=(0,c.useRef)(null),d=(0,c.useRef)(null),{formatDate:p,formatTime:h}=(0,ht.v)();return(0,c.useEffect)(()=>{if(l.current){const f=s&&t?(0,gc.Ai)(s,t):void 0;if(f){const g=(0,hs.LU)(f);l.current.innerText=g}else l.current.innerText=Pa}if(d.current)if(s){const f=p(s);d.current.innerText=(0,qn.D3)(s)?`${f} ${h(s)}`:`${(0,qn.Eo)(s)}`}else d.current.innerHTML=Pa},[s,h,t,a,p]),(0,n.jsx)(Tc,{disableSource:e,durationRef:l,endTimeRef:d,playerName:o,playerPresence:a,startTime:t,isLiveConnection:r==null})}function Pc(e){return(0,n.jsx)(st.Z,{...e,children:(0,n.jsx)("path",{d:"M18.03,3.03H6.03c-.55,0-1,.45-1,1v3h0v9.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1Z"})})}function Mc(e){return(0,n.jsx)(st.Z,{...e,children:(0,n.jsx)("path",{d:"M17.03,5.03V15.87l-5,2.85-5-2.85V5.03h10m1-2H6.03c-.55,0-1,.45-1,1v12.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1h0Z"})})}const wc=[.01,.02,.05,.1,.2,.5,.8,1,2,3,5],Ma=e=>`${e<.1?e.toFixed(2):e}\xD7`,Bc=e=>e.selectedLayout?.data?.playbackConfig.speed,Dc=(0,b.ZL)()(e=>({button:{padding:e.spacing(.625,.5),backgroundColor:"transparent",":hover":{backgroundColor:e.palette.action.hover}}}));function jc(){const{classes:e}=Dc(),[t,s]=(0,c.useState)(void 0),o=Boolean(t),a=(0,ut.NS)(Bc),r=(0,Oe.An)((0,c.useCallback)(({playerState:y})=>y.activeData?.speed,[])),l=(0,Oe.An)((0,c.useCallback)(y=>y.setPlaybackSpeed,[])),{setPlaybackConfig:d}=(0,ut._B)(),p=(0,c.useCallback)(y=>{d({speed:y}),l?.(y)},[d,l]),h=y=>{s(y.currentTarget)},f=()=>{s(void 0)};(0,c.useEffect)(()=>{a!=null&&l?.(a)},[a,l]);const g=r??a;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{className:e.button,id:"playback-speed-button","aria-controls":o?"playback-speed-menu":void 0,"aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:h,"data-testid":"PlaybackSpeedControls-Dropdown",disabled:l==null,disableRipple:!0,variant:"contained",color:"inherit",endIcon:(0,n.jsx)(Kn.Z,{}),children:g==null?"\u2013":Ma(g)}),(0,n.jsx)(De.Z,{id:"playback-speed-menu",anchorEl:t,open:o,onClose:f,MenuListProps:{"aria-labelledby":"playback-speed-button",dense:!0},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:wc.map(y=>(0,n.jsxs)(Ve.Z,{selected:g===y,onClick:()=>{p(y),f()},children:[g===y&&(0,n.jsx)(bo.Z,{children:(0,n.jsx)(Bs.Z,{fontSize:"small"})}),(0,n.jsx)(Sn.Z,{inset:g!==y,primary:Ma(y),primaryTypographyProps:{variant:"inherit"}})]},y))})]})}var _t=i(27803),Rc=i(35296),wa=i(87723),Ba=i(27728),Da=i(1309);const Lc=(0,b.ZL)()(e=>({textField:{borderRadius:e.shape.borderRadius,"&.Mui-disabled":{[`.${wa.Z.root}`]:{backgroundColor:"transparent"}},"&:not(.Mui-disabled):hover":{backgroundColor:e.palette.action.hover,[`.${Ba.Z.root}`]:{visibility:"visible"}},[`.${wa.Z.root}`]:{backgroundColor:"transparent",":hover":{backgroundColor:"transparent"}},[`.${Da.Z.input}`]:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, 'zero' !important`,minWidth:"20ch"},[`.${Ba.Z.root}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:`1px solid ${e.palette.background.paper}`,visibility:"hidden",marginRight:e.spacing(-1)}},textFieldError:{outline:`1px solid ${e.palette.error.main}`,outlineOffset:-1,[`.${Da.Z.root}`]:{color:e.palette.error.main,borderLeftColor:e.palette.error.main}}}));function Nc({timeFormat:e,timeRawString:t,timeOfDayString:s,setTimeFormat:o}){const[a,r]=(0,c.useState)(void 0),l=Boolean(a),d=h=>{r(h.currentTarget)},p=()=>{r(void 0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Z,{id:"playback-time-display-toggle-button","aria-controls":l?"playback-time-display-toggle-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:d,children:(0,n.jsx)(Kn.Z,{})}),(0,n.jsx)(De.Z,{id:"playback-time-display-toggle-menu",anchorEl:a,open:l,onClose:p,MenuListProps:{dense:!0,"aria-labelledby":"playback-time-display-toggle-button"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:[{key:"TOD",label:s??"Time of Day"},{key:"SEC",label:t??"Seconds"}].map(h=>(0,n.jsxs)(Ve.Z,{selected:e===h.key,onClick:async()=>await o(h.key),children:[e===h.key&&(0,n.jsx)(bo.Z,{children:(0,n.jsx)(Bs.Z,{fontSize:"small"})}),(0,n.jsx)(Sn.Z,{inset:e!==h.key,primary:h.label,primaryTypographyProps:{variant:"inherit"}})]},h.key))})]})}function Oc({currentTime:e,startTime:t,endTime:s,timezone:o,onSeek:a,onPause:r,isPlaying:l}){const{classes:d,cx:p}=Lc(),h=(0,c.useRef)(void 0),f=(0,ht.v)(),g=(0,c.useMemo)(()=>e?(0,qn.Eo)(e):void 0,[e]),y=(0,c.useMemo)(()=>e?(0,hs.mr)(e,o):void 0,[e,o]),S=(0,c.useMemo)(()=>f.timeFormat==="SEC"?g:y,[f.timeFormat,g,y]),[N,k]=(0,c.useState)(!1),[W,J]=(0,c.useState)(S??void 0),[pe,ye]=(0,c.useState)(!1),fe=(0,c.useCallback)(de=>{if(de.preventDefault(),W==null||W.length===0||!t||!e||!s)return;const ee=(0,hs._v)({text:W,date:(0,hs.p6)(e,o),timezone:o});if(ee==null){ye(!0);return}ye(!1),ee.time&&(0,he.isTimeInRangeInclusive)(ee.time,t,s)&&(a(ee.time),ee.method!==f.timeFormat&&f.setTimeFormat(ee.method))},[W,t,e,s,o,a,f]);return(0,c.useEffect)(()=>(pe&&(W==null||W.length===0||l)&&(k(!1),ye(!1)),()=>{h.current!=null&&clearTimeout(h.current)}),[pe,W,l]),(0,n.jsx)(te.Z,{direction:"row",alignItems:"center",flexGrow:0,gap:.5,children:e?(0,n.jsx)("form",{onSubmit:fe,style:{width:"100%"},children:(0,n.jsx)(Mt.Z,{className:p(d.textField,{[d.textFieldError]:pe}),"aria-label":"Playback Time Method","data-testid":"PlaybackTime-text",value:N?W:S,error:pe,variant:"filled",size:"small",InputProps:{startAdornment:pe?(0,n.jsx)(Rc.Z,{color:"error"}):void 0,endAdornment:(0,n.jsx)(Nc,{currentTime:e,timezone:o,timeOfDayString:y,timeRawString:g,timeFormat:f.timeFormat,setTimeFormat:f.setTimeFormat})},onFocus:de=>{r(),ye(!1),k(!0),J(S),de.target.select()},onBlur:de=>{fe(de),k(!1),h.current=setTimeout(()=>ye(!1),600)},onChange:de=>J(de.target.value)})}):(0,n.jsx)(Mt.Z,{className:p(d.textField,"Mui-disabled"),disabled:!0,variant:"filled",size:"small",defaultValue:f.timeFormat==="SEC"?"0000000000.000000000":"00:00:00.000",InputProps:{endAdornment:(0,n.jsx)(K.Z,{edge:"end",disabled:!0,children:(0,n.jsx)(Kn.Z,{})})}})})}const kc=e=>e.playerState.activeData;function Zc(e){const[t]=(0,_t.b)(C.o.TIMEZONE),s=(0,Oe.An)(kc),{isPlaying:o,startTime:a,endTime:r,currentTime:l}=s??{};return(0,n.jsx)(Oc,{currentTime:l,startTime:a,endTime:r,onSeek:e.onSeek,onPause:e.onPause,isPlaying:o??!1,timezone:t})}function Fc(e){return e.playerState.activeData}function zc(e){const{play:t,seek:s,repeatEnabled:o}=e,a=(0,Oe.An)(Fc);return(0,c.useLayoutEffect)(()=>{if(!o)return;const r=a?.currentTime,l=a?.endTime,d=a?.startTime;d&&r&&l&&(0,he.compare)(r,l)>=0&&(s(d),t())},[a,t,o,s]),(0,n.jsx)(n.Fragment,{})}var Gc=i(17055),Uc=i(2784);const ja=(0,b.ZL)()(({transitions:e,palette:t})=>({root:{inset:0,pointerEvents:"none",position:"absolute",display:"flex",alignItems:"center"},tick:{transition:e.create("height",{duration:e.duration.shortest}),backgroundBlendMode:"overlay",backgroundColor:(0,Wt.Fq)(t.info.main,.58),position:"absolute",height:6},tickHovered:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,Wt.Fq)(t.info.main,.58),border:`1px solid ${t.info.main}`,height:12},tickSelected:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,Wt.Fq)(t.info.main,.67),height:12}})),Wc=e=>e.events,Qc=e=>e.hoveredEvent,Yc=e=>e.eventsAtHoverValue,Hc=e=>e.selectedEventId;function Vc({event:e}){const t=(0,w.oA)(Yc),s=(0,w.oA)(Qc),o=Z(Hc),{classes:a,cx:r}=ja(),l=`calc(${(0,v.clamp)(e.startPosition,0,1)*100}% - 1px)`,d=`calc(100% - ${(0,v.clamp)(e.endPosition,0,1)*100}% - 1px)`;return(0,n.jsx)("div",{className:r(a.tick,{[a.tickHovered]:s?e.event.id===s.event.id:t[e.event.id]!=null,[a.tickSelected]:o===e.event.id}),style:{left:l,right:d}})}const Xc=Uc.memo(Vc);function Kc(){const e=Z(Wc),{classes:t}=ja();return(0,n.jsx)("div",{className:t.root,children:(e.value??[]).map(s=>(0,n.jsx)(Xc,{event:s},s.event.id))})}var $c=i(62515),Jc=i(23144);const qc=(0,b.ZL)()(e=>({tick:{position:"absolute",height:16,borderRadius:1,width:2,top:8,transform:"translate(-50%, 0)",backgroundColor:e.palette.warning.main},tooltip:{'&[data-popper-placement*="top"] .MuiTooltip-tooltip':{marginBottom:`${e.spacing(1)} !important`}}}));function _c(e){return e.playerState.activeData?.startTime}function ed(e){return e.playerState.activeData?.endTime}function td(e){const{componentId:t}=e,{classes:s}=qc(),o=(0,Oe.An)(_c),a=(0,Oe.An)(ed),r=(0,w.hx)({componentId:t,isTimestampScale:!0}),{formatTime:l}=(0,ht.v)(),{width:d,ref:p}=(0,$c.NB)({handleHeight:!1,refreshMode:"debounce",refreshRate:0}),h=(0,c.useMemo)(()=>{if(!r||r.type!=="PLAYBACK_SECONDS"||!o||r.value<0)return;const y=(0,he.add)(o,(0,he.fromSec)(r.value));return l(y)},[l,r,o]),f=(0,c.useMemo)(()=>{if(!(o==null||a==null))return{x:{min:0,max:(0,he.toSec)(a)-(0,he.toSec)(o),pixelMin:0,pixelMax:d??0}}},[d,o,a]),g=r!=null&&r.componentId!==t;return(0,n.jsx)(te.Z,{ref:p,flex:"auto",children:f&&(0,n.jsx)(Jc.Z,{componentId:t,scales:f,isTimestampScale:!0,children:(0,n.jsx)(Y.Z,{arrow:!0,classes:{popper:s.tooltip},placement:"top",disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,disableInteractive:!0,TransitionProps:{timeout:0},open:g,title:(0,n.jsx)(ie.Z,{align:"center",variant:"caption",fontFamily:vt.R.MONOSPACE,noWrap:!0,children:h}),children:(0,n.jsx)("div",{className:s.tick})})})})}const nd=(0,b.ZL)()(e=>({tooltipDivider:{gridColumn:"span 2",marginBlock:e.spacing(.5),opacity:.5},tooltipWrapper:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`,fontFamily:vt.R.SANS_SERIF,whiteSpace:"nowrap",columnGap:e.spacing(.5),display:"grid",alignItems:"center",gridTemplateColumns:"auto auto",width:"100%",flexDirection:"column"},itemKey:{fontSize:"0.7rem",opacity:.7,textAlign:"end",textTransform:"lowercase"}})),sd=e=>e.eventsAtHoverValue,od=e=>e.playerState.activeData?.startTime;function ad(e){const{stamp:t}=e,{formatTime:s,timeFormat:o}=(0,ht.v)(),a=(0,w.oA)(sd),r=(0,Oe.An)(od),{classes:l}=nd();if(!r)return null;const d=(0,he.subtract)(t,r),p=[];switch((0,v.isEmpty)(a)||Object.values(a).forEach(({event:h})=>{p.push({type:"item",title:"Start",value:s(h.startTime)}),p.push({type:"item",title:"End",value:s(h.endTime)}),(0,v.isEmpty)(h.metadata)||Object.entries(h.metadata).forEach(([f,g])=>{p.push({type:"item",title:f,value:g})}),p.push({type:"divider"})}),o){case"TOD":p.push({type:"item",title:"Time",value:s(t)});break;case"SEC":p.push({type:"item",title:"SEC",value:s(t)});break}return p.push({type:"item",title:"Elapsed",value:`${(0,he.toSec)(d).toFixed(9)} sec`}),(0,n.jsx)("div",{className:l.tooltipWrapper,children:p.map((h,f)=>h.type==="divider"?(0,n.jsx)(Xe.Z,{className:l.tooltipDivider},`divider_${f}`):(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)(ie.Z,{className:l.itemKey,noWrap:!0,children:h.title}),(0,n.jsx)(ie.Z,{variant:"subtitle2",noWrap:!0,children:h.value})]},`${h.title}_${f}`))})}var Ra=i(43345);const gs=8,id=(0,vn.F4)`
  0% { background-position: 0 0; }
  100% { background-position: ${gs*2}px 0; }
`,rd=(0,b.ZL)()(e=>({loadingIndicator:{label:"ProgressPlot-loadingIndicator",position:"absolute",width:"100%",height:"100%",animation:`${id} 300ms linear infinite`,backgroundRepeat:"repeat-x",backgroundSize:`${gs*2}px 100%`,backgroundImage:`repeating-linear-gradient(${["90deg",`${e.palette.background.paper}`,`${e.palette.background.paper} ${gs/2}px`,`transparent ${gs/2}px`,`transparent ${gs}px`].join(",")})`},range:{label:"ProgressPlot-range",position:"absolute",backgroundColor:e.palette.mode==="dark"?(0,ne.Z)(e.palette.text.secondary).darken(25).toHexString():(0,ne.Z)(e.palette.text.secondary).lighten(25).toHexString(),height:"100%"}}));function ld(e){const{availableRanges:t,loading:s}=e,{classes:o}=rd(),a=(0,c.useMemo)(()=>{if(t)return t.map(l=>({start:(0,v.clamp)(l.start,0,1),end:(0,v.clamp)(l.end,0,1)}))},[t]),r=(0,c.useMemo)(()=>{if(!a)return(0,n.jsx)(n.Fragment,{});const l=(0,Ra.og)(a);return(0,on.Z)(l,(d,p)=>{const h=d.end-d.start;if(h!==0)return(0,n.jsx)("div",{className:o.range,style:{width:`${h*100}%`,left:`${d.start*100}%`}},p)})},[a,o.range]);return(0,n.jsxs)(te.Z,{position:"relative",fullHeight:!0,children:[s&&(0,n.jsx)("div",{className:o.loadingIndicator}),r]})}function cd(e,t,s){return t+(s-t)*e}function dd(e,t,s,o,a){return cd((e-t)/(s-t),o,a)}const ud=(0,b.ZL)()(e=>({root:{label:"Slider-root",display:"flex",width:"100%",height:"100%",position:"relative",alignItems:"center",cursor:"pointer"},rootDisabled:{label:"Slider-rootDisabled",cursor:"not-allowed",opacity:e.palette.action.disabledOpacity},range:{label:"Slider-range",backgroundColor:e.palette.action.active,position:"absolute",height:"100%"}}));function pd(e,t){return e==null||isNaN(e)?null:(0,n.jsx)("div",{className:t,style:{width:`${e*100}%`}})}function fd(e){const{fraction:t,disabled:s=!1,renderSlider:o=pd,onHoverOver:a,onHoverOut:r,onChange:l}=e,{classes:d,cx:p}=ud(),h=(0,c.useRef)(null),f=(0,c.useCallback)(ee=>{if(!h.current)return 0;const{left:Pe,right:Ae}=h.current.getBoundingClientRect(),at=dd(ee.clientX,Pe,Ae,0,1);return(0,v.clamp)(at,0,1)},[]),[g,y]=(0,c.useState)(!1),S=(0,c.useRef)(g);(0,c.useLayoutEffect)(()=>{S.current=g},[g]);const[N,k]=(0,c.useState)(!1),W=(0,c.useRef)(N);(0,c.useLayoutEffect)(()=>{W.current=N},[N]);const J=(0,c.useCallback)(()=>{k(!0)},[]),pe=(0,c.useCallback)(()=>{k(!1),S.current||r?.()},[r]),ye=(0,c.useCallback)(()=>{y(!1),W.current||r?.()},[r]),fe=(0,c.useCallback)(ee=>{if(S.current&&ee.currentTarget!==window||s)return;const Pe=f(ee);if(h.current){const Ae=h.current.getBoundingClientRect();a?.({fraction:Pe,clientX:ee.clientX,clientY:Ae.y+Ae.height/2})}S.current&&l(Pe)},[s,f,l,a]),de=(0,c.useCallback)(ee=>{s||(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),ee.preventDefault(),l(f(ee)),y(!0))},[s,f,l]);return(0,c.useEffect)(()=>{if(g)return window.addEventListener("pointerup",ye),window.addEventListener("pointermove",fe),()=>{window.removeEventListener("pointerup",ye),window.removeEventListener("pointermove",fe)}},[g,fe,ye]),(0,n.jsx)("div",{ref:h,onPointerDown:de,onPointerMove:fe,onMouseEnter:J,onMouseLeave:pe,className:p(d.root,{[d.rootDisabled]:s}),children:o(t,d.range)})}var hd=i(2784);const gd=(0,b.ZL)()(e=>({marker:{backgroundColor:e.palette.text.primary,position:"absolute",height:16,borderRadius:1,width:2,transform:"translate(-50%, 0)"},track:{position:"absolute",left:0,right:0,height:6,backgroundColor:e.palette.action.focus},trackDisabled:{opacity:e.palette.action.disabledOpacity}})),md=e=>e.playerState.activeData?.startTime,yd=e=>e.playerState.activeData?.currentTime,Ad=e=>e.playerState.activeData?.endTime,vd=e=>e.playerState.progress.fullyLoadedFractionRanges,bd=e=>e.playerState.presence;function xd(e){const{onSeek:t}=e,{classes:s,cx:o}=gd(),[a]=(0,c.useState)(()=>(0,Ft.Z)()),r=(0,Oe.An)(md),l=(0,Oe.An)(yd),d=(0,Oe.An)(Ad),p=(0,Oe.An)(bd),h=(0,Oe.An)(vd),f=(0,w.D4)(),[g,y]=(0,c.useState)(),S=(0,fs.Z)(g),N=(0,fs.Z)(r),k=(0,fs.Z)(d),W=(0,c.useCallback)(ke=>{!N.current||!k.current||t((0,he.add)(N.current,(0,he.fromSec)(ke*(0,he.toSec)((0,he.subtract)(k.current,N.current)))))},[t,k,N]),J=(0,c.useCallback)(({fraction:ke,clientX:Ue,clientY:dt})=>{if(!N.current||!k.current)return;const jt=(0,he.toSec)((0,he.subtract)(k.current,N.current)),Ut=(0,he.fromSec)(ke*jt);y({stamp:(0,he.add)(N.current,Ut),clientX:Ue,clientY:dt}),f({componentId:a,type:"PLAYBACK_SECONDS",value:(0,he.toSec)(Ut)})},[a,k,N,f]),pe=(0,w.Js)(),ye=(0,c.useCallback)(()=>{pe(a),y(void 0)},[pe,a]);(0,c.useEffect)(()=>ye,[ye]);const fe=(0,c.useCallback)(ke=>{if(ke!=null)return(0,n.jsx)("div",{className:s.marker,style:{left:`${ke*100}%`}})},[s.marker]),de=r&&(0,he.toSec)(r),ee=d&&(0,he.toSec)(d),Pe=l&&r&&d?(0,he.toSec)((0,he.subtract)(l,r))/(0,he.toSec)((0,he.subtract)(d,r)):void 0,Ae=p===Ye.m.INITIALIZING||p===Ye.m.BUFFERING,at=hd.useRef(null),pt=g!=null,xe=(0,c.useMemo)(()=>({open:pt,popperRef:at,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"offset",options:{offset:[0,4]}}],anchorEl:{getBoundingClientRect:()=>new DOMRect(S.current?.clientX??0,S.current?.clientY??0,0,0)}}),[pt,S]);return(0,c.useEffect)(()=>{at.current!=null&&at.current.update()},[g]),(0,n.jsx)(Y.Z,{title:g!=null?(0,n.jsx)(ad,{stamp:g.stamp}):"",placement:"top",disableInteractive:!0,TransitionComponent:Gc.Z,TransitionProps:{timeout:0},PopperProps:xe,children:(0,n.jsxs)(te.Z,{direction:"row",flexGrow:1,alignItems:"center",position:"relative",style:{height:32},children:[(0,n.jsx)("div",{className:o(s.track,{[s.trackDisabled]:!r})}),(0,n.jsx)(te.Z,{position:"absolute",flex:"auto",fullWidth:!0,style:{height:6},children:(0,n.jsx)(ld,{loading:Ae,availableRanges:h})}),(0,n.jsx)(te.Z,{fullHeight:!0,fullWidth:!0,position:"absolute",flex:1,children:(0,n.jsx)(fd,{disabled:de==null||ee==null,fraction:Pe,onHoverOver:J,onHoverOut:ye,onChange:W,renderSlider:fe})}),(0,n.jsx)(Kc,{}),(0,n.jsx)(td,{componentId:a})]})})}const Cd=500,Ed=100,Sd=10,La={FORWARD:1,BACKWARD:-1},Na=(e,t,s)=>{const o=(0,he.toMillis)(t),a=s?.altKey===!0?Cd:s?.shiftKey===!0?Sd:Ed;return(0,he.fromMillis)(o+a*e)},Td=(0,b.ZL)()(e=>({root:{display:"flex",flexDirection:"column",padding:e.spacing(.5,1,1,1),position:"relative",backgroundColor:e.palette.background.paper,borderTop:`1px solid ${e.palette.divider}`,zIndex:1e5},disabled:{opacity:e.palette.action.disabledOpacity},popper:{"&[data-popper-placement*=top] .MuiTooltip-tooltip":{margin:e.spacing(.5,.5,.75)}},dataSourceInfoButton:{cursor:"default"}})),Id=e=>e.playerState.presence,Pd=e=>e.eventsSupported,Md=e=>e.playbackControls.repeat;function wd(e){const{play:t,pause:s,seek:o,isPlaying:a,getTimeInfo:r,playUntil:l}=e,d=(0,Oe.An)(Id),{classes:p,cx:h}=Td(),f=(0,Ke.Q)(Md),[g,y]=(0,c.useState)(!1),{currentUser:S}=(0,Fe.xJ)(),N=Z(Pd),{playbackControlActions:{setRepeat:k}}=(0,Re.W)(),W=(0,c.useCallback)(()=>{k(Pe=>!Pe)},[k]),J=(0,c.useCallback)(()=>{if(a)s();else{const{startTime:Pe,endTime:Ae,currentTime:at}=r();at&&Ae&&Pe&&(0,he.compare)(at,Ae)>=0&&o(Pe),t()}},[a,s,r,t,o]),pe=(0,c.useCallback)(Pe=>{const{currentTime:Ae}=r();if(!Ae)return;const at=Na(La.FORWARD,Ae,Pe);l?l(at):o(at)},[r,l,o]),ye=(0,c.useCallback)(Pe=>{const{currentTime:Ae}=r();Ae&&o(Na(La.BACKWARD,Ae,Pe))},[r,o]),fe=(0,c.useMemo)(()=>({" ":J,ArrowLeft:Pe=>{ye(Pe)},ArrowRight:Pe=>{pe(Pe)}}),[ye,pe,J]),de=(0,c.useCallback)(()=>{s(),y(Pe=>!Pe)},[s]),ee=d===Ye.m.ERROR;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(zc,{play:t,seek:o,repeatEnabled:f}),(0,n.jsx)(ca.Z,{global:!0,keyDownHandlers:fe}),(0,n.jsxs)("div",{className:p.root,children:[(0,n.jsx)(xd,{onSeek:o}),(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",flex:1,gap:1,overflowX:"auto",children:[(0,n.jsxs)(te.Z,{direction:"row",flex:1,gap:.5,children:[S&&N&&(0,n.jsx)(jn.Z,{size:"small",title:"Create event",icon:(0,n.jsx)(Mc,{}),activeIcon:(0,n.jsx)(Pc,{}),onClick:de}),(0,n.jsx)(Y.Z,{classes:{popper:p.popper},title:(0,n.jsx)(te.Z,{paddingY:.75,children:(0,n.jsx)(Ic,{disableSource:!0})}),children:(0,n.jsx)(jn.Z,{className:h(p.dataSourceInfoButton,{[p.disabled]:ee}),size:"small",icon:(0,n.jsx)(ps.Myy,{})})}),(0,n.jsx)(Zc,{onSeek:o,onPause:s})]}),(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(jn.Z,{disabled:ee,size:"small",title:"Seek backward",icon:(0,n.jsx)(js.b6L,{}),activeIcon:(0,n.jsx)(js.tE8,{}),onClick:()=>ye()}),(0,n.jsx)(jn.Z,{disabled:ee,size:"small",title:a?"Pause":"Play",onClick:J,icon:a?(0,n.jsx)(O.EPH,{}):(0,n.jsx)(js.wNO,{}),activeIcon:a?(0,n.jsx)(O.nYY,{}):(0,n.jsx)(js._kM,{})}),(0,n.jsx)(jn.Z,{disabled:ee,size:"small",title:"Seek forward",icon:(0,n.jsx)(O.Jnl,{}),activeIcon:(0,n.jsx)(O.yI2,{}),onClick:()=>pe()})]}),(0,n.jsxs)(te.Z,{direction:"row",flex:1,alignItems:"center",justifyContent:"flex-end",gap:.5,children:[(0,n.jsx)(jn.Z,{size:"small",title:"Loop playback",color:f?"primary":"inherit",onClick:W,icon:f?(0,n.jsx)(us.zst,{}):(0,n.jsx)(us.lfW,{})}),(0,n.jsx)(jc,{})]})]}),g&&N&&(0,n.jsx)(pc,{onClose:de})]})]})}var Oa=i(76023),To=i(36952),Bd=i(63355),Dd=i(63285),jd=i(53711);const Io=(0,b.ZL)()(e=>({acccordion:{background:"none",boxShadow:"none",borderBottom:`1px solid ${e.palette.divider}`,"&:before":{display:"none"},"&.Mui-expanded":{margin:0}},accordionDetails:{display:"flex",flexDirection:"column",fontFamily:vt.R.MONOSPACE,fontSize:"0.6875rem",padding:e.spacing(1.125),gap:e.spacing(1)},acccordionSummary:{height:30,minHeight:"auto",padding:e.spacing(0,.5,0,.75),fontWeight:500,"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-expanded":{minHeight:"auto"},[`& .${To.Z.content}`]:{gap:e.spacing(.5),overflow:"hidden",alignItems:"center",margin:"0 !important"},[`& .${To.Z.expandIconWrapper}`]:{transform:"rotate(-90deg)"},[`& .${To.Z.expandIconWrapper}.Mui-expanded`]:{transform:"rotate(0deg)"}},detailsText:{color:e.palette.text.primary,fontSize:e.typography.caption.fontSize,lineHeight:1.5,whiteSpace:"pre-wrap",maxHeight:"30vh",overflow:"auto",flex:1,backgroundColor:e.palette.action.hover,padding:e.spacing(1)},icon:{flex:"none"}})),Rd=({playerState:e})=>e.problems;function Ld({severity:e}){const{palette:t}=(0,L.Z)(),{classes:s}=Io();switch(e){case"warn":return(0,n.jsx)(Oa.kxT,{className:s.icon,primaryFill:t.warning.main});case"error":return(0,n.jsx)(qt.yf,{className:s.icon,primaryFill:t.error.main});case"info":return(0,n.jsx)(ps.IZT,{className:s.icon,primaryFill:t.info.main});default:return(0,n.jsx)(n.Fragment,{})}}function Nd(e){const{details:t,tip:s}=e,{classes:o}=Io(),a=(0,c.useMemo)(()=>t instanceof Error?(0,n.jsx)("div",{className:o.detailsText,children:t.message}):t!=null&&t!==""?(0,n.jsx)(ie.Z,{style:{whiteSpace:"pre-line"},children:t}):s!=null&&s!==""?void 0:"No details provided",[o,t,s]);return(0,n.jsxs)(Bd.Z,{className:o.accordionDetails,children:[s&&(0,n.jsx)("div",{children:s}),a]})}function Od(){const{classes:e}=Io(),t=(0,Oe.An)(Rd);return t==null||t.length===0?(0,n.jsx)(Hn.Z,{children:"No problems found"}):(0,n.jsx)(te.Z,{fullHeight:!0,flex:"auto",overflow:"auto",children:t.map((s,o)=>(0,n.jsxs)(Dd.Z,{className:e.acccordion,TransitionProps:{unmountOnExit:!0},defaultExpanded:!0,children:[(0,n.jsxs)(jd.Z,{className:e.acccordionSummary,expandIcon:(0,n.jsx)(Kn.Z,{}),children:[(0,n.jsx)(Ld,{severity:s.severity}),(0,n.jsx)(ie.Z,{variant:"inherit",noWrap:!0,children:s.message})]}),(0,n.jsx)(Xe.Z,{}),(0,n.jsx)(Nd,{details:s.error,tip:s.tip})]},`${o}.${s.severity}.${s.message}`))})}function kd(e){const t=(0,c.useCallback)(({children:s})=>(e.value,(0,n.jsx)(n.Fragment,{children:s})),[e.value]);return(0,n.jsx)(t,{children:e.children})}var St=i(28219),Rs=i(38256),Zd=i(44909);const Fd=(0,b.ZL)()(e=>({root:{boxSizing:"content-box",backgroundColor:e.palette.background.paper},badgeRoot:{display:"flex",alignItems:"baseline",gap:e.spacing(1)},badge:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.125,.75),borderRadius:8,transform:"none",position:"relative"},badgeInvisible:{display:"none"},anchorRight:{borderLeft:`1px solid ${e.palette.divider}`},anchorLeft:{borderRight:`1px solid ${e.palette.divider}`},tabs:{minHeight:"auto",flex:"1 1 auto",overflow:"hidden",paddingLeft:e.spacing(.25),".MuiTabs-indicator":{transform:"scaleX(0.5)",height:2},".MuiTab-root":{minHeight:30,minWidth:e.spacing(4),padding:e.spacing(0,1),color:e.palette.text.secondary,fontSize:"0.6875rem","&.Mui-selected":{color:e.palette.text.primary}}},iconButton:{padding:e.spacing(.91125),color:e.palette.text.secondary,borderRadius:0,":hover":{color:e.palette.text.primary}},tabContent:{flex:"auto",overflow:"auto"}}));function zd(){return null}function ka({items:e,anchor:t,onClose:s,activeTab:o,setActiveTab:a}){const{classes:r,cx:l}=Fd(),d=o!=null&&e.get(o)?.component||zd;return(0,n.jsxs)(te.Z,{className:l(r.root,{[r.anchorLeft]:t==="left",[r.anchorRight]:t==="right"}),flexShrink:0,overflow:"hidden","data-tourid":`sidebar-${t}`,children:[(0,n.jsxs)(te.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(Ps.Z,{className:r.tabs,textColor:"inherit",value:o??!1,onChange:(p,h)=>{h!==o&&a(h)},children:Array.from(e.entries(),([p,h])=>(0,n.jsx)(pn.Z,{label:(0,n.jsx)(Zd.Z,{invisible:h.badge==null,badgeContent:h.badge?.count,color:h.badge?.color,classes:{root:r.badgeRoot,badge:r.badge,invisible:r.badgeInvisible},children:h.title}),value:p,"data-testid":`${p}-${t}`},p))}),(0,n.jsx)(K.Z,{className:r.iconButton,onClick:s,size:"small","data-testid":`sidebar-close-${t}`,children:(0,n.jsx)(Je.Z,{fontSize:"inherit"})})]}),(0,n.jsx)(Xe.Z,{}),o!=null&&(0,n.jsx)("div",{className:r.tabContent,children:(0,n.jsx)(d,{})})]})}var ny=i(24426);const Gd=(0,b.ZL)()({mosaicWrapper:{flex:"1 1 100%","& > .mosaic > .drop-target-container":{display:"none !important"}}});function Ls(e){if(typeof e=="object")return e.first==="leftbar"?e.splitPercentage:Ls(e.first)??Ls(e.second)}function Ns(e){if(typeof e=="object")return e.second==="rightbar"?e.splitPercentage:Ns(e.first)??Ns(e.second)}function Ud(e){const{children:t,leftItems:s,selectedLeftKey:o,onSelectLeftKey:a,leftSidebarSize:r,setLeftSidebarSize:l,rightItems:d,selectedRightKey:p,onSelectRightKey:h,rightSidebarSize:f,setRightSidebarSize:g}=e,[y,S]=(0,c.useState)("children"),{classes:N}=Gd(),k=o!=null&&s.has(o),W=p!=null&&d.has(p);(0,c.useEffect)(()=>{const fe=100*(320/window.innerWidth),de=100*(1-320/window.innerWidth);S(ee=>{let Pe="children";return W&&(Pe={direction:"row",first:Pe,second:"rightbar",splitPercentage:f??Ns(ee)??de}),k&&(Pe={direction:"row",first:"leftbar",second:Pe,splitPercentage:r??Ls(ee)??fe}),Pe})},[r,f,k,W]);const J=(0,c.useCallback)(pe=>{pe!=null&&(S(pe),l(Ls(pe)),g(Ns(pe)))},[l,g]);return(0,n.jsx)(te.Z,{direction:"row",fullHeight:!0,overflow:"hidden",children:(0,n.jsx)("div",{className:N.mosaicWrapper,children:(0,n.jsx)(St.wB,{className:"",value:y,onChange:J,renderTile:pe=>{switch(pe){case"children":return(0,n.jsx)(Rs.Z,{children:t});case"leftbar":return(0,n.jsx)(Rs.Z,{children:(0,n.jsx)(ka,{anchor:"left",onClose:()=>a(void 0),items:s,activeTab:o,setActiveTab:a})});case"rightbar":return(0,n.jsx)(Rs.Z,{children:(0,n.jsx)(ka,{anchor:"right",onClose:()=>h(void 0),items:d,activeTab:p,setActiveTab:h})})}},resize:{minimumPaneSizePercentage:10}})})})}function Wd(e){const{width:t}=e;return(0,n.jsxs)("svg",{width:t,viewBox:"0 0 256 256",children:[(0,n.jsxs)("g",{stroke:"currentColor",children:[(0,n.jsx)("path",{d:"M122.63,54.19C103,70.22,90,97.21,90,128c0,22.77,7.08,43.54,18.73,59.3",fill:"none",strokeLinecap:"round",strokeWidth:"4.5"}),(0,n.jsx)("path",{d:"M133.32,201.82C153,185.8,166,158.81,166,128c0-22.35-6.82-42.78-18.09-58.43",fill:"none",strokeLinecap:"round",strokeWidth:"4.5"}),(0,n.jsx)("path",{d:"M181,170.16a101.44,101.44,0,0,0-53-14.45,102.52,102.52,0,0,0-47.9,11.56",fill:"none",strokeLinecap:"round",strokeWidth:"4.5"}),(0,n.jsx)("path",{d:"M76,87.42a101.64,101.64,0,0,0,52,13.87,102.12,102.12,0,0,0,49.85-12.63",fill:"none",strokeLinecap:"round",strokeWidth:"4.5"}),(0,n.jsx)("path",{d:"M128,54V202",fill:"none",strokeWidth:"4.5"}),(0,n.jsx)("path",{d:"M192,165.16A74,74,0,0,0,93,62.78,40,40,0,0,1,62.78,93,74,74,0,0,0,164.44,192.4,40,40,0,0,1,192,165.16Z",fill:"none",strokeWidth:"4.5"})]}),(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("circle",{cx:"119.46",cy:"30.37",r:"3"}),(0,n.jsx)("circle",{cx:"102.64",cy:"33.34",r:"3"}),(0,n.jsx)("circle",{cx:"33.34",cy:"102.64",r:"3"}),(0,n.jsx)("circle",{cx:"30.37",cy:"119.46",r:"3"}),(0,n.jsx)("circle",{cx:"30.37",cy:"136.54",r:"3"}),(0,n.jsx)("circle",{cx:"33.34",cy:"153.36",r:"3"}),(0,n.jsx)("circle",{cx:"39.18",cy:"169.42",r:"3"}),(0,n.jsx)("circle",{cx:"47.72",cy:"184.21",r:"3"}),(0,n.jsx)("circle",{cx:"58.7",cy:"197.3",r:"3"}),(0,n.jsx)("circle",{cx:"71.79",cy:"208.28",r:"3"}),(0,n.jsx)("circle",{cx:"86.58",cy:"216.82",r:"3"}),(0,n.jsx)("circle",{cx:"102.64",cy:"222.66",r:"3"}),(0,n.jsx)("circle",{cx:"119.46",cy:"225.63",r:"3"}),(0,n.jsx)("circle",{cx:"136.54",cy:"225.63",r:"3"}),(0,n.jsx)("circle",{cx:"153.36",cy:"222.66",r:"3"}),(0,n.jsx)("circle",{cx:"222.66",cy:"153.36",r:"3"}),(0,n.jsx)("circle",{cx:"225.63",cy:"136.54",r:"3"}),(0,n.jsx)("circle",{cx:"225.63",cy:"119.46",r:"3"}),(0,n.jsx)("circle",{cx:"222.66",cy:"102.64",r:"3"}),(0,n.jsx)("circle",{cx:"216.82",cy:"86.58",r:"3"}),(0,n.jsx)("circle",{cx:"208.28",cy:"71.79",r:"3"}),(0,n.jsx)("circle",{cx:"197.3",cy:"58.7",r:"3"}),(0,n.jsx)("circle",{cx:"184.21",cy:"47.72",r:"3"}),(0,n.jsx)("circle",{cx:"169.42",cy:"39.18",r:"3"}),(0,n.jsx)("circle",{cx:"153.36",cy:"33.34",r:"3"}),(0,n.jsx)("circle",{cx:"136.54",cy:"30.37",r:"3"})]}),(0,n.jsxs)("g",{stroke:"currentColor",children:[(0,n.jsx)("path",{d:"M28.89,85.13l7.72-12.2a8,8,0,0,1,6.51-3.35H64.88a8,8,0,0,1,6.51,3.35l7.72,12.2",fill:"none",strokeWidth:"4.5"}),(0,n.jsx)("rect",{x:"40",y:"29.18",width:"28",height:"28",rx:"7",fill:"none",strokeWidth:"4.5"}),(0,n.jsx)("circle",{cx:"54",cy:"54",r:"40",fill:"none",strokeWidth:"4.5"})]}),(0,n.jsxs)("g",{stroke:"currentColor",children:[(0,n.jsx)("path",{d:"M177.71,234.79l7.72-12.2a8,8,0,0,1,6.51-3.35H213.7a8,8,0,0,1,6.51,3.35l7.71,12.2",fill:"none",strokeWidth:"4.5"}),(0,n.jsx)("rect",{x:"188.82",y:"178.84",width:"28",height:"28",rx:"7",fill:"none",strokeWidth:"4.5"}),(0,n.jsx)("circle",{cx:"202.82",cy:"203.66",r:"40",fill:"none",strokeWidth:"4.5"})]})]})}const Qd=(0,b.ZL)()(e=>({root:{display:"flex",flexDirection:"column",gap:e.spacing(2.5)},icon:{display:"flex",justifyContent:"center",color:e.palette.primary.main}}));function Yd(){const{classes:e}=Qd(),{signIn:t}=(0,Fe.xJ)();return(0,n.jsxs)("div",{className:e.root,children:[(0,n.jsx)("div",{className:e.icon,children:(0,n.jsx)(Wd,{width:192})}),(0,n.jsx)(ie.Z,{variant:"body1",children:(0,n.jsxs)(n.Fragment,{children:["Create a Foxglove account to:",(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"Sync your layouts across multiple devices"}),(0,n.jsx)("li",{children:"Share your layouts with others"}),(0,n.jsx)("li",{children:"Manage and store your robotics data"})]})]})}),(0,n.jsx)(U.Z,{variant:"contained",color:"primary",onClick:t,children:"Sign in"})]})}function Hd(){const[e,t]=(0,c.useState)(!0);return(0,n.jsxs)(Ze.Z,{open:e,onClose:()=>t(!1),children:[(0,n.jsx)(te.Z,{alignItems:"end",children:(0,n.jsx)(K.Z,{onClick:()=>t(!1),children:(0,n.jsx)(Je.Z,{})})}),(0,n.jsx)(te.Z,{padding:3,children:(0,n.jsx)(Yd,{})})]})}var Vd="../../packages/studio-base/src/components/StudioLogsSettings/useStudioLogsSettingsTree.ts";const Xd=ve.ZP.getLogger(Vd);function Kd(){const e=_();return(0,c.useMemo)(()=>{const t=new Map,s={Settings:{label:"Settings",fields:{level:{label:"level",input:"select",value:e.globalLevel,options:[{label:"error",value:"error"},{label:"warn",value:"warn"},{label:"info",value:"info"},{label:"debug",value:"debug"}]}}}},o={label:"Misc",defaultExpansionState:"expanded",children:{}};for(const a of e.channels){const r=a.name,l=r.split("/"),d=/^(studio\/)/.test(r)?`${l.shift()}/`:"",[p,h,f,g,...y]=l;if(p!=="packages"){o.children[r]={label:r,visible:a.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:a.name});continue}if(!h)continue;if(f!=="src"||!g){o.children[a.name]={label:a.name,visible:a.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:a.name});continue}const S=s[h]??={label:h,visible:!1,children:{}};t.set(h,{type:"prefix",fullPath:`${d}packages/${h}`});const N=S.children[g]??={label:g,visible:!1};if(a.enabled&&(S.visible=!0,N.visible=!0),(0,oe.extname)(g)){t.set(`${h}/${g}`,{type:"channel",fullPath:`${d}packages/${h}/src/${g}`});continue}if(t.set(`${h}/${g}`,{type:"prefix",fullPath:`${d}packages/${h}/src/${g}`}),y.length>0){N.children??={};const k=y.join("/");N.children[k]={label:k,visible:a.enabled},t.set(`${h}/${g}/${k}`,{type:"channel",fullPath:`${d}packages/${h}/src/${g}/${k}`})}}return s.misc=o,{enableFilter:!0,actionHandler:a=>{if(Xd.debug("action",a),a.action==="update"&&a.payload.path.join(".")==="Settings.level"){if(typeof a.payload.value!="string")return;e.setGlobalLevel((0,ve.A_)(a.payload.value));return}if(a.action!=="update"||a.payload.input!=="boolean")return;const r=a.payload.path;if(r[r.length-1]!=="visible")return;const d=a.payload.value===!0,h=r.slice(0,r.length-1).join("/"),f=t.get(h);switch(f?.type){case"prefix":d?e.enablePrefix(f.fullPath):e.disablePrefix(f.fullPath);break;case"channel":d?e.enableChannel(f.fullPath):e.disableChannel(f.fullPath);break;default:break}},nodes:s}},[e])}function $d(){const e=Kd();return(0,n.jsx)(Sa,{settings:e})}var ms=i(4812);const Po=(0,c.createContext)(void 0);Po.displayName="LayoutManagerContext";function Mo(){const e=(0,c.useContext)(Po);if(e==null)throw new Error("A LayoutManager provider is required to useLayoutManager");return e}const Jd=Po;var qd="../../packages/studio-base/src/components/CurrentLayoutSyncAdapter.tsx";const _d=ve.ZP.getLogger(qd),Za={},eu=1e3,tu=e=>e.selectedLayout;function nu(){const e=(0,ut.NS)(tu),t=Mo(),[s,o]=(0,c.useState)(Za),a=(0,ds.Z)(),r=(0,$e.z)();(0,c.useEffect)(()=>{e?.edited===!0&&o(p=>({...p,[e.id]:e}))},[e]);const[l,d]=(0,fo.Nr)(s,eu);return(0,c.useEffect)(()=>()=>{d.flush(),d.cancel()},[d]),(0,ms.Z)(async()=>{const p={...l};o(Za);for(const h of Object.values(p))try{await t.updateLayout(h)}catch(f){_d.error(f),a()&&(0,ce.yv)(`Your changes could not be saved. ${f.toString()}`,{variant:"error",key:"CurrentLayoutProvider.throttledSave"})}r.logEvent(Me.q.LAYOUT_UPDATE)},[r,l,a,t]),null}function su(e,t){const s=new URL(e.href);return"layoutId"in t&&(t.layoutId?s.searchParams.set("layoutId",t.layoutId):s.searchParams.delete("layoutId")),"time"in t&&(t.time?s.searchParams.set("time",(0,he.toRFC3339String)(t.time)):s.searchParams.delete("time")),"ds"in t&&(t.ds?s.searchParams.set("ds",t.ds):s.searchParams.delete("ds")),"dsParams"in t&&([...s.searchParams].forEach(([o,a])=>{o.startsWith("ds.")&&s.searchParams.delete(o)}),Object.entries(t.dsParams??"").forEach(([o,a])=>{s.searchParams.set("ds."+o,a)})),s.searchParams.sort(),s}function Fa(e){const t=e.searchParams.get("ds")??void 0,s=e.searchParams.get("layoutId"),o=e.searchParams.get("time"),a=o==null?void 0:(0,he.fromRFC3339String)(o),r={};e.searchParams.forEach((d,p)=>{if(p&&d&&p.startsWith("ds.")){const h=p.replace(/^ds./,"");r[h]=d}});const l=(0,v.omitBy)({layoutId:s||void 0,time:a,ds:t,dsParams:(0,v.isEmpty)(r)?void 0:r},v.isEmpty);return(0,v.isEmpty)(l)?void 0:l}function ou(){if(!(typeof window>"u"))try{return Fa(new URL(window.location.href))}catch{return}}const au=e=>e.playerState.capabilities.includes(Ye.C.playbackControl),iu=e=>e.playerState.activeData?.currentTime,ru=e=>e.playerState.urlState,lu=e=>e.selectedEventId;function za(e){const t=su(new URL(window.location.href),e);window.history.replaceState(void 0,"",t.href)}function cu(){const e=(0,Oe.An)(ru),t=(0,ge.vE)(e),s=(0,Oe.An)(au),o=(0,Oe.An)(iu),[a]=(0,fo.Nr)(o,500,{maxWait:500}),r=Z(lu);(0,c.useEffect)(()=>{za({time:s?a:void 0})},[s,a]),(0,c.useEffect)(()=>{t!=null&&za({ds:t.sourceId,dsParams:(0,v.pickBy)({...t.parameters,eventId:r},v.isString)})},[r,t])}function du(){return cu(),null}function uu(){const{syncAdapters:e}=(0,Tt.b)();return(0,c.useMemo)(()=>e?(0,n.jsxs)(n.Fragment,{children:[...e]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(du,{}),(0,n.jsx)(nu,{})]}),[e])}var pu=i(16037),fu=i(29796),hu=i(2784);const gu=e=>({item:e,score:0,positions:new Set,start:0,end:0}),Ga=({str:e,indices:t,color:s,offset:o=0})=>{const r=e.split("").map((l,d)=>t.has(d+o)?(0,n.jsx)(ie.Z,{component:"b",variant:"inherit",color:s??"info.main",children:l},d):l);return(0,n.jsx)(n.Fragment,{children:r})},Ua=(0,b.ZL)()(e=>({appBar:{top:0,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},listItem:{paddingRight:e.spacing(1),"&.MuiListItem-dense":{".MuiListItemText-root":{marginTop:e.spacing(.5),marginBottom:e.spacing(.5)}},".MuiListItemSecondaryAction-root":{marginRight:e.spacing(-1)}},textField:{".MuiOutlinedInput-notchedOutline":{border:"none"}},aliasedTopicName:{color:e.palette.primary.main,display:"block",textAlign:"start"},startAdornment:{display:"flex"}})),mu=({playerState:e})=>e.presence,yu=({sortedTopics:e})=>e;function Au({topic:e,positions:t}){const{classes:s}=Ua();return(0,n.jsx)(Yn.ZP,{className:s.listItem,divider:!0,secondaryAction:(0,n.jsxs)(te.Z,{style:{textAlign:"right"},children:[(0,n.jsx)(ie.Z,{variant:"caption",color:"text.secondary","data-topic":e.name,"data-topic-stat":"count",children:"\u2014"}),(0,n.jsx)(ie.Z,{variant:"caption",color:"text.secondary","data-topic":e.name,"data-topic-stat":"frequency",children:"\u2014"})]}),children:(0,n.jsx)(Sn.Z,{primary:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ga,{str:e.name,indices:t}),e.aliasedFromName&&(0,n.jsxs)(ie.Z,{variant:"caption",className:s.aliasedTopicName,children:["from ",e.aliasedFromName]})]}),primaryTypographyProps:{noWrap:!0,title:e.name},secondary:e.schemaName==null?"\u2014":(0,n.jsx)(Ga,{str:e.schemaName,indices:t,offset:e.name.length+1}),secondaryTypographyProps:{variant:"caption",fontFamily:vt.R.MONOSPACE,noWrap:!0,title:e.schemaName},style:{marginRight:"48px"}})},e.name)}const vu=hu.memo(Au);function bu(){const{classes:e,cx:t}=Ua(),[s,o]=(0,c.useState)(""),a=(0,Oe.An)(mu),r=(0,Oe.An)(yu),l=(0,c.useMemo)(()=>s?new pu.Av(r,{fuzzy:s.length>2?"v2":!1,sort:!0,selector:d=>`${d.name}|${d.schemaName}`}).find(s):r.map(d=>gu(d)),[s,r]);return a===Ye.m.NOT_PRESENT?(0,n.jsx)(Hn.Z,{children:"No data source selected"}):a===Ye.m.ERROR?(0,n.jsx)(Hn.Z,{children:"An error occurred"}):a===Ye.m.INITIALIZING?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Mt.Z,{disabled:!0,className:e.textField,fullWidth:!0,placeholder:"Waiting for data...",InputProps:{size:"small",startAdornment:(0,n.jsx)(ws.Z,{fontSize:"small"})}})}),(0,n.jsx)(Qn.Z,{dense:!0,disablePadding:!0,children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(d=>(0,n.jsx)(Yn.ZP,{className:t(e.listItem,"loading"),divider:!0,children:(0,n.jsx)(Sn.Z,{primary:(0,n.jsx)(Jn.Z,{animation:!1,width:"20%"}),secondary:(0,n.jsx)(Jn.Z,{animation:"wave",width:"55%"}),secondaryTypographyProps:{variant:"caption"}})},d))},"loading")]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Mt.Z,{id:"topic-filter",variant:"filled",disabled:a!==Ye.m.PRESENT,onChange:d=>o(d.target.value),value:s,className:e.textField,fullWidth:!0,placeholder:"Filter by topic or datatype\u2026",InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:e.startAdornment,htmlFor:"topic-filter",children:(0,n.jsx)(ws.Z,{fontSize:"small"})}),endAdornment:s&&(0,n.jsx)(K.Z,{size:"small",title:"Clear search",onClick:()=>o(""),edge:"end",children:(0,n.jsx)(Ms.Z,{fontSize:"small"})})}})}),l.length>0?(0,n.jsx)(Qn.Z,{dense:!0,disablePadding:!0,children:l.map(({item:d,positions:p})=>(0,n.jsx)(vu,{topic:d,positions:p},d.name))},"topics"):(0,n.jsxs)(Hn.Z,{children:[a===Ye.m.PRESENT&&s?`No topics or datatypes matching 
 \u201C${s}\u201D`:"No topics available. ",a===Ye.m.RECONNECTING&&"Waiting for connection"]}),(0,n.jsx)(fu.v,{interval:6})]})}var Wa=i(36423),xu=i(33459),Cu=i(47824),Eu=i(2784);const Su=(0,b.ZL)()((e,t,s)=>({root:{"@media (pointer: fine)":{[`&:not(:hover) .${s.copyButton}`]:{visibility:"hidden"}}},copyButton:{top:0,right:0,zIndex:e.zIndex.mobileStepper,"&.MuiButton-root":{position:"absolute",paddingLeft:e.spacing(1),paddingRight:e.spacing(1),margin:e.spacing(.75),minWidth:"auto"}},input:{font:"inherit",flex:"auto",".MuiInputBase-input":{padding:0},"&.Mui-error":{color:e.palette.error.main}},edgeEnd:{marginRight:e.spacing(-1.625)},editorWrapper:{position:"relative",backgroundColor:e.palette.grey[50]},listItemButton:{"&:focus-within":{backgroundColor:"transparent"},"&.Mui-selected":{color:e.palette.primary.main,transition:"background-color 300ms ease-in-out"}},listItemText:{marginTop:e.spacing(.125),marginBottom:e.spacing(.125)}})),Tu=(e,t,s,o,a)=>{const r=Object.keys(s);a({...(0,v.pick)(s,r.slice(0,o)),[e]:s[t],...(0,v.pick)(s,r.slice(o+1))})};function Iu(e){const{name:t,selected:s=!1,index:o}=e,{classes:a}=Su(),[r,l]=(0,c.useState)(),[d,p]=(0,c.useState)(!0),[h,f]=Eu.useState(void 0),[g,y]=(0,c.useState)(!1),S=Boolean(h),{globalVariables:N,setGlobalVariables:k,overwriteGlobalVariables:W}=(0,Wa.Z)(),J=Ue=>{f(Ue.currentTarget)},pe=()=>{f(void 0)},ye=(0,$e.z)(),fe=(0,c.useCallback)(()=>{k({[t]:void 0}),ye.logEvent(Me.q.VARIABLE_DELETE),pe()},[ye,t,k]),de=(0,c.useMemo)(()=>N[t],[N,t]),ee=(0,c.useCallback)(Ue=>{k({[t]:Ue}),y(!1)},[t,k]),Pe=()=>{r!=null&&N[r]==null&&t!==r&&Tu(r,t,N,o,W),l(void 0)},Ae=(0,c.useRef)(null),at=Ae.current?.contains(document.activeElement)===!0,pt=s&&!at,xe=r!=null&&r!==t&&N[r]!=null,ke=(0,c.useCallback)(()=>JSON.stringify(de,void 0,2)??"",[de]);return(0,n.jsxs)(te.Z,{className:a.root,ref:Ae,children:[(0,n.jsx)(Yn.ZP,{dense:!0,disablePadding:!0,secondaryAction:(0,n.jsxs)(te.Z,{className:a.edgeEnd,direction:"row",alignItems:"center",gap:.25,children:[(0,n.jsx)(K.Z,{size:"small",id:"variable-action-button","data-testid":"variable-action-button","aria-controls":d?"variable-action-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:J,children:(0,n.jsx)(lo.Z,{fontSize:"small"})}),(0,n.jsx)(De.Z,{id:"variable-action-menu",anchorEl:h,open:S,onClose:pe,MenuListProps:{"aria-labelledby":"variable-action-button",dense:!0},children:(0,n.jsx)(Ve.Z,{onClick:fe,children:(0,n.jsx)(ie.Z,{color:"error.main",variant:"inherit",children:"Delete variable"})})})]}),children:(0,n.jsx)(ao.Z,{className:a.listItemButton,selected:pt,onClick:()=>p(!d),children:(0,n.jsx)(Sn.Z,{className:a.listItemText,primary:(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",style:{marginLeft:-12},children:[(0,n.jsx)(Kn.Z,{style:{transform:d?void 0:"rotate(-90deg)"}}),(0,n.jsx)(xu.ZP,{className:a.input,autoFocus:t==="",error:xe,value:r??t,placeholder:"variable_name","data-testid":`global-variable-key-input-${t}`,onClick:Ue=>Ue.stopPropagation(),onFocus:()=>r===""&&p(!0),onChange:Ue=>l(Ue.target.value),onBlur:Pe,endAdornment:xe&&(0,n.jsx)(Y.Z,{arrow:!0,title:"A variable with this name already exists. Please select a unique variable name to save changes.",children:(0,n.jsx)(co.Z,{className:a.edgeEnd,fontSize:"small",color:"error"})})})]}),primaryTypographyProps:{component:"div",fontWeight:600,variant:"body2"}})})}),d&&(0,n.jsxs)("div",{className:a.editorWrapper,children:[(0,n.jsx)(Xe.Z,{}),(0,n.jsx)(Eo.Z,{className:a.copyButton,size:"small",color:g?"primary":"inherit",getText:ke,children:g?"Copied":"Copy"}),(0,n.jsx)(Cu.Z,{value:de,onChange:ee})]}),(0,n.jsx)(Xe.Z,{})]})}const Qa=1500;function Pu(){const{globalVariables:e,setGlobalVariables:t}=(0,Wa.Z)(),s=(0,c.useMemo)(()=>Object.keys(e),[e]),o=(0,c.useRef)(!0),a=(0,$e.z)();(0,c.useEffect)(()=>{const p=setTimeout(()=>o.current=!1,Qa);return()=>clearTimeout(p)},[]);const r=(0,c.useRef)(e),[l,d]=(0,c.useState)([]);return(0,c.useEffect)(()=>{if(o.current){r.current=e;return}const p=(0,v.union)(Object.keys(e),Object.keys(r.current??{})).filter(f=>r.current?.[f]!==e[f]);d(p),r.current=e;const h=setTimeout(()=>d([]),Qa);return()=>clearTimeout(h)},[e,o]),(0,n.jsxs)(te.Z,{flex:"auto",fullWidth:!0,overflowX:"auto",children:[s.map((p,h)=>(0,n.jsx)(Iu,{name:p,selected:!o.current&&l.includes(p),index:h},p)),(0,n.jsx)(te.Z,{direction:"row",padding:1,children:(0,n.jsx)(U.Z,{color:"inherit",fullWidth:!0,"data-testid":"add-variable-button",variant:"contained",disabled:e[""]!=null,onClick:()=>{t({"":'""'}),a.logEvent(Me.q.VARIABLE_ADD)},children:"Add variable"},"add-global-variable")})]})}var Mu=i(89025),wu=i(13787),ys=i(2940);const Ya=i.g.ctxbridge,Bu=(0,b.ZL)()({checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}}});function Du(){const{t:e}=(0,X.$G)("appSettings");return[{key:C.o.SHOW_DEBUG_PANELS,name:e("studioDebugPanels"),description:(0,n.jsx)(n.Fragment,{children:e("studioDebugPanelsDescription")})},{key:C.o.ENABLE_MEMORY_USE_INDICATOR,name:e("memoryUseIndicator"),description:(0,n.jsx)(n.Fragment,{children:e("memoryUseIndicatorDescription")})}]}function ju(e){const{feature:t}=e,{classes:s}=Bu(),o=(0,$e.z)(),[a,r]=(0,_t.b)(t.key);return(0,n.jsx)(ys.Z,{className:s.formControlLabel,control:(0,n.jsx)($n.Z,{className:s.checkbox,checked:a??!1,onChange:(l,d)=>{r(d),o.logEvent(Me.q.EXPERIMENTAL_FEATURE_TOGGLE,{feature:t.key,checked:d})}}),label:(0,n.jsxs)(te.Z,{gap:.25,paddingLeft:.5,children:[(0,n.jsx)(ie.Z,{fontWeight:600,children:t.name}),(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",children:t.description})]})})}const Ru=()=>{const e=Du(),{t}=(0,X.$G)("appSettings");return(0,n.jsxs)(te.Z,{gap:2,children:[e.length===0&&(0,n.jsx)(ie.Z,{fontStyle:"italic",children:t("noExperimentalFeatures")}),e.map(s=>(0,n.jsx)(ju,{feature:s},s.key))]})};var Lu=i(46964),Nu=i(49436);const Ha=(0,c.createContext)(()=>{});Ha.displayName="LinkHandlerContext";const Ou=Ha,ku=(0,b.D2)("div",e=>{const{palette:t,shape:s,spacing:o,typography:a,shadows:r}=e;return{root:{fontFamily:a.body2.fontFamily,fontSize:a.body2.fontSize,fontWeight:a.body2.fontWeight,lineHeight:a.body2.lineHeight,backgroundColor:"transparent",color:t.text.secondary,"h1, h2, h3, h4, h5, h6":{color:t.text.primary,"&:first-child":{marginTop:0}},h1:{fontFamily:a.h4.fontFamily,fontSize:a.h4.fontSize,lineHeight:a.h4.lineHeight,marginBottom:o(1),fontWeight:500},h2:{fontFamily:a.h5.fontFamily,fontSize:a.h5.fontSize,lineHeight:a.h5.lineHeight,marginBottom:o(1),fontWeight:500},h3:{fontFamily:a.h6.fontFamily,fontSize:a.h6.fontSize,lineHeight:a.h6.lineHeight,marginBottom:o(1),color:t.text.secondary,fontWeight:500},h4:{fontFamily:a.subtitle1.fontFamily,fontSize:a.subtitle1.fontSize,lineHeight:a.subtitle1.lineHeight,marginBottom:o(.5),color:t.text.secondary,fontWeight:500},"h5, h6":{fontFamily:a.body1.fontFamily,fontSize:a.body1.fontSize,lineHeight:a.body1.lineHeight,marginBottom:o(.5),color:t.text.secondary,fontWeight:500},"ol, ul":{paddingLeft:o(2.5),marginBottom:o(2.5)},li:{margin:o(.5,0)},"b, strong":{fontWeight:"700 !important"},"p, ul":{margin:o(1,0),"&:only-child":{margin:o(.5,0)}},img:{maxWidth:"100%"},pre:{whiteSpace:"pre-wrap",fontFamily:vt.R.MONOSPACE,backgroundColor:t.action.hover,padding:o(0,.5),borderRadius:r[2],code:{backgroundColor:"transparent",padding:0}},code:{fontFamily:vt.R.MONOSPACE,backgroundColor:t.action.hover,borderRadius:"0.2em",padding:o(0,.5)},kbd:{display:"inline-flex",flex:"none",fontFamily:vt.R.MONOSPACE,color:t.text.secondary,backgroundColor:t.background.default,boxShadow:`inset 0 1px 0 ${t.action.hover}`,borderRadius:s.borderRadius,fontSize:a.body2.fontSize,padding:o(0,.5),fontWeight:500,minWidth:20,alignItems:"center",justifyContent:"center"},table:{borderCollapse:"collapse",borderSpacing:0,margin:o(1,-.5),border:`1px solid ${t.divider}`},"td, th":{padding:o(.5),borderBottom:`1px solid ${t.divider}`,borderRight:`1px solid ${t.divider}`,"&:last-child":{borderRight:"none"}},th:{whiteSpace:"nowrap"},tr:{"&:last-child":{"td, th":{borderBottom:"none"}}}}}});function Va(e){const{children:t,style:s,allowMarkdownHtml:o}=e,a=(0,c.useContext)(Ou),r=(0,c.useCallback)(l=>(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",variant:"inherit",href:l.href,rel:"noopener noreferrer",onClick:d=>a(d,l.href??""),target:"_blank",children:l.children}),[a]);return(0,n.jsx)(ku,{style:s,children:typeof t=="string"?(0,n.jsx)(Lu.D,{rehypePlugins:o===!0?[Nu.Z]:[],components:{a:r},children:t}):t})}var In=i(51390);const wo=(0,c.createContext)(void 0);wo.displayName="ExtensionMarketplaceContext";function Xa(){const e=(0,c.useContext)(wo);if(e==null)throw new Error("An ExtensionMarketplaceContext provider is required to useExtensionMarketplace");return e}const Zu=wo;var Ln=i(61969);const Fu=(0,b.ZL)()(e=>({backButton:{marginLeft:e.spacing(-1.5),marginBottom:e.spacing(1)},installButton:{minWidth:100}}));function zu({extension:e,onClose:t,installed:s}){const{classes:o}=Fu(),[a,r]=(0,c.useState)(s),[l,d]=(0,c.useState)(0),p=(0,ds.Z)(),h=(0,In.I)(Pe=>Pe.downloadExtension),f=(0,In.I)(Pe=>Pe.installExtension),g=(0,In.I)(Pe=>Pe.uninstallExtension),y=Xa(),{enqueueSnackbar:S}=(0,ce.Ds)(),N=e.readme,k=e.changelog,W=e.foxe!=null,J=e.namespace!=="org",{value:pe}=(0,ms.Z)(async()=>N!=null?await y.getMarkdown(N):"",[y,N]),{value:ye}=(0,ms.Z)(async()=>k!=null?await y.getMarkdown(k):"",[y,k]),fe=(0,$e.z)(),de=(0,c.useCallback)(async()=>{if(!(0,Ln.Z)()){S("Download the desktop app to use marketplace extensions.",{variant:"error"});return}const Pe=e.foxe;try{if(Pe==null)throw new Error(`Cannot install extension ${e.id}, "foxe" URL is missing`);const Ae=await h(Pe);await f("local",Ae),p()&&(r(!0),fe.logEvent(Me.q.EXTENSION_INSTALL,{type:e.id}))}catch(Ae){S(`Failed to download extension ${e.id}. ${Ae.message}`,{variant:"error"})}},[fe,h,S,e.foxe,e.id,f,p]),ee=(0,c.useCallback)(async()=>{await g(e.namespace??"local",e.id),p()&&(r(!1),fe.logEvent(Me.q.EXTENSION_UNINSTALL,{type:e.id}))},[fe,e.id,e.namespace,p,g]);return(0,n.jsxs)(te.Z,{fullHeight:!0,flex:"auto",gap:1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(U.Z,{className:o.backButton,onClick:t,size:"small",startIcon:(0,n.jsx)(oo.Z,{}),children:"Back"}),(0,n.jsx)(ie.Z,{variant:"h3",fontWeight:500,children:e.name})]}),(0,n.jsxs)(te.Z,{gap:1,alignItems:"flex-start",children:[(0,n.jsxs)(te.Z,{gap:.5,paddingBottom:1,children:[(0,n.jsxs)(te.Z,{direction:"row",gap:1,alignItems:"baseline",children:[(0,n.jsx)(sn.Z,{variant:"body2",color:"primary",href:e.homepage,target:"_blank",underline:"hover",children:e.id}),(0,n.jsx)(ie.Z,{variant:"caption",color:"text.secondary",children:`v${e.version}`}),(0,n.jsx)(ie.Z,{variant:"caption",color:"text.secondary",children:e.license})]}),(0,n.jsx)(ie.Z,{variant:"subtitle2",gutterBottom:!0,children:e.publisher}),(0,n.jsx)(ie.Z,{variant:"body2",gutterBottom:!0,children:e.description})]}),a&&J?(0,n.jsx)(U.Z,{className:o.installButton,size:"small",color:"inherit",variant:"contained",onClick:ee,children:"Uninstall"},"uninstall"):W&&(0,n.jsx)(U.Z,{className:o.installButton,size:"small",color:"inherit",variant:"contained",onClick:de,children:"Install"},"install")]}),(0,n.jsxs)(te.Z,{paddingTop:2,style:{marginLeft:-16,marginRight:-16},children:[(0,n.jsxs)(Ps.Z,{textColor:"inherit",value:l,onChange:(Pe,Ae)=>d(Ae),children:[(0,n.jsx)(pn.Z,{disableRipple:!0,label:"README",value:0}),(0,n.jsx)(pn.Z,{disableRipple:!0,label:"CHANGELOG",value:1})]}),(0,n.jsx)(Xe.Z,{})]}),(0,n.jsxs)(te.Z,{flex:"auto",paddingY:2,children:[l===0&&(0,n.jsx)(Va,{children:pe}),l===1&&(0,n.jsx)(Va,{children:ye})]})]})}var Gu="../../packages/studio-base/src/components/ExtensionsSettings/index.tsx";const Uu=ve.ZP.getLogger(Gu),Wu=(0,b.ZL)()(e=>({listItemButton:{"&:hover":{color:e.palette.primary.main}}}));function Qu(e){switch(e){case"org":return"Organization";default:return e}}function Ka(e){const{entry:{id:t,description:s,name:o,publisher:a,version:r},onClick:l}=e,{classes:d}=Wu();return(0,n.jsx)(Yn.ZP,{disablePadding:!0,children:(0,n.jsx)(ao.Z,{className:d.listItemButton,onClick:l,children:(0,n.jsx)(Sn.Z,{disableTypography:!0,primary:(0,n.jsxs)(te.Z,{direction:"row",alignItems:"baseline",gap:.5,children:[(0,n.jsx)(ie.Z,{variant:"subtitle2",fontWeight:600,children:o}),(0,n.jsx)(ie.Z,{variant:"caption",color:"text.secondary",children:r})]}),secondary:(0,n.jsxs)(te.Z,{gap:.5,children:[(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",children:s}),(0,n.jsx)(ie.Z,{color:"text.primary",variant:"body2",children:a})]})})})},t)}function Yu(){const[e,t]=(0,c.useState)(void 0),s=(0,In.I)(f=>f.installedExtensions),o=Xa(),[a,r]=(0,So.Z)(async()=>await o.getAvailableExtensions(),[o]),l=(0,c.useMemo)(()=>(0,v.keyBy)(a.value??[],f=>f.id),[a]),d=(0,c.useMemo)(()=>(s??[]).map(f=>{const g=l[f.id];return g!=null?{...g,namespace:f.namespace}:{id:f.id,installed:!0,name:f.displayName,displayName:f.displayName,description:f.description,publisher:f.publisher,homepage:f.homepage,license:f.license,version:f.version,keywords:f.keywords,namespace:f.namespace,qualifiedName:f.qualifiedName}}),[s,l]),p=(0,c.useMemo)(()=>(0,v.groupBy)(d,f=>f.namespace),[d]),h=(0,c.useMemo)(()=>(0,v.differenceWith)(a.value??[],s??[],(f,g)=>f.id===g.id&&f.namespace===g.namespace),[a,s]);return(0,c.useEffect)(()=>{r().catch(f=>Uu.error(f))},[r]),e!=null?(0,n.jsx)(zu,{installed:e.installed,extension:e.entry,onClose:()=>t(void 0)}):a.error?(0,n.jsxs)(te.Z,{gap:1,alignItems:"center",justifyContent:"center",fullHeight:!0,children:[(0,n.jsx)(ie.Z,{align:"center",variant:"body2",color:"text.secondary",children:"Failed to fetch the list of available extensions. Check your Internet connection and try again."}),(0,n.jsx)(U.Z,{onClick:async()=>await r(),children:"Retry Fetching Extensions"})]}):(0,n.jsxs)(te.Z,{gap:1,children:[(0,v.isEmpty)(p)?(0,n.jsx)(Qn.Z,{children:(0,n.jsx)(Yn.ZP,{children:(0,n.jsx)(Sn.Z,{primary:"No installed extensions"})})}):Object.entries(p).map(([f,g])=>(0,n.jsxs)(Qn.Z,{children:[(0,n.jsx)(te.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(ie.Z,{component:"li",variant:"overline",color:"text.secondary",children:Qu(f)})}),g.map(y=>(0,n.jsx)(Ka,{entry:y,onClick:()=>t({installed:!0,entry:y})},`${y.id}`))]},f)),(0,n.jsxs)(Qn.Z,{children:[(0,n.jsx)(te.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(ie.Z,{component:"li",variant:"overline",color:"text.secondary",children:"Available"})}),h.map(f=>(0,n.jsx)(Ka,{entry:f,onClick:()=>t({installed:!1,entry:f})},`${f.id}_${f.namespace}`))]})]})}var Hu=i(27045),$a=i(86231),Vu=i(10222),Xu=i(85584),Ku=i(55404),$u=i(54764),Os=i.n($u),Ja=i(2661),xt;(function(e){e.ASK="ask",e.WEB="web",e.DESKTOP="desktop"})(xt||(xt={}));const Ju=[1,3,5,10,15,20,30,60],qu=[{key:"en",value:"English"},{key:"zh",value:"\u4E2D\u6587"},{key:"ja",value:"\u65E5\u672C\u8A9E"}],ks=(0,b.ZL)()(e=>({autocompleteInput:{"&.MuiOutlinedInput-input":{padding:0}},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},toggleButton:{display:"flex !important",flexDirection:"column",gap:e.spacing(.75),lineHeight:"1 !important"}}));function Bo(e){const t=Os().tz(e),s=t.zoneAbbr(),o=t.utcOffset(),a=(o>=0?"+":"")+Os().duration(o,"minutes").format("hh:mm",{trim:!1});return e===s?`${s} (${a})`:`${e} (${s}, ${a})`}function _u(){const{classes:e}=ks(),[t="system",s]=(0,_t.b)(C.o.COLOR_SCHEME),{t:o}=(0,X.$G)("appSettings"),a=(0,c.useCallback)((r,l)=>{l!=null&&s(l)},[s]);return(0,n.jsxs)(te.Z,{children:[(0,n.jsxs)(Rn.Z,{children:[o("colorScheme"),":"]}),(0,n.jsxs)(Vn.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:t,onChange:a,children:[(0,n.jsxs)(Yt.Z,{className:e.toggleButton,value:"dark",children:[(0,n.jsx)(Vu.Z,{})," ",o("dark")]}),(0,n.jsxs)(Yt.Z,{className:e.toggleButton,value:"light",children:[(0,n.jsx)(Hu.Z,{})," ",o("light")]}),(0,n.jsxs)(Yt.Z,{className:e.toggleButton,value:"system",children:[(0,n.jsx)($a.Z,{})," ",o("followSystem")]})]})]})}function ep(){const{classes:e}=ks(),{t}=(0,X.$G)("appSettings"),[s,o]=(0,_t.b)(C.o.TIMEZONE),a=(0,c.useMemo)(()=>({key:"detect",label:`Detect from system: ${Bo(Os().tz.guess())}`,data:void 0}),[]),r=(0,c.useMemo)(()=>[a,{key:"zone:UTC",label:`${Bo("UTC")}`,data:"UTC"},{key:"sep",label:"",divider:!0}],[a]),l=(0,c.useMemo)(()=>(0,on.Z)(Os().tz.names(),h=>{if(h!=="UTC")return{key:`zone:${h}`,label:Bo(h),data:h}}),[]),d=(0,c.useMemo)(()=>[...r,...l],[r,l]),p=(0,c.useMemo)(()=>s!=null&&d.find(h=>h.data===s)||a,[d,a,s]);return(0,n.jsxs)(Ta.Z,{fullWidth:!0,children:[(0,n.jsxs)(ie.Z,{color:"text.secondary",marginBottom:.5,children:[t("displayTimestampsIn"),":"]}),(0,n.jsx)(fa.Z,{options:[...r,...l],value:p,renderOption:(h,f)=>f.divider===!0?(0,n.jsx)(Xe.Z,{},f.key):(0,c.createElement)("li",{...h,key:f.key},f.label),renderInput:h=>(0,n.jsx)(Mt.Z,{...h,inputProps:{...h.inputProps,className:e.autocompleteInput}}),onChange:(h,f)=>void o(f?.data)})]})}function tp({orientation:e="vertical"}){const{timeFormat:t,setTimeFormat:s}=(0,ht.v)(),{t:o}=(0,X.$G)("appSettings"),[a]=(0,_t.b)(C.o.TIMEZONE),r={sec:946713600,nsec:0};return(0,n.jsxs)(te.Z,{children:[(0,n.jsxs)(Rn.Z,{children:[o("timestampFormat"),":"]}),(0,n.jsxs)(Vn.Z,{color:"primary",size:"small",orientation:e,fullWidth:!0,exclusive:!0,value:t,onChange:(l,d)=>d!=null&&void s(d),children:[(0,n.jsx)(Yt.Z,{value:"SEC","data-testid":"timeformat-seconds",children:(0,qn.Eo)(r)}),(0,n.jsx)(Yt.Z,{value:"TOD","data-testid":"timeformat-local",children:(0,hs.mr)(r,a)})]})]})}function np(){const{classes:e}=ks(),{t}=(0,X.$G)("appSettings"),[s,o]=(0,_t.b)(C.o.LAUNCH_PREFERENCE);let a;switch(s){case xt.WEB:case xt.DESKTOP:case xt.ASK:a=s;break;default:a=xt.WEB}return(0,n.jsxs)(te.Z,{children:[(0,n.jsxs)(Rn.Z,{children:[t("openLinksIn"),":"]}),(0,n.jsxs)(Vn.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:a,onChange:(r,l)=>l!=null&&void o(l),children:[(0,n.jsxs)(Yt.Z,{value:xt.WEB,className:e.toggleButton,children:[(0,n.jsx)(Ku.Z,{})," ",t("webApp")]}),(0,n.jsxs)(Yt.Z,{value:xt.DESKTOP,className:e.toggleButton,children:[(0,n.jsx)($a.Z,{})," ",t("desktopApp")]}),(0,n.jsxs)(Yt.Z,{value:xt.ASK,className:e.toggleButton,children:[(0,n.jsx)(Xu.Z,{})," ",t("askEachTime")]})]})]})}function sp(){const{t:e}=(0,X.$G)("appSettings"),[t,s]=(0,_t.b)(C.o.MESSAGE_RATE),o=(0,c.useMemo)(()=>Ju.map(a=>({key:a,text:`${a}`,data:a})),[]);return(0,n.jsxs)(te.Z,{children:[(0,n.jsxs)(Rn.Z,{children:[e("messageRate")," (Hz):"]}),(0,n.jsx)(uo.Z,{value:t??60,fullWidth:!0,onChange:a=>void s(a.target.value),children:o.map(a=>(0,n.jsx)(Ve.Z,{value:a.key,children:a.text},a.key))})]})}function op(){const[e=!0,t]=(0,_t.b)(C.o.UPDATES_ENABLED),{classes:s}=ks();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ie.Z,{color:"text.secondary",marginBottom:.5,children:"Updates:"}),(0,n.jsx)(ys.Z,{className:s.formControlLabel,control:(0,n.jsx)($n.Z,{className:s.checkbox,checked:e,onChange:(o,a)=>void t(a)}),label:"Automatically install updates"})]})}function ap(){const[e,t]=(0,_t.b)(C.o.ROS_PACKAGE_PATH),s=(0,c.useMemo)(()=>Ya?.getEnvVar("ROS_PACKAGE_PATH"),[]);return(0,n.jsx)(Mt.Z,{fullWidth:!0,label:"ROS_PACKAGE_PATH",placeholder:s,value:e??"",onChange:o=>void t(o.target.value)})}function ip(){const{t:e,i18n:t}=(0,X.$G)("appSettings"),[s="en",o]=(0,_t.b)(C.o.LANGUAGE),a=(0,c.useCallback)(l=>{const d=l.target.value;o(d),t.changeLanguage(d).catch(p=>{console.error("Failed to switch languages",p),(0,Ja.e)(p)})},[t,o]),r=(0,c.useMemo)(()=>qu.map(l=>({key:l.key,text:`${l.value}`,data:l.key})),[]);return(0,n.jsxs)(te.Z,{children:[(0,n.jsxs)(Rn.Z,{children:[e("language"),":"]}),(0,n.jsx)(uo.Z,{value:s,fullWidth:!0,onChange:a,children:r.map(l=>(0,n.jsx)(Ve.Z,{value:l.key,children:l.text},l.key))})]})}const rp=(0,b.ZL)()(e=>({layoutGrid:{display:"grid",gap:e.spacing(2),height:"70vh",paddingLeft:e.spacing(1),overflowY:"hidden",[e.breakpoints.up("sm")]:{gridTemplateColumns:"auto minmax(0, 1fr)"}},logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},tabPanel:{display:"none",marginRight:"-100%",width:"100%",padding:e.spacing(0,4,4)},tabPanelActive:{display:"block"},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},dialogActions:{position:"sticky",backgroundColor:e.palette.background.paper,borderTop:`${e.palette.divider} 1px solid`,padding:e.spacing(1),bottom:0},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},tab:{svg:{fontSize:"inherit"},"> span, > .MuiSvgIcon-root":{display:"flex",color:e.palette.primary.main,marginRight:e.spacing(1.5),height:e.typography.pxToRem(21),width:e.typography.pxToRem(21)},[e.breakpoints.up("sm")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("sm")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),Zs=new Map([["resources",{subheader:"External resources",links:[...(0,Ln.Z)()?[]:[{title:"Desktop app",url:"https://foxglove.dev/download"}],{title:"Browse docs",url:"https://foxglove.dev/docs"},{title:"Join our community",url:"https://foxglove.dev/community"}]}],["products",{subheader:"Products",links:[{title:"Foxglove Studio",url:"https://foxglove.dev/studio"},{title:"Foxglove Data Platform",url:"https://foxglove.dev/data-platform"}]}],["contact",{subheader:"Contact",links:[{title:"Give feedback",url:"https://foxglove.dev/contact"},{title:"Schedule a demo",url:"https://foxglove.dev/demo"}]}],["legal",{subheader:"Legal",links:[{title:"License terms",url:"https://foxglove.dev/legal/studio-license"},{title:"Privacy policy",url:"https://foxglove.dev/legal/privacy"}]}]]),lp=e=>e.dialogs.preferences.initialTab;function cp(e){const{t}=(0,X.$G)("appSettings"),{activeTab:s}=e,o=(0,Ke.Q)(lp),[a,r]=(0,c.useState)(s??o??"general"),[l,d]=(0,ht.b)(C.o.CRASH_REPORTING_ENABLED),[p,h]=(0,ht.b)(C.o.TELEMETRY_ENABLED),{classes:f,cx:g,theme:y}=rp(),S=(0,oa.Z)(y.breakpoints.up("sm")),N=(0,Ln.Z)()&&Ya?.platform!=="linux",k=(J,pe)=>{r(pe)},W=J=>{e.onClose!=null&&e.onClose(J,"backdropClick")};return(0,n.jsxs)(Ze.Z,{...e,fullWidth:!0,maxWidth:"md",children:[(0,n.jsxs)(te.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:3,paddingY:2,children:[(0,n.jsx)(ie.Z,{variant:"h3",fontWeight:600,children:t("settings")}),(0,n.jsx)(K.Z,{edge:"end",onClick:W,children:(0,n.jsx)(Je.Z,{})})]}),(0,n.jsxs)("div",{className:f.layoutGrid,children:[(0,n.jsxs)(Ps.Z,{classes:{indicator:f.indicator},value:a,orientation:S?"vertical":"horizontal",onChange:k,children:[(0,n.jsx)(pn.Z,{className:f.tab,label:t("general"),value:"general"}),(0,n.jsx)(pn.Z,{className:f.tab,label:t("privacy"),value:"privacy"}),(0,n.jsx)(pn.Z,{className:f.tab,label:t("extensions"),value:"extensions"}),(0,n.jsx)(pn.Z,{className:f.tab,label:t("experimentalFeatures"),value:"experimental-features"}),(0,n.jsx)(pn.Z,{className:f.tab,label:t("about"),value:"about"})]}),(0,n.jsxs)(te.Z,{direction:"row",fullHeight:!0,overflowY:"auto",children:[(0,n.jsx)("section",{className:g(f.tabPanel,{[f.tabPanelActive]:a==="general"}),children:(0,n.jsxs)(te.Z,{gap:2,children:[(0,n.jsx)(_u,{}),(0,n.jsx)(ep,{}),(0,n.jsx)(tp,{orientation:S?"horizontal":"vertical"}),(0,n.jsx)(sp,{}),(0,n.jsx)(ip,{}),N&&(0,n.jsx)(op,{}),!(0,Ln.Z)()&&(0,n.jsx)(np,{}),(0,Ln.Z)()&&(0,n.jsx)(ap,{})]})}),(0,n.jsx)("section",{className:g(f.tabPanel,{[f.tabPanelActive]:a==="privacy"}),children:(0,n.jsxs)(te.Z,{gap:2,children:[(0,n.jsx)(Wn.Z,{color:"info",icon:(0,n.jsx)(Mu.Z,{}),children:t("privacyDescription")}),(0,n.jsxs)(te.Z,{gap:.5,paddingLeft:2,children:[(0,n.jsx)(ys.Z,{className:f.formControlLabel,control:(0,n.jsx)($n.Z,{className:f.checkbox,checked:p??!0,onChange:(J,pe)=>void h(pe)}),label:t("sendAnonymizedUsageData")}),(0,n.jsx)(ys.Z,{className:f.formControlLabel,control:(0,n.jsx)($n.Z,{className:f.checkbox,checked:l??!0,onChange:(J,pe)=>void d(pe)}),label:t("sendAnonymizedCrashReports")})]})]})}),(0,n.jsx)("section",{className:g(f.tabPanel,{[f.tabPanelActive]:a==="extensions"}),children:(0,n.jsx)(te.Z,{gap:2,children:(0,n.jsx)(Yu,{})})}),(0,n.jsx)("section",{className:g(f.tabPanel,{[f.tabPanelActive]:a==="experimental-features"}),children:(0,n.jsxs)(te.Z,{gap:2,children:[(0,n.jsx)(Wn.Z,{color:"warning",icon:(0,n.jsx)(wu.Z,{}),children:t("experimentalFeaturesDescription")}),(0,n.jsx)(te.Z,{paddingLeft:2,children:(0,n.jsx)(Ru,{})})]})}),(0,n.jsx)("section",{className:g(f.tabPanel,{[f.tabPanelActive]:a==="about"}),children:(0,n.jsxs)(te.Z,{gap:2,alignItems:"flex-start",children:[(0,n.jsx)("header",{children:(0,n.jsx)(la,{color:"primary",className:f.logo})}),(0,n.jsxs)(te.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(ie.Z,{variant:"body2",children:["Foxglove Studio version ","1.60.2"]}),(0,n.jsx)(Eo.Z,{size:"small",getText:()=>"1.60.2".toString()??""})]}),[Zs.get("resources"),Zs.get("products"),Zs.get("contact"),Zs.get("legal")].map(J=>(0,n.jsxs)(te.Z,{gap:1,children:[J?.subheader&&(0,n.jsx)(ie.Z,{children:J.subheader}),J?.links.map(pe=>(0,n.jsx)(sn.Z,{variant:"body2",underline:"hover","data-testid":pe.title,href:pe.url,target:"_blank",children:pe.title},pe.title))]},J?.subheader))]})})]})]}),(0,n.jsx)(Xt.Z,{className:f.dialogActions,children:(0,n.jsx)(U.Z,{onClick:W,children:"Done"})})]})}const dp=e=>e.dialogs.preferences.open;function up(){const e=(0,Ke.Q)(dp),{dialogActions:t}=(0,Re.W)();return(0,n.jsx)(n.Fragment,{children:e&&(0,n.jsx)(cp,{id:"app-settings-dialog",open:!0,onClose:()=>t.preferences.close()})})}const Do=(0,c.createContext)(void 0);Do.displayName="NativeAppMenuContext";function qa(){return(0,c.useContext)(Do)}const pp=Do,fp=e=>e.playerState.urlState!=null;function hp(){const e=(0,Oe.An)(fp),[t,s]=(0,ge.UG)(C.o.LAUNCH_PREFERENCE);(0,c.useEffect)(()=>{(0,Ln.Z)()||e&&!t&&s(xt.WEB)},[t,s,e])}var gp="../../packages/studio-base/src/hooks/useElectronFilesToOpen.ts";const mp=ve.ZP.getLogger(gp);function yp(){const[e]=(0,c.useState)(()=>document.querySelector("#electron-open-file-input")),[t,s]=(0,c.useState)(e?.files??void 0);return(0,c.useEffect)(()=>{if(!e){mp.info("#electron-open-file-input not found - native open-file support will not be available");return}const o=()=>{s(e.files??void 0)};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}},[e]),t}var Ap="../../packages/studio-base/src/hooks/useInitialDeepLinkState.ts";const _a=e=>e.playerState.presence,vp=e=>e.seekPlayback,bp=e=>e.selectEvent,jo=ve.ZP.getLogger(Ap);function xp(e,{currentUserRequired:t}){const[s,o]=(0,c.useState)(e?{ds:e.ds,dsParams:e.dsParams}:void 0),{selectSource:a}=(0,ot.n)(),r=Z(bp),{currentUser:l}=(0,Fe.xJ)();(0,c.useEffect)(()=>{s&&(t&&!l||s.ds&&(jo.debug("Initialising source from url",s),a(s.ds,{type:"connection",params:s.dsParams}),r(s.dsParams?.eventId),o({ds:void 0,dsParams:void 0})))},[l,t,r,a,s,o])}function Cp(e,{currentUserRequired:t}){const{setSelectedLayoutId:s}=(0,ut._B)(),o=(0,Oe.An)(_a),[a,r]=(0,c.useState)(e?{layoutId:e.layoutId}:void 0);(0,c.useEffect)(()=>{a?.layoutId&&(t&&o!==Ye.m.PRESENT||(jo.debug(`Initializing layout from url: ${a.layoutId}`),s(a.layoutId),r({layoutId:void 0})))},[t,o,s,a?.layoutId])}function Ep(e){const t=(0,Oe.An)(vp),s=(0,Oe.An)(_a),[o,a]=(0,c.useState)(e?{time:e.time}:void 0);(0,c.useEffect)(()=>{o?.time==null||!t||s===Ye.m.PRESENT&&(jo.debug("Seeking to url time:",o.time),t(o.time),a({time:void 0}))},[s,t,o])}let Ro=!1;function Sp(e){(0,c.useEffect)(()=>{if(Ro)throw new Error("Invariant: only one copy of useInitialDeepLinkState may be mounted");return Ro=!0,()=>{Ro=!1}},[]);const{availableSources:t}=(0,ot.n)(),s=(0,c.useMemo)(()=>e[0]?Fa(new URL(e[0])):void 0,[e]),o=(0,c.useMemo)(()=>{let a=!1;const r=s?.ds,l=r==null?void 0:t.find(d=>d.id===r||d.legacyIds?.includes(r));return l&&(a=l.currentUserRequired??!1),{currentUserRequired:a}},[s?.ds,t]);return xp(s,o),Cp(s,o),Ep(s),o}function Pn(e,t){const s=qa();(0,c.useEffect)(()=>{if(!s)return;const o=t;return s.on(e,o),()=>{s.off(e,o)}},[e,t,s])}var Tp=i(39367),Ip=i(47832);function Pp(e,t){const s=e;return{dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:s.featureTours.shown},sidebars:{legacy:{item:s.sidebarItem},left:{item:s.leftSidebarItem,open:s.leftSidebarOpen,size:s.leftSidebarSize},right:{item:s.rightSidebarItem,open:s.rightSidebarOpen,size:s.rightSidebarSize}},playbackControls:{repeat:s.playbackControls.repeat}}}function Mp(e){return(0,se.M)()((0,Ip.tJ)(()=>({dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:[]},sidebars:{legacy:{item:"connection"},left:{item:"panel-settings",open:!0,size:void 0},right:{item:void 0,open:!1,size:void 0}},playbackControls:{repeat:!1},...e}),{name:"fox.workspace",version:1,migrate:Pp,partialize:t=>(0,v.pick)(t,["featureTours","playbackControls","sidebars"])}))}function wp({children:e,initialState:t}){const[s]=(0,c.useState)(()=>Mp(t));return(0,n.jsx)(Ke.C5.Provider,{value:s,children:e})}var Bp="../../packages/studio-base/src/Workspace.tsx";const Fs=ve.ZP.getLogger(Bp),Dp=(0,b.ZL)()({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden"}});function jp(){return document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement}function Rp(e){return navigator.userAgent.includes("Mac")?e.metaKey:e.ctrlKey}const Lp=Object.freeze([]),Np=({playerState:e})=>e.presence,Op=({playerState:e})=>e.presence!==Ye.m.NOT_PRESENT,kp=({playerState:e})=>e.problems,Zp=e=>e.playerState.activeData?.isPlaying===!0,Fp=e=>e.pausePlayback,zp=e=>e.startPlayback,Gp=e=>e.seekPlayback,Up=e=>e.playUntil,Wp=e=>e.playerState.playerId,Qp=e=>e.eventsSupported,Yp=e=>e.dialogs.dataSource,Hp=e=>e.sidebars.legacy.item,Vp=e=>e.sidebars.left.item,Xp=e=>e.sidebars.left.open,Kp=e=>e.sidebars.left.size,$p=e=>e.sidebars.right.item,Jp=e=>e.sidebars.right.open,qp=e=>e.sidebars.right.size;function _p(e){const{classes:t}=Dp(),s=(0,c.useRef)(null),{availableSources:o,selectSource:a}=(0,ot.n)(),r=(0,Oe.An)(Np),l=(0,Oe.An)(kp),d=(0,Ke.Q)(Hp),p=(0,Ke.Q)(Yp),h=(0,Ke.Q)(Vp),f=(0,Ke.Q)(Xp),g=(0,Ke.Q)(Kp),y=(0,Ke.Q)($p),S=(0,Ke.Q)(Jp),N=(0,Ke.Q)(qp),{dialogActions:k,sidebarActions:W}=(0,Re.W)(),J=(0,c.useMemo)(()=>{const it=[".foxe"];for(const Zt of o)Zt.type==="file"&&Zt.supportedFileTypes&&it.push(...Zt.supportedFileTypes);return it},[o]),pe=(0,Oe.An)(Wp),{currentUser:ye}=(0,Fe.xJ)();hp();const[fe=!1]=(0,ht.b)(C.o.SHOW_DEBUG_PANELS),{workspaceExtensions:de}=(0,Tt.b)();(0,c.useLayoutEffect)(()=>{(r===Ye.m.PRESENT||r===Ye.m.INITIALIZING)&&k.dataSource.close()},[k.dataSource,r]),(0,c.useEffect)(()=>{s.current&&s.current.focus()},[]),Pn("open",(0,c.useCallback)(async()=>k.dataSource.open("start"),[k.dataSource])),Pn("open-file",(0,c.useCallback)(async()=>await k.openFile.open(),[k.openFile])),Pn("open-connection",(0,c.useCallback)(()=>k.dataSource.open("connection"),[k.dataSource])),Pn("open-demo",(0,c.useCallback)(()=>k.dataSource.open("demo"),[k.dataSource])),Pn("open-help-about",(0,c.useCallback)(()=>k.preferences.open("about"),[k.preferences])),Pn("open-help-general",(0,c.useCallback)(()=>k.preferences.open("general"),[k.preferences])),Pn("open-help-docs",()=>window.open("https://foxglove.dev/docs","_blank")),Pn("open-help-slack",()=>window.open("https://foxglove.dev/slack","_blank"));const ee=qa(),Pe=(0,c.useMemo)(()=>o.filter(it=>it.type==="connection"),[o]);(0,c.useEffect)(()=>{if(ee){for(const it of Pe)ee.addFileEntry(it.displayName,()=>{k.dataSource.open("connection",it)});return()=>{for(const it of Pe)ee.removeFileEntry(it.displayName)}}},[Pe,k.dataSource,ee]);const{enqueueSnackbar:Ae}=(0,ce.Ds)(),at=(0,In.I)(it=>it.installExtension),pt=(0,c.useCallback)(async it=>{Fs.debug("open handle",it);const Zt=await it.getFile();if(Zt.name.endsWith(".foxe"))try{const $t=await Zt.arrayBuffer(),Zn=new Uint8Array($t),Ss=await at("local",Zn);Ae(`Installed extension ${Ss.id}`,{variant:"success"})}catch($t){Fs.error($t),Ae(`Failed to install extension ${Zt.name}: ${$t.message}`,{variant:"error"})}const ln=o.find($t=>{const Zn=(0,oe.extname)(Zt.name);return $t.supportedFileTypes?.includes(Zn)});ln&&a(ln.id,{type:"file",handle:it})},[o,Ae,at,a]),xe=(0,c.useCallback)(async it=>{const Zt=[];Fs.debug("open files",it);for(const ln of it)if(ln.name.endsWith(".foxe"))try{const $t=await ln.arrayBuffer(),Zn=new Uint8Array($t),Ss=await at("local",Zn);Ae(`Installed extension ${Ss.id}`,{variant:"success"})}catch($t){Fs.error($t),Ae(`Failed to install extension ${ln.name}: ${$t.message}`,{variant:"error"})}else Zt.push(ln);if(Zt.length>0){for(const ln of o)if(Zt.filter(Zn=>{const Ss=(0,oe.extname)(Zn.name);return ln.supportedFileTypes?.includes(Ss)}).length>0){a(ln.id,{type:"file",files:Zt});break}}},[o,Ae,at,a]),ke=yp();(0,c.useEffect)(()=>{ke&&xe(Array.from(ke))},[ke,xe]);const Ue=(0,c.useCallback)(it=>{const Zt=it.handles?.[0];Zt&&it.handles?.length===1?pt(Zt):it.files&&xe(it.files)},[xe,pt]),dt=Z(Qp),jt=ye!=null&&dt,Ut=(0,c.useMemo)(()=>new Map([["panel-settings",{title:"Panel",component:sc}],["topics",{title:"Topics",component:bu}],["problems",{title:"Problems",component:Od,badge:l&&l.length>0?{count:l.length,color:"error"}:void 0}]]),[l]),wt=(0,c.useMemo)(()=>{const it=new Map([["variables",{title:"Variables",component:Pu}]]);return fe&&it.set("studio-logs-settings",{title:"Studio Logs",component:$d}),jt&&it.set("events",{title:"Events",component:wr}),it},[fe,jt]),gt=(0,c.useMemo)(()=>({b:it=>{!Rp(it)||jp()||d==null||(it.preventDefault(),W.legacy.selectItem(void 0))},"[":()=>W.left.setOpen(it=>!it),"]":()=>W.right.setOpen(it=>!it)}),[W.left,W.legacy,W.right,d]),Ne=(0,Oe.An)(zp),nt=(0,Oe.An)(Up),kt=(0,Oe.An)(Fp),Ht=(0,Oe.An)(Gp),rn=(0,Oe.An)(Zp),kn=(0,Oe.m7)(),Ks=(0,c.useCallback)(()=>kn().playerState.activeData??{},[kn]);return(0,n.jsxs)(da,{providers:[(0,n.jsx)(Tp.vv,{})],children:[e.showSignInForm&&(0,n.jsx)(Hd,{}),p.open&&(0,n.jsx)(rr,{}),(0,n.jsx)(fr,{onDrop:Ue,allowedExtensions:J}),(0,n.jsx)(uu,{}),(0,n.jsx)(ca.Z,{global:!0,keyDownHandlers:gt}),(0,n.jsxs)("div",{className:t.container,ref:s,tabIndex:0,children:[(0,n.jsx)(Oi,{leftInset:e.appBarLeftInset,onDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow}),(0,n.jsx)(Ud,{leftItems:Ut,selectedLeftKey:f?h:void 0,onSelectLeftKey:W.left.selectItem,leftSidebarSize:g,setLeftSidebarSize:W.left.setSize,rightItems:wt,selectedRightKey:S?y:void 0,onSelectRightKey:W.right.selectItem,rightSidebarSize:N,setRightSidebarSize:W.right.setSize,children:(0,n.jsx)(kd,{value:pe,children:(0,n.jsx)(te.Z,{children:(0,n.jsx)(Dr.Z,{})})})}),Ne&&kt&&Ht&&(0,n.jsx)("div",{style:{flexShrink:0},children:(0,n.jsx)(wd,{play:Ne,pause:kt,seek:Ht,playUntil:nt,isPlaying:rn,getTimeInfo:Ks})})]}),!e.showSignInForm&&de,(0,n.jsx)(up,{})]})}function ef(e){let t=!1;const{currentUser:s}=(0,Fe.xJ)(),{currentUserRequired:o}=Sp(e.deepLinks??Lp),a=(0,Oe.An)(Op),r=o&&s==null,l=a||!t||r?void 0:"start",d={dialogs:{dataSource:{activeDataSource:void 0,open:l!=null,item:l},preferences:{initialTab:void 0,open:!1}}};return(0,n.jsx)(wp,{initialState:d,children:(0,n.jsx)(_p,{showSignInForm:r,...e})})}var tf=i(6917),nf=i(88724);function sf({children:e}){const[t="system"]=(0,ht.b)(C.o.COLOR_SCHEME),s=(0,tf.Z)("(prefers-color-scheme: light)"),o=t==="dark"||t==="system"&&s;return(0,n.jsx)(nf.Z,{isDark:o,children:e})}var of=i(98512);const af=e=>e.playerState.name;function rf(){const e=(0,Oe.An)(af);return(0,c.useEffect)(()=>{if(!e){window.document.title="Foxglove Studio";return}window.document.title=navigator.userAgent.includes("Mac")?e:`${e} \u2013 Foxglove Studio`},[e]),(0,n.jsx)(n.Fragment,{})}const Lo=(0,c.createContext)(void 0);Lo.displayName="NativeWindowContext";function lf(){return(0,c.useContext)(Lo)}const cf=Lo;var ei=i(31748),No=i(10186),df="../../packages/studio-base/src/hooks/useIndexedDbRecents.ts";const uf=ve.ZP.getLogger(df),ti="recents",ni=(0,No.MT)("foxglove-recents","recents");function pf(){const{value:e,loading:t}=(0,ms.Z)(async()=>await(0,No.U2)(ti,ni),[]),[s,o]=(0,c.useState)([]),a=(0,c.useRef)([]),r=(0,c.useCallback)(async()=>{if(t)return;const d=[];for(const p of a.current){let h=!1;for(const f of d)h||(f.type==="file"&&p.type===f.type&&await f.handle.isSameEntry(p.handle)&&(h=!0),f.type==="connection"&&p.type===f.type&&f.sourceId===p.sourceId&&(0,v.isEqual)(p.extra,f.extra)&&(h=!0));!h&&d.length<5&&d.push(p)}o(d),(0,No.t8)(ti,d,ni).catch(p=>{uf.error(p)})},[t]);(0,c.useLayoutEffect)(()=>{if(t)return;const d=a.current.length>0;e&&a.current.push(...e),d?r():o(a.current)},[t,e,r]);const l=(0,c.useCallback)(d=>{const p={id:(0,Ft.Z)(),...d};a.current.unshift(p),r()},[r]);return(0,c.useMemo)(()=>({recents:s,addRecent:l,save:r}),[l,s,r])}const ff=pf;var hf="../../packages/studio-base/src/players/AnalyticsMetricsCollector.ts";const gf=ve.ZP.getLogger(hf);class mf{#e={};#t;constructor(t){gf.debug("New AnalyticsMetricsCollector"),this.#t=t}setProperty(t,s){this.#e[t]=s}logEvent(t,s){this.#t.logEvent(t,{...this.#e,...s})}playerConstructed(){this.logEvent(Me.q.PLAYER_CONSTRUCTED)}play(t){this.logEvent(Me.q.PLAYER_PLAY,{speed:t})}seek(t){}setSpeed(t){}pause(){this.logEvent(Me.q.PLAYER_PAUSE)}close(){this.logEvent(Me.q.PLAYER_CLOSE)}setSubscriptions(t){}recordBytesReceived(t){}recordPlaybackTime(t,s){}recordDataProviderPerformance(t){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(t){}recordDataProviderStall(t){}}const en=new Map;function yf(e,t){return t===en?e:e.map(s=>{if(s!=null)return{...s,messagesByTopic:(0,v.transform)(s.messagesByTopic,(o,a,r)=>{const l=t.get(r);if(l)for(const d of l)o[d]=a.map(p=>({...p,topic:d}));o[r]=a},{})}})}function Af(e,t){if(t===en)return e;const s=[];for(const o of e){s.push(o);const a=t.get(o.topic);if(a)for(const r of a)s.push({...o,topic:r})}return s}function vf(e,t){if(t===en)return e;const s=new Map;for(const[o,a]of e){const r=[...a].flatMap(l=>t.get(l)??l);s.set(o,new Set([...a,...r]))}return s}function bf(e,t,s){if(t===en)return e;const o=(0,v.groupBy)(s,r=>r.topic),a=new Map;for(const[r,l]of e){const d=[...l].flatMap(p=>{const h=t.get(p);return o[p]?[p,...h??[]]:h||p});a.set(r,new Set(d))}return a}function xf(e,t){return t===en||e.messageCache==null?e:{...e,messageCache:{...e.messageCache,blocks:fn.aliasBlocks(e.messageCache.blocks,t)}}}function Cf(e,t){return t===en?e:e.flatMap(s=>{const o=t.get(s.name);return o?[s,...o.map(a=>({...s,name:a,aliasedFromName:s.name}))]:s})}function Ef(e,t){if(t===en)return e;const s=new Map;for(const[o,a]of e){s.set(o,a);const r=t.get(o);if(r)for(const l of r)s.set(l,a)}return s}function Sf(e){if(e===en)return en;const t=new Map;for(const[s,o]of e.entries())for(const a of o){const r=t.get(a)??[];r.push(s),t.set(a,r)}return t}function Tf(e,t){const s=new Map,o=[],a=new Map,r=t.topics??[];for(const{extensionId:l,aliases:d}of e)for(const{name:p,sourceTopicName:h}of d){const f=s.get(p);if(r.some(g=>g.name===p))o.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${l} aliased topic ${p} is already present in the data source.`});else if(f!=null&&f!==h)o.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${l} requested duplicate alias from topic ${h} to topic ${p}.`});else{s.set(p,h);const g=(0,v.uniq)(a.get(h)??[]).concat(p);a.set(h,g)}}return{aliasMap:a,problems:o.length>0?o:void 0}}function If(e){const t=e.aliasFunctions.map(o=>({extensionId:o.extensionId,aliases:o.aliasFunction({topics:e.topics??[],globalVariables:e.variables})}));return t.some(o=>[...o.aliases].length>0)?Tf(t,e):{aliasMap:en,problems:void 0}}const fn={buildAliases:Qt()(If),aliasBlocks:Qt()(yf),aliasMessages:Qt()(Af),aliasProgress:Qt()(xf),aliasPublishedTopics:Qt()(vf),aliasSubscribedTopics:Qt()(bf),aliasTopics:Qt()(Cf),aliasTopicStats:Qt()(Ef)};function Pf(e,t,s){const o={...s,activeData:s.activeData?{...s.activeData}:void 0},{aliasMap:a,problems:r}=fn.buildAliases(e);return o.activeData&&(o.activeData.topics=fn.aliasTopics(o.activeData.topics,a),o.activeData.messages=fn.aliasMessages(o.activeData.messages,a),o.activeData.publishedTopics&&(o.activeData.publishedTopics=fn.aliasPublishedTopics(o.activeData.publishedTopics,a)),o.activeData.subscribedTopics&&(o.activeData.subscribedTopics=fn.aliasSubscribedTopics(o.activeData.subscribedTopics,a,t)),o.activeData.topicStats=fn.aliasTopicStats(o.activeData.topicStats,a)),o.progress.messageCache&&(o.progress=fn.aliasProgress(o.progress,a)),r!=null&&(o.problems=(o.problems??[]).concat(r)),o}const Mf=Qt()((e,t)=>{const{aliasMap:s}=fn.buildAliases(e);if(s===en)return t;const o=Sf(s);return t.flatMap(a=>{const r=o.get(a.topic);return r?r.map(l=>({...a,topic:l})):a})});class wf{#e;#t;#n;#s=[];#a;#o;constructor(t,s,o){this.#e=t,this.#a=s.length===0,this.#t={aliasFunctions:s,topics:void 0,variables:o}}setListener(t){this.#o=t,this.#e.setListener(async s=>await this.#i(s))}setAliasFunctions(t){this.#t={...this.#t,aliasFunctions:t},this.#a=t.length===0}close(){this.#e.close()}setSubscriptions(t){if(this.#s=t,this.#a)this.#e.setSubscriptions(t);else if(this.#t.topics!=null){const s=Mf(this.#t,t);this.#e.setSubscriptions(s),this.#n=void 0}else this.#n=t}setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}seekPlayback(t){this.#e.seekPlayback?.(t)}playUntil(t){this.#e.playUntil?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}setGlobalVariables(t){this.#e.setGlobalVariables(t),this.#t={...this.#t,variables:t}}async#i(t){if(this.#a){await this.#o?.(t);return}t.activeData?.topics!==this.#t.topics&&(this.#t={...this.#t,topics:t.activeData?.topics});const s=Pf(this.#t,this.#s,t);await this.#o?.(s),this.#n&&this.#t.topics&&this.setSubscriptions(this.#n)}}var Bf=i(79044),si=i(28316),Df=i(88665),oi=i.n(Df),hn=i(84929);class ai{#e;#t;#n;#s;constructor(t){this.#n=t}async update(t){if(t.topics===this.#t&&t.datatypes===this.#e&&this.#s!=null)return{didUpdate:!1,lib:this.#s};const s=await this.#n(t);return this.#t=t.topics,this.#e=t.datatypes,this.#s=s,{didUpdate:!0,lib:s}}}var jf=i(1375),Nt=i(56924);const Rf=e=>e.diagnostics.some(({severity:t})=>t===Nt.H_.Error);var ii=i(45243),As=i(13900),ri=i(87472);const gn=new Map;for(const[e,t]of Object.entries(As.ros2galactic))gn.set(e,t);for(const[e,t]of Object.entries(As.ros1))gn.set(e,t);for(const e of Object.values(ri.foxgloveMessageSchemas)){const t=(0,ri.generateRosMsgDefinition)(e,{rosVersion:1});gn.set(t.rosMsgInterfaceName,{name:t.rosMsgInterfaceName,definitions:t.fields}),gn.set(`foxglove.${e.name}`,{name:`foxglove.${e.name}`,definitions:t.fields})}gn.set("foxglove_msgs/ImageMarkerArray",{definitions:[{name:"markers",type:"visualization_msgs/ImageMarker",isComplex:!0,isArray:!0}]});var Lf="../../packages/studio-base/src/players/UserNodePlayer/index.ts";const Nn=ve.ZP.getLogger(Lf);function Nf(e){return typeof e=="object"&&e&&"toJSON"in e?e.toJSON():e}class zs{#e;#t=[];#n=[];#s=[];#a={};#o;#i=[];#c;#r;#l;#A={};#h;#v;#S;#g;#p=new Map;#w=new Map;#I=new Set;#d=!1;#R=new hn.jK({userNodes:{},nodeRegistrations:[],nodeRegistrationCache:[],lastPlayerStateActiveData:void 0,inputsByOutputTopic:new Map});#T=new Bf.WU;static CreateNodeTransformWorker=()=>new SharedWorker(new URL(i.p+i.u(5511),i.b),{name:(0,Ft.Z)()});static CreateNodeRuntimeWorker=()=>new SharedWorker(new URL(i.p+i.u(492),i.b),{name:(0,Ft.Z)()});constructor(t,s){this.#e=t,this.#h=s;const{setUserNodeDiagnostics:o,addUserNodeLogs:a}=s;this.#c=(r,l)=>{o(r,l)},this.#r=(r,l)=>{l.length>0&&a(r,l)},this.#S=new ai(async r=>(0,jf.Wr)({topics:r.topics,datatypes:new Map([...gn,...r.datatypes])})),this.#v=new ai(async r=>await this.#b().send("generateRosLib",{topics:r.topics,datatypes:new Map([...gn,...r.datatypes])}))}#j=Qt()((t,s)=>[...t,...s]);#m=Qt()((t,s)=>s.reduce((o,a)=>new Map([...o,...a]),new Map([...gn,...t])));#B={result:[]};async#x(t,s,o){if(t.length===0)return[];const a=l=>l,r=[];for(const l of t){const d=[];for(const h of o)if(this.#a[h.output.name]&&h.inputs.includes(l.topic)){const f=h.processMessage(l,s);d.push(f)}const p=await Promise.all(d);r.push(...(0,on.Z)(p,a))}return r}async#z(t,s,o){if(oi()(this.#B.input,{blocks:t,globalVariables:s,nodeRegistrations:o}))return this.#B.result;const a=o.filter(d=>this.#a[d.output.name]?.preloadType==="full");if(a.length===0)return t;const r=(0,v.uniq)(a.flatMap(d=>d.inputs)),l=[];for(const d of t){if(!d){l.push(d);continue}const p={...d.messagesByTopic},h=r.flatMap(f=>p[f]??[]).sort((f,g)=>(0,he.compare)(f.receiveTime,g.receiveTime));for(const f of a){const g=f.output.name;p[g]!=null&&(p[g]=[]);for(const y of h)if(f.inputs.includes(y.topic)){const S=await f.processBlockMessage(y,s);S&&(p[g]||(p[g]=[]),p[g]?.push(S))}}l.push({messagesByTopic:p,sizeInBytes:d.sizeInBytes})}return this.#B={input:{blocks:t,globalVariables:s,nodeRegistrations:o},result:l},l}setGlobalVariables(t){this.#A=t,this.#d=!0}async setUserNodes(t){const s=await this.#R.runExclusive(async o=>{for(const d of Object.keys(t)){const p=o.userNodes[d],h=t[d];p&&h&&p.sourceCode!==h.sourceCode&&this.#I.add(d)}o.userNodes=t;const a=Object.keys(t).length+1;o.nodeRegistrationCache.splice(a),await this.#M(o),this.#f(this.#s,o);const r=this.#g,l=o.lastPlayerStateActiveData;if(r&&l?.isPlaying===!1)return{...r,activeData:{...l,messages:[]}}});s&&await this.#y(s)}async#u(t,s,o,a,r){for(const Ae of o.nodeRegistrationCache)if(t===Ae.nodeId&&(0,v.isEqual)(s,Ae.userNode))return Ae.result;const{topics:l=[],datatypes:d=new Map}=o.lastPlayerStateActiveData??{},p=new Map([...gn,...d]),{name:h,sourceCode:f}=s,g={name:h,sourceCode:f,topics:l,rosLib:a,typesLib:r,datatypes:p},S=await this.#b().send("transform",g),{inputTopics:N,outputTopic:k,transpiledCode:W,projectCode:J,outputDatatype:pe}=S,ye=`node-id-${t}`,fe=()=>{let Ae;return{registration:async(xe,ke)=>{if(!Ae){if(Ae=this.#i.pop(),!Ae){const gt=zs.CreateNodeRuntimeWorker();gt.onerror=nt=>{Nn.error(nt),this.#p.set(ye,{message:`User script runtime error: ${nt.message}`,severity:"error"}),this.#C()};const Ne=gt.port;Ne.onmessageerror=nt=>{Nn.error(nt),this.#p.set(ye,{severity:"error",message:`User script runtime error: ${String(nt.data)}`}),this.#C()},Ne.start(),Ae=new ii.Z(Ne),Ae.receive("error",nt=>{Nn.error(nt),this.#p.set(ye,{severity:"error",message:`User script runtime error: ${nt}`}),this.#C()})}const{error:jt,userNodeDiagnostics:Ut,userNodeLogs:wt}=await Ae.send("registerNode",{projectCode:J,nodeCode:W});if(jt!=null){this.#c(t,[...Ut,{source:Nt.Fb.Runtime,severity:Nt.H_.Error,message:jt,code:Nt.SM.RUNTIME}]);return}this.#r(t,wt)}const Ue=await Ae.send("processMessage",{message:{topic:xe.topic,receiveTime:xe.receiveTime,message:Nf(xe.message),datatype:xe.schemaName},globalVariables:ke}),dt=Ue.userNodeDiagnostics;if(Ue.error&&dt.push({source:Nt.Fb.Runtime,severity:Nt.H_.Error,message:Ue.error,code:Nt.SM.RUNTIME}),this.#r(t,Ue.userNodeLogs),dt.length>0){this.#p.set(ye,{severity:"error",message:`User Script ${t} encountered an error.`,tip:"Open the User Scripts panel and check the Problems tab for errors."}),this.#c(t,dt);return}if(!Ue.message){this.#p.set(ye,{severity:"warn",message:`User Script ${t} did not produce a message.`,tip:"Check that all code paths in the user script return a message."});return}return this.#p.delete(ye),{topic:k,receiveTime:xe.receiveTime,message:Ue.message,sizeInBytes:xe.sizeInBytes,schemaName:pe}},terminate:()=>{this.#p.delete(ye),Ae&&(this.#i.push(Ae),Ae=void 0)}}},de=fe(),ee=fe(),Pe={nodeId:t,nodeData:S,inputs:N,output:{name:k,schemaName:pe},processMessage:de.registration,processBlockMessage:ee.registration,terminate:()=>{de.terminate(),ee.terminate()}};return o.nodeRegistrationCache.push({nodeId:t,userNode:s,result:Pe}),Pe}#b(){if(!this.#l){const t=zs.CreateNodeTransformWorker();t.onerror=a=>{Nn.error(a),this.#p.set("worker-error",{severity:"error",message:`User Script error: ${a.message}`}),this.#C()};const s=t.port;s.onmessageerror=a=>{Nn.error(a),this.#p.set("worker-error",{severity:"error",message:`User Script error: ${String(a.data)}`}),this.#C()},s.start();const o=new ii.Z(s);o.receive("error",a=>{Nn.error(a),this.#p.set("worker-error",{severity:"error",message:`User Script error: ${a}`}),this.#C()}),this.#l=o}return this.#l}async#M(t){if(!t.lastPlayerStateActiveData||t.nodeRegistrations.length===0&&Object.entries(t.userNodes).length===0)return;for(const g of t.nodeRegistrations)g.terminate();t.nodeRegistrations=[];const s=await this.#k(t),o=await this.#L(t),a=await Promise.all(Object.entries(t.userNodes).map(async([g,y])=>await this.#u(g,y,t,s,o))),r=[],l=new Set(t.lastPlayerStateActiveData.topics.map(g=>g.name)),d=new Set(a.map(({nodeData:g})=>g.outputTopic));t.inputsByOutputTopic.clear();for(const g of a){const{nodeData:y,nodeId:S}=g;if(!y.outputTopic){this.#c(S,[...y.diagnostics,{severity:Nt.H_.Error,message:"Output topic cannot be an empty string.",source:Nt.Fb.OutputTopicChecker,code:Nt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.has(y.outputTopic)){this.#c(S,[...y.diagnostics,{severity:Nt.H_.Error,message:`Output "${y.outputTopic}" must be unique`,source:Nt.Fb.OutputTopicChecker,code:Nt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.set(y.outputTopic,y.inputTopics),l.has(y.outputTopic)){this.#c(S,[...y.diagnostics,{severity:Nt.H_.Error,message:`Output topic "${y.outputTopic}" is already present in the data source`,source:Nt.Fb.OutputTopicChecker,code:Nt.SM.OutputTopicChecker.EXISTING_TOPIC}]);continue}if(Rf(y)){this.#c(S,y.diagnostics);continue}for(const N of y.inputTopics)if(d.has(N))throw new Error(`Input "${N}" cannot equal another node's output`);r.push(g)}let p=!1;t.nodeRegistrations=r;const h=t.nodeRegistrations.map(({output:g})=>g);(0,v.isEqual)(h,this.#n)||(this.#n=h,p=!0);const f=t.nodeRegistrations.map(({nodeData:{datatypes:g}})=>g);if((0,v.isEqual)(f,this.#t)||(this.#t=f,p=!0),si.unstable_batchedUpdates(()=>{for(const g of t.nodeRegistrations)this.#c(g.nodeId,[])}),p&&this.#g?.activeData){const g=(0,v.unionBy)(this.#g.activeData.topics,this.#n,S=>S.name),y=this.#m(this.#g.activeData.datatypes,this.#t);this.#g={...this.#g,activeData:{...this.#g.activeData,datatypes:y,topics:g}},await this.#C()}}async#k(t){if(!t.lastPlayerStateActiveData)throw new Error("_getRosLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:o}=t.lastPlayerStateActiveData,{didUpdate:a,lib:r}=await this.#v.update({topics:s,datatypes:o});return a&&this.#h.setUserNodeRosLib(r),r}async#L(t){if(!t.lastPlayerStateActiveData)throw new Error("_getTypesLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:o}=t.lastPlayerStateActiveData,{didUpdate:a,lib:r}=await this.#S.update({topics:s,datatypes:o});return a&&this.#h.setUserNodeTypesLib(r),r}async#y(t){try{const s=this.#A,{activeData:o}=t;if(!o){this.#g=t,await this.#C();return}const{messages:a,topics:r,datatypes:l}=o,d=await this.#R.runExclusive(async p=>{if(!p.lastPlayerStateActiveData)p.lastPlayerStateActiveData=o,await this.#M(p),this.#f(this.#s,p);else{let J=o.lastSeekTime!==p.lastPlayerStateActiveData.lastSeekTime;(o.topics!==p.lastPlayerStateActiveData.topics||o.datatypes!==p.lastPlayerStateActiveData.datatypes)&&(J=!0,p.nodeRegistrationCache=[]),p.lastPlayerStateActiveData=o,J&&await this.#M(p)}const h=this.#m(l,this.#t),f=new Set;for(const J of this.#I){const pe=p.nodeRegistrations.find(({nodeId:fe})=>fe===J);if(!pe)continue;const ye=pe.inputs;for(const fe of ye)f.add(fe)}if(this.#d){this.#d=!1;for(const J of this.#w.keys())f.add(J)}for(const J of a)f.delete(J.topic);const g=[];for(const J of f){const pe=this.#w.get(J);pe&&g.push(pe)}this.#I.clear();for(const J of a)this.#w.set(J.topic,J);const y=g.length>0,S=await this.#x(a,s,p.nodeRegistrations),N=await this.#x(g,s,p.nodeRegistrations),k=a.concat(N).concat(S).sort((J,pe)=>(0,he.compare)(J.receiveTime,pe.receiveTime)),W={...t.progress};if(W.messageCache){const J=await this.#z(W.messageCache.blocks,s,p.nodeRegistrations);W.messageCache={startTime:W.messageCache.startTime,blocks:J}}return{...t,progress:W,activeData:{...o,messages:k,topics:this.#j(r,this.#n),datatypes:h,messagesRecomputed:y}}});this.#g=d,this.#p.delete("player-state-update")}catch(s){this.#p.set("player-state-update",{severity:"error",message:s.message,error:s}),this.#g=t}finally{await this.#C()}}async#C(){await this.#T.runExclusive(async()=>{if(!this.#g)return;let t=this.#g.problems;this.#p.size>0&&(t=(t??[]).concat(Array.from(this.#p.values())));const s={...this.#g,problems:t};this.#o&&await this.#o(s)})}setListener(t){this.#o=t,this.#e.setListener(async s=>await this.#y(s))}setSubscriptions(t){this.#s=t,this.#R.runExclusive(async s=>{this.#f(t,s)}).catch(s=>{Nn.error(s),(0,Ja.e)(s)})}#f(t,s){const o={},a=[];for(const r of t){const l=s.inputsByOutputTopic.get(r.topic);if(!l){o[r.topic]=r,a.push(r);continue}if(l.length!==0){o[r.topic]=r;for(const d of l)a.push({topic:d,preloadType:r.preloadType??"partial"})}}this.#a=o,this.#e.setSubscriptions(a)}close=()=>{this.#R.runExclusive(async t=>{for(const s of t.nodeRegistrations)s.terminate()}),this.#e.close(),this.#l&&this.#l.send("close")};setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}playUntil(t){if(this.#e.playUntil){this.#e.playUntil(t);return}this.#e.seekPlayback?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}seekPlayback(t){this.#e.seekPlayback?.(t)}}var Of="../../packages/studio-base/src/components/PlayerManager.tsx";const kf=ve.ZP.getLogger(Of),Zf=Object.freeze({}),Ff=Object.freeze({}),zf=e=>e.selectedLayout?.data?.userNodes??Zf,Gf=e=>e.selectedLayout?.data?.globalVariables??Ff,Uf=e=>e.installedTopicAliasFunctions;function Wf(e){const{children:t,playerSources:s}=e;(0,ge.Wk)();const{setUserNodeDiagnostics:o,addUserNodeLogs:a,setUserNodeRosLib:r,setUserNodeTypesLib:l}=(0,ei.BQ)(),d=(0,ge.O4)({setUserNodeDiagnostics:o,addUserNodeLogs:a,setUserNodeRosLib:r,setUserNodeTypesLib:l}),p=lf(),h=(0,ds.Z)(),f=(0,$e.z)(),g=(0,c.useMemo)(()=>new mf(f),[f]),y=Mo(),{setSelectedLayoutId:S}=(0,ut._B)(),[N,k]=(0,c.useState)(),[W,J]=(0,c.useState)(),pe=(0,ut.NS)(zf),ye=(0,ut.NS)(Gf),fe=(0,In.I)(Uf),{recents:de,addRecent:ee}=ff(),Pe=(0,fs.Z)(ye),[Ae]=(0,c.useState)(fe),[at]=(0,c.useState)(ye),pt=(0,c.useMemo)(()=>{if(N)return new wf(N,Ae??[],at)},[N,at,Ae]);(0,c.useEffect)(()=>{fe!==Ae&&pt?.setAliasFunctions(fe??[])},[Ae,pt,fe]),(0,c.useEffect)(()=>{ye!==at&&pt?.setGlobalVariables(ye)},[ye,at,pt]);const xe=(0,c.useMemo)(()=>{if(!pt)return;const wt=new zs(pt,d);return wt.setGlobalVariables(Pe.current),wt},[Pe,pt,d]);(0,c.useLayoutEffect)(()=>void xe?.setUserNodes(pe),[xe,pe]);const{enqueueSnackbar:ke}=(0,ce.Ds)(),Ue=(0,c.useCallback)(async(wt,gt)=>{kf.debug(`Select Source: ${wt}`),p?.setRepresentedFilename(void 0);const Ne=s.find(nt=>nt.id===wt||nt.legacyIds?.includes(wt));if(!Ne){ke(`Unknown data source: ${wt}`,{variant:"warning"});return}if(J(Ne),g.setProperty("player",wt),Ne.type==="sample"){const nt=Ne.initialize({metricsCollector:g});if(k(nt),Ne.sampleLayout)try{let Ht=(await y.getLayouts()).find(rn=>rn.name===Ne.displayName);Ht==null&&(Ht=await y.saveNewLayout({name:Ne.displayName,data:Ne.sampleLayout,permission:"CREATOR_WRITE"})),h()&&S(Ht.id)}catch(kt){ke(kt.message,{variant:"error"})}return}if(!gt){ke("Unable to initialize player: no args",{variant:"error"});return}try{switch(gt.type){case"connection":{const nt=Ne.initialize({metricsCollector:g,params:gt.params});k(nt),gt.params?.url&&ee({type:"connection",sourceId:Ne.id,title:gt.params.url,label:Ne.displayName,extra:gt.params});return}case"file":{const nt=gt.handle,kt=gt.files;if(kt){let Ht=kt[0];const rn=[];for(const it of kt)Ht??=it,rn.push(it);const kn=Ne.supportsMultiFile===!0&&rn.length>1,Ks=Ne.initialize({file:kn?void 0:Ht,files:kn?rn:void 0,metricsCollector:g});Ht&&p?.setRepresentedFilename(Ht.path),k(Ks);return}else if(nt){const Ht=await nt.queryPermission({mode:"read"});if(!h())return;if(Ht!=="granted"&&await nt.requestPermission({mode:"read"})!=="granted")throw new Error(`Permission denied: ${nt.name}`);const rn=await nt.getFile();if(!h())return;p?.setRepresentedFilename(rn.path);const kn=Ne.initialize({file:rn,metricsCollector:g});k(kn);return}}}ke("Unable to initialize player",{variant:"error"})}catch(nt){ke(nt.message,{variant:"error"})}},[s,g,ke,y,h,S,ee,p]),dt=(0,c.useCallback)(Qf(de,Ue,ke),[de,ke,Ue]),jt=(0,c.useMemo)(()=>de.map(wt=>({id:wt.id,title:wt.title,label:wt.label})),[de]),Ut={selectSource:Ue,selectRecent:dt,selectedSource:W,availableSources:s,recentSources:jt};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ot.Z.Provider,{value:Ut,children:(0,n.jsx)(Oe.D2,{player:xe,globalVariables:Pe.current,children:t})})})}function Qf(e,t,s){return o=>{const a=e.find(r=>r.id===o);if(!a){s(`Failed to restore recent: ${o}`,{variant:"error"});return}switch(a.type){case"connection":{t(a.sourceId,{type:"connection",params:a.extra});break}case"file":t(a.sourceId,{type:"file",handle:a.handle})}}}const Yf=(0,b.ZL)()(e=>({container:{alignItems:"stretch",display:"flex",flexDirection:"column",maxHeight:"50vw",marginBlockEnd:e.spacing(3),marginInline:e.spacing(3)},paper:{maxWidth:700,width:"70%"},text:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,fontSize:e.typography.body1.fontSize,flex:1,padding:e.spacing(1),overflowY:"auto",whiteSpace:"pre-wrap"},iconButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)}}));function Hf({notification:{details:e,message:t,severity:s,subText:o},onRequestClose:a}){const{classes:r,theme:l}=Yf(),d={error:l.palette.error.main,warn:l.palette.warning.main,info:l.palette.info.main},p=(0,c.useMemo)(()=>e instanceof Error?(0,n.jsx)("div",{className:r.text,children:e.stack}):e!=null&&e!==""?(0,n.jsx)(ie.Z,{style:{whiteSpace:"pre-line"},children:e}):o?void 0:"No details provided",[r,e,o]);return(0,n.jsxs)(Ze.Z,{classes:{paper:r.paper},fullWidth:!0,open:!0,onClose:()=>a?.(),children:[(0,n.jsx)(Vt.Z,{color:d[s],children:t}),(0,n.jsxs)("div",{className:r.container,children:[o&&(0,n.jsx)(ie.Z,{mb:3,children:o}),p]}),(0,n.jsx)(K.Z,{"aria-label":"close",onClick:()=>a?.(),className:r.iconButton,children:(0,n.jsx)(Je.Z,{})})]})}var li=i(42146);const Vf=e=>{switch(e){case"error":return"error";case"warn":return"warning";case"info":return"default";default:return"default"}};function Xf(){const{enqueueSnackbar:e}=(0,ce.Ds)(),[t,s]=(0,c.useState)(void 0);return(0,c.useLayoutEffect)(()=>((0,li.tm)((o,a,r,l)=>{e((0,n.jsxs)("div",{children:[o," ",(0,n.jsx)(sn.Z,{onClick:()=>s({message:o,details:a,severity:l}),variant:"inherit",fontStyle:"italic",color:"inherit",underline:"hover",children:"(see details)"})]}),{variant:Vf(l),persist:l==="error"})}),()=>{(0,li.X8)()}),[e]),t==null?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(Hf,{notification:t,onRequestClose:()=>s(void 0)})}var Kf=i(1701),$f=i(6693);const _n=e=>({"&.notistack-SnackbarContainer":{top:e==="top"?na.h:void 0}}),Oo=(0,b.ZL)()((e,t,s)=>({icon:{},dismissButton:{color:e.palette.common.white,"svg:not(.MuiSvgIcon-root)":{fontSize:16}},root:{"#notistack-snackbar":{padding:0,gap:e.spacing(.75)},"&.notistack-MuiContent":{padding:e.spacing(.5,1.5,.5,1),fontSize:e.typography.body2.fontSize},"&.notistack-MuiContent-default":{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,[`.${s.icon}`]:{color:e.palette.primary.main},[`.${s.dismissButton}`]:{color:e.palette.text.primary}},"&.notistack-MuiContent-success":{backgroundColor:e.palette.success.main},"&.notistack-MuiContent-error":{backgroundColor:e.palette.error.main},"&.notistack-MuiContent-info":{backgroundColor:e.palette.info.main},"&.notistack-MuiContent-warning":{backgroundColor:e.palette.warning.main}}})),Jf=(0,b.ZL)()({containerAnchorOriginBottomCenter:_n("bottom"),containerAnchorOriginBottomRight:_n("bottom"),containerAnchorOriginBottomLeft:_n("bottom"),containerAnchorOriginTopCenter:_n("top"),containerAnchorOriginTopRight:_n("top"),containerAnchorOriginTopLeft:_n("top")}),qf=({id:e})=>{const{closeSnackbar:t}=(0,ce.Ds)(),{classes:s}=Oo();return(0,n.jsx)(K.Z,{size:"small",className:s.dismissButton,onClick:()=>t(e),children:(0,n.jsx)(Bn.BkL,{})})},es=(0,c.forwardRef)((e,t)=>{const{classes:s}=Oo();return(0,n.jsx)(ce.pk,{ref:t,...e,className:s.root})});es.displayName="Snackbar";function _f({children:e}){const{classes:t}=Jf(),{classes:s}=Oo();return(0,n.jsx)(ce.wT,{Components:{default:es,error:es,success:es,warning:es,info:es},action:o=>(0,n.jsx)(qf,{id:o}),iconVariant:{default:(0,n.jsx)(ps.qSj,{className:s.icon}),info:(0,n.jsx)(ps.qSj,{className:s.icon}),error:(0,n.jsx)(Bn.AGC,{className:s.icon}),warning:(0,n.jsx)(Oa.ONB,{className:s.icon}),success:(0,n.jsx)(Kf.KXr,{className:s.icon})},anchorOrigin:{vertical:"top",horizontal:"center"},maxSnack:5,preventDuplicate:!0,TransitionComponent:$f.Z,classes:t,children:e})}var eh=i(82799);const ko=(0,c.createContext)(void 0);ko.displayName="LayoutStorageContext";function th(){const e=(0,c.useContext)(ko);if(e==null)throw new Error("A LayoutStorage provider is required to useLayoutStorage");return e}const nh=ko,Zo=(0,c.createContext)(void 0);Zo.displayName="UserProfileStorageContext";function sh(){const e=(0,c.useContext)(Zo);if(e==null)throw new Error("A UserProfileStorage provider is required to useUserProfileStorage");return e}const ci={speed:1};function Ot(e,{layout:t,trimConfigById:s=!0}){const o=(0,St.fY)(t??null).filter(l=>!(0,v.isEmpty)(l)),a=(0,je.bP)(o,e.configById),r=s?(0,v.pick)(e.configById,[...a,...o]):e.configById;return{...e,configById:r,layout:t}}function Bt(e,t){const{configs:s}=t,o=e.configById,a=s.reduce((l,{id:d,config:p,defaultConfig:h={},override:f=!1})=>{if(f)return{...l,[d]:p};const g=l[d],y={...h,...l[d],...p};return(0,v.isEqual)(g,y)?l:{...l,[d]:y}},e.configById);if(s.find(({id:l})=>(0,je.$k)(l)===Tn.bm)){const l=(0,St.fY)(e.layout??null),d=(0,je.bP)(l,a);return{...e,configById:(0,v.pick)(a,[...d,...l])}}return o===a?e:{...e,configById:a}}function oh(e,t){const{panelType:s,perPanelFunc:o}=t,a={...e.configById},r=e.configById;for(const[l,d]of Object.entries(r))(0,je.$k)(l)===s&&(a[l]=o(d));return{...e,configById:a}}const ah=(e,{tabId:t,root:s,path:o})=>{if(t!=null){const l=e.configById[t],d=(0,je.VJ)(o,l,t);return Bt(e,d)}else if(typeof s=="string")return Ot(e,{layout:void 0});const a=(0,St.NO)(s,o),r=(0,St.Xw)(s,[a]);return Ot(e,{layout:r})},ih=(e,{id:t,tabId:s,direction:o,config:a,root:r,path:l})=>{const d=(0,je.$k)(t),p=(0,je.nJ)(d);let h={...e};const{configById:f}=h;if(s!=null){const g=f[s],y=g.tabs[g.activeTabIdx]?.layout;if(y!=null){const S=(0,St.Xw)(y,[{path:(0,je.p9)(t,y),spec:{$set:{first:t,second:p,direction:o}}}]),N=(0,je.p1)(S,g);h=Bt(h,{configs:[{id:s,config:N},{id:p,config:a}]})}}else{h=Ot(h,{layout:(0,St.Xw)(r,[{path:l,spec:{$set:{first:t,second:p,direction:o}}}]),trimConfigById:d!==Tn.bm});const g=d===Tn.bm?(0,je.bP)([t],f).reduce((y,S)=>({...y,[S]:f[S]}),{}):void 0;h=Bt(h,(0,je.jQ)({id:p,config:a,relatedConfigs:g}))}return h},rh=(e,{tabId:t,originalId:s,type:o,config:a,relatedConfigs:r,root:l,path:d})=>{const p=(0,je.nJ)(o);let h={...e};if(t!=null&&s!=null){const f=h.configById[t];if(f){const g=f.tabs[f.activeTabIdx]?.layout;if(g!=null){const y=(0,je.fG)({originalId:s,newId:p},g),S=(0,je.p1)(y,f);h=Bt(h,{configs:[{id:t,config:S}]})}}}else h=Ot(h,{layout:(0,St.Xw)(l,[{path:d,spec:{$set:p}}]),trimConfigById:o!==Tn.bm});return h=Bt(h,(0,je.jQ)({id:p,config:a,relatedConfigs:r})),h},lh=(e,{idToReplace:t,layout:s,idsToRemove:o})=>{const a=(0,je.nJ)(Tn.bm),{configById:r}=e,l=(0,je.IP)(s,r,o),d=(0,je.CD)(s,r).filter(S=>!o.includes(S)),p=(0,je.fG)({idsToRemove:d},l),h=(0,je.fG)({originalId:t,newId:a,idsToRemove:o},s);let f=Ot(e,{layout:h??"",trimConfigById:!1});const g={id:a,config:{...je.kY,tabs:[{title:"1",layout:p}]}},y=(0,je.w$)(t,a,o,r);return f=Bt(f,{configs:[g,...y]}),f},ch=(e,{idToReplace:t,layout:s,idsToRemove:o})=>{const{configById:a}=e,r=(0,je.nJ)(Tn.bm),l=(0,je.fG)({originalId:t,newId:r,idsToRemove:o},s);let d=Ot({...e},{layout:l??"",trimConfigById:!1});const p=o.map(g=>({title:(0,je.$k)(g),layout:g})),h={id:r,config:{...je.kY,tabs:p}},f=(0,je.w$)(t,r,o,a);return d=Bt(d,{configs:[h,...f]}),d},dh=(e,{source:t,target:s})=>{const o=t.panelId===s.panelId?(0,je.A$)({source:t,target:s,savedProps:e.configById}):(0,je.rZ)({source:t,target:s,savedProps:e.configById});return Bt(e,o)},uh=(e,{tabId:t,id:s,config:o,relatedConfigs:a})=>{let r={...e},l={configs:[]};o&&(l=(0,je.jQ)({id:s,config:o,relatedConfigs:a}));let d;if(t!=null){const f=e.configById[t];(0,je.dr)(f)&&(d=f.tabs[f.activeTabIdx]?.layout)}else d=e.layout;const h={layout:(0,v.isEmpty)(d)?s:{direction:"row",first:s,second:d},trimConfigById:!a};return t!=null&&typeof h.layout=="string"?r=Bt(r,{configs:[{id:t,config:(0,je.p1)(h.layout,{...je.kY,...e.configById[t]})}]}):r=Ot(r,h),r=Bt(r,l),r},ph=(e,{newPanelType:t,destinationPath:s=[],position:o,tabId:a,config:r,relatedConfigs:l})=>{const d=(0,je.nJ)(t),p=[];if(a!=null){const{configs:g}=(0,je.th)(d,s,o,e.configById[a],a);p.push(...g)}const h=a!=null?e.layout:(0,St.Xw)(e.layout,(0,je._f)(e.layout,d,s,o??"left"));if(r){const{configs:g}=(0,je.jQ)({id:d,config:r,relatedConfigs:l});p.push(...g)}let f=Ot(e,{layout:h,trimConfigById:!l});return f=Bt(f,{configs:p}),f},fh=(e,{originalLayout:t,sourceTabId:s,position:o,destinationPath:a,ownPath:r,sourceTabConfig:l,sourceTabChildConfigs:d})=>{const p=l.tabs[l.activeTabIdx]?.layout;let h={...e};if(typeof p=="string")h=Ot(e,{layout:t,trimConfigById:!1}),h=Bt(h,{configs:[{id:s,config:(0,je.p1)(p,l)},...d]});else if(p!=null){const f=(0,St.uz)(p,r,a,o),g=(0,St.Xw)(p,f);h=Ot(e,{layout:t,trimConfigById:!1}),h=Bt(h,{configs:[{id:s,config:(0,je.p1)(g,e.configById[s])},...d]})}return h},hh=(e,{originalLayout:t,sourceTabId:s,position:o,destinationPath:a,ownPath:r,sourceTabConfig:l,sourceTabChildConfigs:d})=>{const p=l.tabs[l.activeTabIdx]?.layout;if(p==null)return e;const h=(0,je.VJ)(r,e.configById[s],s),f={...h,configs:[...h.configs,...d]},g=(0,St.PC)(p,r);if(typeof g!="string")return e;const y=(0,St.Xw)(t,(0,je._f)(t,g,a,o));let S=Ot(e,{layout:y,trimConfigById:!1});return S=Bt(S,f),S},gh=(e,{originalLayout:t,panelId:s,targetTabId:o,position:a,destinationPath:r,ownPath:l,targetTabConfig:d,sourceTabChildConfigs:p})=>{const h=(0,je.th)(s,r,a,d,o),f={...h,configs:[...h.configs,...p]},g=(0,St.NO)(t,l),y=(0,St.Xw)(t,[g]);let S=Ot(e,{layout:y,trimConfigById:!1});return S=Bt(S,{configs:f.configs}),S},mh=(e,{originalLayout:t,panelId:s,sourceTabId:o,targetTabId:a,position:r,destinationPath:l,ownPath:d,targetTabConfig:p,sourceTabConfig:h,sourceTabChildConfigs:f})=>{const{configs:g}=(0,je.VJ)(d,h,o),{configs:y}=(0,je.th)(s,l,r,p,a);let S=Ot(e,{layout:t,trimConfigById:!1});return S=Bt(S,{configs:[...g,...y,...f.filter(({id:N})=>N!==a)]}),S},yh=(e,{path:t,sourceTabId:s})=>{if(t.length>0){if(s!=null){const o=e.configById[s],a=o.tabs[o.activeTabIdx]?.layout;if(a==null)return e;const r=(0,St.Xw)(a,[(0,St.kq)(t)]),l=(0,je.p1)(r,o);return Bt(e,{configs:[{id:s,config:l}]})}return Ot(e,{layout:(0,St.Xw)(e.layout??"",[(0,St.kq)(t)]),trimConfigById:!1})}else if(s!=null){const o=e.configById[s];return Bt(e,{configs:[{id:s,config:(0,je.p1)(void 0,o)}]})}throw new Error("Can't drag the top-level panel of a layout")},Ah=(e,t)=>{const{originalLayout:s,originalSavedProps:o,panelId:a,sourceTabId:r,targetTabId:l,position:d,destinationPath:p,ownPath:h}=t,f=r!=null&&l==null,g=r==null&&l!=null,y=r!=null&&l!=null,S=r===l&&y,N=r!=null?o[r]:void 0,k=l!=null?o[l]:void 0,W=r!=null?(0,je.bP)([r],o):[],J=(0,on.Z)(W,pe=>{const ye=o[pe];return ye?{id:pe,config:ye}:void 0});if(S&&d==null&&p==null)return{...e,layout:s,configById:o};if(S&&N&&d!=null&&p!=null)return fh(e,{originalLayout:s,sourceTabId:r,position:d,destinationPath:p,ownPath:h,sourceTabConfig:N,sourceTabChildConfigs:J});if(f&&N&&d!=null&&p!=null)return hh(e,{originalLayout:s,sourceTabId:r,position:d,destinationPath:p,ownPath:h,sourceTabConfig:N,sourceTabChildConfigs:J});if(g)return gh(e,{originalLayout:s,panelId:a,targetTabId:l,position:d,destinationPath:p,ownPath:h,targetTabConfig:k,sourceTabChildConfigs:J});if(y&&N)return mh(e,{originalLayout:s,panelId:a,sourceTabId:r,targetTabId:l,position:d,destinationPath:p,ownPath:h,targetTabConfig:k,sourceTabConfig:N,sourceTabChildConfigs:J});if(d!=null&&p!=null&&!(0,v.isEqual)(p,h)){const pe=(0,St.uz)(s,h,p,d),ye=(0,St.Xw)(s,pe);return Ot(e,{layout:ye,trimConfigById:!1})}return{...e,layout:s,configById:o}};function vh(e,t){switch(t.type){case"CHANGE_PANEL_LAYOUT":return Ot(e,t.payload);case"SAVE_PANEL_CONFIGS":return Bt(e,t.payload);case"SAVE_FULL_PANEL_CONFIG":return oh(e,t.payload);case"CREATE_TAB_PANEL":return t.payload.singleTab?lh(e,t.payload):ch(e,t.payload);case"OVERWRITE_GLOBAL_DATA":return{...e,globalVariables:t.payload};case"SET_GLOBAL_DATA":{const s={...e.globalVariables,...t.payload};return Object.keys(s).forEach(o=>{s[o]==null&&delete s[o]}),{...e,globalVariables:s}}case"SET_USER_NODES":{const s={...e.userNodes};for(const[o,a]of Object.entries(t.payload))a==null?delete s[o]:s[o]=a;return{...e,userNodes:s}}case"SET_PLAYBACK_CONFIG":return{...e,playbackConfig:{...e.playbackConfig,...t.payload}};case"CLOSE_PANEL":return ah(e,t.payload);case"SPLIT_PANEL":return ih(e,t.payload);case"SWAP_PANEL":return rh(e,t.payload);case"MOVE_TAB":return dh(e,t.payload);case"ADD_PANEL":return uh(e,t.payload);case"DROP_PANEL":return ph(e,t.payload);case"START_DRAG":return yh(e,t.payload);case"END_DRAG":return Ah(e,t.payload);default:throw new Error("This reducer should only be used for panel actions")}return e}const oy={configById:{"3D!18i6zy7":{layers:{"845139cb-26bc-40b3-8161-8ab60af4baf5":{visible:!0,frameLocked:!0,label:"Grid",instanceId:"845139cb-26bc-40b3-8161-8ab60af4baf5",layerId:"foxglove.Grid",size:10,divisions:10,lineWidth:1,color:"#248eff",position:[0,0,0],rotation:[0,0,0],order:1}}},"RawMessages!os6rgs":{},"Image!3mnp456":{}},globalVariables:{},userNodes:{},playbackConfig:{...ci},layout:{first:"3D!18i6zy7",second:{first:"Image!3mnp456",second:"RawMessages!os6rgs",direction:"column",splitPercentage:30},direction:"row",splitPercentage:70}},bh={configById:{"3D!18i6zy7":{layers:{"845139cb-26bc-40b3-8161-8ab60af4baf5":{visible:!0,frameLocked:!0,label:"Grid",instanceId:"845139cb-26bc-40b3-8161-8ab60af4baf5",layerId:"foxglove.Grid",size:10,divisions:10,lineWidth:1,color:"#248eff",position:[0,0,0],rotation:[0,0,0],order:1},"8f45cd38-5391-44c8-ac88-b7aed35cccc8":{visible:!0,frameLocked:!0,label:"URDF",instanceId:"8f45cd38-5391-44c8-ac88-b7aed35cccc8",layerId:"foxglove.Urdf",url:"http://localhost:8050/assets/urdf/ur5.urdf",order:2}},cameraState:{perspective:!0,distance:2.847914826858753,phi:71.66371109252937,thetaOffset:135.4790422047014,targetOffset:[-.20462355047924227,.08890785926927076,22280064753084437e-33],target:[0,0,0],targetOrientation:[0,0,0,1],fovy:44,near:.7,far:5e3},followMode:"follow-pose",followTf:"base",scene:{labelScaleFactor:1,ignoreColladaUpAxis:!1,meshUpAxis:"y_up",syncCamera:!1,transforms:{showLabel:!1,enablePreloading:!0,labelSize:.19}},transforms:{"frame:base_link":{visible:!1},"frame:base":{visible:!1},"frame:base_link_inertia":{visible:!1},"frame:shoulder_link":{visible:!1},"frame:upper_arm_link":{visible:!1},"frame:forearm_link":{visible:!1},"frame:wrist_1_link":{visible:!1},"frame:wrist_2_link":{visible:!1},"frame:wrist_3_link":{visible:!1},"frame:flange":{visible:!1},"frame:tool0":{visible:!1},"frame:tool0_controller":{visible:!1},"frame:":{visible:!1}},topics:{"/move_group/display_grasp_markers":{visible:!1},"/move_group/display_cost_sources":{visible:!1},"/move_group/display_contacts":{visible:!1},"/ur5_sim2real_bridge/camera1":{visible:!1},"/initialpose":{visible:!1},"/move_base_simple/goal":{visible:!1}},publish:{type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:.26179939},imageMode:{}},"RawMessages!os6rgs":{diffEnabled:!1,diffMethod:"custom",diffTopicPath:"",showFullMessageForDiff:!1,topicPath:""}},globalVariables:{},userNodes:{},playbackConfig:{...ci},layout:{first:"3D!18i6zy7",second:"RawMessages!os6rgs",direction:"row",splitPercentage:70}};var di=i(52691);function xh(e){const{isDesktop:t,onClose:s}=e,{t:o}=(0,X.$G)("incompatibleLayoutVersion"),a=t??(0,Ln.Z)();return(0,n.jsxs)(Ze.Z,{open:!0,onClose:s,children:[(0,n.jsx)(Vt.Z,{children:o("title")}),(0,n.jsxs)(nn.Z,{children:[a&&(0,n.jsxs)(di.Z,{children:[o("desktopText"),(0,n.jsx)(sn.Z,{target:"_blank",href:"https://foxglove.dev/download",children:"https://foxglove.dev/download"}),"."]}),!a&&(0,n.jsx)(di.Z,{children:o("webText")})]}),(0,n.jsx)(Xt.Z,{children:(0,n.jsx)(U.Z,{onClick:s,variant:"contained",children:"OK"})})]})}var Ch="../../packages/studio-base/src/providers/CurrentLayoutProvider/index.tsx";const Eh=ve.ZP.getLogger(Ch),Sh=1;function Th({children:e}){const{enqueueSnackbar:t}=(0,ce.Ds)(),{getUserProfile:s,setUserProfile:o}=sh(),a=Mo(),r=(0,$e.z)(),l=(0,ds.Z)(),[d]=(0,c.useState)(()=>(0,Ft.Z)()),p=(0,c.useRef)(new Set),h=(0,c.useCallback)(xe=>{p.current.add(xe)},[]),f=(0,c.useCallback)(xe=>{p.current.delete(xe)},[]),[g,y]=(0,c.useState)({selectedLayout:void 0}),S=(0,c.useRef)(g),[N,k]=(0,c.useState)(!1),W=(0,c.useCallback)(xe=>{y(xe),S.current=xe;for(const ke of[...p.current])ke(xe)},[]),J=(0,c.useRef)([]),pe=(0,c.useRef)(new Set),ye=(0,c.useCallback)(xe=>{pe.current.add(xe)},[]),fe=(0,c.useCallback)(xe=>{pe.current.delete(xe)},[]),de=(0,c.useCallback)(()=>J.current,[]),ee=(0,c.useCallback)(xe=>{const ke=typeof xe=="function"?xe(J.current):xe;if(!oi()(ke,J.current)){J.current=ke;for(const Ue of[...pe.current])Ue(J.current)}},[]),[,Pe]=(0,So.Z)(async(xe,{saveToProfile:ke=!0}={})=>{if(xe==null){W({selectedLayout:void 0});return}try{W({selectedLayout:{id:xe,loading:!0,data:void 0}});const Ue=await a.getLayout(xe),dt=Ue?.baseline.data.version;if(dt!=null&&dt>Sh){k(!0),W({selectedLayout:void 0});return}if(!l())return;k(!1),Ue==null?W({selectedLayout:void 0}):(W({selectedLayout:{loading:!1,id:Ue.id,data:Ue.working?.data??Ue.baseline.data,name:Ue.name}}),ke&&o({currentLayoutId:xe}).catch(jt=>{console.error(jt),t(`The current layout could not be saved. ${jt.toString()}`,{variant:"error"})}))}catch(Ue){console.error(Ue),t(`The layout could not be loaded. ${Ue.toString()}`,{variant:"error"}),k(!1),W({selectedLayout:void 0})}},[t,l,a,W,o]),Ae=(0,c.useCallback)(xe=>{if(S.current.selectedLayout?.data==null||S.current.selectedLayout.loading===!0)return;const ke=S.current.selectedLayout.data,Ue=vh(ke,xe);if((0,v.isEqual)(ke,Ue)){Eh.warn("Panel action resulted in identical config:",xe);return}W({selectedLayout:{id:S.current.selectedLayout.id,data:Ue,loading:!1,name:S.current.selectedLayout.name,edited:!0}})},[W]);(0,c.useEffect)(()=>{const xe=({updatedLayout:ke})=>{ke&&S.current.selectedLayout&&ke.id===S.current.selectedLayout.id&&W({selectedLayout:{loading:!1,id:ke.id,data:ke.working?.data??ke.baseline.data,name:ke.name}})};return a.on("change",xe),()=>{a.off("change",xe)}},[a,W]),(0,c.useEffect)(()=>{const xe=async ke=>{if(!(ke.type!=="delete"||!S.current.selectedLayout?.id)&&ke.layoutId===S.current.selectedLayout.id){const Ue=await a.getLayouts();await Pe(Ue[0]?.id)}};return a.on("change",xe),()=>a.off("change",xe)},[t,a,Pe]),(0,ms.Z)(async()=>{if(ou()?.layoutId)return;const{currentLayoutId:xe}=await s(),ke=xe?await a.getLayout(xe):void 0;if(console.log("LAYOUT",ke),ke)await Pe(xe,{saveToProfile:!1});else{const Ue=await a.saveNewLayout({name:"Default",data:bh,permission:"CREATOR_WRITE"});await Pe(Ue.id)}},[s,a,Pe]);const at=(0,c.useMemo)(()=>({setSelectedLayoutId:Pe,getCurrentLayoutState:()=>S.current,savePanelConfigs:xe=>Ae({type:"SAVE_PANEL_CONFIGS",payload:xe}),updatePanelConfigs:(xe,ke)=>Ae({type:"SAVE_FULL_PANEL_CONFIG",payload:{panelType:xe,perPanelFunc:ke}}),createTabPanel:xe=>{Ae({type:"CREATE_TAB_PANEL",payload:xe}),ee([]),r.logEvent(Me.q.PANEL_ADD,{type:"Tab"})},changePanelLayout:xe=>Ae({type:"CHANGE_PANEL_LAYOUT",payload:xe}),overwriteGlobalVariables:xe=>Ae({type:"OVERWRITE_GLOBAL_DATA",payload:xe}),setGlobalVariables:xe=>Ae({type:"SET_GLOBAL_DATA",payload:xe}),setUserNodes:xe=>Ae({type:"SET_USER_NODES",payload:xe}),setPlaybackConfig:xe=>Ae({type:"SET_PLAYBACK_CONFIG",payload:xe}),closePanel:xe=>{Ae({type:"CLOSE_PANEL",payload:xe});const ke=(0,St.PC)(xe.root,xe.path);ee(Ue=>Ue.filter(dt=>dt!==ke)),r.logEvent(Me.q.PANEL_DELETE,typeof ke=="string"?{type:(0,je.$k)(ke)}:void 0)},splitPanel:xe=>Ae({type:"SPLIT_PANEL",payload:xe}),swapPanel:xe=>{const ke=J.current.includes(xe.originalId),Ue=Object.keys(S.current.selectedLayout?.data?.configById??{});if(Ae({type:"SWAP_PANEL",payload:xe}),ke){const dt=Object.keys(S.current.selectedLayout?.data?.configById??{});ee((0,v.difference)(dt,Ue))}r.logEvent(Me.q.PANEL_ADD,{type:xe.type,action:"swap"}),r.logEvent(Me.q.PANEL_DELETE,{type:(0,je.$k)(xe.originalId),action:"swap"})},moveTab:xe=>Ae({type:"MOVE_TAB",payload:xe}),addPanel:xe=>{Ae({type:"ADD_PANEL",payload:xe}),r.logEvent(Me.q.PANEL_ADD,{type:(0,je.$k)(xe.id)})},dropPanel:xe=>{Ae({type:"DROP_PANEL",payload:xe}),r.logEvent(Me.q.PANEL_ADD,{type:xe.newPanelType,action:"drop"})},startDrag:xe=>Ae({type:"START_DRAG",payload:xe}),endDrag:xe=>Ae({type:"END_DRAG",payload:xe})}),[r,Ae,Pe,ee]),pt=(0,ge.O4)({addLayoutStateListener:h,removeLayoutStateListener:f,addSelectedPanelIdsListener:ye,removeSelectedPanelIdsListener:fe,mosaicId:d,getSelectedPanelIds:de,setSelectedPanelIds:ee,actions:at});return(0,n.jsxs)(ut.ZP.Provider,{value:pt,children:[e,N&&(0,n.jsx)(xh,{onClose:()=>k(!1)})]})}var Ih="../../packages/studio-base/src/providers/ExtensionCatalogProvider.tsx";const mn=ve.ZP.getLogger(Ih);function Ph(e,t){const s={},o=[],a=[];mn.debug(`Activating extension ${e.qualifiedName}`);const r={exports:{}},l=h=>({react:c,"react-dom":si})[h],p={mode:"production",registerPanel:h=>{mn.debug(`Extension ${e.qualifiedName} registering panel: ${h.name}`);const f=`${e.qualifiedName}.${h.name}`;if(s[f]){mn.warn(`Panel ${f} is already registered`);return}s[f]={extensionName:e.qualifiedName,extensionNamespace:e.namespace,registration:h}},registerMessageConverter:h=>{mn.debug(`Extension ${e.qualifiedName} registering message converter from: ${h.fromSchemaName} to: ${h.toSchemaName}`),o.push(h)},registerTopicAliases:h=>{a.push({aliasFunction:h,extensionId:e.id})}};try{new Function("module","require",t)(r,l,{}),r.exports.activate(p)}catch(h){mn.error(h)}return{panels:s,messageConverters:o,topicAliasFunctions:a}}function Mh(e,t){return(0,se.M)((s,o)=>({downloadExtension:async a=>{const r=await fetch(a);return new Uint8Array(await r.arrayBuffer())},installExtension:async(a,r)=>{const l=e.find(p=>p.namespace===a);if(l==null)throw new Error("No extension loader found for namespace "+a);const d=await l.installExtension(r);return await o().refreshExtensions(),d},refreshExtensions:async()=>{if(e.length===0)return;const a=[],r={panels:{},messageConverters:[],topicAliasFunctions:[]};for(const l of e)try{for(const d of await l.getExtensions())try{a.push(d);const p=await l.loadExtension(d.id),h=Ph(d,p);Object.assign(r.panels,h.panels),r.messageConverters.push(...h.messageConverters),r.topicAliasFunctions.push(...h.topicAliasFunctions)}catch(p){mn.error("Error loading extension",p)}}catch(d){mn.error("Error loading extension list",d)}mn.debug(`Found ${a.length} extension(s)`),s({installedExtensions:a,installedPanels:r.panels,installedMessageConverters:r.messageConverters,installedTopicAliasFunctions:r.topicAliasFunctions})},installedExtensions:e.length===0?[]:void 0,installedPanels:{},installedMessageConverters:t??[],installedTopicAliasFunctions:[],uninstallExtension:async(a,r)=>{const l=e.find(d=>d.namespace===a);if(l==null)throw new Error("No extension loader found for namespace "+a);await l.uninstallExtension(r),await o().refreshExtensions()}}))}function wh({children:e,loaders:t,mockMessageConverters:s}){const[o]=(0,c.useState)(Mh(t,s)),a=o.getState().refreshExtensions;return(0,c.useEffect)(()=>{a().catch(r=>mn.error(r))},[a]),(0,n.jsx)(In.d.Provider,{value:o,children:e})}const Bh="https://raw.githubusercontent.com/foxglove/studio-extension-marketplace/main/extensions.json";function Dh({children:e}){const t=(0,c.useCallback)(async()=>await(await fetch(Bh)).json(),[]),s=(0,c.useCallback)(async a=>await(await fetch(a)).text(),[]),o=(0,ge.O4)({getAvailableExtensions:t,getMarkdown:s});return(0,n.jsx)(Zu.Provider,{value:o,children:e})}var jh=i(70659);const ui=(0,c.createContext)(void 0);ui.displayName="RemoteLayoutStorageContext";function Rh(){return(0,c.useContext)(ui)}const ay=null;var On=i(22970),Fo=i(30686);function pi(e){return e!=="CREATOR_WRITE"}function an(e){return pi(e.permission)}function fi(e){return e.syncInfo?.status==="locally-deleted"||e.syncInfo?.status==="remotely-deleted"&&e.working==null}var Lh="../../packages/studio-base/src/services/LayoutManager/NamespacedLayoutStorage.ts";const hi=ve.ZP.getLogger(Lh);class Nh{storage;namespace;#e;constructor(t,s,{migrateUnnamespacedLayouts:o,importFromNamespace:a}){this.storage=t,this.namespace=s,this.#e=async function(){o&&await t.migrateUnnamespacedLayouts?.(s).catch(r=>hi.error("Migration failed:",r)),a!=null&&await t.importLayouts({fromNamespace:a,toNamespace:s}).catch(r=>hi.error("Import failed:",r))}()}async list(){return await this.#e,await this.storage.list(this.namespace)}async get(t){return await this.#e,await this.storage.get(this.namespace,t)}async put(t){return await this.#e,await this.storage.put(this.namespace,t)}async delete(t){await this.#e,await this.storage.delete(this.namespace,t)}}class Oh{storage;#e=new Map;constructor(t){this.storage=t}#t(t){let s=this.#e.get(t);return s||(s=new hn.BL(async()=>await this.storage.list(t).then(o=>new Map(o.map(a=>[a.id,a])))),this.#e.set(t,s)),s}async importLayouts(t){return await this.storage.importLayouts(t)}async migrateUnnamespacedLayouts(t){await this.storage.migrateUnnamespacedLayouts?.(t)}async list(t){return Array.from((await this.#t(t).get()).values())}async get(t,s){return(await this.#t(t).get()).get(s)}async put(t,s){const o=await this.storage.put(t,s);return(await this.#t(t).get()).set(o.id,o),o}async delete(t,s){await this.storage.delete(t,s),(await this.#t(t).get()).delete(s)}}var kh=i(28783);function Zh(e,t){const s=(0,kh.H)(e,t);for(const o of s)if(o.op==="replace"||o.op==="remove"||o.value!=null)return!1;return!0}var Fh="../../packages/studio-base/src/services/LayoutManager/computeLayoutSyncOperations.ts";const ts=ve.ZP.getLogger(Fh);function zh(e,t){const s=[],o=new Map(t.map(a=>[a.id,a]));for(const a of e){const r=o.get(a.id);if(r)switch(o.delete(a.id),a.syncInfo?.status){case void 0:case"new":if(ts.warn(`Remote layout is present but local has sync status: ${a.syncInfo?.status}`),an(a)){ts.warn(`Shared layout ${a.id} shouldn't be untracked`);continue}s.push({local:!1,type:"upload-new",localLayout:a});break;case"updated":s.push({local:!1,type:"upload-updated",localLayout:a});break;case"tracked":if(!r.savedAt)break;a.syncInfo.lastRemoteSavedAt!==r.savedAt&&s.push({local:!0,type:"update-baseline",localLayout:{...a,syncInfo:a.syncInfo},remoteLayout:r});break;case"locally-deleted":an(a)&&ts.warn(`Shared layout ${a.id} shouldn't be marked as locally deleted`),s.push({local:!1,type:"delete-remote",localLayout:a});break;case"remotely-deleted":ts.warn(`Remote layout is present but cache is marked as remotely deleted: ${a.id}`);break}else switch(a.syncInfo?.status){case void 0:case"new":if(an(a)){ts.warn(`Shared layout ${a.id} should have been uploaded at creation`);continue}s.push({local:!1,type:"upload-new",localLayout:a});break;case"updated":an(a)?s.push({local:!0,type:"mark-deleted",localLayout:a}):s.push({local:!0,type:"delete-local",localLayout:a});break;case"tracked":a.working==null||!an(a)?s.push({local:!0,type:"delete-local",localLayout:a}):s.push({local:!0,type:"mark-deleted",localLayout:a});break;case"locally-deleted":an(a)&&ts.warn(`Shared layout ${a.id} shouldn't be marked as locally deleted`),s.push({local:!0,type:"delete-local",localLayout:a});break;case"remotely-deleted":a.working==null&&s.push({local:!0,type:"delete-local",localLayout:a});break}}for(const a of o.values())s.push({local:!0,type:"add-to-cache",remoteLayout:a});return s}var gi=i(74354);function Gs(e,t,s){return typeof e=="string"?e===t?s:e:{...e,first:Gs(e.first,t,s),second:Gs(e.second,t,s)}}function mi(e,t,s,o){const a={...e,configById:{...e.configById,[s]:o}};if(delete a.configById[t],a.layout!=null){a.layout=Gs(a.layout,t,s);const r=Object.keys(a.configById).filter(je.lD);for(const l of r){const d=a.configById[l];(0,je.dr)(d)&&(a.configById[l]={...d,tabs:d.tabs.map(p=>({...p,layout:p.layout!=null?Gs(p.layout,t,s):void 0}))})}}return a}const ns={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:(0,v.round)(Math.PI/12,8)};function Gh(e){return{followTf:e.followTf,followMode:e.followMode==="follow-orientation"?"follow-pose":e.followMode==="follow"?"follow-position":"follow-none",cameraState:{...gi.d,...e.cameraState,phi:(e.cameraState?.phi??Math.PI/3)*180/Math.PI,thetaOffset:(e.cameraState?.thetaOffset??0)*180/Math.PI,fovy:(e.cameraState?.fovy??Math.PI/4)*180/Math.PI},publish:{type:"point",poseTopic:e.clickToPublishPoseTopic??ns.poseTopic,pointTopic:e.clickToPublishPointTopic??ns.pointTopic,poseEstimateTopic:e.clickToPublishPoseEstimateTopic??ns.poseEstimateTopic,poseEstimateXDeviation:e.clickToPublishPoseEstimateXDeviation??ns.poseEstimateXDeviation,poseEstimateYDeviation:e.clickToPublishPoseEstimateYDeviation??ns.poseEstimateYDeviation,poseEstimateThetaDeviation:e.clickToPublishPoseEstimateThetaDeviation??ns.poseEstimateThetaDeviation},topics:Object.fromEntries((0,on.Z)(e.checkedKeys??[],t=>t.startsWith("t:")?[t.substring(2),{visible:!0}]:void 0)),scene:{},transforms:{},layers:{},imageMode:{}}}function Uh(e){if(e.layout==null)return e;const t=(0,je.CD)(e.layout,e.configById).filter(o=>(0,je.$k)(o)==="3D Panel");let s=e;for(const o of t){const a=e.configById[o];a!=null&&(s=mi(s,o,(0,je.nJ)("3D"),Gh(a)))}return s}var Wh=i(86073);function Qh(e){return{cameraState:gi.d,followMode:"follow-pose",followTf:void 0,scene:{},transforms:{},topics:{},layers:{},publish:Wh.B,imageMode:{imageTopic:e.cameraTopic,calibrationTopic:void 0,synchronize:e.synchronize,rotation:e.rotation!=null&&[0,90,180,270].includes(e.rotation)?e.rotation:0,flipHorizontal:e.flipHorizontal,flipVertical:e.flipVertical,minValue:e.minValue,maxValue:e.maxValue,annotations:Object.fromEntries((e.enabledMarkerTopics??[]).map(t=>[t,{visible:!0}]))}}}function Yh(e){if(e.layout==null)return e;const t=(0,je.CD)(e.layout,e.configById).filter(o=>(0,je.$k)(o)==="ImageViewPanel");let s=e;for(const o of t){const a=e.configById[o];a!=null&&(s=mi(s,o,(0,je.nJ)("Image"),Qh(a)))}return s}function zo(e){let t={...e,configById:e.configById??e.savedProps??{}};return delete t.savedProps,t=Uh(t),t=Yh(t),t}function Hh(e){if(typeof e!="object"||e==null)throw new Error("Invariant violation - layout item is not an object");const t=e;if(!("id"in t)||!t.id)throw new Error("Invariant violation - layout item is missing an id");const s=new Date().toISOString();let o=t.baseline;if(!o)if(t.working)o=t.working;else if(t.data)o={data:t.data,savedAt:s};else if(t.state)o={data:t.state,savedAt:s};else throw new Error("Invariant violation - layout item is missing data");return{id:t.id,name:t.name??`Unnamed (${s})`,permission:t.permission?.toUpperCase()??"CREATOR_WRITE",working:t.working?{...t.working,data:zo(t.working.data)}:void 0,baseline:{...o,data:zo(o.data)},syncInfo:t.syncInfo}}var Vh="../../packages/studio-base/src/services/LayoutManager/LayoutManager.ts";const Rt=ve.ZP.getLogger(Vh);async function Go(e,t){const s=await e.updateLayout(t);switch(s.status){case"success":return s.newLayout;case"conflict":{const o=await e.getLayout(t.id);if(!o)throw new Error(`Update rejected but layout is not present on server: ${t.id}`);return Rt.info(`Layout update rejected, using server version: ${t.id}`),o}}}class Dt{static LOCAL_STORAGE_NAMESPACE="local";static REMOTE_STORAGE_NAMESPACE_PREFIX="remote-";#e;#t;supportsSharing;#n=new Fo.Z;#s=0;static#a(t,s,o){const a=o.value;o.value=async function(...r){try{return this.#s++,this.#n.emit("busychange"),await a.apply(this,r)}finally{this.#s--,this.#n.emit("busychange")}}}get isBusy(){return this.#s>0}isOnline=!1;error=void 0;setOnline(t){this.isOnline=t,this.#n.emit("onlinechange")}setError(t){this.error=t,this.#n.emit("errorchange")}constructor({local:t,remote:s}){this.#e=new hn.jK(new Nh(new Oh(t),s?Dt.REMOTE_STORAGE_NAMESPACE_PREFIX+s.namespace:Dt.LOCAL_STORAGE_NAMESPACE,{migrateUnnamespacedLayouts:!0,importFromNamespace:s?Dt.LOCAL_STORAGE_NAMESPACE:void 0})),this.#t=s,this.supportsSharing=s!=null}on(t,s){this.#n.on(t,s)}off(t,s){this.#n.off(t,s)}#o(t){queueMicrotask(()=>this.#n.emit("change",t))}async getLayouts(){return await this.#e.runExclusive(async t=>(await t.list()).filter(o=>!fi(o)))}async getLayout(t){const s=await this.#e.runExclusive(async a=>await a.get(t));if(s)return fi(s)?void 0:s;if(Rt.debug(`No local layout id:${t}.`),!this.isOnline){Rt.debug("LayoutManager offline");return}Rt.debug(`Attempting to fetch from remote id:${t}`);const o=await this.#t?.getLayout(t);if(!o){Rt.debug(`No remote layout with id:${t}`);return}return await this.#e.runExclusive(async a=>{const r=await a.get(t);return r?(Rt.debug(`Local layout loaded while fetching remote id:${t}`),r):(Rt.debug(`Adding layout to cache from getLayout: ${o.id}`),await a.put({id:o.id,name:o.name,permission:o.permission,baseline:{data:o.data,savedAt:o.savedAt},working:void 0,syncInfo:{status:"tracked",lastRemoteSavedAt:o.savedAt}}))})}async saveNewLayout({name:t,data:s,permission:o}){const a=zo(s);if(pi(o)){if(!this.#t)throw new Error("Shared layouts are not supported without remote layout storage");if(!this.isOnline)throw new Error("Cannot share a layout while offline");const l=await this.#t.saveNewLayout({id:(0,Ft.Z)(),name:t,data:a,permission:o,savedAt:new Date().toISOString()}),d=await this.#e.runExclusive(async p=>await p.put({id:l.id,name:l.name,permission:l.permission,baseline:{data:l.data,savedAt:l.savedAt},working:void 0,syncInfo:{status:"tracked",lastRemoteSavedAt:l.savedAt}}));return this.#o({type:"change",updatedLayout:void 0}),d}const r=await this.#e.runExclusive(async l=>await l.put({id:(0,Ft.Z)(),name:t,permission:o,baseline:{data:a,savedAt:new Date().toISOString()},working:void 0,syncInfo:this.#t?{status:"new",lastRemoteSavedAt:void 0}:void 0}));return this.#o({type:"change",updatedLayout:r}),r}async updateLayout({id:t,name:s,data:o}){const a=new Date().toISOString(),r=await this.#e.runExclusive(async d=>await d.get(t));if(!r)throw new Error(`Cannot update layout ${t} because it does not exist`);const l=o==null?r.working:Zh(r.baseline.data,o)?void 0:{data:o,savedAt:a};if(s!=null&&an(r)){if(!this.#t)throw new Error("Shared layouts are not supported without remote layout storage");if(!this.isOnline)throw new Error("Cannot update a shared layout while offline");const d=await Go(this.#t,{id:t,name:s,savedAt:a}),p=await this.#e.runExclusive(async h=>await h.put({...r,name:d.name,baseline:{data:d.data,savedAt:d.savedAt},working:l,syncInfo:{status:"tracked",lastRemoteSavedAt:d.savedAt}}));return this.#o({type:"change",updatedLayout:p}),p}else{const d=this.#t!=null&&s!=null&&r.syncInfo!=null&&r.syncInfo.status!=="new",p=await this.#e.runExclusive(async h=>await h.put({...r,name:s??r.name,working:l,baseline:d?{...r.baseline,savedAt:a}:r.baseline,syncInfo:d?{status:"updated",lastRemoteSavedAt:r.syncInfo?.lastRemoteSavedAt}:r.syncInfo}));return this.#o({type:"change",updatedLayout:p}),p}}async deleteLayout({id:t}){const s=await this.#e.runExclusive(async o=>await o.get(t));if(!s)throw new Error(`Cannot update layout ${t} because it does not exist`);if(an(s)){if(!this.#t)throw new Error("Shared layouts are not supported without remote layout storage");if(s.syncInfo?.status!=="remotely-deleted"){if(!this.isOnline)throw new Error("Cannot delete a shared layout while offline");await this.#t.deleteLayout(t)}}await this.#e.runExclusive(async o=>{this.#t&&!an(s)?await o.put({...s,working:{data:s.working?.data??s.baseline.data,savedAt:new Date().toISOString()},syncInfo:{status:"locally-deleted",lastRemoteSavedAt:s.syncInfo?.lastRemoteSavedAt}}):await o.delete(t)}),this.#o({type:"delete",layoutId:t})}async overwriteLayout({id:t}){const s=await this.#e.runExclusive(async a=>await a.get(t));if(!s)throw new Error(`Cannot overwrite layout ${t} because it does not exist`);const o=new Date().toISOString();if(an(s)){if(!this.#t)throw new Error("Shared layouts are not supported without remote layout storage");if(!this.isOnline)throw new Error("Cannot save a shared layout while offline");const a=await Go(this.#t,{id:t,data:s.working?.data??s.baseline.data,savedAt:o}),r=await this.#e.runExclusive(async l=>await l.put({...s,baseline:{data:a.data,savedAt:a.savedAt},working:void 0,syncInfo:{status:"tracked",lastRemoteSavedAt:a.savedAt}}));return this.#o({type:"change",updatedLayout:r}),r}else{const a=await this.#e.runExclusive(async r=>await r.put({...s,baseline:{data:s.working?.data??s.baseline.data,savedAt:o},working:void 0,syncInfo:this.#t&&s.syncInfo?.status!=="new"?{status:"updated",lastRemoteSavedAt:s.syncInfo?.lastRemoteSavedAt}:s.syncInfo}));return this.#o({type:"change",updatedLayout:a}),a}}async revertLayout({id:t}){const s=await this.#e.runExclusive(async o=>{const a=await o.get(t);if(!a)throw new Error(`Cannot revert layout id ${t} because it does not exist`);return await o.put({...a,working:void 0})});return this.#o({type:"change",updatedLayout:s}),s}async makePersonalCopy({id:t,name:s}){const o=new Date().toISOString(),a=await this.#e.runExclusive(async r=>{const l=await r.get(t);if(!l)throw new Error(`Cannot make a personal copy of layout id ${t} because it does not exist`);const d=await r.put({id:(0,Ft.Z)(),name:s,permission:"CREATOR_WRITE",baseline:{data:l.working?.data??l.baseline.data,savedAt:o},working:void 0,syncInfo:{status:"new",lastRemoteSavedAt:o}});return await r.put({...l,working:void 0}),d});return this.#o({type:"change",updatedLayout:void 0}),a}#i;async syncWithRemote(t){if(this.#i)return Rt.debug("Layout sync is already in progress"),await this.#i;const s=performance.now();try{Rt.debug("Starting layout sync"),this.#i=this.#c(t),await this.#i,this.#o({type:"change",updatedLayout:void 0}),this.error&&this.setError(void 0)}catch(o){throw this.setError(o),o}finally{this.#i=void 0,Rt.debug(`Completed sync in ${((performance.now()-s)/1e3).toFixed(2)}s`)}}async#c(t){if(!this.#t||!this.isOnline)return;const[s,o]=await Promise.all([this.#e.runExclusive(async d=>await d.list()),this.#t.getLayouts()]);if(t.aborted)return;const a=zh(s,o),[r,l]=(0,v.partition)(a,d=>d.local);await Promise.all([this.#r(r,t),this.#l(l,t)])}async#r(t,s){await this.#e.runExclusive(async o=>{for(const a of t){if(s.aborted)return;switch(a.type){case"mark-deleted":{const{localLayout:r}=a;Rt.debug(`Marking layout as remotely deleted: ${r.id}`),await o.put({...r,syncInfo:{status:"remotely-deleted",lastRemoteSavedAt:void 0}});break}case"delete-local":Rt.debug(`Deleting local layout ${a.localLayout.id}, whose sync status was ${a.localLayout.syncInfo?.status}`),await o.delete(a.localLayout.id),this.#o({type:"delete",layoutId:a.localLayout.id});break;case"add-to-cache":{const{remoteLayout:r}=a;Rt.debug(`Adding layout to cache: ${r.id}`),await o.put({id:r.id,name:r.name,permission:r.permission,baseline:{data:r.data,savedAt:r.savedAt},working:void 0,syncInfo:{status:"tracked",lastRemoteSavedAt:r.savedAt}});break}case"update-baseline":{const{localLayout:r,remoteLayout:l}=a;Rt.debug(`Updating baseline for ${r.id}`),await o.put({id:l.id,name:l.name,permission:l.permission,baseline:{data:l.data,savedAt:l.savedAt},working:r.working,syncInfo:{status:r.syncInfo.status,lastRemoteSavedAt:l.savedAt}});break}}}})}async#l(t,s){const o=this.#t;if(!o)return;const a=await Promise.all(t.map(async r=>{switch(r.type){case"delete-remote":{const{localLayout:l}=r;return Rt.debug(`Deleting remote layout ${l.id}`),await o.deleteLayout(l.id)||Rt.warn(`Deleting layout ${l.id} which was not present in remote storage`),async d=>{s.aborted||await d.delete(l.id)}}case"upload-new":{const{localLayout:l}=r;Rt.debug(`Uploading new layout ${l.id}`);const d=await o.saveNewLayout({id:l.id,name:l.name,data:l.baseline.data,permission:l.permission,savedAt:l.baseline.savedAt??new Date().toISOString()});return async p=>{await p.put({...l,baseline:{...l.baseline,savedAt:d.savedAt},syncInfo:{status:"tracked",lastRemoteSavedAt:d.savedAt}})}}case"upload-updated":{const{localLayout:l}=r;Rt.debug(`Uploading updated layout ${l.id}`);const d=await Go(o,{id:l.id,name:l.name,data:l.baseline.data,savedAt:l.baseline.savedAt??new Date().toISOString()});return async p=>{await p.put({...l,name:d.name,baseline:{...l.baseline,savedAt:d.savedAt},syncInfo:{status:"tracked",lastRemoteSavedAt:d.savedAt}})}}}}));await this.#e.runExclusive(async r=>{await Promise.all(a.map(async l=>await l(r)))})}static{(0,On.__decorate)([Dt.#a],Dt.prototype,"saveNewLayout",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"updateLayout",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"deleteLayout",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"overwriteLayout",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"revertLayout",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"makePersonalCopy",null),(0,On.__decorate)([Dt.#a],Dt.prototype,"syncWithRemote",null)}}async function Uo(e){return await new Promise(t=>setTimeout(t,e))}var Xh="../../packages/studio-base/src/providers/LayoutManagerProvider.tsx";const Wo=ve.ZP.getLogger(Xh),Kh=3e4,$h=3*6e4;function Jh({children:e}){const t=th(),s=Rh(),o=(0,c.useMemo)(()=>new Dt({local:t,remote:s}),[t,s]),{online:a=!1}=(0,jh.Z)(),r=(0,ge.tC)();(0,c.useEffect)(()=>{o.setOnline(a)},[o,a]);const l=s!=null&&a&&r==="visible";return(0,c.useEffect)(()=>{if(!l)return;const d=new AbortController;return(async()=>{let p=0;for(;!d.signal.aborted;){try{await o.syncWithRemote(d.signal),p=0}catch(f){Wo.error("Sync failed:",f),p++}const h=Math.random()*Math.min($h,Kh*2**p);Wo.debug("Waiting",(h/1e3).toFixed(2),"sec for next sync",{failures:p}),await Uo(h)}})(),()=>{Wo.debug("Canceling layout sync due to effect cleanup callback"),d.abort()}},[l,o]),(0,n.jsx)(Jd.Provider,{value:o,children:e})}var qh=i(14075),_h=i(77357);const eg="data:image/png;base64,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",tg=i.p+"e7bf3d07c33884215d85.png",ng="data:image/png;base64,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",sg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASjSURBVHgB7d3BTRtbAIXh4QkJdtRABbRCGSzZUQMdUAYdUQM7WL33nMhRQCYOeH7jO/4+KVJMIoWg6OQwPnPn5Orq6t8JIPDPBBARMEBGwACZ0/cfuLy8nEb09PT05vWofw/43ft/16PRYIDM6Ue/MEpybmsqo/8PwHFaSgPXYICMgAEyAgbICBggI2CAjIABMgIGyHy4g1nK+/AWvfB9NBggc+I8GKCiwQAZAQNkBAyQOfn/h2swQEKDATICBsgIGCDz4ZL37u7uzev7+/tpH25ubqaLi4tfrx8eHqbn5+cJGI8GA2ROt/2GfTWXtVVjWXnfoIDxHHyDeX19nYAxbW0w711fX0+Fx8fHjR9/eXl583rXZrNuZIfSkA7t81kKX9fdzPWdi2swQEbAABkBA2Q23ot0dnY23d7e/vj5vt9FWlt/7/xdfz6wu40N5vz8fALY1dZ3kVZNYrWkXe9Taq76w3K4BgNkhjsPZpT9ytJ3GKPuiexjGh9dK9VggIyAATICBsg4kxfIaDBARsAAGQEDZAQMkBEwQEbAABkBA2Q8FwnIaDBAxnORgIznIgGZo3su0lxGOw/GOSiNYzn356tcgwEyAgbICBgg47lIQMZzkYCM5yIBGddggIznIh05z3dyja+kwQAZAQNkBAyQ8VwkIKPBABkBA2QEDJD59Hkw380O5mv+du8Cc9JggIyAATICBsjYwQAZDQbICBggI2CAzHA7mG3sZOZlH8MuNBggI2CAjIABMnYwQEaDATICBsgIGCCzuB3MNnYy87KT4U80GCAjYICMgAEydjBARoMBMgIGyAgYIOM8GP7IzoVdaDBARsAAGQEDZOxggIwGA2QEDJARMEBmuB3MUncu9iYskQYDZAQMkBEwQMYOBshoMEBGwAAZAQNkBAyQETBARsAAGQEDZD68F+n9PT/7ulfm5uZmuri4+PX64eFhen5+noDxaDBAZuvd1Pu+y3fVWFY8HQDGd/AN5vX1dQLG9OnzYK6vr6fC4+Pjxo+/vLy8eb1rs1k3skNpSIf2+SzF0r+uo5wf5BoMkBEwQEbAAJmN58GcnZ1Nt7e3P37+Xd/rrb93dlYtjGtjgzk/P58AdrX1XaRVk1gtadf7lJp3U2A5XIMBMsOdyTvKfuVYdhij7Ylc09svDQbICBggI2CAjOciARkNBsgIGCAjYIDMp8+D+W6WvvNyHk3D3uYnDQbICBggI2CAjB0MkNFggIyAATICBsgIGCAjYIDMcEvev2WZOi/LVL5CgwEyAgbICBggY8kLZDQYICNggIyAATKL3cFsYyczLyfjNUbfH2kwQEbAABkBA2TsYICMBgNkBAyQETBA5mh3MB+x45iXc2SOmwYDZAQMkBEwQMYOBshoMEBGwAAZAQNknAfDLOxd2ESDATICBsgIGCBjBwNkNBggI2CAjIABMovdwdi5zMvOha/QYICMgAEyAgbI2MEAGQ0GyAgYICNggIyAATICBsgIGCAjYIDMcPciucdoXut7jHxd5+XerZ80GCAjYICMgAEy7kUCMhoMkBEwQEbAABkBA2QEDJARMEBGwAAZAQNkBAyQ+Q/etxTOEdcWZAAAAABJRU5ErkJggg==",og=i.p+"0513b23d545c2bbec05a.png",ag="data:image/png;base64,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",ig="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAORSURBVHgB7dxRTttAFEBRU7HALCLLyiKyw1b94BMCwdcznpzzXanBRFfPmuG9bdv2dwMI/NkAIgIDZAQGyAgMkBEYICMwQEZggMz7o39wu902Pne9XrdneK6s4NH33wQDZAQGyAgMkHnb/C0SEDHBABmBATICA2QEBsgIDJARGCAjMEBGYIDM++Vy2QAKbvICGa9IQEZggIzAABmBATICA2Qe7uR1jP21+/2+PcNz5b9nvz9nYYIBMgIDZAQGyLjJC2RMMEBGYICMwAAZgQEy9sEAGadIQMYrEpARGCAjMEBGYICMwACZ5ffBzLpv47fP9ePnmuX3M+vnYSwTDJARGCAjMEDGTV4gY4IBMgIDZAQGyAgMkLEPBsg4RQIyXpGAjMAAGYEBMgIDZAQGyCy/D+a7jt4f4noAIx31fTfBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wRy9t6WyyvWAj9/Haj8P+zDBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wext1P6Po5/rqL0to/9fxjLBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzMvvg3mk2iviesDXRu2ROZvZ996YYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGbafTCz77n4raOf66j9Kq+y12X17+uzTDBARmCAjMAAGTd5gYwJBsgIDJARGCAjMEDGPhgg4xQJyHhFAjICA2QEBsgIDJARGCAz7T6Yo4za4+F6wM+8yl6ZvY3eU2OCATICA2QEBsi4yQtkTDBARmCAjMAAGYEBMvbBABmnSEDGKxKQERggIzBARmCAjMAAmWX2wYzee/FTr3o9YJa9LrN9jlWZYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGaZfTCVal+H6wH72Huvy+r7WY5mggEyAgNkBAbIuMkLZEwwQEZggIzAABmBATL2wQAZp0hAxisSkBEYICMwQEZggIzAAJmX2Qcz256Psz7XvfevHG2Vz38WJhggIzBARmCAjJu8QMYEA2QEBsgIDJARGCAjMEBGYICMwACZfyykld/DJR2SAAAAAElFTkSuQmCC",rg="data:image/png;base64,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",lg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVmSURBVHgB7d2/a11lHAbwt6JcVDCLioII4iZx6KKDhYot/gVubjorxSWTk1MWF/dubv4FQtQOd+iiww3dilAKij+GW1AIDjVvaDAmhDQ373Pu+fH5QCiFkJssD8/5nvd7zqVSysMCEPBEAQgRMECMgAFiBAwQI2CAGAEDxAgYIEbAADECBogRMECMgAFiBAwQI2CAGAEDxAgYIObJ0sjm5ma5fv16mc1mBRim5XJZ5vN5WSwWpYVmDebKlSvCBQZuY2OjXLt2rbTSrMHUX6za3t4uwDBtbW01LQpmMECMgAFiBAwQ02wGc5Z6bXeUWQ2MnwYDxHTWYA5pLjAdGgwQE28wx2cvwHRoMECMgAFiBAwQEw+YetfInSOYJg0GiOk8YOpdJXeWYBo0GCCms5O85jAwPRoMECNggBgBA8QIGCBGwAAxAgaIETBATOdPtDuu9ane087bdPU5wH80GCBGwAAxAgaIWfsMpqtZRupzbty4cfAuXzMZOEmDuaCdnZ2yXC4LcNLaG8zQLRaLgy/gJA0GiBEwQIyAAWIEDBAjYICYwe8i2T2C/tJggBgBA8QIGCBmtLtIdo9g/TSYc7J7BI/PLtI52T2Cx6fBADECBogRMECMgAFiBAwQM7r3Ip3GzhJ0T4MBYgQMECNggJjJvBep68+3swQaTIydJbCLFGNnCTQYIEiDeeT4eRizE7g4DQaI0WCO0VygHQ0GiBnde5HO+nnn/X5gdRoMECNggBgBA8SMbhfpvD/v8PvNYqA9DQaIETDH1CajzUAbAgaIcZL3ESd4oT0NBogRMECMgAFiBAwQI2CAmMHcRep667o1d6mYIg0GiBEwQIyAAWIGM4NZ99Z1K974yJRoMB3zxkemxC5Sx7zxkSnRYIAYAQPECBggRsAAMQIGiLGLdEHOs8DpNBggRsAAMQIGiLGL1IgdIzhJg2nEjhGcZBepETtGcJIGA8QIGCBGwAAxAgaIETBAjF2kkXD+hj7SYIAYAQPECBggxi7SyNiJok80mJGxE0Wf2EUaGTtR9IkGA8QIGCBGwAAxa5/BHD9R6+4HjIcGA8SsPWBqY9FaYJw0GCCmdwFTZzJj23SGqdJggBgBA8QIGCCmd7tI7ijBeGgwQEzvTvIC46HBADFrbzBmLjBeGgwQI2CAGAEDxAgYIEbAADHxu0ieWAfTpcEAMfGA8cQ6mC4NBojpPGA8sQ6mQ4MBYgQMECNggJjOt6ndUYLp0GCAmM5P8gLTocEAMfEGY+YC06XBADECBogRMEBMsxnM3t5emc1m7hrBwC2Xy9JKswazs7PT9BcDuleLwnw+L61c2v96WAACzGCAGAEDxAgYIGbt76aGoXrmxefK5U/eLxuvvVCeenZWhu6X23fL7s1b5e/fHpRWDHlhBTVc3v3yw1EEy1H//LVXfvjs62Yh4xIJVrD50dXRhUtV/6bayloRMLCCl99+vYxVveRrRcAA/9OymQkYGLg6L/lj937pIwEDA1cDZv75N+Xed3dK3wgYGLjnN185GMz+9NW3vQsZ52BgBF59742Df2vIHP3/ugkYWIPDIGitns/pU8gIGFiH8PHWvpzRETCwBpc/bXeY7VCdv9z7/s7BPKYv53QMeWEEarjUS6MaLn2Zv1QCBgbuz937vQyXyiUSDNzT+4Pdd7744OB2dd8IGBi4eueofvWRSyRYQX2sAWcTMLCCBz//Xsbq19t3SysCBlbw4/5QdYwtpv5Ni5u3SiueaAcrqnOPNz++Wl56a/jPhqnBUltZDU6PzAQGwSUSECNggBgBA8QIGCBGwAAxAgaIETBAjIABYgQMECNggBgBA8QIGCBGwAAx/wLclk8IqQ/rwwAAAABJRU5ErkJggg==",cg="data:image/png;base64,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",dg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVaSURBVHgB7d0/bttWAMfxp0BLTiF4KBzAcNwhS6dewTlDMhTw4LFnyNjBQAf1DPUVPHnxUNcwYMODwVt4Kus/AVSqQl06/IkU/fkAhJuXAnlglC+eSImvlFLqvo69vb3e/uyXHPXp5sx1E8+v+Y5vvm8KQIjAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPETAvfZH9/vwzZ1tZWGaLj4+PC+FnBADGTr08a53/449fz8v1Pe42xoa4Qhu729rYwftPz8/PSl/u4lT7//JdYnq/AvMyqv/dNez2Y7/Ncg+nY0dFR6dLBwUGBTeUaDBBjBdMxKw5YsIIBYqa785vSl7/uj91n/p/DclL68Gnn88rx+rT5649fmr/e3t4uQ3B9fV2GbPk8Pnn+AuT7y/5er8tWvX77er0OlRUMECMwQIzAADHTu+qiPHyU9+2s+W5yaONVVT3+nM1max0/u3r6+eFdWTm+bOjXPobqufO8PD7U121pvnx6e90OZfz+NvWkrDa0cfgnr9tNMLm/izTo7yIN7S7Sso9fhv1t6qH6/eeXfZt6SHeRVnEXqck1GCDGJ3k75rtIsGAFA8Q8XJnq7RrMpn3d/eHTp5MfmmNDf6LdUK16op3HH2T1MV8rGCDGNZiO+S4SLFjBADECA8QIDBBjV4EW7CrQHbsKvA52FWjJrgLdsKvA+rlNDYyKwAAxPgfTMd9FggUrGCDGCqZjVhywYAUDxFjBdMx3kWDBCgaIERggRmCAGNdgOubaByxYwQAxAgPECAwQ4xrMN1r1dPyh2MTHYTAuVjBAjMAAMQIDxAgMECMwQIxdBVpYtasA8N/qvo6vcduYoz7dnLlu4vk13/HN11skIEZggBiBAWIEBoiZ7M5v6sLa/LnzXYGu/XY5L0NkBQPECAwQIzBAzPSuunj8RMzb2W7jN4xnxstOY7icXT39/PDOuPGXjy+rqurx52w263V8en+dt6xmfD3jMF7uIq2Zu0gkuIsEvDoCA8QIDBBV93V4XIPza77jnq8VDBAjMECMwAAxAgPECAwQY1eBFuwqAO3VfR1uUzu/5jvu+XqLBMQIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMXYVaMGuAtBe3ddhVwHn13zHPV9vkYAYgQFiBAaIERggZjKfz+vCaP1Sfiysz2E5KSxYwQAxAgPECAwQM62q6vE/ZrNZ4zeMj2P8rrp4/MTT29mu8TWMl+bpf/Wvw2lh5CbGex1/3dxFGjl3kdbLXaQm12CAGIEBYgQGiKr7Ojyuwfk133HP1woGiBEYIEZggBiBAWIEBoixq0ALdhWA9uq+DrepnV/zHfd8vUUCYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYuwq0YFcBaK/u67CrgPNrvuOer7dIQIzAADECA8QIDBAzmc/ndRmwTzufC3Tt/eVN6dJhOSn8mxUMECMwQIzAADFvqqoqD8eyoY2fXT0dxo13Od6VTfl3tO5xKxggxl0kXiV3kdbDCgaIERggRmCAqLqvw+ManF/zHfd8rWCAGIEBYgQGiBEYIEZggBi7CrRgVwFor+7rcJva+TXfcc/XWyQgRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYICYvwFzCRzd8/E02wAAAABJRU5ErkJggg==",ug="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAReSURBVHgB7d3PKnRxHMfxHyHkX0hplCwsrOQK7LkG92DrLlyILVvXYGVB2ZBSLFgoqefpnPI0T8/QmScfc6Zer9JIpyxmznt+v++ZPyPb29u/CkDAaAEIERggRmCAGIEBYgQGiBEYIEZggJix0qfR0dEyPz9fJicn6x/a5+3trTw/P5eXl5cCg9RXYMbGxsrq6mp9S3tNTEyU5eXlsrCwUO7v78v7+3uBQehriyQuw+XjCaFadcIgNH7kzczMiMsQqu6zaksLg9A4MB6kw8usjEFpHJhqX89wEhgGxeYciBEYIEZggBiBAWIEBogRGCBGYIAYgaGxubm5MjU1VaApgWmJxcXFcnR0VNbW1j49Zm9vrxweHg7sJN/Z2SmdTqdAUwLTEq+vr/VtFZBekanisr+/X66urv4cC20nMC1RReP4+Lg8Pj7+E5mPuJydnZXT09MCw0JgWqRXZMSFYTbS9JsdNzY2Cj+jmrF0r2K+Iy43Nzd9Hb+yslIPdbutr6/Xn5L39PT019/v7u5s2+jJB7y0UHWyXlxc1IH5+P2nLS0t1ZHpNj4+XmZnZ/8ZMlfBERh6sYJpoY9t0fn5ednc3KxP9mrrdHt7W/5XvyuYXnZ3d+vVyvX1dYEmzGBapnvmcnJy8ungF4aBwLRIr4HuV1eXoO0EpiWqrdBnV4u6I3NwcFBgWJjBtEgVmeqFdJ+phqvT09N1aPr1HTOYra2t+n8/PDwUaMJVpBb5Ki6VaiUzyKs1l5eXBfphiwTECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAz0ul0Gr0XCaBfVjBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPE/Aa7QMSy8qBRaAAAAABJRU5ErkJggg==",pg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO4SURBVHgB7dzBbVpBGEbRcUQXtEIRrwjKogiKoC+yjvVblnjvSg4+R5pFFGWRb3FFzGQ+1lrPBRD4swAiAgNkBAbICAyQERggIzBARmCAzOmr33g8Hv/8+nK5rFfcbrf1zq7X63qFXWZ2mf3UXb77+/gEA2QEBsgIDJD5WP4vEhDxCQbICAyQERggIzBARmCAjMAAGYEBMgIDZE7bti2AynPPOZ/Pu/78ux672MUu6+mfSEBGYICMwAAZgQEyAgNk8jd53/1r8Pv9vl5hl5ldZj91l+/+Pj7BABmBATICA6TcQAyOXexiFzd5gZDAABmBATICA2QEBsgIDJD52LbtuQAivr8Pjl3sYhf3YICQwAAZgQEyAgNkBAbInFbMC2Uzu8zsMvOiHcAn+Zu8wO/lEwyQyX8G8+q/Od+dXWZ2mf2vu/gEA2S+/ATjZy7AXj7BABmBATICA2QEBsh40Q5IeYkrOHaxi128aAeEBAbICAyQERggIzBAJn8PxgtlM7vM7DLzoh3AJwIDZAQGSLmBGBy72MUubvICIYEBMgIDZAQGyAgMkBEYIONFOyDl+/vg2MUudnEPBggJDJARGCAjMEBGYICMF+128nLbzC4zL9oBHERggIzAACk3EINjF7vYxU1eICQwQEZggIzAABmBATICA2S8aAekfH8fHLvYxS7uwQAhgQEyAgNkBAbICAyQ8aLdTl5um9ll5kU7gIMIDJARGCDlBmJw7GIXu7jJC4QEBsgIDJARGCAjMEBGYICMF+2AlO/vg2MXu9jFPRggJDBARmCAjMAAGYEBMl6028nLbTO7zLxoB3AQgQEyAgOk3EAMjl3sYhc3eYGQwAAZgQEyAgNkBAbICAyQ8aIdkPL9fXDsYhe7uAcDhAQGyAgMkBEYICMwQMaLdjt5uW1ml5kX7QAOIjBARmCAlBuIwbGLXeziJi8QEhggIzBARmCAjMAAGYEBMl60A1K+vw+OXexiF/dggJDAABmBATICA2QEBsh40W4nL7fN7DLzoh3AQQQGyAgMkHIDMTh2sYtd3OQFQgIDZAQGyAgMkBEYICMwQMaLdkDK9/fBsYtd7OIeDBASGCAjMEBGYICMwAAZL9rt5OW2mV1mXrQDOIjAABmBAVJuIAbHLnaxi5u8QEhggIzAABmBATICA2QEBsh40Q5I+f4+OHaxi13cgwFCAgNkBAbICAyQERgg40W7nbzcNrPLzIt2AAcRGCAjMEDKDcTg2MUudnGTFwgJDJARGCAjMEBGYIDMX00akEYmuJ9MAAAAAElFTkSuQmCC",fg="data:image/png;base64,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",hg="data:image/png;base64,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",gg=i.p+"fb62755380433e4f4f1c.png",mg=i.p+"26c813b3e19fb7c31c1d.png",yg="data:image/png;base64,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",Ag="data:image/png;base64,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",vg="data:image/png;base64,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",bg="data:image/png;base64,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",xg=e=>[{title:e("3D"),type:"3D",description:e("3DPanelDescription"),thumbnail:mg,module:async()=>({default:(await Promise.all([i.e(7984),i.e(650),i.e(3502),i.e(5457)]).then(i.bind(i,45457))).ThreeDeePanel})},{title:e("ROSDiagnosticsDetail"),type:"DiagnosticStatusPanel",description:e("ROSDiagnosticsDetailDescription"),thumbnail:vg,module:async()=>await Promise.all([i.e(8992),i.e(7984),i.e(5782),i.e(6289),i.e(3082),i.e(873),i.e(1234),i.e(1194)]).then(i.bind(i,97287)),hasCustomToolbar:!0},{title:e("ROSDiagnosticSummary"),type:"DiagnosticSummary",description:e("ROSDiagnosticSummaryDescription"),thumbnail:bg,module:async()=>await Promise.all([i.e(3509),i.e(8867)]).then(i.bind(i,48867)),hasCustomToolbar:!0},{title:e("image"),type:"Image",description:e("imageDescription"),thumbnail:gg,module:async()=>({default:(await Promise.all([i.e(7984),i.e(650),i.e(3502),i.e(5457)]).then(i.bind(i,45457))).ImagePanel})},{title:e("ConfigEditor"),type:"ConfigEditor",description:e("ConfigEditorDescription"),thumbnail:fg,module:async()=>await Promise.all([i.e(3361),i.e(1832)]).then(i.bind(i,81832))},{title:e("indicator"),type:"Indicator",description:e("indicatorDescription"),thumbnail:ng,module:async()=>await i.e(5807).then(i.bind(i,15807))},{title:e("gauge"),type:"Gauge",description:e("gaugeDescription"),thumbnail:tg,module:async()=>await i.e(9235).then(i.bind(i,9235))},{title:e("teleop"),type:"Teleop",description:e("teleopDescription"),thumbnail:hg,module:async()=>await i.e(5144).then(i.bind(i,55144))},{title:e("map"),type:"map",description:e("mapDescription"),thumbnail:og,module:async()=>await Promise.all([i.e(6201),i.e(6503)]).then(i.bind(i,6503))},{title:e("parameters"),type:"Parameters",description:e("parametersDescription"),thumbnail:ig,module:async()=>await Promise.all([i.e(6289),i.e(6060)]).then(i.bind(i,16060))},{title:e("plot"),type:"Plot",description:e("plotDescription"),thumbnail:rg,module:async()=>await Promise.all([i.e(8992),i.e(7984),i.e(5782),i.e(873)]).then(i.bind(i,90873))},{title:e("publish"),type:"Publish",description:e("publishDescription"),thumbnail:lg,module:async()=>await i.e(531).then(i.bind(i,10531))},{title:e("rawMessages"),type:"RawMessages",description:e("rawMessagesDescription"),thumbnail:cg,module:async()=>await Promise.all([i.e(8992),i.e(7984),i.e(5782),i.e(650),i.e(873),i.e(1234),i.e(3949)]).then(i.bind(i,52226)),hasCustomToolbar:!0},{title:e("log"),type:"RosOut",description:e("logDescription"),thumbnail:sg,module:async()=>await Promise.all([i.e(3509),i.e(7221)]).then(i.bind(i,87221)),hasCustomToolbar:!0},{title:e("stateTransitions"),type:"StateTransitions",description:e("stateTransitionsDescription"),thumbnail:dg,module:async()=>await Promise.all([i.e(8992),i.e(7984),i.e(5782),i.e(873),i.e(1234),i.e(9839)]).then(i.bind(i,11234))},{title:e("table"),type:"Table",description:e("tableDescription"),thumbnail:pg,module:async()=>await Promise.all([i.e(1340),i.e(4933)]).then(i.bind(i,44933)),hasCustomToolbar:!0},{title:e("topicGraph"),type:"TopicGraph",description:e("topicGraphDescription"),thumbnail:yg,module:async()=>await Promise.all([i.e(1961),i.e(1015)]).then(i.bind(i,71015))},{title:e("dataSourceInfo"),type:"SourceInfo",description:e("dataSourceInfoDescription"),thumbnail:eg,module:async()=>await i.e(1739).then(i.bind(i,31739))},{title:e("variableSlider"),type:"GlobalVariableSliderPanel",description:e("variableSliderDescription"),thumbnail:Ag,module:async()=>await Promise.all([i.e(3630),i.e(4585)]).then(i.bind(i,74585))},{title:e("userScripts"),type:"NodePlayground",description:e("userScriptsDescription"),thumbnail:ag,module:async()=>await Promise.all([i.e(650),i.e(9308),i.e(2878),i.e(4942),i.e(1159)]).then(i.bind(i,66838))},{title:e("tab"),type:Tn.bm,description:e("tabDescription"),thumbnail:ug,module:async()=>await i.e(4216).then(i.bind(i,14216)),hasCustomToolbar:!0}],Cg=e=>[{title:e("studioPlaybackPerformance"),type:"PlaybackPerformance",description:e("studioPlaybackPerformanceDescription"),module:async()=>await i.e(6213).then(i.bind(i,86213))}];function Eg(e){const[t=!1]=(0,_t.b)(C.o.SHOW_DEBUG_PANELS),{t:s}=(0,X.$G)("panels"),o=(0,In.I)(f=>f.installedPanels),a=(0,c.useMemo)(()=>Object.values(o??{}).map(f=>{const g=`${f.extensionName}.${f.registration.name}`,y=S=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(_h._,{config:S.config,saveConfig:S.saveConfig,initPanel:f.registration.initPanel})});return y.panelType=g,y.defaultConfig={},{category:"misc",title:f.registration.name,type:g,module:async()=>({default:(0,qh.Z)(y)}),extensionNamespace:f.extensionNamespace}}),[o]),r=(0,c.useMemo)(()=>({builtin:xg(s),debug:Cg(s)}),[s]),l=(0,c.useMemo)(()=>[...r.builtin,...r.debug,...a],[a,r]),d=(0,c.useMemo)(()=>{const f=[...r.builtin];return t&&f.push(...r.debug),f.push(...a),f},[t,a,r]),p=(0,c.useMemo)(()=>{const f=new Map;for(const g of l){const y=g.type;f.set(y,g)}return f},[l]),h=(0,c.useMemo)(()=>({getPanels(){return d},getPanelByType(f){return p.get(f)}}),[p,d]);return(0,n.jsx)(Ao.Z.Provider,{value:h,children:e.children})}const yi={},Qo="studio.profile-data";function Sg({children:e}){const t=(0,c.useCallback)(async()=>{const a=localStorage.getItem(Qo);return a!=null?JSON.parse(a):yi},[]),s=(0,c.useCallback)(async a=>{const r=localStorage.getItem(Qo),l=r!=null?JSON.parse(r):yi,d=typeof a=="function"?a(l):(0,v.merge)(l,a);localStorage.setItem(Qo,JSON.stringify(d)??"")},[]);(0,c.useEffect)(()=>{s(a=>({...a,firstSeenTime:a.firstSeenTime??new Date().toISOString(),firstSeenTimeIsFirstLoad:a.firstSeenTimeIsFirstLoad??a.currentLayoutId==null})).catch(console.error)},[s]);const o=(0,ge.O4)({getUserProfile:t,setUserProfile:s});return(0,n.jsx)(Zo.Provider,{value:o,children:e})}var Yo=i(33853);const Tg=(0,b.ZL)()(e=>({button:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2),gap:e.spacing(1.5),borderColor:e.palette.divider,height:"100%"},paper:{maxWidth:480}}));function Ig(){const{classes:e}=Tg(),[t,s]=(0,ht.b)(C.o.LAUNCH_PREFERENCE),[o,a]=(0,ge.UG)(C.o.LAUNCH_PREFERENCE),[r,l]=(0,c.useState)(t!=null);async function d(){a(xt.WEB),r&&await s(xt.WEB)}async function p(){a(xt.DESKTOP),r&&await s(xt.DESKTOP)}async function h(){r&&await s(void 0),l(!r)}const f=[{key:xt.WEB,primary:"Web",secondary:"Requires Chrome v76+",onClick:()=>void d()},{key:xt.DESKTOP,primary:"Desktop App",secondary:"For Linux, Windows, and macOS",onClick:()=>void p()}];return(0,n.jsxs)(Ze.Z,{open:!0,classes:{paper:e.paper},children:[(0,n.jsx)(te.Z,{paddingX:2,paddingTop:3,children:(0,n.jsx)(ie.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launch Foxglove Studio"})}),(0,n.jsx)(nn.Z,{children:(0,n.jsxs)(Yo.ZP,{container:!0,spacing:1,children:[f.map(g=>(0,n.jsx)(Yo.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(U.Z,{className:e.button,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",onClick:g.onClick,children:(0,n.jsxs)(te.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(ie.Z,{variant:"subtitle1",color:"text.primary",children:g.primary}),(0,n.jsx)(ie.Z,{variant:"body2",color:"text.secondary",children:g.secondary})]})})},g.key)),(0,n.jsx)(Yo.ZP,{item:!0,xs:12,children:(0,n.jsx)(ys.Z,{label:"Remember my preference",control:(0,n.jsx)($n.Z,{color:"primary",checked:r,onChange:h})})})]})})]})}function Pg(){const[,e]=(0,ge.UG)(C.o.LAUNCH_PREFERENCE),t=new URL(window.location.href);t.searchParams.delete("openIn");function s(){e(xt.WEB),window.location.href=t.href}return(0,c.useEffect)(()=>{const o=new URL("foxglove://open");t.searchParams.forEach((a,r)=>{if(r&&a)switch(o.searchParams.set(r,a),r){case"ds":o.searchParams.set("type",a);break;case"ds.deviceId":o.searchParams.set("deviceId",a);break;case"ds.importId":o.searchParams.set("importId",a);break;case"ds.end":o.searchParams.set("end",a);break;case"ds.start":o.searchParams.set("start",a);break;case"ds.url":o.searchParams.set("url",a);break;case"time":o.searchParams.set("seekTo",a);break}}),window.location.href=o.href}),(0,n.jsx)(te.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,children:(0,n.jsxs)(te.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,gap:2.5,style:{maxWidth:480},children:[(0,n.jsx)(ie.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launching Foxglove Studio\u2026"}),(0,n.jsx)(ie.Z,{align:"center",fontWeight:600,children:"We\u2019ve directed you to the desktop app."}),(0,n.jsxs)(te.Z,{gap:.5,children:[(0,n.jsxs)(ie.Z,{align:"center",children:["You can also"," ",(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",onClick:s,children:"open this link in your browser"}),"."]}),(0,n.jsxs)(ie.Z,{align:"center",children:["Don\u2019t have the app installed?\xA0",(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",href:"https://foxglove.dev/download",target:"_blank",children:"Download Foxglove Studio"})]})]})]})})}function Mg(e){const[t]=(0,ht.b)(C.o.LAUNCH_PREFERENCE),[s]=(0,ge.UG)(C.o.LAUNCH_PREFERENCE),o=new URL(window.location.href);let a=s??o.searchParams.get("openIn")??t;switch(a){case xt.WEB:case xt.DESKTOP:case xt.ASK:break;default:a=xt.WEB}const r=Array.from(o.searchParams.entries()).length>0;return a===xt.ASK&&r?(0,n.jsx)(Ig,{}):a===xt.DESKTOP&&r?(0,n.jsx)(Pg,{}):(0,n.jsx)(n.Fragment,{children:e.children})}function Ai(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))return e.preventDefault(),!1}function wg(e){const{appConfiguration:t,dataSources:s,layoutStorage:o,extensionLoaders:a,nativeAppMenu:r,nativeWindow:l,deepLinks:d,enableLaunchPreferenceScreen:p,enableGlobalCss:h=!1,extraProviders:f}=e,g=[(0,n.jsx)(Sg,{}),(0,n.jsx)(ue,{}),(0,n.jsx)(ei.Vh,{}),(0,n.jsx)(Th,{}),(0,n.jsx)(Dh,{}),(0,n.jsx)(wh,{loaders:a}),(0,n.jsx)(Wf,{playerSources:s}),(0,n.jsx)(H,{})];r&&g.push((0,n.jsx)(pp.Provider,{value:r})),l&&g.push((0,n.jsx)(cf.Provider,{value:l})),f?g.unshift(...f):(g.unshift((0,n.jsx)(Jh,{})),g.unshift((0,n.jsx)(nh.Provider,{value:o}))),g.unshift((0,n.jsx)(_f,{})),g.unshift((0,n.jsx)(A,{}));const y=p===!0?Mg:c.Fragment;return(0,c.useEffect)(()=>(document.addEventListener("contextmenu",Ai),()=>document.removeEventListener("contextmenu",Ai)),[]),(0,n.jsx)(eh.Z.Provider,{value:t,children:(0,n.jsxs)(sf,{children:[h&&(0,n.jsx)(Q,{}),(0,n.jsx)(of.Z,{children:(0,n.jsx)(Rs.Z,{children:(0,n.jsx)(y,{children:(0,n.jsxs)(da,{providers:g,children:[(0,n.jsx)(rf,{}),(0,n.jsx)(Xf,{}),(0,n.jsx)(x.W,{backend:F.PD,children:(0,n.jsx)(c.Suspense,{fallback:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)(Eg,{children:(0,n.jsx)(ef,{deepLinks:d,appBarLeftInset:e.appBarLeftInset,onAppBarDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow})})})})]})})})})]})})}var Bg=i(1313),Dg=i.n(Bg),jg=i(36537);const Rg=null,Lg=(()=>{function e(s){const o=["span",{}];let a=0,r=s.length%3;for(r===0&&(r=3);a<s.length;)o.push(["span",{style:r<s.length?"margin-right: 2px;":""},s.substring(a,r)]),a=r,r+=3;return o}return{header(s){const o=s;if(!(0,he.isTime)(s)||o.sec<0||o.nsec<0||o.nsec>=1e9||!Number.isInteger(o.sec)||!Number.isInteger(o.nsec))return Rg;const a=o.nsec.toFixed().padStart(9,"0"),r=Dg()(`${o.sec}.${a}`);return["span",{style:`color: hsl(${r()*360}deg, ${40+r()*60}%, ${20+r()*40}%);`},e(String(o.sec)),".",e(a)]},hasBody(){return!1}}})();function Ng(){window.devtoolsFormatters=(0,jg.N)(window).devtoolsFormatters??[],window.devtoolsFormatters.push(Lg)}var Og=i(64578);async function kg(){return await Promise.all([...document.fonts].map(async e=>await e.load()))}var Zg=i(24991),Fg=i(42754);const zg={addPanel:"Add panel",noLayoutSelected:"<selectLayoutLink>Select a layout</selectLayoutLink> to get started!",noPanelsMatchSearchCriteria:"No panels match search criteria.",searchPanels:"Search panels",selectPanelToAddToLayout:"Select a panel below to add it to your layout."},Gg={about:"About",exploreSampleData:"Explore sample data",open:"Open\u2026",openLocalFile:"Open local file\u2026",openConnection:"Open connection\u2026",noDataSource:"No data source",joinOurSlack:"Join our Slack",recentDataSources:"Recent data sources",hideLeftSidebar:"Hide left sidebar",showLeftSidebar:"Show left sidebar",hideRightSidebar:"Hide right sidebar",showRightSidebar:"Show right sidebar",viewOurDocs:"View our docs",file:"File",view:"View",help:"Help",signIn:"Sign in",unknown:"unknown",selectSource:"Select source"},Ug={settings:"Settings",colorScheme:"Color scheme",dark:"Dark",light:"Light",followSystem:"Follow system",language:"Language",displayTimestampsIn:"Display timestamps in",timestampFormat:"Timestamp format",messageRate:"Message rate",openLinksIn:"Open links in",webApp:"Web app",desktopApp:"Desktop app",askEachTime:"Ask each time",general:"General",ros:"ROS",privacy:"Privacy",privacyDescription:"Changes will take effect the next time Foxglove Studio is launched.",extensions:"Extensions",about:"About",sendAnonymizedUsageData:"Send anonymized usage data to help us improve Foxglove Studio",sendAnonymizedCrashReports:"Send anonymized crash reports",experimentalFeatures:"Experimental features",experimentalFeaturesDescription:"These features are unstable and not recommended for daily use.",noExperimentalFeatures:"Currently there are no experimental features.",studioDebugPanels:"Studio debug panels",studioDebugPanelsDescription:"Show Foxglove Studio debug panels in the \u201CAdd panel\u201D list.",memoryUseIndicator:"Memory use indicator",memoryUseIndicatorDescription:"Show the app memory use in the sidebar.",newNavigation:"New navigation",newNavigationDescription:"New top navigation bar.",restartTheAppForChangesToTakeEffect:" Restart the app for changes to take effect.",layoutDebugging:"Layout debugging",layoutDebuggingDescription:"Show extra controls for developing and debugging layout storage."},Wg={dataSource:"Data source",currentSource:"Current source",waitingForConnection:"Waiting for connection\u2026",startTime:"Start time",endTime:"End time",duration:"Duration"},Qg={foxglove:"Foxglove",learnMore:"Learn more"},Yg={title:"Incompatible layout version",desktopText:"This layout was created with a newer version of Foxglove Studio. Please update to the latest version at ",webText:"This layout was created with a newer version of Foxglove Studio. Please refresh your browser."},Hg={topicError:"Topic {{topic}} is not available",topic:"Topic"},Vg={newToFoxgloveStudio:"New to Foxglove Studio?",newToFoxgloveStudioDescription:"Start by exploring a sample dataset or checking out our documentation.",exploreSampleData:"Explore sample data",viewOurDocs:"View our docs",joinOurCommunity:"Join our community",joinOurCommunityDescription:"Join us on Slack or GitHub to get help, make feature requests, and report bugs.",joinOurSlack:"Join our Slack",openAGitHubIssue:"Open a GitHub issue",needHelp:"Need help?",needHelpDescription:"View our documentation, or check out the tutorials on the Foxglove blog.",seeTutorials:"See tutorials",collaborateTitle:"Accelerate development with Foxglove Data Platform",secureStorageOfData:"Securely store petabytes of ROS or custom data",convenientWebInterface:"Use a convenient web interface to tag, search, and retrieve data at lightning speed",canBeShared:"Share data files, visualization layouts, and custom extensions with teammates",createAFreeAccount:"Create a free account",signIn:"Sign in",learnMore:"Learn more",startCollaborating:"Start collaborating with your Foxglove organization",startCollaboratingDescription:"Make the most of your Foxglove account \u2013 whether you want to dive deep on your data or share tools with your teammates.",uploadToDataPlatform:"Upload to Data Platform",shareLayouts:"Share layouts",openLocalFile:"Open local file",openLocalFileDescription:"Visualize data directly from your local filesystem.",openUrl:"Upload and share data",openUrlDescription:"Use Foxglove Data Platform to share data with your team.",openConnection:"Open connection",openConnectionDescription:"Connect to a live robot or server.",openDataSource:"Open data source",recentDataSources:"Recent data sources"},Xg={instructions:"Please update to the latest version of the app.",warning:"This layout requires a more recent version of this panel."},Kg={"3D":"3D","3DPanelDescription":"Display markers, camera images, meshes, URDFs, and more in a 3D scene.",dataSourceInfo:"Data Source Info",dataSourceInfoDescription:"View details like topics and timestamps for the current data source.",gauge:"Gauge",gaugeDescription:"Display a colored gauge based on a continuous value.",image:"Image",ConfigEditor:"Config Editor",ConfigEditorDescription:"Edit configuration files.",imageLegacy:"Image (Legacy)",imageDescription:"Display annotated images.",indicator:"Indicator",indicatorDescription:"Display a colored and/or textual indicator based on a threshold value.",log:"Log",logDescription:"Display logs by node and severity level.",map:"Map",mapDescription:"Display points on a map.",parameters:"Parameters",parametersDescription:"Read and set parameters for a data source.",plot:"Plot",plotDescription:"Plot numerical values over time or other values.",publish:"Publish",publishDescription:"Publish messages to the data source (live connections only).",rawMessages:"Raw Messages",rawMessagesDescription:"Inspect topic messages.",ROSDiagnosticsDetail:"Diagnostics \u2013 Detail (ROS)",ROSDiagnosticsDetailDescription:"Display ROS DiagnosticArray messages for a specific hardware_id.",ROSDiagnosticSummary:"Diagnostics \u2013 Summary (ROS)",ROSDiagnosticSummaryDescription:"Display a summary of all ROS DiagnosticArray messages.",stateTransitions:"State Transitions",stateTransitionsDescription:"Track when values change over time.",studioPlaybackPerformance:"Studio - Playback Performance",studioPlaybackPerformanceDescription:"Display playback and data-streaming performance statistics.",tab:"Tab",tabDescription:"Group panels together in a tabbed interface.",table:"Table",tableDescription:"Display topic messages in a tabular format.",teleop:"Teleop",teleopDescription:"Teleoperate a robot over a live connection.",topicGraph:"Topic Graph",topicGraphDescription:"Display a graph of active nodes, topics, and services.",userScripts:"User Scripts",userScriptsDescription:"Write custom data transformations in TypeScript. Previously known as Node Playground.",variableSlider:"Variable Slider",variableSliderDescription:"Update numerical variable values for a layout."},$g={importOrExportSettings:"Import/export settings",importOrExportSettingsWithEllipsis:"Import/export settings...",resetToDefaults:"Reset to defaults",panelSettings:"Panel settings",selectAPanelToEditItsSettings:"Select a panel to edit its settings.",loadingPanelSettings:"Loading panel settings...",currentSettingsPanelName:"{{title}} panel settings",panelName:"{{title}} panel",panelDoesNotHaveSettings:"This panel does not have any settings",unknown:"Unknown"},Jg={deleteSeries:"Delete series",messagePath:"Message path",label:"Label",color:"Color",timestamp:"Timestamp",receiveTime:"Receive Time",headerStamp:"Header Stamp",series:"Series",addSeries:"Add series",maxYError:"Y max must be greater than Y min.",maxXError:"X max must be greater than X min.",general:"General",syncWithOtherPlots:"Sync with other plots",legend:"Legend",position:"Position",floating:"Floating",left:"Left",top:"Top",hidden:"Hidden",showValues:"Show values",yAxis:"Y Axis",showLabels:"Show labels",showLine:"Show lines",min:"Min",max:"Max",xAxis:"X Axis",value:"Value",index:"Index",currentPath:"Path (current)",accumulatedPath:"Path (accumulated)",secondsRange:"Range (seconds)"},qg={searchPanelSettings:"Search panel settings\u2026",title:"Title",clearSearch:"Clear search",labels:"Labels",showAll:"Show All",hideAll:"Hide All",filterList:"Filter list",filterListHelp:"Filter list by visibility",listAll:"List all",listVisible:"List visible",listInvisible:"List invisible",general:"General"},_g={frame:"Frame",color:"Color",position:"Position",lineWidth:"Line width",rotation:"Rotation",reset:"Reset",displayFrame:"Display frame",displayFrameHelp:"The coordinate frame to place the camera in. The camera position and orientation will be relative to the origin of this frame.",followMode:"Follow mode",followModeHelp:"Change the camera behavior during playback to follow the display frame or not.",pose:"Pose",fixed:"Fixed",frameNotFound:"Frame {{frameId}} not found",noCoordinateFramesFound:"No coordinate frames found",enablePreloading:"Enable preloading",lineColor:"Line color",axisScale:"Axis scale",labelSize:"Label size",labels:"Labels",editable:"Editable",settings:"Settings",transforms:"Transforms",showAll:"Show All",hideAll:"Hide All",scene:"Scene",renderStats:"Render stats",debugPicking:"Debug picking",background:"Background",labelScale:"Label scale",labelScaleHelp:"Scale factor to apply to all labels",ignoreColladaUpAxis:"Ignore COLLADA <up_axis>",ignoreColladaUpAxisHelp:"Match the behavior of rviz by ignoring the <up_axis> tag in COLLADA files",takeEffectAfterReboot:"This setting requires a restart to take effect",meshUpAxis:"Mesh up axis",meshUpAxisHelp:"The direction to use as \u201Cup\u201D when loading meshes without orientation info (STL and OBJ)",YUp:"Y-up",ZUp:"Z-up",view:"View",distance:"Distance",perspective:"Perspective",target:"Target",theta:"Theta",phi:"Phi",fovy:"Y-Axis FOV",near:"Near",far:"Far",syncCamera:"Sync camera",syncCameraHelp:"Sync the camera with other panels that also have this setting enabled.",topics:"Topics",customLayers:"Custom layers",addURDF:"Add URDF",size:"Size",divisions:"Divisions",grid:"Grid",delete:"Delete",addGrid:"Add Grid",imageAnnotations:"Image annotations",resetView:"Reset view"},em={settings:"\u8A2D\u5B9A",colorScheme:"\u30AB\u30E9\u30FC\u30B9\u30AD\u30FC\u30E0",dark:"\u30C0\u30FC\u30AF",light:"\u30E9\u30A4\u30C8",followSystem:"\u30B7\u30B9\u30C6\u30E0\u306B\u5F93\u3046",language:"\u8A00\u8A9E",displayTimestampsIn:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u3092\u8868\u793A",timestampFormat:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u5F62\u5F0F",messageRate:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30EC\u30FC\u30C8",openLinksIn:"\u30EA\u30F3\u30AF\u3092\u958B\u304F",webApp:"\u30A6\u30A7\u30D6\u30A2\u30D7\u30EA",desktopApp:"\u30C7\u30B9\u30AF\u30C8\u30C3\u30D7\u30A2\u30D7\u30EA",askEachTime:"\u6BCE\u56DE\u78BA\u8A8D\u3059\u308B",general:"\u4E00\u822C",ros:"ROS",privacy:"\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC",privacyDescription:"\u5909\u66F4\u306F\u6B21\u56DE\u306EFoxglove Studio\u8D77\u52D5\u6642\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",extensions:"\u62E1\u5F35\u6A5F\u80FD",about:"\u60C5\u5831",sendAnonymizedUsageData:"\u533F\u540D\u5316\u3055\u308C\u305F\u4F7F\u7528\u30C7\u30FC\u30BF\u3092\u9001\u4FE1\u3057\u3066\u3001Foxglove Studio\u306E\u6539\u5584\u306B\u5F79\u7ACB\u3066\u308B",sendAnonymizedCrashReports:"\u533F\u540D\u5316\u3055\u308C\u305F\u30AF\u30E9\u30C3\u30B7\u30E5\u30EC\u30DD\u30FC\u30C8\u3092\u9001\u4FE1",experimentalFeatures:"\u5B9F\u9A13\u7684\u6A5F\u80FD",experimentalFeaturesDescription:"\u3053\u308C\u3089\u306E\u6A5F\u80FD\u306F\u6319\u52D5\u304C\u4E0D\u5B89\u5B9A\u306A\u305F\u3081\u3001\u65E5\u3005\u306E\u5229\u7528\u306F\u63A8\u5968\u3055\u308C\u307E\u305B\u3093\u3002",noExperimentalFeatures:"\u73FE\u5728\u3001\u5B9F\u9A13\u7684\u6A5F\u80FD\u306F\u3042\u308A\u307E\u305B\u3093\u3002",studioDebugPanels:"Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB",studioDebugPanelsDescription:"\u300C\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0\u300D\u30EA\u30B9\u30C8\u306BFoxglove Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB\u3092\u8868\u793A\u3059\u308B\u3002",memoryUseIndicator:"\u30E1\u30E2\u30EA\u4F7F\u7528\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF",memoryUseIndicatorDescription:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u30A2\u30D7\u30EA\u306E\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF\u3092\u8868\u793A\u3059\u308B\u3002",newNavigation:"\u65B0\u3057\u3044\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3",newNavigationDescription:"\u65B0\u3057\u3044\u30C8\u30C3\u30D7\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u30D0\u30FC\u3002",restartTheAppForChangesToTakeEffect:"\u5909\u66F4\u3092\u53CD\u6620\u3059\u308B\u306B\u306F\u3001\u30A2\u30D7\u30EA\u3092\u518D\u8D77\u52D5\u3057\u3066\u304F\u3060\u3055\u3044\u3002",layoutDebugging:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30C7\u30D0\u30C3\u30B0",layoutDebuggingDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30B9\u30C8\u30EC\u30FC\u30B8\u306E\u958B\u767A\u304A\u3088\u3073\u30C7\u30D0\u30C3\u30B0\u7528\u306E\u8FFD\u52A0\u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u3092\u8868\u793A\u3059\u308B\u3002"},tm={foxglove:"Foxglove",learnMore:"\u3082\u3063\u3068\u5B66\u3076"},nm={"3D":"3D","3DPanelDescription":"\u30DE\u30FC\u30AB\u30FC\u3084\u30AB\u30E1\u30E9\u6620\u50CF\u3001\u30E1\u30C3\u30B7\u30E5\u3001URDF\u306A\u3069\u30923D\u30B7\u30FC\u30F3\u3067\u8868\u793A\u3057\u307E\u3059\u3002",dataSourceInfo:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u60C5\u5831",dataSourceInfoDescription:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u95A2\u3059\u308B\u30C8\u30D4\u30C3\u30AF\u3084\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u306A\u3069\u306E\u8A73\u7D30\u3092\u8868\u793A\u3057\u307E\u3059\u3002",gauge:"\u30B2\u30FC\u30B8",gaugeDescription:"\u9023\u7D9A\u5024\u306B\u57FA\u3065\u304F\u8272\u4ED8\u304D\u306E\u30B2\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",image:"\u753B\u50CF",imageLegacy:"\u753B\u50CF (Legacy)",imageDescription:"\u6CE8\u91C8\u4ED8\u304D\u306E\u753B\u50CF\u3092\u8868\u793A\u3057\u307E\u3059\u3002",indicator:"\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC",indicatorDescription:"\u95BE\u5024\u306B\u57FA\u3065\u3044\u305F\u8272\u3084\u30C6\u30AD\u30B9\u30C8\u3067\u8868\u793A\u3055\u308C\u308B\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC\u3092\u8868\u793A\u3057\u307E\u3059\u3002",log:"\u30ED\u30B0",logDescription:"\u30CE\u30FC\u30C9\u3068\u91CD\u8981\u5EA6\u30EC\u30D9\u30EB\u5225\u306B\u30ED\u30B0\u3092\u8868\u793A\u3057\u307E\u3059\u3002",map:"\u5730\u56F3",mapDescription:"\u5730\u56F3\u4E0A\u306B\u70B9\u3092\u8868\u793A\u3057\u307E\u3059\u3002",parameters:"\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC",parametersDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306E\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC\u3092\u8AAD\u307F\u53D6\u308A\u3001\u8A2D\u5B9A\u3057\u307E\u3059\u3002",plot:"\u30D7\u30ED\u30C3\u30C8",plotDescription:"\u6642\u9593\u307E\u305F\u306F\u4ED6\u306E\u5024\u306B\u5BFE\u3059\u308B\u6570\u5024\u3092\u30D7\u30ED\u30C3\u30C8\u3057\u307E\u3059\u3002",publish:"\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5",publishDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5\u3057\u307E\u3059\uFF08\u30E9\u30A4\u30D6\u63A5\u7D9A\u306E\u307F\uFF09\u3002 ",rawMessages:"\u751F\u30C7\u30FC\u30BF\u306E\u30E1\u30C3\u30BB\u30FC\u30B8",rawMessagesDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u67FB\u3057\u307E\u3059\u3002",ROSDiagnosticsDetail:"\u8A3A\u65AD - \u8A73\u7D30 (ROS)",ROSDiagnosticsDetailDescription:"\u7279\u5B9A\u306Ehardware_id\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",ROSDiagnosticSummary:"\u8A3A\u65AD - \u6982\u8981 (ROS)",ROSDiagnosticSummaryDescription:"\u3059\u3079\u3066\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u306E\u6982\u8981\u3092\u8868\u793A\u3057\u307E\u3059\u3002",stateTransitions:"\u30B9\u30C6\u30FC\u30C8\u30C8\u30E9\u30F3\u30B8\u30B7\u30E7\u30F3",stateTransitionsDescription:"\u6642\u9593\u3068\u3068\u3082\u306B\u5024\u304C\u5909\u5316\u3059\u308B\u3068\u304D\u3092\u8FFD\u8DE1\u3057\u307E\u3059\u3002",studioPlaybackPerformance:"Studio - \u518D\u751F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9",studioPlaybackPerformanceDescription:"\u518D\u751F\u304A\u3088\u3073\u30C7\u30FC\u30BF\u30B9\u30C8\u30EA\u30FC\u30DF\u30F3\u30B0\u306E\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u7D71\u8A08\u60C5\u5831\u3092\u8868\u793A\u3057\u307E\u3059\u3002",tab:"\u30BF\u30D6",tabDescription:"\u8907\u6570\u306E\u30D1\u30CD\u30EB\u3092\u30BF\u30D6\u3067\u30B0\u30EB\u30FC\u30D7\u5316\u3057\u3066\u8868\u793A\u3057\u307E\u3059\u3002",table:"\u30C6\u30FC\u30D6\u30EB",tableDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u5F62\u5F0F\u3067\u8868\u793A\u3057\u307E\u3059\u3002",teleop:"Teleop",teleopDescription:"\u30E9\u30A4\u30D6\u63A5\u7D9A\u3067\u30ED\u30DC\u30C3\u30C8\u3092\u64CD\u4F5C\u3057\u307E\u3059\u3002",topicGraph:"\u30C8\u30D4\u30C3\u30AF\u30B0\u30E9\u30D5",topicGraphDescription:"\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30CE\u30FC\u30C9\u3001\u30C8\u30D4\u30C3\u30AF\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u30B0\u30E9\u30D5\u3092\u8868\u793A\u3057\u307E\u3059\u3002",userScripts:"\u30E6\u30FC\u30B6\u30FC\u30B9\u30AF\u30EA\u30D7\u30C8",userScriptsDescription:"TypeScript\u3067\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u5909\u63DB\u3092\u8A18\u8FF0\u3057\u307E\u3059\u3002\u4EE5\u524D\u306FNode Playground\u3068\u3057\u3066\u77E5\u3089\u308C\u3066\u3044\u307E\u3057\u305F\u3002",variableSlider:"\u5909\u6570\u30B9\u30E9\u30A4\u30C0\u30FC",variableSliderDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u6570\u5024\u5909\u6570\u3092\u66F4\u65B0\u3057\u307E\u3059\u3002"},sm={addPanel:"\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0",noLayoutSelected:"<selectLayoutLink>\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u9078\u629E</selectLayoutLink>\u3057\u3066\u59CB\u3081\u307E\u3057\u3087\u3046\uFF01",noPanelsMatchSearchCriteria:"\u691C\u7D22\u6761\u4EF6\u306B\u4E00\u81F4\u3059\u308B\u30D1\u30CD\u30EB\u304C\u3042\u308A\u307E\u305B\u3093\u3002",searchPanels:"\u30D1\u30CD\u30EB\u3092\u691C\u7D22",selectPanelToAddToLayout:"\u4E0B\u306E\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u30EC\u30A4\u30A2\u30A6\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},om={importOrExportSettings:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",importOrExportSettingsWithEllipsis:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8...",resetToDefaults:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8",panelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A",selectAPanelToEditItsSettings:"\u7DE8\u96C6\u3059\u308B\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",loadingPanelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",currentSettingsPanelName:"{{title}}\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A",panelName:"{{title}}\u30D1\u30CD\u30EB",panelDoesNotHaveSettings:"\u3053\u306E\u30D1\u30CD\u30EB\u306B\u306F\u8A2D\u5B9A\u304C\u3042\u308A\u307E\u305B\u3093\u3002",unknown:"\u4E0D\u660E"},am={topicError:"{{topic}}\u3068\u3044\u3046\u30C8\u30D4\u30C3\u30AF\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002",topic:"\u30C8\u30D4\u30C3\u30AF"},im={deleteSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u524A\u9664\u3059\u308B",messagePath:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30D1\u30B9",label:"\u30E9\u30D9\u30EB",color:"\u30AB\u30E9\u30FC",timestamp:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7",receiveTime:"\u53D7\u4FE1\u6642\u9593",headerStamp:"\u30D8\u30C3\u30C0\u30FC\u30B9\u30BF\u30F3\u30D7",series:"\u30B7\u30EA\u30FC\u30BA",addSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u8FFD\u52A0\u3059\u308B",maxYError:"Y\u6700\u5927\u5024\u306F\u3001Y\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",maxXError:"X\u6700\u5927\u5024\u306F\u3001X\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",general:"\u4E00\u822C\u7684\u306A",syncWithOtherPlots:"\u4ED6\u306E\u30D7\u30ED\u30C3\u30C8\u3068\u540C\u671F\u3059\u308B",legend:"\u51E1\u4F8B",position:"\u30DD\u30B8\u30B7\u30E7\u30F3",floating:"\u30D5\u30ED\u30FC\u30C6\u30A3\u30F3\u30B0",left:"\u5DE6",top:"\u4E0A",hidden:"\u96A0\u3059",showValues:"\u5024\u3092\u8868\u793A\u3059\u308B",yAxis:"Y\u8EF8",showLabels:"\u30E9\u30D9\u30EB\u3092\u8868\u793A\u3059\u308B",min:"\u6700\u5C0F",max:"\u6700\u5927",xAxis:"X\u8EF8",value:"\u5024",index:"\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9",currentPath:"\u30D1\u30B9\uFF08\u73FE\u5728\uFF09",accumulatedPath:"\u30D1\u30B9\uFF08\u7D2F\u7A4D\uFF09",secondsRange:"\u7BC4\u56F2\uFF08\u79D2\u6570\uFF09"},rm={dataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",currentSource:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",waitingForConnection:"\u63A5\u7D9A\u5F85\u6A5F\u4E2D\u2026",startTime:"\u958B\u59CB\u6642\u523B",endTime:"\u7D42\u4E86\u6642\u523B",duration:"\u6240\u8981\u6642\u9593"},lm={newToFoxgloveStudio:"Foxglove Studio\u3092\u521D\u3081\u3066\u3054\u5229\u7528\u3067\u3059\u304B\uFF1F",newToFoxgloveStudioDescription:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u30BB\u30C3\u30C8\u3092\u63A2\u7D22\u3057\u305F\u308A\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",joinOurCommunity:"\u30B3\u30DF\u30E5\u30CB\u30C6\u30A3\u306B\u53C2\u52A0\u3059\u308B",joinOurCommunityDescription:"Slack\u3084GitHub\u306B\u53C2\u52A0\u3057\u3066\u3001\u30D8\u30EB\u30D7\u3092\u5F97\u305F\u308A\u3001\u6A5F\u80FD\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u884C\u3063\u305F\u308A\u3001\u30D0\u30B0\u3092\u5831\u544A\u3057\u307E\u3057\u3087\u3046\u3002",joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",openAGitHubIssue:"GitHub\u306E\u554F\u984C\u3092\u958B\u304F",needHelp:"\u30D8\u30EB\u30D7\u304C\u5FC5\u8981\u3067\u3059\u304B\uFF1F",needHelpDescription:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u305F\u308A\u3001Foxglove\u30D6\u30ED\u30B0\u306E\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u307F\u307E\u3057\u3087\u3046\u3002",seeTutorials:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u898B\u308B",collaborateTitle:"Foxglove Data Platform\u3067\u958B\u767A\u3092\u52A0\u901F\u3059\u308B",secureStorageOfData:"ROS\u307E\u305F\u306F\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u3092\u30DA\u30BF\u30D0\u30A4\u30C8\u5358\u4F4D\u3067\u5B89\u5168\u306B\u4FDD\u5B58",convenientWebInterface:"\u4FBF\u5229\u306AWeb\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C7\u30FC\u30BF\u3092\u30BF\u30B0\u4ED8\u3051\u3001\u691C\u7D22\u3001\u304A\u3088\u3073\u9AD8\u901F\u306B\u53D6\u5F97",canBeShared:"\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C7\u30FC\u30BF\u30D5\u30A1\u30A4\u30EB\u3001\u53EF\u8996\u5316\u30EC\u30A4\u30A2\u30A6\u30C8\u3001\u304A\u3088\u3073\u30AB\u30B9\u30BF\u30E0\u62E1\u5F35\u5B50\u3092\u5171\u6709\u3067\u304D\u307E\u3059",createAFreeAccount:"\u7121\u6599\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B",signIn:"\u30ED\u30B0\u30A4\u30F3",learnMore:"\u8A73\u7D30\u3092\u898B\u308B",startCollaborating:"Foxglove\u306E\u7D44\u7E54\u3068\u30B3\u30E9\u30DC\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u958B\u59CB\u3059\u308B",startCollaboratingDescription:"Foxglove\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6700\u5927\u9650\u306B\u6D3B\u7528\u3057\u307E\u3057\u3087\u3046\u3002\u305F\u3068\u3048\u3070\u3001\u30C7\u30FC\u30BF\u3092\u8A73\u7D30\u306B\u5206\u6790\u3057\u305F\u308A\u3001\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C4\u30FC\u30EB\u3092\u5171\u6709\u3057\u305F\u308A\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",uploadToDataPlatform:"Data Platform\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3059\u308B",shareLayouts:"\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u5171\u6709\u3059\u308B",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openLocalFileDescription:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u304B\u3089\u76F4\u63A5\u30C7\u30FC\u30BF\u3092\u53EF\u8996\u5316\u3057\u307E\u3059\u3002",openUrl:"\u30C7\u30FC\u30BF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u5171\u6709\u3059\u308B",openUrlDescription:"Foxglove Data Platform\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C1\u30FC\u30E0\u3068\u30C7\u30FC\u30BF\u3092\u5171\u6709\u3057\u307E\u3059\u3002",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",openConnectionDescription:"\u30E9\u30A4\u30D6\u30ED\u30DC\u30C3\u30C8\u307E\u305F\u306F\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3057\u307E\u3059\u3002",openDataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u3092\u958B\u304F",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9"},cm={searchPanelSettings:"\u691C\u7D22\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A...",title:"\u30BF\u30A4\u30C8\u30EB",clearSearch:"\u691C\u7D22\u3092\u30AF\u30EA\u30A2\u3059\u308B",labels:"\u30E9\u30D9\u30EB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",filterList:"\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",filterListHelp:"\u53EF\u8996\u6027\u3067\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",listAll:"\u3059\u3079\u3066\u306E\u30EA\u30B9\u30C8",listVisible:"\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u30EA\u30B9\u30C8",listInvisible:"\u975E\u8868\u793A\u306E\u30EA\u30B9\u30C8",general:"\u4E00\u822C\u7684\u306A"},dm={frame:"\u30D5\u30EC\u30FC\u30E0",color:"\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u30E9\u30A4\u30F3\u5E45",rotation:"\u56DE\u8EE2",reset:"\u30EA\u30BB\u30C3\u30C8",displayFrame:"\u30D5\u30EC\u30FC\u30E0\u3092\u8868\u793A\u3059\u308B",displayFrameHelp:"\u30AB\u30E1\u30E9\u3092\u914D\u7F6E\u3059\u308B\u305F\u3081\u306E\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u3067\u3059\u3002\u30AB\u30E1\u30E9\u306E\u4F4D\u7F6E\u3068\u5411\u304D\u306F\u3001\u3053\u306E\u30D5\u30EC\u30FC\u30E0\u306E\u539F\u70B9\u3092\u57FA\u6E96\u3068\u3057\u305F\u76F8\u5BFE\u7684\u306A\u3082\u306E\u3068\u306A\u308A\u307E\u3059\u3002",followMode:"\u30D5\u30A9\u30ED\u30FC\u30E2\u30FC\u30C9",followModeHelp:"\u518D\u751F\u4E2D\u306E\u30AB\u30E1\u30E9\u306E\u52D5\u4F5C\u3092\u5909\u66F4\u3057\u3001\u8868\u793A\u30D5\u30EC\u30FC\u30E0\u3092\u30D5\u30A9\u30ED\u30FC\u3059\u308B\u304B\u3069\u3046\u304B\u3092\u9078\u629E\u3067\u304D\u307E\u3059\u3002",pose:"\u30DD\u30FC\u30BA",fixed:"\u56FA\u5B9A",frameNotFound:"\u30D5\u30EC\u30FC\u30E0 {{frameId}} \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",noCoordinateFramesFound:"\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",enablePreloading:"\u4E8B\u524D\u306E\u8AAD\u307F\u8FBC\u307F\u3092\u6709\u52B9\u306B\u3059\u308B",lineColor:"\u30E9\u30A4\u30F3\u306E\u8272",axisScale:"\u8EF8\u306E\u30B9\u30B1\u30FC\u30EB",labelSize:"\u30E9\u30D9\u30EB\u306E\u30B5\u30A4\u30BA",labels:"\u30E9\u30D9\u30EB",editable:"\u7DE8\u96C6\u53EF\u80FD",settings:"\u8A2D\u5B9A",transforms:"\u5909\u63DB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",scene:"\u30B7\u30FC\u30F3",renderStats:"\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u7D71\u8A08\u60C5\u5831",background:"\u80CC\u666F",labelScale:"\u30E9\u30D9\u30EB\u306E\u30B9\u30B1\u30FC\u30EB",labelScaleHelp:"\u3059\u3079\u3066\u306E\u30E9\u30D9\u30EB\u306B\u9069\u7528\u3059\u308B\u30B9\u30B1\u30FC\u30EB\u30D5\u30A1\u30AF\u30BF\u30FC",ignoreColladaUpAxis:"COLLADA <up_axis> \u3092\u7121\u8996",ignoreColladaUpAxisHelp:"COLLADA \u30D5\u30A1\u30A4\u30EB\u5185\u306E <up_axis> \u30BF\u30B0\u3092\u7121\u8996\u3059\u308B\u3053\u3068\u3067\u3001rviz \u306E\u52D5\u4F5C\u306B\u5408\u308F\u305B\u307E\u3059\u3002",takeEffectAfterReboot:"\u3053\u306E\u8A2D\u5B9A\u306F\u518D\u8D77\u52D5\u5F8C\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",meshUpAxis:"\u30E1\u30C3\u30B7\u30E5\u306E\u4E0A\u8EF8",meshUpAxisHelp:"\u65B9\u5411\u3092\u4F7F\u7528\u3057\u3066\u30E1\u30C3\u30B7\u30E5\u3092\u8AAD\u307F\u8FBC\u3080\u3068\u304D\u306B '\u4E0A' \u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u65B9\u5411\uFF08STL \u304A\u3088\u3073 OBJ\uFF09",YUp:"Y-up",ZUp:"Z-up",view:"\u30D3\u30E5\u30FC",distance:"\u8DDD\u96E2",perspective:"\u9060\u8FD1\u6CD5",target:"\u30BF\u30FC\u30B2\u30C3\u30C8",theta:"Theta",phi:"Phi",fovy:"Y\u8EF8 FOV",near:"Near",far:"Far",syncCamera:"\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3059\u308B",syncCameraHelp:"\u3053\u306E\u8A2D\u5B9A\u304C\u6709\u52B9\u306B\u306A\u3063\u3066\u3044\u308B\u4ED6\u306E\u30D1\u30CD\u30EB\u3068\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3057\u307E\u3059\u3002",topics:"\u30C8\u30D4\u30C3\u30AF",customLayers:"\u30AB\u30B9\u30BF\u30E0\u30EC\u30A4\u30E4\u30FC",addURDF:"URDF \u3092\u8FFD\u52A0\u3059\u308B",size:"\u30B5\u30A4\u30BA",divisions:"\u5206\u5272\u6570",grid:"\u30B0\u30EA\u30C3\u30C9",delete:"\u524A\u9664",addGrid:"\u30B0\u30EA\u30C3\u30C9\u3092\u8FFD\u52A0\u3059\u308B"},um={about:"\u60C5\u5831",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",open:"\u3092\u958B\u304F",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",noDataSource:void 0,joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",file:"\u30D5\u30A1\u30A4\u30EB",view:"\u8868\u793A",help:"\u30D8\u30EB\u30D7",signIn:"\u30ED\u30B0\u30A4\u30F3",unknown:"\u4E0D\u660E"},pm={settings:"\u8BBE\u7F6E",colorScheme:"\u914D\u8272\u65B9\u6848",dark:"\u6697\u8272",light:"\u4EAE\u8272",followSystem:"\u8DDF\u968F\u7CFB\u7EDF",language:"\u8BED\u8A00",displayTimestampsIn:"\u663E\u793A\u65F6\u95F4\u6233\u5728",timestampFormat:"\u65F6\u95F4\u6233\u683C\u5F0F",messageRate:"\u6D88\u606F\u901F\u7387",openLinksIn:"\u6253\u5F00\u94FE\u63A5",webApp:"\u7F51\u9875\u5E94\u7528",desktopApp:"\u684C\u9762\u5E94\u7528",askEachTime:"\u6BCF\u6B21\u8BE2\u95EE",general:"\u901A\u7528",ros:"ROS",privacy:"\u9690\u79C1",privacyDescription:"\u66F4\u6539\u5C06\u5728\u4E0B\u6B21\u542F\u52A8 Foxglove Studio \u65F6\u751F\u6548",sendAnonymizedUsageData:"\u53D1\u9001\u533F\u540D\u4F7F\u7528\u6570\u636E\u4EE5\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB Foxglove Studio",sendAnonymizedCrashReports:"\u53D1\u9001\u533F\u540D\u5D29\u6E83\u62A5\u544A",experimentalFeatures:"\u5B9E\u9A8C\u6027\u529F\u80FD",experimentalFeaturesDescription:"\u8FD9\u4E9B\u529F\u80FD\u4E0D\u7A33\u5B9A\uFF0C\u4E0D\u5EFA\u8BAE\u65E5\u5E38\u4F7F\u7528\u3002",studioDebugPanels:"Studio \u8C03\u8BD5\u9762\u677F",studioDebugPanelsDescription:"\u5728\u201C\u6DFB\u52A0\u9762\u677F\u201D\u5217\u8868\u4E2D\u663E\u793A Foxglove Studio \u8C03\u8BD5\u9762\u677F\u3002",memoryUseIndicator:"\u5185\u5B58\u4F7F\u7528\u6307\u793A\u5668",memoryUseIndicatorDescription:"\u5728\u4FA7\u8FB9\u680F\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u7684\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\u3002",newNavigation:"\u65B0\u7248\u5BFC\u822A\u680F",newNavigationDescription:"\u4F7F\u7528\u65B0\u7248\u5BFC\u822A\u680F\u3002",restartTheAppForChangesToTakeEffect:" \u91CD\u65B0\u542F\u52A8\u5E94\u7528\u7A0B\u5E8F\u4EE5\u4F7F\u66F4\u6539\u751F\u6548\u3002",layoutDebugging:"\u5E03\u5C40\u8C03\u8BD5",layoutDebuggingDescription:"\u663E\u793A\u7528\u4E8E\u5F00\u53D1\u548C\u8C03\u8BD5\u5E03\u5C40\u5B58\u50A8\u7684\u989D\u5916\u63A7\u4EF6\u3002",extensions:"\u6269\u5C55",about:"\u5173\u4E8E",noExperimentalFeatures:"\u76EE\u524D\u6CA1\u6709\u5B9E\u9A8C\u6027\u7684\u529F\u80FD\u3002"},fm={foxglove:"Foxglove",learnMore:"\u4E86\u89E3\u66F4\u591A"},hm={"3D":"\u4E09\u7EF4","3DPanelDescription":"\u5728\u4E09\u7EF4\u573A\u666F\u4E2D\u663E\u793A\u6807\u8BB0\u3001\u76F8\u673A\u56FE\u50CF\u3001\u7F51\u683C\u3001URDF \u548C\u5176\u4ED6\u5185\u5BB9\u3002",dataSourceInfo:"\u6570\u636E\u6E90\u4FE1\u606F",dataSourceInfoDescription:"\u67E5\u770B\u5F53\u524D\u6570\u636E\u6E90\u7684\u4E3B\u9898\u548C\u65F6\u95F4\u6233\u7B49\u8BE6\u7EC6\u4FE1\u606F\u3002",gauge:"\u4EEA\u8868",gaugeDescription:"\u57FA\u4E8E\u8FDE\u7EED\u503C\u663E\u793A\u5F69\u8272\u4EEA\u8868\u3002",image:"\u56FE\u50CF",imageLegacy:"\u56FE\u50CF\uFF08Legacy\uFF09",imageDescription:"\u663E\u793A\u5E26\u6CE8\u91CA\u7684\u56FE\u50CF\u3002",indicator:"\u6307\u793A\u5668",indicatorDescription:"\u57FA\u4E8E\u9608\u503C\u503C\u663E\u793A\u5F69\u8272\u548C/\u6216\u6587\u672C\u6307\u793A\u5668\u3002",log:"\u65E5\u5FD7",logDescription:"\u6309\u8282\u70B9\u548C\u4E25\u91CD\u7A0B\u5EA6\u7EA7\u522B\u663E\u793A\u65E5\u5FD7\u3002",map:"\u5730\u56FE",mapDescription:"\u5728\u5730\u56FE\u4E0A\u663E\u793A\u70B9\u3002",parameters:"\u53C2\u6570",parametersDescription:"\u8BFB\u53D6\u548C\u8BBE\u7F6E\u6570\u636E\u6E90\u7684\u53C2\u6570\u3002",plot:"\u56FE\u8868",plotDescription:"\u7ED8\u5236\u968F\u65F6\u95F4\u6216\u5176\u4ED6\u503C\u53D8\u5316\u7684\u6570\u5B57\u503C\u3002",publish:"\u53D1\u5E03",publishDescription:"\u5411\u6570\u636E\u6E90\u53D1\u5E03\u6D88\u606F\uFF08\u4EC5\u9650\u5B9E\u65F6\u8FDE\u63A5\uFF09\u3002",rawMessages:"\u539F\u59CB\u6D88\u606F",rawMessagesDescription:"\u68C0\u67E5\u4E3B\u9898\u6D88\u606F\u3002",ROSDiagnosticsDetail:"\u8BCA\u65AD - \u8BE6\u7EC6\u4FE1\u606F\uFF08ROS\uFF09",ROSDiagnosticsDetailDescription:"\u663E\u793A\u7279\u5B9A hardware_id \u7684 ROS DiagnosticArray \u6D88\u606F\u3002",ROSDiagnosticSummary:"\u8BCA\u65AD - \u6982\u8981\uFF08ROS\uFF09",ROSDiagnosticSummaryDescription:"\u663E\u793A\u6240\u6709 ROS DiagnosticArray \u6D88\u606F\u7684\u6458\u8981\u3002",stateTransitions:"\u72B6\u6001\u8F6C\u6362",stateTransitionsDescription:"\u8DDF\u8E2A\u503C\u968F\u65F6\u95F4\u53D8\u5316\u7684\u60C5\u51B5\u3002",studioPlaybackPerformance:"Studio - \u64AD\u653E\u6027\u80FD",studioPlaybackPerformanceDescription:"\u663E\u793A\u56DE\u653E\u548C\u6570\u636E\u6D41\u5F0F\u5904\u7406\u6027\u80FD\u7EDF\u8BA1\u4FE1\u606F\u3002",tab:"\u9009\u9879\u5361",tabDescription:"\u5C06\u9762\u677F\u5206\u7EC4\u5728\u9009\u9879\u5361\u754C\u9762\u4E2D\u3002",table:"\u8868\u683C",tableDescription:"\u4EE5\u8868\u683C\u683C\u5F0F\u663E\u793A\u4E3B\u9898\u6D88\u606F\u3002",teleop:"\u8FDC\u7A0B\u64CD\u7EB5",teleopDescription:"\u901A\u8FC7\u5B9E\u65F6\u8FDE\u63A5\u8FDC\u7A0B\u64CD\u7EB5\u673A\u5668\u4EBA\u3002",topicGraph:"\u4E3B\u9898\u56FE",topicGraphDescription:"\u663E\u793A\u6D3B\u52A8\u8282\u70B9\u3001\u4E3B\u9898\u548C\u670D\u52A1\u7684\u56FE\u5F62\u3002",userScripts:"\u7528\u6237\u811A\u672C",userScriptsDescription:"\u4F7F\u7528 TypeScript \u7F16\u5199\u81EA\u5B9A\u4E49\u6570\u636E\u8F6C\u6362\u3002\u4EE5\u524D\u79F0\u4E3A Node Playground\u3002",variableSlider:"\u53D8\u91CF\u6ED1\u5757",variableSliderDescription:"\u66F4\u65B0\u5E03\u5C40\u7684\u6570\u5B57\u53D8\u91CF\u503C\u3002"},gm={addPanel:"\u6DFB\u52A0\u9762\u677F",noLayoutSelected:"<selectLayoutLink>\u9009\u62E9\u4E00\u4E2A\u5E03\u5C40</selectLayoutLink>\u6765\u5F00\u59CB\u4F7F\u7528!",noPanelsMatchSearchCriteria:"\u6CA1\u6709\u7B26\u5408\u641C\u7D22\u6761\u4EF6\u7684\u9762\u677F\u3002",searchPanels:"\u641C\u7D22\u9762\u677F",selectPanelToAddToLayout:"\u5728\u4E0B\u9762\u9009\u62E9\u4E00\u4E2A\u9762\u677F\uFF0C\u5C06\u5176\u6DFB\u52A0\u5230\u4F60\u7684\u5E03\u5C40\u4E2D\u3002"},mm={importOrExportSettings:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E",importOrExportSettingsWithEllipsis:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E\u2026\u2026",panelSettings:"\u9762\u677F\u8BBE\u7F6E",selectAPanelToEditItsSettings:"\u9009\u62E9\u4E00\u4E2A\u9762\u677F\u6765\u7F16\u8F91\u5176\u8BBE\u7F6E\u3002",loadingPanelSettings:"\u6B63\u5728\u52A0\u8F7D\u9762\u677F\u8BBE\u7F6E\u2026\u2026",currentSettingsPanelName:"{{title}}\u9762\u677F\u8BBE\u7F6E",panelName:"{{title}}\u9762\u677F",panelDoesNotHaveSettings:"\u6B64\u9762\u677F\u6CA1\u6709\u4EFB\u4F55\u8BBE\u7F6E",resetToDefaults:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",unknown:"\u672A\u77E5"},ym={topicError:"\u8BDD\u9898 {{topic}} \u4E0D\u53EF\u7528",topic:"\u8BDD\u9898"},Am={deleteSeries:"\u5220\u9664\u6570\u636E\u7CFB\u5217",messagePath:"\u6D88\u606F\u5730\u5740",label:"\u6807\u7B7E",color:"\u989C\u8272",timestamp:"\u65F6\u95F4\u6233",receiveTime:"\u63A5\u6536\u65F6\u95F4",headerStamp:"\u5934\u65F6\u95F4\u6233",series:"\u6570\u636E\u7CFB\u5217",addSeries:"\u6DFB\u52A0\u6570\u636E\u7CFB\u5217",maxYError:"Y \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E Y \u7684\u6700\u5C0F\u503C\u3002",maxXError:"X \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E X \u7684\u6700\u5C0F\u503C\u3002",general:"\u901A\u7528",syncWithOtherPlots:"\u4E0E\u5176\u4ED6\u56FE\u8868\u540C\u6B65",legend:"\u56FE\u4F8B",position:"\u4F4D\u7F6E",floating:"\u6D6E\u52A8",left:"\u5DE6",top:"\u4E0A",hidden:"\u9690\u85CF",showValues:"\u663E\u793A\u503C",yAxis:"Y \u8F74",showLabels:"\u663E\u793A\u6807\u7B7E",min:"\u6700\u5C0F\u503C",max:"\u6700\u5927\u503C",xAxis:"X \u8F74",value:"\u503C",index:"\u7D22\u5F15",currentPath:"\u5730\u5740\uFF08\u5F53\u524D\uFF09",accumulatedPath:"\u5730\u5740\uFF08\u7D2F\u79EF\uFF09",secondsRange:"\u8303\u56F4\uFF08\u79D2\uFF09"},vm={dataSource:"\u6570\u636E\u6E90",currentSource:"\u5F53\u524D\u6E90",waitingForConnection:"\u7B49\u5F85\u8FDE\u63A5\u2026\u2026",startTime:"\u5F00\u59CB\u65F6\u95F4",endTime:"\u7ED3\u675F\u65F6\u95F4",duration:"\u6301\u7EED\u65F6\u95F4"},bm={newToFoxgloveStudio:"\u7B2C\u4E00\u6B21\u4F7F\u7528 Foxglove Studio\uFF1F",newToFoxgloveStudioDescription:"\u4ECE\u63A2\u7D22\u4E00\u4E2A\u6837\u672C\u6570\u636E\u96C6\u5F00\u59CB\uFF0C\u6216\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\u3002",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",joinOurCommunity:"\u52A0\u5165\u6211\u4EEC\u7684\u793E\u533A",joinOurCommunityDescription:"\u5728 Slack \u4E0A\u4E0E\u6211\u4EEC\u7684\u5F00\u53D1\u4EBA\u5458\u548C\u7528\u6237\u4EA4\u6D41\uFF0C\u6216\u5728 GitHub \u4E0A\u63D0\u51FA\u95EE\u9898\u3002",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",openAGitHubIssue:"\u6253\u5F00 GitHub issue",needHelp:"\u9700\u8981\u5E2E\u52A9\uFF1F",needHelpDescription:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\uFF0C\u6216\u67E5\u770B Foxglove \u535A\u5BA2\u4E0A\u7684\u6559\u7A0B\u3002",seeTutorials:"\u67E5\u770B\u6559\u7A0B",collaborateTitle:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u52A0\u901F\u5F00\u53D1",secureStorageOfData:"\u5B89\u5168\u5730\u5B58\u50A8 PB \u7EA7\u7684 ROS \u6216\u81EA\u5B9A\u4E49\u6570\u636E",convenientWebInterface:"\u4F7F\u7528\u4E00\u4E2A\u65B9\u4FBF\u7684\u7F51\u7EDC\u754C\u9762\uFF0C\u4EE5\u95EA\u7535\u822C\u7684\u901F\u5EA6\u6807\u8BB0\u3001\u641C\u7D22\u548C\u68C0\u7D22\u6570\u636E",canBeShared:"\u4E0E\u961F\u53CB\u5206\u4EAB\u6570\u636E\u6587\u4EF6\u3001\u53EF\u89C6\u5316\u5E03\u5C40\u548C\u81EA\u5B9A\u4E49\u6269\u5C55\u7A0B\u5E8F",createAFreeAccount:"\u521B\u5EFA\u514D\u8D39\u5E10\u6237",signIn:"\u767B\u5F55",learnMore:"\u4E86\u89E3\u66F4\u591A",startCollaborating:"\u4E0E\u60A8\u7684 Foxglove \u7EC4\u7EC7\u5F00\u59CB\u5408\u4F5C",startCollaboratingDescription:"\u5145\u5206\u5229\u7528\u4F60\u7684 Foxglove \u8D26\u6237\u2014\u2014\u65E0\u8BBA\u4F60\u60F3\u6DF1\u5165\u7814\u7A76\u4F60\u7684\u6570\u636E\u8FD8\u662F\u4E0E\u4F60\u7684\u56E2\u961F\u6210\u5458\u5206\u4EAB\u5DE5\u5177\u3002",uploadToDataPlatform:"\u4E0A\u4F20\u5230\u6570\u636E\u5E73\u53F0",shareLayouts:"\u5206\u4EAB\u5E03\u5C40",openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6",openLocalFileDescription:"\u76F4\u63A5\u4ECE\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u53EF\u89C6\u5316\u6570\u636E\u3002",openUrl:"\u4E0A\u4F20\u548C\u5171\u4EAB\u6570\u636E",openUrlDescription:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u4E0E\u60A8\u7684\u56E2\u961F\u5171\u4EAB\u6570\u636E\u3002",openConnection:"\u6253\u5F00\u8FDE\u63A5",openConnectionDescription:"\u8FDE\u63A5\u5230\u5B9E\u65F6\u673A\u5668\u4EBA\u6216\u670D\u52A1\u5668\u3002",openDataSource:"\u6253\u5F00\u6570\u636E\u6E90",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90"},xm={searchPanelSettings:"\u641C\u7D22\u9762\u677F\u8BBE\u7F6E\u2026\u2026",title:"\u6807\u9898",clearSearch:"\u6E05\u7A7A\u641C\u7D22",labels:"\u6807\u7B7E",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",filterList:"\u8FC7\u6EE4\u5217\u8868",filterListHelp:"\u6309\u7167\u53EF\u89C1\u6027\u8FC7\u6EE4\u5217\u8868",listAll:"\u5217\u51FA\u5168\u90E8",listVisible:"\u5217\u51FA\u53EF\u89C1",listInvisible:"\u5217\u51FA\u4E0D\u53EF\u89C1",general:"\u901A\u7528"},Cm={frame:"\u53C2\u8003\u7CFB",reset:"\u91CD\u7F6E",color:"\u989C\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u7EBF\u5BBD",rotation:"\u65CB\u8F6C",displayFrame:"\u5C55\u793A\u53C2\u8003\u7CFB",displayFrameHelp:"\u653E\u7F6E\u76F8\u673A\u7528\u4E8E\u663E\u793A\u5750\u6807\u7CFB\u3002\u76F8\u673A\u7684\u4F4D\u7F6E\u548C\u65B9\u5411\u5C06\u76F8\u5BF9\u4E8E\u8BE5\u5750\u6807\u7CFB\u7684\u539F\u70B9\u3002",followMode:"\u8DDF\u8E2A\u6A21\u5F0F",followModeHelp:"\u66F4\u6539\u56DE\u653E\u671F\u95F4\u76F8\u673A\u7684\u884C\u4E3A\uFF0C\u662F\u5426\u8DDF\u8E2A\u663E\u793A\u5750\u6807\u7CFB\u3002",pose:"\u59FF\u6001",fixed:"\u56FA\u5B9A",frameNotFound:"\u672A\u627E\u5230\u53C2\u8003\u7CFB {{frameId}}",noCoordinateFramesFound:"\u672A\u627E\u5230\u5750\u6807\u7CFB",enablePreloading:"\u542F\u7528\u9884\u52A0\u8F7D",lineColor:"\u7EBF\u989C\u8272",axisScale:"\u8F74\u6BD4\u4F8B",labelSize:"\u6807\u7B7E\u5927\u5C0F",labels:"\u6807\u7B7E",editable:"\u53EF\u7F16\u8F91",settings:"\u8BBE\u7F6E",transforms:"\u53D8\u6362",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",scene:"\u573A\u666F",renderStats:"\u6E32\u67D3\u7EDF\u8BA1",background:"\u80CC\u666F",labelScale:"\u6807\u7B7E\u6BD4\u4F8B",labelScaleHelp:"\u5E94\u7528\u4E8E\u6240\u6709\u6807\u7B7E\u7684\u6BD4\u4F8B\u56E0\u5B50",ignoreColladaUpAxis:"\u5FFD\u7565 COLLADA \u7684 <up_axis>",ignoreColladaUpAxisHelp:"\u901A\u8FC7\u5FFD\u7565 COLLADA \u6587\u4EF6\u4E2D\u7684 <up_axis> \u6807\u8BB0\uFF0C\u5339\u914D rviz \u7684\u884C\u4E3A",takeEffectAfterReboot:"\u6B64\u8BBE\u7F6E\u9700\u8981\u91CD\u65B0\u542F\u52A8\u4EE5\u751F\u6548",meshUpAxis:"\u7F51\u683C\u4E0A\u8F74",meshUpAxisHelp:"\u52A0\u8F7D\u7F3A\u5C11\u65B9\u5411\u4FE1\u606F\u7684\u7F51\u683C\uFF08STL \u548C OBJ\uFF09\u65F6\u4F7F\u7528\u7684\u201C\u4E0A\u201D\u65B9\u5411",YUp:"Y-up",ZUp:"Z-up",view:"\u89C6\u56FE",distance:"\u8DDD\u79BB",perspective:"\u900F\u89C6",target:"\u76EE\u6807",theta:"\u6781\u89D2",phi:"\u65B9\u5411\u89D2",fovy:"Y\u8F74\u89C6\u91CE",near:"\u8FD1\u9762",far:"\u8FDC\u9762",syncCamera:"\u540C\u6B65\u76F8\u673A",syncCameraHelp:"\u5C06\u76F8\u673A\u4E0E\u5176\u4ED6\u542F\u7528\u6B64\u8BBE\u7F6E\u7684\u9762\u677F\u540C\u6B65\u3002",topics:"\u8BDD\u9898",customLayers:"\u81EA\u5B9A\u4E49\u56FE\u5C42",addURDF:"\u6DFB\u52A0 URDF",size:"\u5927\u5C0F",divisions:"\u5212\u5206",grid:"\u7F51\u683C",delete:"\u5220\u9664",addGrid:"\u6DFB\u52A0\u7F51\u683C"},Em={about:"\u5173\u4E8E",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",open:"\u6253\u5F00\u2026\u2026",openConnection:"\u6253\u5F00\u8FDE\u63A5\u2026\u2026",noDataSource:void 0,openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6\u2026\u2026",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90",hideLeftSidebar:"\u9690\u85CF\u5DE6\u4FA7\u8FB9\u680F",hideRightSidebar:"\u9690\u85CF\u53F3\u4FA7\u8FB9\u680F",showLeftSidebar:"\u663E\u793A\u5DE6\u4FA7\u8FB9\u680F",showRightSidebar:"\u663E\u793A\u53F3\u4FA7\u8FB9\u680F",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",file:"\u6587\u4EF6",view:"\u67E5\u770B",help:"\u5E2E\u52A9",signIn:"\u767B\u5F55",unknown:"\u672A\u77E5"},Sm={en:u,zh:E,ja:m},Tm="general";async function Im(){await Zg.ZP.use(Fg.Z).use(X.Db).init({resources:Sm,detection:{order:["localStorage","navigator"],caches:["localStorage"]},fallbackLng:"en",defaultNS:Tm,interpolation:{escapeValue:!1}})}var Pm=i(1297),vi=i.n(Pm),Mm=i(56348),wm="../../packages/studio-base/src/services/IdbExtensionStorage.ts";const vs=ve.ZP.getLogger(wm),Bm="foxglove-extensions",ss="metadata",os="extensions";class Dm{#e;namespace;constructor(t){this.namespace=t,this.#e=Mm.X3([Bm,t].join("-"),1,{upgrade:s=>{vs.debug("Creating extension object stores"),s.createObjectStore(ss,{keyPath:"id"}),s.createObjectStore(os,{keyPath:"info.id"})}})}async list(){const t=await(await this.#e).getAll(ss);return vs.debug(`Found ${t.length} extensions`),t}async get(t){return vs.debug("Getting extension",t),await(await this.#e).get(os,t)}async put(t){vs.debug("Storing extension",{extension:t});const s=(await this.#e).transaction([ss,os],"readwrite");return await Promise.all([s.db.put(ss,t.info),s.db.put(os,t),s.done]),t}async delete(t){vs.debug("Deleting extension",t);const s=(await this.#e).transaction([ss,os],"readwrite");await Promise.all([s.db.delete(ss,t),s.db.delete(os,t),s.done])}}var jm="../../packages/studio-base/src/services/IdbExtensionLoader.ts";const Us=ve.ZP.getLogger(jm);function Rm(e){const t=/^@([^/]+)\/(.+)/.exec(e);return t==null?{name:e}:{publisher:t[1],name:t[2]}}function Lm(e,t,s){switch(e){case"local":return s.displayName;case"org":return[e,t,s.name].join(":")}}function Nm(e){if(e.name==null||e.name.length===0)throw new Error("Invalid extension: missing name");const{publisher:t,name:s}=Rm(e.name),o=e.publisher??t;if(o==null||o.length===0)throw new Error("Invalid extension: missing publisher");return{...e,publisher:o,name:s.toLowerCase()}}class Om{#e;namespace;constructor(t){this.namespace=t,this.#e=new Dm(t)}async getExtensions(){return Us.debug("Listing extensions"),await this.#e.list()}async loadExtension(t){Us.debug("Loading extension",t);const s=await this.#e.get(t),o=new(vi());if(s?.content==null)throw new Error("Extension is corrupted");const r=await(await o.loadAsync(s.content)).file("dist/extension.js")?.async("string");if(r==null)throw new Error("Extension is corrupted");return r}async installExtension(t){Us.debug("Installing extension");const a=await(await new(vi())().loadAsync(t)).file("package.json")?.async("string");if(a==null)throw new Error("Invalid extension: missing package.json");const r=Nm(JSON.parse(a)),l=r.publisher.replace(/[^A-Za-z0-9_\s]+/g,""),d={...r,id:`${l}.${r.name}`,namespace:this.namespace,qualifiedName:Lm(this.namespace,l,r)};return await this.#e.put({content:t,info:d}),d}async uninstallExtension(t){Us.debug("Uninstalling extension",t),await this.#e.delete(t)}}var as=i(87026);function km(e,t){const s=new Map;function o(r,l,d){let p=f=>f;const h=[];if(r.type!=="object")throw new Error(`Expected "type": "object" for schema ${l}, got ${JSON.stringify(r.type)}`);for(const[f,g]of Object.entries(r.properties)){if(Array.isArray(g.oneOf))if(g.oneOf.every(y=>typeof y.const=="number")){for(const y of g.oneOf)h.push({name:y.title,type:"uint32",isConstant:!0,value:y.const});h.push({name:f,type:"uint32"});continue}else throw new Error(`Unsupported type for ${d.concat(f).join(".")}: oneOf alternatives must have number values`);switch(g.type){case"boolean":h.push({name:f,type:"bool"});break;case"string":switch(g.contentEncoding){case void 0:h.push({name:f,type:"string"});break;case"base64":{h.push({name:f,type:"uint8",isArray:!0});const y=p;p=S=>{const N=S[f];if(typeof N=="string"){const k=new Uint8Array(as.length(N));if(as.decode(N,k,0)!==k.byteLength)throw new Error(`Failed to decode base64 data for ${d.concat(f).join(".")}`);S[f]=k}return y(S)};break}default:throw new Error(`Unsupported contentEncoding ${JSON.stringify(g.contentEncoding)} in ${d.concat(f).join(".")}`)}break;case"number":case"integer":h.push({name:f,type:"float64"});break;case"object":{const y=`${l}.${f}`,S=o(g,y,d.concat(f)),N=p;p=k=>{const W=k[f];return W!=null&&typeof W=="object"&&(k[f]=S(W)),N(k)},h.push({name:f,type:y,isComplex:!0});break}case"array":{const y=g.items;switch(y.type){case"boolean":h.push({name:f,type:"bool",isArray:!0});break;case"string":if(y.contentEncoding!=null)throw new Error(`Unsupported contentEncoding ${JSON.stringify(y.contentEncoding)} for array item ${d.concat(f).join(".")}`);h.push({name:f,type:"string",isArray:!0});break;case"number":case"integer":h.push({name:f,type:"float64",isArray:!0});break;case"object":{const S=`${l}.${f}`,N=o(g.items,S,d.concat(f)),k=p;p=W=>{const J=W[f];return Array.isArray(J)&&(W[f]=J.map(N)),k(W)},h.push({name:f,type:S,isComplex:!0,isArray:!0});break}default:throw new Error(`Unsupported type ${JSON.stringify(y.type)} for array item ${d.concat(f).join(".")}`)}break}case"null":default:throw new Error(`Unsupported type ${JSON.stringify(g.type)} for ${d.concat(f).join(".")}`)}}return s.set(l,{definitions:h}),p}const a=o(e,t,[]);return{datatypes:s,postprocessValue:a}}var Zm=i(11168),Ho=i.n(Zm);function Fm(e){switch(e){case"double":return"float64";case"float":return"float32";case"int32":case"sint32":case"sfixed32":return"int32";case"uint32":case"fixed32":return"uint32";case"int64":case"sint64":case"sfixed64":return"int64";case"uint64":case"fixed64":return"uint64";case"bool":return"bool";case"string":return"string"}throw new Error(`Expected protobuf scalar type, got ${e}`)}function Vo(e){return e.replace(/^\./,"")}function bi(e,t){const s=[];e.set(Vo(t.fullName),{definitions:s});for(const o of t.fieldsArray)if(o.resolvedType instanceof Ho().Enum){for(const[a,r]of Object.entries(o.resolvedType.values))s.push({name:a,type:"int32",isConstant:!0,value:r});s.push({type:"int32",name:o.name})}else if(o.resolvedType){const a=Vo(o.resolvedType.fullName);s.push({type:a,name:o.name,isComplex:!0,isArray:o.repeated}),e.has(a)||bi(e,o.resolvedType)}else if(o.type==="bytes"){if(o.repeated)throw new Error("Repeated bytes are not currently supported");s.push({type:"uint8",name:o.name,isArray:!0})}else s.push({type:Fm(o.type),name:o.name,isArray:o.repeated})}var bs=i(17417),xs=i(92897),Ws=i(62098),xi=i(15356),qe=i(98357);function Ci(e){switch(e){case qe.rB.Bool:return"bool";case qe.rB.Byte:return"int8";case qe.rB.UType:case qe.rB.UByte:return"uint8";case qe.rB.Short:return"int16";case qe.rB.UShort:return"uint16";case qe.rB.Int:return"int32";case qe.rB.UInt:return"uint32";case qe.rB.Long:return"int64";case qe.rB.ULong:return"uint64";case qe.rB.Float:return"float32";case qe.rB.Double:return"float64";case qe.rB.String:return"string";case qe.rB.Vector:case qe.rB.Obj:case qe.rB.Union:case qe.rB.Array:throw new Error(`${e} is not a simple type.`);case qe.rB.None:case qe.rB.MaxBaseType:throw new Error("None is not a valid type.")}}function yn(e){if(typeof e=="string")return e;throw new Error(`Expected string, found ${typeof e}`)}function zm(e,t){const s=[];switch(t.type?.baseType){case qe.rB.UType:case qe.rB.Bool:case qe.rB.Byte:case qe.rB.UByte:case qe.rB.Short:case qe.rB.UShort:case qe.rB.Int:case qe.rB.UInt:case qe.rB.Long:case qe.rB.ULong:case qe.rB.Float:case qe.rB.Double:case qe.rB.String:case qe.rB.None:{const o=Ci(t.type.baseType);if(t.type.index!==-1){const a=e.enums[t.type.index]?.values;if(a==null)throw new Error(`Invalid schema, missing enum values for field type ${e.enums[t.type.index]?.name}`);for(const r of a)s.push({name:yn(r.name),type:o,isConstant:!0,value:r.value})}s.push({name:yn(t.name),type:o});break}case qe.rB.Vector:switch(t.type.element){case qe.rB.Vector:case qe.rB.Union:case qe.rB.Array:case qe.rB.None:throw new Error("Vectors of vectors, unions, arrays, and None's are unsupported.");case qe.rB.Obj:s.push({name:yn(t.name),type:yn(e.objects[t.type.index]?.name),isComplex:!0,isArray:!0});break;default:{const o=Ci(t.type.element);if(t.type.index!==-1){const a=e.enums[t.type.index]?.values;if(a==null)throw new Error("Invalid schema");for(const r of a)s.push({name:yn(r.name),type:o,isConstant:!0,value:r.value})}s.push({name:yn(t.name),type:o,isArray:!0});break}}break;case qe.rB.Obj:s.push({name:yn(t.name),type:yn(e.objects[t.type.index]?.name),isComplex:!0});break;case qe.rB.Union:case qe.rB.Array:case qe.rB.MaxBaseType:case void 0:throw new Error("Unions and Arrays are not supported in mcap-support currently.")}return s}function Gm(e,t){const s=new Map,o=new xi.cZ(t),a=qe.V_.getRootAsSchema(o),r=a.unpack();let l=-1;for(let f=0;f<r.objects.length;++f){const g=r.objects[f];g?.name===e&&(l=f);let y=[];if(g?.fields!=null){for(const S of g.fields)y=y.concat(zm(r,S));s.set(yn(g.name),{definitions:y})}}if(l===-1&&r.rootTable?.name!==e)throw new Error(`Type "${e}" is not available in the schema for "${r.rootTable?.name}".`);const p=new qe._b(a).toObjectLambda(l,!0);return{datatypes:s,deserialize:f=>{const g=new xi.cZ(new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),y=new qe.iA(g,l,g.readInt32(g.position())+g.position(),!1);return p(y)}}}var Um=i(70943);function Wm(e,t){const s=Um.FileDescriptorSet.decode(t),o=Ho().Root.fromDescriptor(s);o.resolveAll();const a=o.lookupType(e),r=p=>{if(!p||!(p instanceof Ho().Type))return;for(const g of p.fieldsArray)g.name==="seconds"?g.name="sec":g.name==="nanos"&&(g.name="nsec");p.setup();const h=p.toObject,f=(g,y)=>{const S=h.call(p,g,y),{sec:N,nsec:k}=S;if(typeof N!="bigint"||typeof k!="number")return S;if(N>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`Timestamps with seconds greater than 2^53-1 are not supported (found seconds=${N}, nanos=${k})`);return{sec:Number(N),nsec:k}};p.toObject=f};r(o.lookup(".google.protobuf.Timestamp")),r(o.lookup(".google.protobuf.Duration"));const l=p=>a.toObject(a.decode(new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),{defaults:!0}),d=new Map;if(bi(d,a),!d.has(e))throw new Error(`Protobuf schema does not contain an entry for '${e}'. The schema name should be fully-qualified, e.g. '${Vo(a.fullName)}'.`);return{deserialize:l,datatypes:d}}function Ei(e,t){const s=new Map;return e.forEach(({name:o,definitions:a},r)=>{r===0?s.set(t,{name:t,definitions:a}):o!=null&&s.set(o,{name:o,definitions:a})}),s}function Xo(e){if(e.messageEncoding==="json"){if(e.schema!=null&&e.schema.encoding!=="jsonschema")throw new Error(`Message encoding ${e.messageEncoding} with schema encoding '${e.schema.encoding}' is not supported (expected jsonschema or no schema)`);const t=new TextDecoder;let s=new Map,o=a=>JSON.parse(t.decode(a));if(e.schema!=null){const a=e.schema.data.length>0?JSON.parse(t.decode(e.schema.data)):void 0;if(a!=null){if(typeof a!="object")throw new Error(`Invalid schema, expected JSON object, got ${typeof a}`);const{datatypes:r,postprocessValue:l}=km(a,e.schema.name);s=r,o=d=>l(JSON.parse(t.decode(d)))}}return{deserialize:o,datatypes:s}}if(e.messageEncoding==="flatbuffer"){if(e.schema?.encoding!=="flatbuffer")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected flatbuffer)`);return Gm(e.schema.name,e.schema.data)}if(e.messageEncoding==="protobuf"){if(e.schema?.encoding!=="protobuf")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected protobuf)`);return Wm(e.schema.name,e.schema.data)}if(e.messageEncoding==="ros1"){if(e.schema?.encoding!=="ros1msg")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected ros1msg)`);const t=new TextDecoder().decode(e.schema.data),s=(0,bs.parse)(t),o=new xs.MessageReader(s);return{datatypes:Ei(s,e.schema.name),deserialize:a=>o.readMessage(a)}}if(e.messageEncoding==="cdr"){if(e.schema?.encoding!=="ros2msg"&&e.schema?.encoding!=="ros2idl")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected "ros2msg" or "ros2idl")`);const t=new TextDecoder().decode(e.schema.data),o=e.schema.encoding==="ros2idl"?(0,bs.parseRos2idl)(t):(0,bs.parse)(t,{ros2:!0}),a=new Ws.MessageReader(o);return{datatypes:Ei(o,e.schema.name),deserialize:r=>a.readMessage(r)}}throw new Error(`Unsupported encoding ${e.messageEncoding}`)}class Ko{#e=new Map;#t;problems(){return this.#t??=Array.from(this.#e.values())}addProblem(t,s){console[s.severity].call(console,"Player problem",t,s),this.#e.set(t,s),this.#t=void 0}hasProblem(t){return this.#e.has(t)}removeProblem(t){const s=this.#e.delete(t);return s&&(this.#t=void 0),s}removeProblems(t){let s=!1;for(const[o,a]of this.#e)t(o,a)&&this.#e.delete(o)&&(s=!0);return s&&(this.#t=void 0),s}clear(){this.#e.clear(),this.#t=void 0}}function Si(e,t){const s=[],o=new Set([t]),a=[t];for(;a.length>0;){const r=a.pop();if(r==null)throw new Error("Invariant violation - Array.pop() when length > 0");const l=e.get(r);if(!l)throw new Error(`While searching datatypes for "${t}", could not find datatype "${r}"`);const d=r===t?{definitions:l.definitions}:{name:r,definitions:l.definitions};s.push(d);for(const p of l.definitions)p.isComplex===!0&&!o.has(p.type)&&(a.push(p.type),o.add(p.type))}return s}var zt=i(72841),Qm=i(48834).Buffer;class Ym{writeMessage(t){return new Uint8Array(Qm.from(JSON.stringify(t)??""))}}class Hm{#e;#t=!1;binaryType="";protocol="";onerror=void 0;onopen=void 0;onclose=void 0;onmessage=void 0;constructor(t,s){this.#e=new Worker(new URL(i.p+i.u(1478),i.b)),this.#n({type:"open",data:{wsUrl:t,protocols:s}}),this.#e.onerror=o=>{this.onerror&&this.onerror(o)},this.#e.onmessage=o=>{switch(o.data.type){case"open":this.onopen&&(this.protocol=o.data.protocol,this.onopen(o.data));break;case"close":this.#t=!0,this.#e.terminate(),this.onclose&&this.onclose(o.data);break;case"error":this.onerror&&this.onerror(o.data);break;case"message":this.onmessage&&this.onmessage(o.data);break}}}close(){this.#t||this.#n({type:"close",data:void 0})}send(t){this.#n({type:"data",data:t})}#n(t){if(this.#t)throw Error("Can't send message over closed websocket connection");this.#e.postMessage(t)}}var Vm="../../packages/studio-base/src/players/FoxgloveWebSocketPlayer",Xm=i(48834).Buffer;const Mn=ve.ZP.getLogger(Vm),Cs=new TextEncoder,Km=new TextDecoder,$m=2e3,Jm=Object.freeze({sec:0,nsec:0}),$o="get-all-params",qm=15e3,Es=["ros1","cdr"],Ti=["json",...Es],_m="json",Ii=["json",...Es];class e0{#e;#t;#n;#s;#a=(0,Ft.Z)();#o=[];#i=[];#c;#r;#l=!1;#A;#h=new Map;#v=new Map;#S=[];#g=0;#p;#w=!1;#I=Ye.m.INITIALIZING;#d=new Ko;#R=0;#T;#j;#m;#B;#x;#z=!1;#u=new Set;#b=new Map;#M=new Map;#k=new Map;#L=new Map;#y=new Set;#C=new Set;#f=new Map;#E;#W;#D;#F=[];#O=new Map;#Z;#Q=new Map;#P=new Map;#Y;#G;#H;#U=0;constructor({url:t,metricsCollector:s,sourceId:o}){this.#p=s,this.#t=t,this.#n=t,this.#p.playerConstructed(),this.#e=o,this.#j={sourceId:this.#e,parameters:{url:this.#t}},this.#$()}#$=()=>{if(!this.#l){if(this.#s!=null)throw new Error("Attempted to open a second Foxglove WebSocket connection");Mn.info(`Opening connection to ${this.#t}`),this.#D=setTimeout(()=>{this.#s?.close()},1e4),this.#s=new zt.Xq({ws:typeof Worker<"u"?new Hm(this.#t,[zt.Xq.SUPPORTED_SUBPROTOCOL]):new WebSocket(this.#t,[zt.Xq.SUPPORTED_SUBPROTOCOL])}),this.#s.on("open",()=>{if(!this.#l){this.#D!=null&&clearTimeout(this.#D),this.#I=Ye.m.PRESENT,this.#_(),this.#d.clear(),this.#L.clear(),this.#k.clear(),this.#Q.clear(),this.#P.clear(),this.#f.clear(),this.#T=void 0,this.#Y=void 0,this.#G=void 0,this.#H=void 0,this.#O.clear(),this.#v=new Map;for(const t of this.#b.keys())this.#u.add(t);this.#M.clear(),this.#b.clear()}}),this.#s.on("error",t=>{Mn.error(t),t?.message!=null&&t.message.includes("insecure WebSocket connection")&&(this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Insecure WebSocket connection",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${zt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#N())}),this.#s.on("close",t=>{Mn.info("Connection closed:",t),this.#I=Ye.m.RECONNECTING,this.#E!=null&&(clearInterval(this.#E),this.#E=void 0),this.#D!=null&&clearTimeout(this.#D),this.#s?.close(),this.#s=void 0,this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${zt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#N(),this.#W=setTimeout(this.#$,3e3)}),this.#s.on("serverInfo",t=>{Array.isArray(t.capabilities)||this.#d.addProblem("ws:invalid-capabilities",{severity:"warn",message:`Server sent an invalid or missing capabilities field: '${t.capabilities}'`});const s=t.sessionId??(0,Ft.Z)();this.#a!==s&&this.#_(),this.#a=s,this.#n=`${this.#t}
${t.name}`,this.#o=Array.isArray(t.capabilities)?t.capabilities:[],this.#z=this.#o.includes(zt.$8.time),this.#c=t.supportedEncodings,this.#v=new Map,this.#z&&(this.#x=void 0);const o=t.metadata?.ROS_DISTRO;if(o){const a=o,r=["melodic","noetic"].includes(a);this.#T=r?"ros1":"ros2";const l=r?As.ros1:["foxy","galactic"].includes(a)?As.ros2galactic:As.ros2humble,d=new Map;for(const p in l){const h=l[p];d.set(p,h)}this.#X(d)}if(t.capabilities.includes(zt.$8.clientPublish)&&(this.#i=this.#i.concat(Ye.C.advertise),this.#ee()),t.capabilities.includes(zt.$8.services)){this.#Z=t.supportedEncodings?.find(r=>Ii.includes(r));const a="callService:unsupportedEncoding";this.#Z?(this.#i=this.#i.concat(Ye.C.callServices),this.#d.removeProblem(a)):this.#d.addProblem(a,{severity:"warn",message:`Calling services is disabled as no compatible encoding could be found.             The server supports [${t.supportedEncodings?.join(", ")}],             but Studio only supports [${Ii.join(", ")}]`})}t.capabilities.includes(zt.$8.parameters)&&(this.#i=this.#i.concat(Ye.C.getParameters,Ye.C.setParameters),this.#E=setInterval(()=>{this.#s?.getParameters([],$o)},qm),this.#s?.getParameters([],$o)),t.capabilities.includes(zt.$8.connectionGraph)&&this.#s?.subscribeConnectionGraph(),this.#N()}),this.#s.on("status",t=>{const s=`FoxgloveWebSocket: ${t.message}`;t.level===zt.wR.INFO?Mn.info(s):t.level===zt.wR.WARNING?Mn.warn(s):Mn.error(s);const o={message:t.message,severity:t0(t.level)};t.message==="Send buffer limit reached"&&(o.tip="Server is dropping messages to the client. Check if you are subscribing to large or frequent topics or adjust your server send buffer limit."),this.#d.addProblem(t.message,o),this.#N()}),this.#s.on("advertise",t=>{for(const s of t){let o;try{let l,d;if(s.encoding==="json"&&(s.schemaEncoding==null||s.schemaEncoding==="jsonschema"))l="jsonschema",d=Cs.encode(s.schema);else if(s.encoding==="protobuf"&&(s.schemaEncoding==null||s.schemaEncoding==="protobuf")){if(l="protobuf",d=new Uint8Array(as.length(s.schema)),as.decode(s.schema,d,0)!==d.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="flatbuffer"&&(s.schemaEncoding==null||s.schemaEncoding==="flatbuffer")){if(l="flatbuffer",d=new Uint8Array(as.length(s.schema)),as.decode(s.schema,d,0)!==d.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="ros1"&&(s.schemaEncoding==null||s.schemaEncoding==="ros1msg"))l="ros1msg",d=Cs.encode(s.schema);else if(s.encoding==="cdr"&&(s.schemaEncoding==null||["ros2idl","ros2msg"].includes(s.schemaEncoding)))l=s.schemaEncoding??"ros2msg",d=Cs.encode(s.schema);else{const p=s.schemaEncoding?`Unsupported combination of message / schema encoding: (${s.encoding} / ${s.schemaEncoding})`:`Unsupported message encoding ${s.encoding}`;throw new Error(p)}o=Xo({messageEncoding:s.encoding,schema:{name:s.schemaName,encoding:l,data:d}})}catch(l){this.#y.add(s.id),this.#d.addProblem(`schema:${s.topic}`,{severity:"error",message:`Failed to parse channel schema on ${s.topic}`,error:l}),this.#N();continue}const a=this.#k.get(s.topic);if(a&&!(0,v.isEqual)(s,a.channel)){this.#d.addProblem(`duplicate-topic:${s.topic}`,{severity:"error",message:`Multiple channels advertise the same topic: ${s.topic} (${a.channel.id} and ${s.id})`}),this.#N();continue}const r={channel:s,parsedChannel:o};this.#L.set(s.id,r),this.#k.set(s.topic,r)}this.#V(),this.#N(),this.#K()}),this.#s.on("unadvertise",t=>{for(const s of t){const o=this.#L.get(s);if(!o){this.#y.delete(s)||(this.#d.addProblem(`unadvertise:${s}`,{severity:"error",message:`Server unadvertised channel ${s} that was not advertised`}),this.#N());continue}for(const[a,{channel:r}]of this.#M)r.id===s&&(this.#M.delete(a),this.#b.delete(r.topic),this.#s?.unsubscribe(a),this.#u.add(r.topic));this.#L.delete(s),this.#k.delete(o.channel.topic)}this.#V(),this.#N()}),this.#s.on("message",({subscriptionId:t,data:s})=>{this.#w||(this.#w=!0,this.#p.recordTimeToFirstMsgs());const o=this.#M.get(t);if(!o){this.#C.has(t)||(this.#d.addProblem(`message-missing-subscription:${t}`,{severity:"warn",message:`Received message on unknown subscription id: ${t}. This might be a WebSocket server bug.`}),this.#N());return}try{this.#g+=s.byteLength;const a=this.#J(),r=o.channel.topic;this.#S.push({topic:r,receiveTime:a,message:o.parsedChannel.deserialize(s),sizeInBytes:s.byteLength,schemaName:o.channel.schemaName});let l=this.#h.get(r);l||(l={numMessages:0},this.#h.set(r,l)),l.numMessages++}catch(a){this.#d.addProblem(`message:${o.channel.topic}`,{severity:"error",message:`Failed to parse message on ${o.channel.topic}`,error:a})}this.#N()}),this.#s.on("time",({timestamp:t})=>{if(!this.#z)return;const s=(0,he.fromNanoSec)(t);this.#x!=null&&(0,he.isLessThan)(s,this.#x)&&(this.#R++,this.#S=[]),this.#x=s,this.#N()}),this.#s.on("parameterValues",({parameters:t,id:s})=>{const o=t.map(r=>r.type==="byte_array"?{...r,value:Uint8Array.from(atob(r.value),l=>l.charCodeAt(0))}:r),a=o.filter(r=>!this.#f.has(r.name));s===$o?this.#f=new Map(o.map(r=>[r.name,r.value])):o.forEach(r=>this.#f.set(r.name,r.value)),this.#N(),a.length>0&&this.#o.includes(zt.$8.parametersSubscribe)&&this.#s?.subscribeParameterUpdates(a.map(r=>r.name))}),this.#s.on("advertiseServices",t=>{if(!this.#Z)return;let s;if(this.#Z==="json")s="jsonschema";else if(this.#Z==="ros1")s="ros1msg";else if(this.#Z==="cdr")s="ros2msg";else throw new Error(`Unsupported encoding "${this.#Z}"`);for(const o of t){const a=`${o.type}_Request`,r=`${o.type}_Response`,l=Xo({messageEncoding:this.#Z,schema:{name:a,encoding:s,data:Cs.encode(o.requestSchema)}}),d=Xo({messageEncoding:this.#Z,schema:{name:r,encoding:s,data:Cs.encode(o.responseSchema)}}),p=Si(l.datatypes,a),h=Es.includes(this.#Z)?this.#Z==="ros1"?new xs.MessageWriter(p):new Ws.MessageWriter(p):new Ym;this.#X(l.datatypes),this.#X(d.datatypes);const f={service:o,parsedResponse:d,requestMessageWriter:h};this.#Q.set(o.name,f)}this.#N()}),this.#s.on("unadvertiseServices",t=>{for(const s of t){const o=Object.values(this.#Q).find(a=>a.service.id===s);o&&this.#Q.delete(o.service.name)}}),this.#s.on("serviceCallResponse",t=>{const s=this.#P.get(t.callId);if(!s){this.#d.addProblem(`callService:${t.callId}`,{severity:"error",message:"Received a response for a service for which no callback was registered"});return}s(t),this.#P.delete(t.callId)}),this.#s.on("connectionGraphUpdate",t=>{if(t.publishedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#Y??new Map);for(const{name:o,publisherIds:a}of t.publishedTopics)s.set(o,new Set(a));t.removedTopics.forEach(o=>s.delete(o)),this.#Y=s}if(t.subscribedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#G??new Map);for(const{name:o,subscriberIds:a}of t.subscribedTopics)s.set(o,new Set(a));t.removedTopics.forEach(o=>s.delete(o)),this.#G=s}if(t.advertisedServices.length>0||t.removedServices.length>0){const s=new Map(this.#H??new Map);for(const{name:o,providerIds:a}of t.advertisedServices)s.set(o,new Set(a));t.removedServices.forEach(o=>s.delete(o)),this.#H=s}this.#N()})}};#V(){const t=Array.from(this.#L.values(),o=>({name:o.channel.topic,schemaName:o.channel.schemaName})),s=new Set(t.map(o=>o.name));for(const o of this.#h.keys())s.has(o)||this.#h.delete(o);this.#A=t;for(const{parsedChannel:o}of this.#L.values())this.#X(o.datatypes);this.#N()}#N=(0,hn.HF)(()=>{if(!this.#r||this.#l)return Promise.resolve();if(!this.#A)return this.#r({name:this.#n,presence:this.#I,progress:{},capabilities:this.#i,profile:void 0,playerId:this.#a,activeData:void 0,problems:this.#d.problems(),urlState:this.#j});const t=this.#J();(!this.#m||(0,he.isLessThan)(t,this.#m))&&(this.#m=t),(!this.#B||(0,he.isGreaterThan)(t,this.#B))&&(this.#B=t);const s=this.#S;return this.#S=[],this.#r({name:this.#n,presence:this.#I,progress:{},capabilities:this.#i,profile:this.#T,playerId:this.#a,problems:this.#d.problems(),urlState:this.#j,activeData:{messages:s,totalBytesReceived:this.#g,startTime:this.#m,endTime:this.#B,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:this.#R,topics:this.#A,topicStats:new Map(this.#h),datatypes:this.#v,parameters:new Map(this.#f),publishedTopics:this.#Y,subscribedTopics:this.#G,services:this.#H}})});setListener(t){this.#r=t,this.#N()}close(){this.#l=!0,this.#s?.close(),this.#p.close(),this.#w=!1,this.#W!=null&&(clearTimeout(this.#W),this.#W=void 0),this.#E!=null&&(clearInterval(this.#E),this.#E=void 0)}setSubscriptions(t){const s=new Set(t.map(({topic:o})=>o));if(!this.#s||this.#l){this.#u=s;return}for(const o of s)this.#b.has(o)||this.#u.add(o);for(const[o,a]of this.#b)s.has(o)||(this.#s.unsubscribe(a),this.#b.delete(o),this.#M.delete(a),this.#C.add(a),this.#h.delete(o),setTimeout(()=>this.#C.delete(a),$m));for(const o of this.#u)s.has(o)||this.#u.delete(o);this.#K()}#K(){if(this.#s)for(const t of this.#u){const s=this.#k.get(t);if(s){const o=this.#s.subscribe(s.channel.id);this.#u.delete(t),this.#b.set(t,o),this.#M.set(o,s)}}}setPublishers(t){const s=(0,v.uniqWith)(t,v.isEqual);if(!this.#s||this.#l){this.#F=s;return}const o=Array.from(this.#O.values()),a=o.filter(l=>s.find(({topic:d,schemaName:p})=>l.topic===d&&l.schemaName===p)==null),r=s.filter(({topic:l,schemaName:d})=>o.find(p=>p.topic===l&&p.schemaName===d)==null);for(const l of a)this.#te(l);for(const l of r)this.#q(l);(a.length>0||r.length>0)&&this.#N()}setParameter(t,s){if(!this.#s)throw new Error("Attempted to set parameters without a valid Foxglove WebSocket connection");Mn.debug(`FoxgloveWebSocketPlayer.setParameter(key=${t}, value=${s})`);const o=s instanceof Uint8Array,a=o?btoa(Km.decode(s)):s;this.#s.setParameters([{name:t,value:a,type:o?"byte_array":void 0}],(0,Ft.Z)()),this.#f.set(t,s),this.#N()}publish({topic:t,msg:s}){if(!this.#s)throw new Error("Attempted to publish without a valid Foxglove WebSocket connection");const o=this.#O.get(t);if(!o)throw new Error(`Tried to publish on topic '${t}' that has not been advertised before.`);if(o.encoding==="json"){const a=(l,d)=>ArrayBuffer.isView(d)?Array.from(d):d,r=Xm.from(JSON.stringify(s,a)??"");this.#s.sendMessage(o.id,r)}else if(Es.includes(o.encoding)&&o.messageWriter!=null){const a=o.messageWriter.writeMessage(s);this.#s.sendMessage(o.id,a)}}async callService(t,s){if(!this.#s)throw new Error(`Attempted to call service ${t} without a valid Foxglove WebSocket connection.`);if(s==null||typeof s!="object")throw new Error("FoxgloveWebSocketPlayer#callService request must be an object.");const o=this.#Q.get(t);if(!o)throw new Error(`Tried to call service '${t}' that has not been advertised before.`);const{service:a,parsedResponse:r,requestMessageWriter:l}=o,d={serviceId:a.id,callId:++this.#U,encoding:this.#Z,data:new DataView(new Uint8Array().buffer)},p=l.writeMessage(s);return d.data=new DataView(p.buffer),this.#s.sendServiceCallRequest(d),await new Promise((h,f)=>{this.#P.set(d.callId,g=>{try{const y=r.deserialize(g.data);h(y)}catch(y){f(y)}})})}setGlobalVariables(){}#J(){return this.#z||(this.#x=this.#I===Ye.m.PRESENT?(0,he.fromMillis)(Date.now()):this.#x),this.#x??Jm}#ee(){if(!(!this.#s||this.#l)&&this.#F.length!==0){this.#d.removeProblems(t=>t.startsWith("pub:"));for(const t of this.#F)this.#q(t);this.#F=[],this.#N()}}#q(t){if(!this.#s)return;const s=this.#c?this.#c.find(f=>Ti.includes(f)):_m,{topic:o,schemaName:a,options:r}=t,l=`pub:encoding:${o}`,d=`pub:msgdef:${o}`;if(!s){this.#d.addProblem(l,{severity:"warn",message:`Cannot advertise topic '${o}': Server does not support one of the following encodings for client-side publishing: ${Ti}`});return}let p;if(Es.includes(s)){let f;try{const g=r?.datatypes??this.#v;if(!(g instanceof Map))throw new Error("Datatypes option must be a map");f=Si(g,a)}catch(g){Mn.debug(g),this.#d.addProblem(d,{severity:"warn",message:`Unknown message definition for "${o}"`,tip:`Try subscribing to the topic "${o}" before publishing to it`});return}p=s==="ros1"?new xs.MessageWriter(f):new Ws.MessageWriter(f)}const h=this.#s.advertise({topic:o,encoding:s,schemaName:a});this.#O.set(o,{id:h,topic:o,encoding:s,schemaName:a,messageWriter:p});for(const f of[l,d])this.#d.hasProblem(f)&&this.#d.removeProblem(f)}#te(t){if(!this.#s)return;this.#s.unadvertise(t.id),this.#O.delete(t.topic);const s=[`pub:encoding:${t.topic}`,`pub:msgdef:${t.topic}`];for(const o of s)this.#d.hasProblem(o)&&this.#d.removeProblem(o)}#_(){this.#m=void 0,this.#B=void 0,this.#x=void 0,this.#h=new Map,this.#S=[],this.#g=0,this.#w=!1,this.#d.clear(),this.#f.clear()}#X(t){let s;const o=["ros1","ros2"].includes(this.#T??"");for(const[a,r]of t){const l=this.#v.get(a);if(l&&!(0,v.isMatch)(r,l))this.#d.addProblem(`schema-changed-${a}`,{message:`Definition of schema '${a}' has changed during the server's runtime`,severity:"error"});else{s==null&&(s=new Map(this.#v)),s.set(a,r);const d=Pi(a);o&&d!==a&&s.set(d,{...r,name:r.name?Pi(r.name):void 0})}}s!=null&&(this.#v=s)}}function Pi(e){const t=e.split("/");return t.length===2?`${t[0]}/msg/${t[1]}`:e}function t0(e){return e===zt.wR.INFO?"info":e===zt.wR.WARNING?"warn":"error"}class n0{id="foxglove-websocket";type="connection";displayName="Foxglove WebSocket";iconName="Flow";description="Connect to a ROS 1, ROS 2, or custom system using the Foxglove WebSocket protocol. For ROS systems, be sure to first install the foxglove_bridge ROS package.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#foxglove-websocket"},{label:"ROS 2",url:"https://foxglove.dev/docs/studio/connection/ros2#foxglove-websocket"},{label:"custom data",url:"https://foxglove.dev/docs/studio/connection/custom#foxglove-websocket"}];formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:8765",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new e0({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}var s0=i(71696),o0=i.n(s0);class a0{setProperty(t,s){}playerConstructed(){}play(t){}seek(t){}setSpeed(t){}pause(){}close(){}setSubscriptions(t){}recordPlaybackTime(t){}recordBytesReceived(t){}recordDataProviderPerformance(){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(){}recordDataProviderStall(){}}const i0=Object.freeze({sec:0,nsec:0});class r0{#e;#t;#n;constructor(t,s){this.#e=t,this.#n=s}async next(){return this.#n?.aborted===!0?void 0:(await this.#e.next()).value}async nextBatch(t){const s=await this.next();if(!s)return;if(s.type==="problem")return[s];const o=[s];let a=i0;switch(s.type){case"stamp":a=(0,he.add)(s.stamp,{sec:0,nsec:t*1e6});break;case"message-event":a=(0,he.add)(s.msgEvent.receiveTime,{sec:0,nsec:t*1e6});break}for(;;){const r=await this.next();if(!r)return o;if(o.push(r),r.type==="problem"||r.type==="stamp"&&(0,he.compare)(r.stamp,a)>0||r.type==="message-event"&&(0,he.compare)(r.msgEvent.receiveTime,a)>0)break}return o}async readUntil(t){if(this.#n?.aborted===!0)return;const o=[];if(this.#t?.type==="stamp"&&(0,he.compare)(this.#t.stamp,t)>=0||this.#t?.type==="message-event"&&(0,he.compare)(this.#t.msgEvent.receiveTime,t)>0)return o;for(this.#t&&(o.push(this.#t),this.#t=void 0);;){const a=await this.#e.next();if(this.#n?.aborted===!0)return;if(a.done===!0)break;const r=a.value;if(r.type==="stamp"&&(0,he.compare)(r.stamp,t)>=0){this.#t=r;break}if(r.type==="message-event"&&(0,he.compare)(r.msgEvent.receiveTime,t)>0){this.#t=r;break}o.push(r)}return o}async end(){await this.#e.return?.()}}var l0="../../packages/studio-base/src/players/IterablePlayer/BlockLoader.ts";const is=ve.ZP.getLogger(l0);class c0{#e;#t=[];#n;#s;#a;#o=new Set;#i=0;#c;#r=!1;#l=new hn.fQ;#A;constructor(t){this.#e=t.source,this.#n=t.start,this.#s=t.end,this.#i=t.cacheSizeBytes,this.#c=t.problemManager,this.#A=new AbortController;const s=Number((0,he.toNanoSec)((0,he.subtract)(this.#s,this.#n)))+1;if(s>Number.MAX_SAFE_INTEGER*.9)throw new Error("Time range is too long to be supported");this.#a=Math.ceil(Math.max(t.minBlockDurationNs,s/t.maxBlocks));const o=Math.ceil(s/this.#a);is.debug(`Block count: ${o}`),this.#t=Array.from({length:o})}setTopics(t){if(!(0,v.isEqual)(t,this.#o)){this.#A.abort(),this.#o=t,this.#l.notifyAll(),is.debug(`Preloaded topics: ${[...t].join(", ")}`);for(const s of this.#t)if(s){const o=Object.keys(s.messagesByTopic),a=new Set(t);for(const r of o)a.delete(r);s.needTopics=a}}}#h(){const t=this.#o;let s=0;for(let o=0;o<this.#t.length;o++){const a=this.#t[o];if(a){let r=0;const l={...a.messagesByTopic},d=Object.keys(l);for(const p of d)if(!t.has(p)&&l[p]){for(const h of l[p])r+=h.sizeInBytes;delete l[p]}r>0&&(this.#t[o]={...a,messagesByTopic:l,sizeInBytes:a.sizeInBytes-r},s+=r)}}return s}async stopLoading(){is.debug("Stop loading blocks"),this.#r=!0,this.#l.notifyAll()}async startLoading(t){for(is.debug("Start loading process"),this.#r=!1;!this.#r;){this.#A=new AbortController;const s=this.#o;if(await this.#v({progress:t.progress}),this.#r)break;this.#o===s&&await this.#l.wait()}}async#v(t){const s=this.#o;if(s.size===0){t.progress(this.#S(s));return}if(this.#t.length===0)return;is.debug("loading blocks",{topics:s});const{progress:o}=t;let a=this.#g();for(let r=0;r<this.#t.length;++r){let l;{const y=this.#t[r];if(y?.needTopics.size===0)continue;l=y?.needTopics??s}let d=r;for(let y=r+1;y<this.#t.length;++y){const S=this.#t[y]?.needTopics??s;if(!(0,v.isEqual)(l,S))break;d=y}const p=this.#p(r),h=(0,he.clampTime)(this.#w(d),this.#n,this.#s),f={topics:Array.from(l),start:p,end:h,consumptionType:"full"},g=this.#e.getMessageCursor?.({...f,abort:this.#A.signal})??new r0(this.#e.messageIterator(f),this.#A.signal);is.debug("Loading range",{blockId:r,endBlockId:d});for(let y=r;y<=d;++y){const S=(0,he.clampTime)(this.#w(y),this.#n,this.#s),N=await g.readUntil(S);if(!N){await g.end();return}const k={};for(const pe of l)k[pe]=[];let W=0;for(const pe of N){if(pe.type==="problem"){this.#c.addProblem(`connid-${pe.connectionId}`,pe.problem);continue}if(pe.type!=="message-event")continue;const ye=pe.msgEvent.topic,fe=k[ye],de=`unexpected-topic-${ye}`;if(!fe){this.#c.addProblem(de,{severity:"error",message:`Received a message on an unexpected topic: ${ye}.`});continue}this.#c.removeProblem(de);const ee=pe.msgEvent.sizeInBytes;if(a+=ee,fe.push(pe.msgEvent),W+=ee,a<this.#i){this.#c.removeProblem("cache-full");continue}const Pe=this.#h();if(a-=Pe,a>this.#i){this.#c.addProblem("cache-full",{severity:"error",message:`Cache is full. Preloading for topics [${Array.from(l).join(", ")}] has stopped on block ${y+1}/${this.#t.length}.`,tip:"Try reducing the number of topics that require preloading at a given time (e.g. in plots), or try to reduce the time range of the file."});return}}const J=this.#t[y];this.#t[y]={needTopics:new Set,messagesByTopic:{...J?.messagesByTopic,...k},sizeInBytes:(J?.sizeInBytes??0)+W},o(this.#S(s))}await g.end(),r=d+1}}#S(t){return{fullyLoadedFractionRanges:(0,Ra.og)((0,on.Z)(this.#t,(o,a)=>{if(o){for(const r of t)if(!o.messagesByTopic[r])return;return{start:a,end:a+1}}})).map(o=>({start:o.start/this.#t.length,end:o.end/this.#t.length})),messageCache:{blocks:this.#t.slice(),startTime:this.#n}}}#g(){return this.#t.reduce((t,s)=>s?t+s.sizeInBytes:t,0)}#p(t){return(0,he.add)(this.#n,(0,he.fromNanoSec)(BigInt(t)*BigInt(this.#a)))}#w(t){return(0,he.add)(this.#n,(0,he.fromNanoSec)(BigInt(t+1)*BigInt(this.#a)-1n))}}class d0{#e=0;#t=0;#n=new Array(4);enqueue(t){this.#t>=this.#n.length&&(this.#e===0?this.#s():this.#t=this.#t%this.#n.length),this.#e-this.#t===1&&this.#s(),this.#n[this.#t]=t,this.#t++}dequeue(){if(this.#e===this.#t)return;this.#e>=this.#n.length&&(this.#e=this.#e%this.#n.length);const t=this.#n[this.#e];return this.#n[this.#e]=void 0,this.#e+=1,t}size(){return this.#t>=this.#e?this.#t-this.#e:this.#n.length-this.#e+this.#t}capacity(){return this.#n.length}clear(){this.#n.length=0,this.#t=0,this.#e=0}#s(){const t=this.#n.length;if(this.#n.length=this.#n.length*2,this.#e<=this.#t)return;const s=this.#n.length;if(this.#t>=t/2){const o=t-this.#e,a=s-o;for(let r=0;r<o;++r)this.#n[a+r]=this.#n[this.#e+r],this.#n[this.#e+r]=void 0;this.#e=a}else{for(let o=0;o<this.#t;++o)this.#n[t+o]=this.#n[o],this.#n[o]=void 0;this.#t=t+this.#t}}}function Mi(e,t){const s=e;if(s.length===0)return-1;let o=0,a=s.length-1;for(;o<=a;){const r=o+a>>1,l=s[r][0];if(l===t)return r;t<l?a=r-1:o=r+1}return~o}function u0(e,t){if(e.length===0)return-1;let s=0,o=e[0];for(let a=1;a<e.length;++a){const r=e[a];t(r,o)<0&&(s=a,o=r)}return s}var p0="../../packages/studio-base/src/players/IterablePlayer/CachingIterableSource.ts";const f0=ve.ZP.getLogger(p0);class Jo extends Fo.Z{#e;#t=[];#n=[];#s=[{start:0,end:0}];#a;#o=0;#i;#c;constructor(t,s){super(),this.#e=t,this.#i=s?.maxTotalSize??1073741824,this.#c=s?.maxBlockSize??52428800}async initialize(){return this.#a=await this.#e.initialize(),this.#a}async terminate(){this.#n.length=0,this.#t.length=0}loadedRanges(){return this.#s}async*messageIterator(t){if(!this.#a)throw new Error("Invariant: uninitialized");const s=t.end??this.#a.end,o=(0,he.toNanoSec)(s),a=[...t.topics].sort();(0,v.isEqual)(a,this.#t)||(f0.debug("topics changed - clearing cache, resetting range"),this.#t=a,this.#n.length=0,this.#o=0,this.#r());let r=t.start??this.#a.start;for(;!((0,he.compare)(r,s)>0);){const l=this.#n.findIndex(k=>(0,he.compare)(k.start,r)<=0&&(0,he.compare)(k.end,r)>=0);let d=this.#n[l];if(d&&(0,he.compare)(d.start,d.end)===0&&d.items.length===0){d=void 0,this.#n.splice(l,1);continue}if(d){const k=Jo.#A(d.items,(0,he.toNanoSec)(r));for(let W=k;W<d.items.length;++W){const J=d.items[W];if(!J)break;if(J[0]>o)return;d.lastAccess=Date.now(),yield J[1]}r=(0,he.add)(d.end,{sec:0,nsec:1});continue}const p=r,h=this.#n.findIndex(k=>(0,he.compare)(r,k.start)<0),f=this.#n[h];let g=f?(0,he.subtract)(f.start,{sec:0,nsec:1}):s;if((0,he.compare)(p,g)>0)throw new Error("Invariant: sourceReadStart > sourceReadEnd");(0,he.compare)(g,s)>0&&(g=s);const y=this.#e.messageIterator({topics:this.#t,start:p,end:g,consumptionType:t.consumptionType});let S=(0,he.toNanoSec)(p);const N=[];for await(const k of y){if(!d){const J={start:r,end:r,items:[],size:0,lastAccess:Date.now()},pe=(0,v.sortedIndexBy)(this.#n,J,ye=>(0,he.toNanoSec)(ye.start));this.#n.splice(pe,0,J),d=J,this.#r()}if(k.type==="message-event"||k.type==="stamp"){const J=k.type==="stamp"?k.stamp:k.msgEvent.receiveTime,pe=(0,he.toNanoSec)(J);if(pe>S){for(const ye of N){const fe=ye[1],de=fe.type==="message-event"?fe.msgEvent.sizeInBytes:0;d.items.push(ye),d.size+=de}N.length=0,d.lastAccess=Date.now(),d.end=(0,he.subtract)(J,{sec:0,nsec:1}),S=pe,this.#r()}}d.size>=this.#c&&(r=(0,he.add)(d.end,{sec:0,nsec:1}),d=void 0);const W=k.type==="message-event"?k.msgEvent.sizeInBytes:0;this.#l({activeBlock:d,sizeInBytes:W})&&this.#r(),this.#o+=W,N.push([S,k]),yield k}if(d){d.end=g,d.lastAccess=Date.now();for(const k of N){const W=k[1],J=W.type==="message-event"?W.msgEvent.sizeInBytes:0;d.items.push(k),d.size+=J}this.#r()}else{const k={start:r,end:g,items:N,size:0,lastAccess:Date.now()};for(const J of N){const pe=J[1],ye=pe.type==="message-event"?pe.msgEvent.sizeInBytes:0;k.size+=ye}const W=(0,v.sortedIndexBy)(this.#n,k,J=>(0,he.toNanoSec)(J.start));this.#n.splice(W,0,k),this.#r()}r=(0,he.add)(g,{sec:0,nsec:1})}}async getBackfillMessages(t){if(!this.#a)throw new Error("Invariant: uninitialized");const s=this.#n.findIndex(l=>(0,he.compare)(l.start,t.time)<=0&&(0,he.compare)(l.end,t.time)>=0),o=[],a=new Set(t.topics);for(let l=s;l>=0&&a.size>0;--l){const d=this.#n[l];if(!d)break;const p=(0,he.toNanoSec)(t.time);let h=Mi(d.items,p);if(h<0)h=~h,h-=1;else for(let g=h+1;g<d.items.length&&d.items[g]?.[0]===p;++g)h=g;for(let g=h;g>=0;--g){const y=d.items[g];if(!y||y[1].type!=="message-event")continue;const S=y[1].msgEvent;a.has(S.topic)&&(a.delete(S.topic),o.push(S))}const f=this.#n[l-1];if(f&&(0,he.compare)((0,he.add)(f.end,{sec:0,nsec:1}),d.start)!==0)break}if(a.size===0)return o;const r=await this.#e.getBackfillMessages({...t,topics:Array.from(a)});return o.push(...r),o.sort((l,d)=>(0,he.compare)(l.receiveTime,d.receiveTime)),o}#r(){if(!this.#a)throw new Error("Invariant: uninitialized");const t=(0,he.toNanoSec)(this.#a.start),s=Number((0,he.toNanoSec)((0,he.subtract)(this.#a.end,this.#a.start)));if(s===0){this.#s=[{start:0,end:1}],this.emit("loadedRangesChange");return}if(this.#n.length===0){this.#s=[{start:0,end:0}],this.emit("loadedRangesChange");return}const o=[];let a;for(const r of this.#n){const l={start:(0,he.toNanoSec)(r.start),end:(0,he.toNanoSec)(r.end)};a?a.end+1n===l.start?a.end=l.end:(o.push({start:Number(a.start-t)/s,end:Number(a.end-t)/s}),a=l):a=l}a&&o.push({start:Number(a.start-t)/s,end:Number(a.end-t)/s}),this.#s=o,this.emit("loadedRangesChange")}#l(t){const{activeBlock:s,sizeInBytes:o}=t;if(this.#o+o<=this.#i)return!1;const a=u0(this.#n,(l,d)=>l.lastAccess-d.lastAccess),r=this.#n[a];if(r){if(r===s)throw new Error("Cannot evict the active cache block.");return this.#o-=r.size,this.#n.splice(a,1),!0}return!1}static#A(t,s){if(t[0]!=null&&t[0][0]>=s)return 0;let o=Mi(t,s);if(o<0)return~o;for(let a=o-1;a>=0;--a){const r=t[a];if(r!=null&&r[0]!==s)break;o=a}return o}}var h0="../../packages/studio-base/src/players/IterablePlayer/BufferedIterableSource.ts";const Qs=ve.ZP.getLogger(h0),g0={sec:10,nsec:0};class m0 extends Fo.Z{#e;#t=!1;#n=!1;#s=new hn.fQ;#a=new hn.fQ;#o=new d0;#i={sec:0,nsec:0};#c;#r;#l;constructor(t,s){super(),this.#l=s?.readAheadDuration??g0,this.#e=new Jo(t),this.#e.on("loadedRangesChange",()=>this.emit("loadedRangesChange"))}async initialize(){return this.#r=await this.#e.initialize(),this.#r}async#A(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(t.topics.length===0){this.#t=!0;return}Qs.debug("Starting producer"),this.#o.clear();try{const s=this.#e.messageIterator({topics:t.topics,start:this.#i,consumptionType:"partial"});let o=(0,he.clampTime)((0,he.add)(this.#i,this.#l),this.#r.start,this.#r.end);for await(const a of s){if(this.#n)return;if(o=(0,he.add)(this.#i,this.#l),a.type==="stamp"&&(0,he.compare)(a.stamp,o)>=0){for(;(0,he.compare)(a.stamp,o)>=0;){if(this.#n)return;this.#o.enqueue(a),this.#s.notifyAll(),await this.#a.wait(),o=(0,he.add)(this.#i,this.#l)}continue}this.#o.enqueue(a),this.#s.notifyAll(),!(a.type==="message-event"&&(0,he.compare)(a.msgEvent.receiveTime,o)<=0)&&this.#o.size()!==0&&await this.#a.wait()}}finally{this.#s.notifyAll(),this.#t=!0}Qs.debug("producer done")}async terminate(){this.#o.clear(),this.#e.removeAllListeners("loadedRangesChange"),await this.#e.terminate()}async stopProducer(){Qs.debug("Stopping producer"),this.#n=!0,this.#a.notifyAll(),await this.#c,this.#c=void 0}loadedRanges(){return this.#e.loadedRanges()}messageIterator(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(this.#c)throw new Error("Invariant: BufferedIterableSource allows only one messageIterator");const s=t.start??this.#r.start;this.#i=s,this.#n=!1,this.#t=!1,this.#c=this.#A(t);const o=this;return async function*(){try{if(t.topics.length===0)return;for(;;){const r=o.#o.dequeue();if(!r){if(o.#t)break;await o.#s.wait();continue}r.type==="stamp"&&(o.#i=r.stamp),r.type==="message-event"&&(o.#i=r.msgEvent.receiveTime),o.#a.notifyAll(),yield r}}finally{Qs.debug("ending buffered message iterator"),await o.stopProducer()}}()}async getBackfillMessages(t){return await this.#e.getBackfillMessages(t)}}var y0="../../packages/studio-base/src/players/IterablePlayer/IterablePlayer.ts";const Gt=ve.ZP.getLogger(y0),A0=1e9,v0=100,b0=1e8,x0=400,C0=BigInt(99*1e6);class rs{#e;#t;#n;#s="preinit";#a=!1;#o=!1;#i;#c=1;#r;#l;#A=!0;#h;#v=Date.now();#S=[];#g=new Map;#p=new Map;#w=[Ye.C.setSpeed,Ye.C.playbackControl];#I;#d;#R=[];#T=new Set;#j=new Set;#m={};#B=(0,Ft.Z)();#x=[];#z=0;#u=!1;#b;#M;#k;#L=new Map;#y;#C=Ye.m.INITIALIZING;#f;#E=new Ko;#W;#D;#F;#O;#Z;#Q;#P;#Y;#G;constructor(t){const{metricsCollector:s,urlParams:o,source:a,name:r,enablePreload:l,sourceId:d}=t;this.#W=a,this.#D=new m0(a),this.#t=r,this.#e=o,this.#d=s??new a0,this.#d.playerConstructed(),this.#A=l??!0,this.#Y=d,this.#P=(0,hn.HF)(this.#te.bind(this))}setListener(t){if(this.#i)throw new Error("Cannot setListener again");this.#i=t,this.#U("initialize")}startPlayback(){this.#H()}playUntil(t){this.#H({untilTime:t})}#H(t){if(!(this.#o||this.#G||!this.#r||!this.#l)){if(t?.untilTime){if(this.#f&&(0,he.compare)(t.untilTime,this.#f)<=0)throw new Error("Invariant: playUntil time must be after the current time");this.#G=(0,he.clampTime)(t.untilTime,this.#r,this.#l)}this.#d.play(this.#c),this.#o=!0,this.#s==="idle"&&(!this.#n||this.#n==="idle")&&this.#U("play")}}pausePlayback(){this.#o&&(this.#d.pause(),this.#h=void 0,this.#o=!1,this.#G=void 0,this.#s==="play"&&this.#U("idle"))}setPlaybackSpeed(t){this.#b=void 0,this.#c=t,this.#d.setSpeed(t),this.#P()}seekPlayback(t){if(this.#s==="preinit"||this.#s==="initialize"){Gt.debug(`Ignoring seek, state=${this.#s}`),this.#y=t;return}if(!this.#r||!this.#l)throw new Error("invariant: initialized but no start/end set");const s=(0,he.clampTime)(t,this.#r,this.#l);if(this.#y&&(0,he.compare)(this.#y,s)===0){Gt.debug("Ignoring seek, already seeking to this time");return}if(this.#f&&(0,he.compare)(this.#f,s)===0){Gt.debug("Ignoring seek, already at this time");return}this.#d.seek(s),this.#y=s,this.#G=void 0,this.#U("seek-backfill")}setSubscriptions(t){Gt.debug("set subscriptions",t),this.#R=t,this.#d.setSubscriptions(t);const s=new Set(this.#R.map(a=>a.topic)),o=new Set((0,on.Z)(this.#R,a=>a.preloadType!=="partial"?a.topic:void 0));(0,v.isEqual)(s,this.#T)&&(0,v.isEqual)(o,this.#j)||(this.#T=s,this.#j=o,this.#Z?.setTopics(this.#j),(this.#s==="idle"||this.#s==="seek-backfill"||this.#s==="play")&&!this.#o&&this.#f&&(this.#y??=this.#f,this.#G=void 0,this.#U("seek-backfill")))}setPublishers(t){}setParameter(t,s){throw new Error("Parameter editing is not supported by this data source")}publish(t){throw new Error("Publishing is not supported by this data source")}async callService(){throw new Error("Service calls are not supported by this data source")}close(){this.#U("close")}setGlobalVariables(){}#U(t){Gt.debug(`Set next state: ${t}`),this.#n=t,this.#F?.abort(),this.#F=void 0,this.#$()}async#$(){if(!this.#a){this.#a=!0;try{for(;this.#n;){const t=this.#s=this.#n;switch(this.#n=void 0,Gt.debug(`Start state: ${t}`),t!=="idle"&&t!=="play"&&this.#O&&(Gt.debug("Ending playback iterator because next state is not IDLE or PLAY"),await this.#O.return?.(),this.#O=void 0),t){case"preinit":this.#P();break;case"initialize":await this.#N();break;case"start-play":await this.#ee();break;case"idle":await this.#X();break;case"seek-backfill":await this.#q();break;case"play":await this.#ne();break;case"close":await this.#se();break;case"reset-playback-iterator":await this.#J()}Gt.debug(`Done state ${t}`)}}catch(t){Gt.error(t),this.#V(t.message,t),this.#P()}finally{this.#a=!1}}}#V(t,s){this.#u=!0,this.#E.addProblem("global-error",{severity:"error",message:t,error:s}),this.#o=!1}async#N(){this.#P();try{const{start:t,end:s,topics:o,profile:a,topicStats:r,problems:l,publishersByTopic:d,datatypes:p,name:h}=await this.#D.initialize();this.#y&&(this.#y=(0,he.clampTime)(this.#y,t,s)),this.#I=a,this.#r=t,this.#f=this.#y??t,this.#l=s,this.#L=d,this.#p=p,this.#t=h??this.#t;const f=new Map;for(const y of o){const S=f.get(y.name);if(S){l.push({severity:"warn",message:`Inconsistent datatype for topic: ${y.name}`,tip:`Topic ${y.name} has messages with multiple datatypes: ${S.schemaName}, ${y.schemaName}. This may result in errors during visualization.`});continue}f.set(y.name,y)}this.#S=Array.from(f.values()),this.#g=r;let g=0;for(const y of l)this.#E.addProblem(`init-problem-${g}`,y),g+=1;if(this.#A)try{this.#Z=new c0({cacheSizeBytes:A0,source:this.#W,start:this.#r,end:this.#l,maxBlocks:x0,minBlockDurationNs:b0,problemManager:this.#E})}catch(y){Gt.error(y);const S=(0,he.toRFC3339String)(this.#r),N=(0,he.toRFC3339String)(this.#l);this.#E.addProblem("block-loader",{severity:"warn",message:"Failed to initialize message preloading",tip:`The start (${S}) and end (${N}) of your data is too far apart.`,error:y})}this.#C=Ye.m.PRESENT}catch(t){this.#V(`Error initializing: ${t.message}`,t)}this.#P(),!this.#u&&this.#r&&(await Uo(v0),this.#Z?.setTopics(this.#j),this.#Q=this.#oe(),this.#U("start-play"))}async#K(){if(!this.#f)throw new Error("Invariant: Tried to reset playback iterator with no current time.");const t=(0,he.add)(this.#f,{sec:0,nsec:1});Gt.debug("Ending previous iterator"),await this.#O?.return?.(),await this.#D.stopProducer(),Gt.debug("Initializing forward iterator from",t),this.#O=this.#D.messageIterator({topics:Array.from(this.#T),start:t,consumptionType:"partial"})}async#J(){if(!this.#f)throw new Error("Invariant: Tried to reset playback iterator with no current time.");await this.#K(),this.#U(this.#o?"play":"idle")}async#ee(){if(!this.#r||!this.#l)throw new Error("Invariant: start and end must be set");if(this.#y){this.#U("seek-backfill");return}const t=(0,he.clampTime)((0,he.add)(this.#r,(0,he.fromNanoSec)(C0)),this.#r,this.#l);if(Gt.debug(`Playing from ${(0,he.toString)(this.#r)} to ${(0,he.toString)(t)}`),this.#O)throw new Error("Invariant. playbackIterator was already set");Gt.debug("Initializing forward iterator from",this.#r),this.#O=this.#D.messageIterator({topics:Array.from(this.#T),start:this.#r,consumptionType:"partial"}),this.#M=void 0,this.#x=[];const s=[],o=setTimeout(()=>{this.#C=Ye.m.BUFFERING,this.#P()},100);try{for(;;){const a=await this.#O.next();if(a.done===!0)break;const r=a.value;if(this.#n)return;if(r.type==="problem"){this.#E.addProblem(`connid-${r.connectionId}`,r.problem);continue}if(r.type==="stamp"&&(0,he.compare)(r.stamp,t)>=0){this.#k=r.stamp;break}if(r.type==="message-event"){if((0,he.compare)(r.msgEvent.receiveTime,t)>0){this.#M=r.msgEvent;break}s.push(r.msgEvent)}}}finally{clearTimeout(o)}this.#f=t,this.#x=s,this.#C=Ye.m.PRESENT,this.#P(),this.#U("idle")}async#q(){if(!this.#r||!this.#l)throw new Error("invariant: stateSeekBackfill prior to initialization");if(!this.#y)return;const t=(0,he.clampTime)(this.#y,this.#r,this.#l);this.#M=void 0;const s=setTimeout(()=>{this.#C=Ye.m.BUFFERING,this.#x=[],this.#f=t,this.#P()},100),o=Array.from(this.#T);try{this.#F=new AbortController;const a=await this.#D.getBackfillMessages({topics:o,time:t,abortSignal:this.#F.signal});if(clearTimeout(s),this.#n)return;this.#x=a,this.#f=t,this.#v=Date.now(),this.#C=Ye.m.PRESENT,this.#P(),await this.#K(),this.#U(this.#o?"play":"idle")}catch(a){if(this.#n&&a instanceof DOMException&&a.name==="AbortError")Gt.debug("Aborted backfill");else throw a}finally{this.#n!=="seek-backfill"&&(this.#y=void 0),clearTimeout(s),this.#F=void 0}}async#te(){if(!this.#i)return;if(this.#u)return await this.#i({name:this.#t,presence:Ye.m.ERROR,progress:{},capabilities:this.#w,profile:this.#I,playerId:this.#B,activeData:void 0,problems:this.#E.problems(),urlState:{sourceId:this.#Y,parameters:this.#e}});const t=this.#x;this.#x=[];let s;this.#r&&this.#l&&this.#f&&(s={messages:t,totalBytesReceived:this.#z,currentTime:this.#f,startTime:this.#r,endTime:this.#l,isPlaying:this.#o,speed:this.#c,lastSeekTime:this.#v,topics:this.#S,topicStats:this.#g,datatypes:this.#p,publishedTopics:this.#L});const o={name:this.#t,presence:this.#C,progress:this.#m,capabilities:this.#w,profile:this.#I,playerId:this.#B,problems:this.#E.problems(),activeData:s,urlState:{sourceId:this.#Y,parameters:this.#e}};return await this.#i(o)}async#_(){if(!this.#o)return;if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before tick()");const t=performance.now(),s=this.#h!=null&&this.#h!==0?t-this.#h:20;this.#h=t;let o=Math.min(s*this.#c,300);if(this.#b!=null&&(o=this.#b*.9+o*.1),this.#b=o,!this.#f)throw new Error("Invariant: Tried to play with no current time.");const a=(0,he.add)(this.#f,(0,he.fromMillis)(o)),r=(0,he.clampTime)(a,this.#r,this.#G??this.#l);if(this.#k){if((0,he.compare)(this.#k,r)>=0){await this.#P.currentPromise,this.#f=r,this.#x=[],this.#P(),this.#G&&(0,he.compare)(this.#f,this.#G)>=0&&this.pausePlayback();return}this.#k=void 0}const l=[];if(this.#M){if((0,he.compare)(this.#M.receiveTime,r)>0){await this.#P.currentPromise,this.#f=r,this.#x=l,this.#P(),this.#G&&(0,he.compare)(this.#f,this.#G)>=0&&this.pausePlayback();return}l.push(this.#M),this.#M=void 0}const d=setTimeout(()=>{this.#C=Ye.m.BUFFERING,this.#P()},500);try{for(;;){if(!this.#O)throw new Error("Invariant. this._playbackIterator is undefined.");const p=await this.#O.next();if(p.done===!0||this.#n)break;const h=p.value;if(h.type==="problem"){this.#E.addProblem(`connid-${h.connectionId}`,h.problem);continue}if(h.type==="stamp"&&(0,he.compare)(h.stamp,r)>=0){this.#k=h.stamp;break}if(h.type==="message-event"){if((0,he.compare)(h.msgEvent.receiveTime,r)>0){this.#M=h.msgEvent;break}l.push(h.msgEvent)}}}finally{clearTimeout(d)}this.#C=Ye.m.PRESENT,!this.#n&&(await this.#P.currentPromise,this.#f=r,this.#x=l,this.#P(),this.#G&&(0,he.compare)(this.#f,this.#G)>=0&&this.pausePlayback())}async#X(){o0()(this.#F==null,"Invariant: some other abort controller exists"),this.#o=!1,this.#C=Ye.m.PRESENT,this.#m={fullyLoadedFractionRanges:this.#D.loadedRanges(),messageCache:this.#m.messageCache};const t=this.#F=new AbortController,s=new Promise(a=>t.signal.addEventListener("abort",a)),o=()=>{this.#m={fullyLoadedFractionRanges:this.#D.loadedRanges(),messageCache:this.#m.messageCache},this.#P()};this.#D.on("loadedRangesChange",o),this.#P(),await s,this.#D.off("loadedRangesChange",o)}async#ne(){if(this.#C=Ye.m.PRESENT,!this.#f)throw new Error("Invariant: currentTime not set before statePlay");if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before statePlay");const t=this.#T;try{for(;this.#o&&!this.#u&&!this.#n;){if((0,he.compare)(this.#f,this.#l)>=0){this.#h=void 0,this.#b=void 0,this.#k=void 0,this.#U("idle");return}const s=Date.now();if(await this.#_(),this.#n)return;if(this.#m={fullyLoadedFractionRanges:this.#D.loadedRanges(),messageCache:this.#m.messageCache},this.#T!==t){this.#M=void 0,this.#U("reset-playback-iterator");return}const o=Date.now()-s;o<16&&await Uo(16-o)}}catch(s){this.#V(s.message,s),this.#P()}}async#se(){this.#o=!1,this.#d.close(),await this.#Z?.stopLoading(),await this.#Q,await this.#D.stopProducer(),await this.#D.terminate(),await this.#O?.return?.(),this.#O=void 0,await this.#W.terminate?.()}async#oe(){await this.#Z?.startLoading({progress:async t=>{this.#m={fullyLoadedFractionRanges:this.#m.fullyLoadedFractionRanges,messageCache:t.messageCache},this.#s!=="play"&&this.#P()}})}}var qo=i(90758);const E0={canHandle:e=>e instanceof AbortSignal,deserialize:([e,t])=>{const s=new AbortController;return e?s.abort():t.onmessage=()=>{s.abort()},s.signal},serialize:e=>{const{port1:t,port2:s}=new MessageChannel;return e.addEventListener("abort",()=>{t.postMessage("aborted")}),[[e.aborted,s],[s]]}};qo.Y6.set("abortsignal",E0);class ls{#e;#t;#n;constructor(t){this.#e=t}async initialize(){this.#t=this.#e.initWorker();const t=qo.Ud(this.#t);return await(this.#n=await t(this.#e.initArgs)).initialize()}async*messageIterator(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const s=this.getMessageCursor(t);try{for(;;){const o=await s.nextBatch(17);if(!o||o.length===0)break;yield*o}}finally{await s.end()}}async getBackfillMessages(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abortSignal:s,...o}=t;return await this.#n.getBackfillMessages(o,s)}getMessageCursor(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abort:s,...o}=t,a=this.#n.getMessageCursor(o,s);return{async next(){return await(await a).next()},async nextBatch(l){return await(await a).nextBatch(l)},async readUntil(l){return await(await a).readUntil(l)},async end(){const l=await a;try{await l.end()}finally{l[qo.Yy]()}}}}async terminate(){this.#t?.terminate()}}class S0{id="ros1-local-bagfile";type="file";displayName="ROS 1 Bag";iconName="OpenFile";supportedFileTypes=[".bag"];initialize(t){const s=t.file;if(!s)return;const o=new ls({initWorker:()=>new Worker(new URL(i.p+i.u(4334),i.b)),initArgs:{file:s}});return new rs({metricsCollector:t.metricsCollector,source:o,name:s.name,sourceId:this.id})}}const T0=S0;var ry=i(4201),ly=i(96683),I0="../../packages/studio-base/src/players/Ros1Player.ts";const Ys=ve.ZP.getLogger(I0),P0=ve.ZP.getLogger("ROS1"),wi=[Ye.C.advertise,Ye.C.getParameters,Ye.C.setParameters];var An;(function(e){e.Connection="Connection",e.Parameters="Parameters",e.Graph="Graph",e.Publish="Publish",e.Node="Node"})(An||(An={}));class cy{#e;#t;#n;#s=uuidv4();#a;#o=!1;#i;#c=new Map;#r=new Map;#l=new Map;#A=new Map;#h=new Map;#v=new Map;#S;#g;#p=[];#w=[];#I=[];#d;#R=!1;#T;#j=PlayerPresence.INITIALIZING;#m=new PlayerProblemManager;#B;#x;constructor({url:t,hostname:s,metricsCollector:o,sourceId:a}){Ys.info(`initializing Ros1Player (url=${t}, hostname=${s})`),this.#T=o,this.#e=t,this.#t=s,this.#S=this.#F(),this.#T.playerConstructed(),this.#x=a,this.#z()}#z=async()=>{const t=OsContextSingleton;if(this.#o||t==null)return;this.#j=PlayerPresence.INITIALIZING;const s=this.#t??RosNode.GetRosHostname(t.getEnvVar,t.getHostname,t.getNetworkInterfaces),o=await Sockets.Create(),a=await o.createHttpServer(),r=async p=>await o.createSocket(p.host,p.port),l=await o.createServer();let d="0.0.0.0";if(s==="localhost"&&(d="localhost"),await l.listen(void 0,d,10),this.#n==null){const p=new RosNode({name:`/foxglovestudio_${t.pid}`,hostname:s,pid:t.pid,rosMasterUri:this.#e,httpServer:a,tcpSocketCreate:r,tcpServer:l,log:P0});this.#n=p,p.on("paramUpdate",({key:h,value:f,prevValue:g,callerId:y})=>{Ys.debug("paramUpdate",h,f,g,y),this.#v=new Map(p.parameters)}),p.on("error",h=>{this.#u(An.Node,{severity:"warn",message:"ROS node error",tip:"Connectivity will be automatically re-established",error:h})})}await this.#n.start(),this.setPublishers(this.#p),await this.#L(),this.#j=PlayerPresence.PRESENT};#u(t,s,{skipEmit:o=!1}={}){this.#m.addProblem(t,s),o||this.#y()}#b(t,{skipEmit:s=!1}={}){this.#m.removeProblem(t)&&(s||this.#y())}#M({skipEmit:t=!1}={}){this.#m.removeProblems(s=>s.startsWith("msgdef:")||s.startsWith("advertise:")||s.startsWith("publish:"))&&(t||this.#y())}#k=t=>!this.#i||t.length!==this.#i.length?!0:!isEqual(this.#i,t);#L=async()=>{this.#d&&clearTimeout(this.#d);const t=this.#n;if(!(!t||this.#o))try{const o=(await t.getPublishedTopics()).map(([r,l])=>({name:r,schemaName:l})),a=sortBy(o,"name");if(this.#k(a)){const r=new Set(o.map(l=>l.name));for(const l of this.#c.keys())r.has(l)||this.#c.delete(l);this.#i=a}this.setSubscriptions(this.#w);try{const r=await t.subscribeAllParams();isEqual(r,this.#v)||(this.#v=new Map,r.forEach((l,d)=>this.#v.set(d,l))),this.#b(An.Parameters,{skipEmit:!0})}catch(r){this.#u(An.Parameters,{severity:"warn",message:"ROS parameter fetch failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:r},{skipEmit:!0})}await this.#D(t),this.#b(An.Connection,{skipEmit:!0}),this.#j=PlayerPresence.PRESENT,this.#y()}catch(s){this.#j=PlayerPresence.INITIALIZING,this.#u(An.Connection,{severity:"error",message:"ROS connection failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:s},{skipEmit:!1})}finally{this.#d=setTimeout(this.#L,3e3)}};#y=debouncePromise(()=>{if(!this.#a||this.#o)return Promise.resolve();const t=this.#i,s=this.#S;if(!t||!s)return this.#a({name:this.#e,presence:this.#j,progress:{},capabilities:wi,profile:"ros1",playerId:this.#s,problems:this.#m.problems(),activeData:void 0});this.#j===PlayerPresence.PRESENT&&(this.#B!=null&&clearTimeout(this.#B),this.#B=setTimeout(this.#y,100));const o=this.#F(),a=this.#I;return this.#I=[],this.#a({name:this.#e,presence:this.#j,progress:{},capabilities:wi,profile:"ros1",playerId:this.#s,problems:this.#m.problems(),urlState:{sourceId:this.#x,parameters:{url:this.#e}},activeData:{messages:a,totalBytesReceived:this.#n?.receivedBytes()??0,startTime:s,endTime:o,currentTime:o,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:this.#r,publishedTopics:this.#l,subscribedTopics:this.#A,services:this.#h,parameters:this.#v}})});setListener(t){this.#a=t,this.#y()}close(){this.#o=!0,this.#n&&this.#n.shutdown(),this.#B!=null&&(clearTimeout(this.#B),this.#B=void 0),this.#T.close(),this.#R=!1}setSubscriptions(t){if(this.#w=t,!this.#n||this.#o)return;this.#E(t);const s=keyBy(this.#i??[],({name:a})=>a),o=t.map(({topic:a})=>a).filter(a=>s[a]);for(const a of o){const r=s[a];if(!r||this.#n.subscriptions.has(a))continue;const{schemaName:l}=r,d=this.#n.subscribe({topic:a,dataType:l});d.on("header",(p,h,f)=>{const g=this.#f(l,h);this.#r=new Map([...this.#r,...g])}),d.on("message",(p,h,f)=>{this.#C(a,p,h.byteLength,l,!0),this.#b(`subscribe:${a}`,{skipEmit:!0})}),d.on("error",p=>{this.#u(`subscribe:${a}`,{severity:"warn",message:`Topic subscription error for "${a}"`,tip:`The subscription to "${a}" will be automatically re-established`,error:p})})}for(const a of this.#n.subscriptions.keys())o.includes(a)||(this.#n.unsubscribe(a),this.#c.delete(a))}#C=(t,s,o,a,r)=>{if(this.#i==null)return;const l=this.#F();r&&!this.#R&&(this.#R=!0,this.#T.recordTimeToFirstMsgs());const d={topic:t,receiveTime:l,message:s,sizeInBytes:o,schemaName:a};this.#I.push(d),this.#W(d);let p=this.#c.get(t);this.#n?.subscriptions.has(t)===!0&&(p||(p={numMessages:0},this.#c.set(t,p)),p.numMessages++,p.firstMessageTime??=l,(p.lastMessageTime==null||isGreaterThan(l,p.lastMessageTime))&&(p.lastMessageTime=l)),this.#y()};setPublishers(t){if(this.#p=t,!this.#n||this.#o)return;const s=t.filter(({topic:a})=>a.length>0&&a!=="/"),o=new Set(s.map(({topic:a})=>a));this.#M({skipEmit:!0});for(const a of this.#n.publications.keys())o.has(a)||this.#n.unadvertise(a);for(const{topic:a,schemaName:r}of s){const l=this.#n.publications.get(a);l!=null&&l.dataType!==r&&this.#n.unadvertise(a)}for(const a of s){const{topic:r,schemaName:l,options:d}=a;if(this.#n.publications.has(r))continue;const p=`msgdef:${r}`,h=`advertise:${r}`;let f;try{const g=d?.datatypes;if(!g||!(g instanceof Map))throw new Error("The datatypes option is required for publishing");f=rosDatatypesToMessageDefinition(g,l)}catch(g){Ys.debug(g),this.#u(p,{severity:"warn",message:`Unknown message definition for "${r}"`,tip:`Try subscribing to the topic "${r}" before publishing to it`});continue}this.#n.advertise({topic:r,dataType:l,messageDefinition:f}).catch(g=>this.#u(h,{severity:"error",message:`Failed to advertise "${r}"`,error:g}))}this.#y()}setParameter(t,s){Ys.debug(`Ros1Player.setParameter(key=${t}, value=${s})`),this.#n?.setParameter(t,s)}publish({topic:t,msg:s}){const o=`publish:${t}`;this.#n!=null&&(this.#n.isAdvertising(t)?this.#n.publish(t,s).then(()=>this.#b(o)).catch(a=>this.#u(o,{severity:"error",message:`Publishing to ${t} failed`,error:a})):this.#u(o,{severity:"warn",message:`Unable to publish to "${t}"`,tip:"ROS1 may be disconnected. Please try again in a moment"}))}async callService(){throw new Error("Service calls are not supported by this data source")}setGlobalVariables(){}#f=(t,s)=>{const o=new Map;for(const a of s)a.name==null?o.set(t,a):o.set(a.name,a);return o};#E(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#W(t){const s=t.message;if(t.topic==="/clock"&&s.clock&&!isNaN(s.clock.sec)){const o=s.clock,a=toSec(s.clock);if(isNaN(a))return;this.#g==null&&(this.#S=o),this.#g=o,t.receiveTime=this.#F()}}async#D(t){try{const s=await t.getSystemState();(!isEqual(this.#l,s.publishers)||!isEqual(this.#A,s.subscribers)||!isEqual(this.#h,s.services))&&(this.#l=s.publishers,this.#A=s.subscribers,this.#h=s.services),this.#b(An.Graph,{skipEmit:!0})}catch(s){this.#u(An.Graph,{severity:"warn",message:"Unable to update connection graph",tip:`The connection graph contains information about publishers and subscribers. A
stale graph may result in missing topics you expect. Ensure that roscore is reachable at ${this.#e}.`,error:s},{skipEmit:!0}),this.#l=new Map,this.#A=new Map,this.#h=new Map}}#F(){return this.#g??fromMillis(Date.now())}}class dy{id="ros1-socket";type="connection";displayName="ROS 1";iconName="ROS";description="Connect to a running ROS 1 system via a native TCP connection that accesses your ROS master and nodes directly.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/native"}];formConfig={fields:[{id:"url",label:"ROS_MASTER_URI",defaultValue:OsContextSingleton?.getEnvVar("ROS_MASTER_URI")??"http://localhost:11311",description:"Tells ROS nodes where they can locate the master"},{id:"hostname",label:"ROS_HOSTNAME",defaultValue:OsContextSingleton?RosNode.GetRosHostname(OsContextSingleton.getEnvVar,OsContextSingleton.getHostname,OsContextSingleton.getNetworkInterfaces):"localhost",description:"Acts as the declared network address of a ROS node or tool"}]};initialize(t){const s=t.params?.url;if(!s)return;const o=t.params?.hostname;if(!isUndefined(o)&&!isString(o))throw new Error(`Unable to initialize Ros1. Invalid hostname ${o}`);return new Ros1Player({url:s,hostname:o,metricsCollector:t.metricsCollector,sourceId:this.id})}}const uy=null;class M0{id="ros2-local-bagfile";type="file";displayName="ROS 2 Bag";iconName="OpenFile";supportedFileTypes=[".db3"];supportsMultiFile=!0;initialize(t){const s=t.file?[t.file]:t.files,o=t.file?t.file.name:t.files?.map(r=>r.name).join(", ");if(!s)return;const a=new ls({initWorker:()=>new Worker(new URL(i.p+i.u(4975),i.b)),initArgs:{files:s}});return new rs({metricsCollector:t.metricsCollector,source:a,name:o,sourceId:this.id})}}const w0=M0;var B0=i(34055),Hs=i.n(B0);function D0(e,{ros2:t}){const s=new Map;return e.forEach(o=>{(0,bs.parse)(o.messageDefinition,{ros2:t}).forEach(({name:r,definitions:l},d)=>{d===0?s.set(o.type,{name:o.type,definitions:l}):r!=null&&s.set(r,{name:r,definitions:l})})}),s}var j0="../../packages/studio-base/src/players";const Vs=ve.ZP.getLogger(j0),Bi=[Ye.C.advertise,Ye.C.callServices];function _o(e,t){return(0,v.transform)(e,(s,o)=>{const{node:a,values:r}=o[t];for(const l of r)s.has(l)||s.set(l,new Set),s.get(l)?.add(a)},new Map)}function R0(e,t){const s=t;return e==="/clock"&&s.clock!=null&&!isNaN(s.clock.sec)}function L0(e){return typeof e=="object"&&e!=null}class N0{#e;#t;#n=(0,Ft.Z)();#s=!1;#a;#o=!1;#i;#c=new Map;#r;#l=new Map;#A=new Map;#h=new Map;#v={};#S;#g;#p=new Map;#w=[];#I=[];#d;#R=new Map;#T=[];#j=new Set;#m=0;#B;#x=!1;#z=Ye.m.NOT_PRESENT;#u=new Ko;#b;#M=new Map;#k;#L;constructor({url:t,metricsCollector:s,sourceId:o}){this.#z=Ye.m.INITIALIZING,this.#B=s,this.#e=t,this.#S=(0,he.fromMillis)(Date.now()),this.#B.playerConstructed(),this.#k=o,this.#y()}#y=()=>{if(this.#o)return;if(this.#t!=null)throw new Error("Attempted to open a second Rosbridge connection");this.#u.removeProblem("rosbridge:connection-failed"),Vs.info(`Opening connection to ${this.#e}`);const t=new(Hs()).Ros({url:this.#e,transportLibrary:"workersocket"});t.on("connection",()=>{Vs.info(`Connected to ${this.#e}`),!this.#o&&(this.#z=Ye.m.PRESENT,this.#u.removeProblem("rosbridge:connection-failed"),this.#t=t,this.#D(),this.#f({forceUpdate:!0}))}),t.on("error",s=>{s&&(this.#u.addProblem("rosbridge:error",{severity:"warn",message:"Rosbridge error",error:s}),this.#E())}),t.on("close",()=>{this.#z=Ye.m.RECONNECTING,this.#d&&clearTimeout(this.#d);for(const[s,o]of this.#p)o.unsubscribe(),this.#p.delete(s);t.close(),this.#t=void 0,this.#u.addProblem("rosbridge:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the rosbridge WebSocket server at ${this.#e} is reachable.`}),this.#E(),setTimeout(this.#y,3e3)})};#C=t=>!this.#i||t.length!==this.#i.length?!0:!(0,v.isEqual)(this.#i,t);async#f(t){const{forceUpdate:s=!1}=t??{};this.#u.removeProblems(r=>r.startsWith("requestTopics:")),this.#d&&clearTimeout(this.#d);const o=this.#t;if(!o||this.#o)return;const a=setTimeout(()=>{this.#u.addProblem("topicsAndRawTypesTimeout",{severity:"warn",message:"Taking too long to get topics and raw types."}),this.#E()},5e3);try{const r=await new Promise((y,S)=>o.getTopicsAndRawTypes(y,S));clearTimeout(a),this.#u.removeProblem("topicsAndRawTypesTimeout");const l=[],d=[],p=[],h={};r.types.includes("rcl_interfaces/msg/Log")?(this.#L=2,this.#u.removeProblem("unknownRosVersion")):r.types.includes("rosgraph_msgs/Log")?(this.#L=1,this.#u.removeProblem("unknownRosVersion")):(this.#L=1,this.#u.addProblem("unknownRosVersion",{severity:"warn",message:"Unable to detect ROS version, assuming ROS 1"}));for(let y=0;y<r.topics.length;y++){const S=r.topics[y],N=r.types[y],k=r.typedefs_full_text[y];if(N==null||k==null){l.push(S);continue}d.push({name:S,schemaName:N}),p.push({type:N,messageDefinition:k});const W=(0,bs.parse)(k,{ros2:this.#L===2});h[N]||(h[N]=this.#L!==2?new xs.LazyMessageReader(W):new Ws.MessageReader(W))}const f=(0,v.sortBy)(d,"name");if(!s&&!this.#C(f))return;l.length>0&&this.#u.addProblem("requestTopics:missing-types",{severity:"warn",message:"Could not resolve all message types",tip:`Message types could not be found for these topics: ${l.join(",")}`});const g=new Set(d.map(y=>y.name));for(const y of this.#c.keys())g.has(y)||this.#c.delete(y);this.#i=f,this.#r=D0(p,{ros2:this.#L===2}),this.#v=h,this.setSubscriptions(this.#w),this.#Z().catch(y=>Vs.error(y))}catch(r){Vs.error(r),clearTimeout(a),this.#u.removeProblem("topicsAndRawTypesTimeout"),this.#u.addProblem("requestTopics:error",{severity:"error",message:"Failed to fetch topics from rosbridge",error:r})}finally{this.#E(),this.#d=setTimeout(()=>void this.#f(),3e3)}}#E=(0,hn.HF)(()=>{if(!this.#a||this.#o)return Promise.resolve();const t=this.#i,s=this.#r,o=this.#S;if(!t||!s||!o)return this.#a({name:this.#e,presence:this.#z,progress:{},capabilities:Bi,profile:void 0,playerId:this.#n,activeData:void 0,problems:this.#u.problems(),urlState:{sourceId:this.#k,parameters:{url:this.#e}}});this.#z===Ye.m.PRESENT&&(this.#b!=null&&clearTimeout(this.#b),this.#b=setTimeout(this.#E,100));const a=this.#O(),r=this.#I;return this.#I=[],this.#a({name:this.#e,presence:this.#z,progress:{},capabilities:Bi,profile:this.#L===2?"ros2":"ros1",playerId:this.#n,problems:this.#u.problems(),urlState:{sourceId:this.#k,parameters:{url:this.#e}},activeData:{messages:r,totalBytesReceived:this.#m,startTime:o,endTime:a,currentTime:a,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:s,publishedTopics:this.#l,subscribedTopics:this.#A,services:this.#h}})});setListener(t){this.#a=t,this.#E()}close(){this.#o=!0,this.#t&&this.#t.close(),this.#b!=null&&(clearTimeout(this.#b),this.#b=void 0),this.#B.close(),this.#x=!1}setSubscriptions(t){if(this.#w=t,!this.#t||this.#o)return;this.#F(t),this.#j=new Set(t.map(({topic:a})=>a));const s=(0,v.keyBy)(this.#i??[],({name:a})=>a),o=t.map(({topic:a})=>a).filter(a=>s[a]);for(const a of o){if(this.#p.has(a))continue;const r=new(Hs()).Topic({ros:this.#t,name:a,compression:"cbor-raw"}),l=s[a];if(!l)continue;const{schemaName:d}=l,p=this.#v[d];if(!p)continue;const h=`message:${a}`;r.subscribe(f=>{if(this.#i){try{const g=f.bytes,y=new Uint8Array(g);if(p instanceof xs.LazyMessageReader){const W=p.size(y);if(W>y.byteLength){this.#u.addProblem(h,{severity:"error",message:`Message buffer not large enough on ${a}`,error:new Error(`Cannot read ${W} byte message from ${y.byteLength} byte buffer`)}),this.#E();return}}const S=p.readMessage(y);if(R0(a,S)){const W=S.clock,J=(0,he.toSec)(S.clock);isNaN(J)||(this.#g==null&&(this.#S=W),this.#g=W)}const N=this.#O();if(this.#x||(this.#x=!0,this.#B.recordTimeToFirstMsgs()),this.#j.has(a)){const W={topic:a,receiveTime:N,message:S,schemaName:d,sizeInBytes:y.byteLength};this.#I.push(W)}this.#u.removeProblem(h);let k=this.#c.get(a);this.#p.has(a)&&(k||(k={numMessages:0},this.#c.set(a,k)),k.numMessages++)}catch(g){this.#u.addProblem(h,{severity:"error",message:`Failed to parse message on ${a}`,error:g})}this.#E()}}),this.#p.set(a,r)}for(const[a,r]of this.#p)o.includes(a)||(r.unsubscribe(),this.#p.delete(a),this.#c.delete(a))}setPublishers(t){for(const s of this.#R.values())s.unadvertise();this.#R.clear(),this.#T=t,this.#D()}setParameter(t,s){throw new Error("Parameter editing is not supported by the Rosbridge connection")}publish({topic:t,msg:s}){const o=this.#R.get(t);if(!o){if(this.#T.some(a=>a.topic===t))return;throw new Error(`Tried to publish on a topic that is not registered as a publisher: ${t}`)}o.publish(s)}async#W(t){if(!this.#t)throw new Error("Not connected");const s=this.#M.get(t);if(s)return await s;const o=this.#t,a=new Promise((r,l)=>{o.getServiceType(t,r,l)});return this.#M.set(t,a),await a}async callService(t,s){if(!this.#t)throw new Error("Not connected");if(!L0(s))throw new Error("RosbridgePlayer#callService request must be an object");const o=await this.#W(t),a=new(Hs()).Service({ros:this.#t,name:t,serviceType:o});return await new Promise((r,l)=>{a.callService(s,d=>r(d),d=>l(d))})}startPlayback(){}pausePlayback(){}seekPlayback(t){}setPlaybackSpeed(t){}setGlobalVariables(){}#D(){if(this.#t&&!(this.#T.length<=0))for(const{topic:t,schemaName:s}of this.#T){const o=new(Hs()).Topic({ros:this.#t,name:t,messageType:s,queue_size:0});this.#R.set(t,o),o.advertise()}}#F(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#O(){return this.#g??(0,he.fromMillis)(Date.now())}async#Z(){if(!this.#s)try{this.#s=!0;const s=(await new Promise((r,l)=>{this.#t?.getNodes(d=>r(d),l)})).map(async r=>await new Promise((l,d)=>{this.#t?.getNodeDetails(r,(p,h,f)=>{l({publications:{node:r,values:h},services:{node:r,values:f},subscriptions:{node:r,values:p}})},d)})),o=await Promise.allSettled(s),a=(0,on.Z)(o,r=>r.status==="fulfilled"?r.value:void 0);this.#l=_o(a,"publications"),this.#A=_o(a,"subscriptions"),this.#h=_o(a,"services"),this.#E()}catch(t){this.#u.addProblem("requestTopics:system-state",{severity:"error",message:"Failed to fetch node details from rosbridge",error:t})}finally{this.#s=!1}}}class O0{id="rosbridge-websocket";type="connection";displayName="Rosbridge";iconName="Flow";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/rosbridge"}];description="Connect to a ROS 1 or ROS 2 system using the Rosbridge WebSocket protocol.";formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:9090",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new N0({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}const k0=O0;class Z0{id="ulog-local-file";type="file";displayName="PX4 ULog";iconName="OpenFile";supportedFileTypes=[".ulg",".ulog"];initialize(t){const s=t.file;if(!s)return;const o=new ls({initWorker:()=>new Worker(new URL(i.p+i.u(2042),i.b)),initArgs:{file:s}});return new rs({metricsCollector:t.metricsCollector,source:o,name:s.name,sourceId:this.id})}}const F0=Z0,z0={".bag":()=>new Worker(new URL(i.p+i.u(6548),i.b)),".mcap":()=>new Worker(new URL(i.p+i.u(4268),i.b))};class G0{id="remote-file";legacyIds=["mcap-remote-file","ros1-remote-bagfile"];type="connection";displayName="Remote file";iconName="FileASPX";supportedFileTypes=[".bag",".mcap"];description="Open pre-recorded .bag or .mcap files from a remote location.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#cloud-data"},{label:"MCAP",url:"https://foxglove.dev/docs/studio/connection/mcap#cloud-data"}];formConfig={fields:[{id:"url",label:"Remote file URL",placeholder:"https://example.com/file.bag",validate:t=>this.#e(t)}]};warning=(0,n.jsxs)(n.Fragment,{children:["Loading large files over HTTP can be slow. For better performance, we recommend"," ",(0,n.jsx)(sn.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",children:"Foxglove Data Platform"}),"."]});initialize(t){const s=t.params?.url;if(!s)throw new Error("Missing url argument");const o=M().extname(new URL(s).pathname),a=z0[o];if(!a)throw new Error(`Unsupported extension: ${o}`);const r=new ls({initWorker:a,initArgs:{url:s}});return new rs({source:r,name:s,metricsCollector:t.metricsCollector,urlParams:{url:s},sourceId:this.id})}#e(t){try{const s=new URL(t),o=M().extname(s.pathname);if(o.length===0)return new Error("URL must end with a filename and extension");if(!this.supportedFileTypes.includes(o)){const a=new Intl.ListFormat("en-US",{style:"long"}).format(this.supportedFileTypes);return new Error(`Only ${a} files are supported.`)}return}catch{return new Error("Enter a valid url")}}}const U0=G0;var py=i(3890),W0="../../packages/studio-base/src/players/VelodynePlayer.ts";const ea=ve.ZP.getLogger(W0),Q0=2369,Y0=600,ta="SOCKET_ERROR",Xs="/velodyne_points",Di={name:Xs,schemaName:"velodyne_msgs/VelodyneScan"},H0=new Map(Object.entries({"velodyne_msgs/VelodyneScan":{name:"velodyne_msgs/VelodyneScan",definitions:[{type:"std_msgs/Header",name:"header",isArray:!1,isComplex:!0},{type:"velodyne_msgs/VelodynePacket",name:"packets",isArray:!0,isComplex:!0}]},"velodyne_msgs/VelodynePacket":{name:"velodyne_msgs/VelodynePacket",definitions:[{type:"time",name:"stamp",isArray:!1,isComplex:!1},{type:"uint8",name:"data",isArray:!0,arrayLength:1206,isComplex:!1}]},"std_msgs/Header":{name:"std_msgs/Header",definitions:[{name:"seq",type:"uint32",isArray:!1},{name:"stamp",type:"time",isArray:!1},{name:"frame_id",type:"string",isArray:!1}]}})),V0=null;class fy{#e=uuidv4();#t;#n;#s;#a=0;#o=0;#i=!1;#c={...Di};#r=[this.#c];#l=new Map;#A;#h=[];#v=[];#S;#g=PlayerPresence.INITIALIZING;#p;#w=[];#I=new Map;constructor({port:t,metricsCollector:s}){this.#t=t??Q0,ea.info(`initializing VelodynePlayer on port ${this.#t}`),this.#S=s,this.#A=fromMillis(Date.now()),this.#S.playerConstructed(),this.#d()}#d=async()=>{if(!this.#i){if(this.#g=PlayerPresence.PRESENT,this.#m(),this.#s==null){const t=await Sockets.Create();this.#s=await t.createUdpSocket(),this.#s.on("error",s=>{this.#T(ta,{message:"Networking error listening for Velodyne data",severity:"error",error:s,tip:"Check that your are connected to the same local network (subnet) as the Velodyne sensor"})}),this.#s.on("message",this.#R)}else try{await this.#s.close()}catch(t){ea.error(`Failed to close socket: ${t}`)}try{await this.#s.bind({address:"0.0.0.0",port:this.#t}),ea.debug(`Bound Velodyne UDP listener socket to port ${this.#t}`)}catch(t){this.#T(ta,{message:"Could not bind to the Velodyne UDP data port",severity:"error",error:t,tip:`Check that port ${this.#t} is not in use by another application`})}}};#R=(t,s)=>{const o=fromMillis(Date.now()),a=toDate(o);a.setMinutes(0,0,0);const r=fromDate(a);this.#o+=t.byteLength,this.#g=PlayerPresence.PRESENT,this.#j(ta,{skipEmit:!0}),this.#a===0&&this.#S.recordTimeToFirstMsgs();const l=new RawPacket(t),d=Y0/60,p=l.returnMode===ReturnMode.DualReturn?packetRate(l.inferModel()??Model.HDL64E)*2:packetRate(l.inferModel()??Model.HDL64E),h=Math.ceil(p/d);if(this.#h.push(l),this.#h.length>=h){const f={header:{seq:this.#a++,stamp:o,frame_id:s.address},packets:this.#h.map(N=>X0(N,r))},g=this.#h.reduce((N,k)=>N+k.data.byteLength,0),y={topic:Xs,receiveTime:o,message:f,sizeInBytes:g,schemaName:Di.schemaName??""};this.#v.push(y),this.#h=[];let S=this.#l.get(Xs);S||(S={numMessages:0},this.#l.set(Xs,S)),S.numMessages++,S.firstMessageTime??=o,S.lastMessageTime=o,this.#m()}};#T(t,s,{skipEmit:o=!1}={}){this.#I.set(t,s),this.#w=Array.from(this.#I.values()),o||this.#m()}#j(t,{skipEmit:s=!1}={}){this.#I.delete(t)&&(this.#w=Array.from(this.#I.values()),s||this.#m())}#m=debouncePromise(()=>{if(!this.#n||this.#i)return Promise.resolve();this.#g===PlayerPresence.PRESENT&&(this.#p!=null&&clearTimeout(this.#p),this.#p=setTimeout(this.#m,100));const t=fromMillis(Date.now()),s=this.#v;return this.#v=[],this.#n({name:"Velodyne",presence:this.#g,progress:{},capabilities:V0,profile:"velodyne",playerId:this.#e,problems:this.#w,activeData:{messages:s,totalBytesReceived:this.#o,startTime:this.#A,endTime:t,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:1,topics:this.#r,topicStats:new Map(this.#l),datatypes:H0,publishedTopics:void 0,subscribedTopics:void 0,services:void 0,parameters:void 0}})});setListener(t){this.#n=t,this.#m()}close(){this.#i=!0,this.#s&&(this.#s.dispose(),this.#s=void 0),this.#p!=null&&(clearTimeout(this.#p),this.#p=void 0),this.#S.close(),this.#o=0,this.#a=0,this.#h=[],this.#v=[]}setSubscriptions(t){}setPublishers(t){}setParameter(t,s){throw new Error("Parameter modification is not supported for VelodynePlayer")}publish(t){throw new Error("Publishing is not supported for VelodynePlayer")}async callService(){throw new Error("Service calls are not supported for VelodynePlayer")}setGlobalVariables(t){}}function X0(e,t){const s=e.gpsTimestamp;return{stamp:addTimes(t,fromMicros(s)),data:e.data}}class hy{id="velodyne-device";type="connection";displayName="Velodyne Lidar";iconName="GenericScan";description="Connect directly to Velodyne Lidar hardware to inspect incoming sensor data.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/velodyne"}];formConfig={fields:[{id:"port",label:"UDP Port",defaultValue:"2369"}]};initialize(t){const s=t.params?.port;if(s==null)return;const o=parseInt(s);return new VelodynePlayer({port:o,metricsCollector:t.metricsCollector})}}const gy=null;class K0{id="mcap-local-file";type="file";displayName="MCAP";iconName="OpenFile";supportedFileTypes=[".mcap"];initialize(t){const s=t.file;if(!s)return;const o=new ls({initWorker:()=>new Worker(new URL(i.p+i.u(5358),i.b)),initArgs:{file:s}});return new rs({metricsCollector:t.metricsCollector,source:o,name:s.name,sourceId:this.id})}}const $0=K0,J0=JSON.parse('{"configById":{"Image!s2ii8x":{"imageMode":{"imageTopic":"/CAM_FRONT_LEFT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_LEFT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_LEFT/annotations":{"visible":true},"/CAM_FRONT_LEFT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!qd8g5l":{"imageMode":{"imageTopic":"/CAM_FRONT/image_rect_compressed","calibrationTopic":"/CAM_FRONT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT/lidar":{"visible":false},"/CAM_FRONT/annotations":{"visible":true}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!37zuv25":{"imageMode":{"imageTopic":"/CAM_FRONT_RIGHT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_RIGHT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_RIGHT/annotations":{"visible":true},"/CAM_FRONT_RIGHT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"3D!12ucir":{"cameraState":{"distance":35,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":1,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"color","colorMode":"rgba-fields","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":false,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/RADAR_FRONT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"map!2vkib4e":{"disabledTopics":[],"zoomLevel":17,"layer":"map","customTileUrl":"","followTopic":"","center":{"lat":1.2988182017789598,"lon":103.78844261169435},"topicColors":{},"maxNativeZoom":18},"3D!3edtgyg":{"cameraState":{"perspective":false,"distance":100,"phi":45,"thetaOffset":90,"targetOffset":[0,0,0],"target":[0,0,0],"targetOrientation":[0,0,0,1],"fovy":45,"near":0.01,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"value","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":true,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"Plot!2pb7zl7":{"paths":[{"value":"/imu.linear_accel.x","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"throttle_sensor\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"Plot!4792hqu":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"FL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"FR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"StateTransitions!3i4dk1l":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"brake_switch\\"}.value","timestampMethod":"headerStamp"}],"isSynced":true},"DiagnosticSummary!3equ26v":{"minLevel":0,"pinnedIds":[],"hardwareIdFilter":"","topicToRender":"/diagnostics","sortByLevel":true},"DiagnosticStatusPanel!4bdyip2":{"topicToRender":"/diagnostics","collapsedSections":[],"selectedHardwareId":"","splitFraction":0.49345370528837923},"SourceInfo!7dc2bd":{},"RawMessages!21ab95j":{"topicPath":"/markers/annotations.entities[:]{id==\\"6dd2\\"}","diffTopicPath":"","diffMethod":"custom","diffEnabled":false,"showFullMessageForDiff":false,"autoExpandMode":"auto"},"Tab!1xyw5ix":{"activeTabIdx":0,"tabs":[{"title":"Perception","layout":{"first":{"first":"Image!s2ii8x","second":{"first":"Image!qd8g5l","second":"Image!37zuv25","direction":"row","splitPercentage":50},"direction":"row","splitPercentage":33.333},"second":"3D!12ucir","direction":"column","splitPercentage":30}},{"title":"Planning","layout":{"first":"map!2vkib4e","second":"3D!3edtgyg","direction":"row","splitPercentage":30}},{"title":"Controls","layout":{"first":"Plot!2pb7zl7","second":"Plot!4792hqu","direction":"column","splitPercentage":50}},{"title":"Diagnostics","layout":{"first":{"first":"StateTransitions!3i4dk1l","second":{"first":"DiagnosticSummary!3equ26v","second":"DiagnosticStatusPanel!4bdyip2","direction":"column","splitPercentage":27},"direction":"column","splitPercentage":18},"second":{"first":"SourceInfo!7dc2bd","second":"RawMessages!21ab95j","direction":"column","splitPercentage":60},"direction":"row","splitPercentage":50}}]}},"globalVariables":{},"userNodes":{},"playbackConfig":{"speed":1},"layout":"Tab!1xyw5ix"}');class q0{id="sample-nuscenes";type="sample";displayName="Sample: Nuscenes";iconName="FileASPX";hidden=!0;sampleLayout=J0;initialize(t){const s="https://assets.foxglove.dev/NuScenes-v1.0-mini-scene-0061-df24c12.mcap",o=new ls({initWorker:()=>new Worker(new URL(i.p+i.u(4647),i.b)),initArgs:{url:s}});return new rs({source:o,isSampleDataSource:!0,name:"Adapted from nuScenes dataset. Copyright \xA9 2020 nuScenes. https://www.nuscenes.org/terms-of-use",metricsCollector:t.metricsCollector,urlParams:{},sourceId:this.id})}}const _0=q0},41531:(Be,R,i)=>{"use strict";i.d(R,{d:()=>B});var u=i(76635),m=i.n(u),E=i(96995),c=i(93254),P=i(10336);class B extends E.Tme{extensionId;renderer;renderables=new Map;constructor(n,x){super(),this.extensionId=this.name=n,this.renderer=x,queueMicrotask(()=>this.updateSettingsTree())}dispose(){for(const n of this.renderables.values())n.dispose();this.children.length=0,this.renderables.clear()}getSubscriptions(){return[]}removeAllRenderables(){for(const n of this.renderables.values())n.dispose(),this.remove(n);this.renderables.clear(),this.updateSettingsTree()}settingsNodes(){return[]}handleSettingsAction=n=>{};updateSettingsTree(){this.renderer.settings.setNodesForKey(this.extensionId,this.settingsNodes())}saveSetting(n,x){this.renderer.updateConfig(F=>{x==null?(0,u.unset)(F,n):(0,u.set)(F,n,x)}),this.updateSettingsTree()}setColorScheme(n,x){}startFrame(n,x,F){for(const L of this.renderables.values()){const q=L.userData.settingsPath;if(L.visible=L.userData.settings.visible,!L.visible){this.renderer.settings.errors.clearPath(q);continue}const se=L.userData.settings.frameLocked??!0?n:L.userData.messageTime,ae=L.userData.frameId;if((0,P.S)(L,this.renderer.transformTree,x,F,ae,n,se))this.renderer.settings.errors.remove(q,c.o);else{const T=(0,c.v)(x,F,ae);this.renderer.settings.errors.add(q,c.o,T)}}}}},74354:(Be,R,i)=>{"use strict";i.d(R,{d:()=>u});const u={distance:20,perspective:!0,phi:60,target:[0,0,0],targetOffset:[0,0,0],targetOrientation:[0,0,0,1],thetaOffset:45,fovy:45,near:.5,far:5e3}},86073:(Be,R,i)=>{"use strict";i.d(R,{B:()=>c,Q:()=>P});var u=i(76635),m=i.n(u),E=i(41531);const c={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:(0,u.round)(Math.PI/12,8)};class P extends E.d{constructor(D){super("foxglove.PublishSettings",D),D.publishClickTool.addEventListener("foxglove.publish-type-change",this.#e)}dispose(){this.renderer.publishClickTool.removeEventListener("foxglove.publish-type-change",this.#e),super.dispose()}settingsNodes(){const D=this.renderer.config,{publish:n}=D,x=this.handleSettingsAction;return[{path:["publish"],node:{label:"Publish",fields:{type:{label:"Type",input:"select",value:n.type,options:[{label:"Point (geometry_msgs/Point)",value:"point"},{label:"Pose (geometry_msgs/PoseStamped)",value:"pose"},{label:"Pose estimate (geometry_msgs/PoseWithCovarianceStamped)",value:"pose_estimate"}],help:"The type of message to publish when clicking in the scene"},topic:{label:"Topic",input:"string",value:{point:n.pointTopic,pose:n.poseTopic,pose_estimate:n.poseEstimateTopic}[n.type],help:`The topic on which to publish ${{point:"points",pose:"poses",pose_estimate:"pose estimates"}[n.type]}`},...n.type==="pose_estimate"&&{poseEstimateXDeviation:{label:"X deviation",input:"number",value:n.poseEstimateXDeviation,help:"The X standard deviation to publish with pose estimates"},poseEstimateYDeviation:{label:"Y deviation",input:"number",value:n.poseEstimateYDeviation,help:"The Y standard deviation to publish with pose estimates"},poseEstimateThetaDeviation:{label:"Theta deviation",input:"number",value:n.poseEstimateThetaDeviation,help:"The theta standard deviation to publish with pose estimates"}}},defaultExpansionState:"collapsed",handler:x}}]}handleSettingsAction=D=>{if(D.action!=="update"||D.payload.path.length===0)return;const n=D.payload.path,x=n[0],F=D.payload.value;if(x==="publish")n[1]==="topic"?this.renderer.updateConfig(L=>{switch(L.publish.type){case"point":L.publish.pointTopic=F??c.pointTopic;break;case"pose":L.publish.poseTopic=F??c.poseTopic;break;case"pose_estimate":L.publish.poseEstimateTopic=F??c.poseEstimateTopic;break}}):n[1]==="type"?this.renderer.publishClickTool.publishClickType!==F&&(this.renderer.publishClickTool.setPublishClickType(F),this.renderer.publishClickTool.stop()):this.renderer.updateConfig(L=>(0,u.set)(L,n,F));else return;this.updateSettingsTree()};#e=()=>{this.renderer.updateConfig(D=>(D.publish.type=this.renderer.publishClickTool.publishClickType,D)),this.updateSettingsTree()}}},93254:(Be,R,i)=>{"use strict";i.d(R,{o:()=>m,v:()=>E});var u=i(61175);const m="MISSING_TRANSFORM";function E(c,P,B){const D=c===B?P:c;return B!==D?`Missing transform from frame <${u.W$.DisplayName(B)}> to frame <${u.W$.DisplayName(D)}>`:B!==P?`Missing transform from frame <${u.W$.DisplayName(B)}> to fixed frame <${u.W$.DisplayName(P)}> to frame <${u.W$.DisplayName(D)}>`:`Identity transform failed for frame <${u.W$.DisplayName(B)}>`}},20414:(Be,R,i)=>{"use strict";i.d(R,{A6:()=>F,EI:()=>E,N2:()=>m,OC:()=>D,Th:()=>ge,sx:()=>c});var u=i(25740);function m(){return{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:1}}}function E(T,Z){const $=u.Su([0,0,0,1],Z[0],Z[1],Z[2]);return{position:{x:T[0],y:T[1],z:T[2]},orientation:{x:$[0],y:$[1],z:$[2],w:$[3]}}}function c(){return[0,0,0]}function P(T,Z,$){return[T,Z,$]}function B(T){return[T[0],T[1],T[2]]}function D(){return[0,0,0,1]}function n(T,Z,$,V){return[T,Z,$,V]}function x(T){return[T[0],T[1],T[2],T[3]]}function F(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L(T,Z,$,V,H,Ee,ve,Ce,_,be,Te,re,G,A,v,w){return[T,Z,$,V,H,Ee,ve,Ce,_,be,Te,re,G,A,v,w]}function q(T){return[T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15]]}function Q(T,Z,$=1e-5){return Math.abs(T-Z)<=$}function se(T,Z){return Q(T.x,Z.x)&&Q(T.y,Z.y)&&Q(T.z,Z.z)&&Q(T.w,Z.w)}function ae(T,Z){return Q(T.position.x,Z.position.x)&&Q(T.position.y,Z.position.y)&&Q(T.position.z,Z.position.z)&&se(T.orientation,Z.orientation)}function ge(T,Z){const $=Z[0],V=Z[1],H=Z[2],Ee=Z[4],ve=Z[5],Ce=Z[6],_=Z[8],be=Z[9],Te=Z[10],re=$+ve+Te;let G=0;return re>0?(G=Math.sqrt(re+1)*2,T[3]=.25*G,T[0]=(Ce-be)/G,T[1]=(_-H)/G,T[2]=(V-Ee)/G):$>ve&&$>Te?(G=Math.sqrt(1+$-ve-Te)*2,T[3]=(Ce-be)/G,T[0]=.25*G,T[1]=(V+Ee)/G,T[2]=(_+H)/G):ve>Te?(G=Math.sqrt(1+ve-$-Te)*2,T[3]=(_-H)/G,T[0]=(V+Ee)/G,T[1]=.25*G,T[2]=(Ce+be)/G):(G=Math.sqrt(1+Te-$-ve)*2,T[3]=(V-Ee)/G,T[0]=(_+H)/G,T[1]=(Ce+be)/G,T[2]=.25*G),T}},61175:(Be,R,i)=>{"use strict";i.d(R,{ug:()=>be,W$:()=>H,Zf:()=>F,wx:()=>B,v8:()=>re,N2:()=>P.N2,EI:()=>P.EI});var u=i(70159),m=i(66867);class E{#e=[];get size(){return this.#e.length}clear(){this.#e.length=0}at(A){return this.#e[A]}set(A,v){const w=this.binarySearch(A);if(w>=0)this.#e[w][1]=v;else{const me=~w,ue=[A,v];me>=this.#e.length?this.#e.push(ue):this.#e.splice(me,0,ue)}}shift(){return this.#e.shift()}pop(){return this.#e.pop()}remove(A){const v=this.binarySearch(A);v>=0&&this.#e.splice(v,1)}removeAfter(A){const v=this.binarySearch(A),w=v>=0?v+1:~v;this.#e.length=w}removeBefore(A){const v=this.binarySearch(A),w=v>=0?v:~v;this.#e.splice(0,w)}minEntry(){return this.#e[0]}maxEntry(){return this.#e[this.#e.length-1]}minKey(){return this.#e[0]?.[0]}maxKey(){return this.#e[this.#e.length-1]?.[0]}binarySearch(A){const v=this.#e;if(v.length===0)return-1;let w=0,me=v.length-1;if(A<v[w][0])return~w;if(A>v[me][0])return~(me+1);for(;w<=me;){const ue=w+me>>1,ce=v[ue][0];if(ce===A)return ue;A<ce?me=ue-1:w=ue+1}return~w}}var c=i(25740),P=i(20414);class B{#e;#t;#n;constructor(A,v){if(A.length===16)this.#n=A,this.#e=[0,0,0],this.#t=[0,0,0,1],u.i0(this.#e,this.#n),(0,P.Th)(this.#t,this.#n);else if(A.length===3&&v!=null)this.#e=A,this.#t=v,c.Fv(this.#t,this.#t),this.#n=u.yl((0,P.A6)(),this.#t,this.#e);else throw new Error("new Transform() expected either mat4 or vec3 + quat")}position(){return this.#e}rotation(){return this.#t}matrix(){return this.#n}setPosition(A){return m.JG(this.#e,A),u.yl(this.#n,this.#t,this.#e),this}setRotation(A){return c.Fv(this.#t,A),u.yl(this.#n,this.#t,this.#e),this}setPositionRotation(A,v){return m.JG(this.#e,A),c.Fv(this.#t,v),u.yl(this.#n,this.#t,this.#e),this}setPose(A){return m.t8(this.#e,A.position.x,A.position.y,A.position.z),c.t8(this.#t,A.orientation.x,A.orientation.y,A.orientation.z,A.orientation.w),c.Fv(this.#t,this.#t),u.yl(this.#n,this.#t,this.#e),this}setMatrixUnscaled(A){return u.JG(this.#n,A),u.i0(this.#e,A),(0,P.Th)(this.#t,A),this}copy(A){return m.JG(this.#e,A.#e),c.JG(this.#t,A.#t),u.JG(this.#n,A.#n),this}toPose(A){A.position.x=this.#e[0],A.position.y=this.#e[1],A.position.z=this.#e[2],A.orientation.x=this.#t[0],A.orientation.y=this.#t[1],A.orientation.z=this.#t[2],A.orientation.w=this.#t[3]}static Identity(){return new B((0,P.sx)(),(0,P.OC)())}static Interpolate(A,v,w,me){return m.t7(A.#e,v.position(),w.position(),me),c.ZA(A.#t,v.rotation(),w.rotation(),me),A.setPositionRotation(A.#e,A.#t),A}}function D(G,A){return G<A?-1:G>A?1:0}function n(G,A,v){const w=A-G,me=v-G;return Number(me)/Number(w)}function x(G,A,v){const w=Number(A-G);return G+BigInt(Math.round(w*v))}const F=4294967295n*BigInt(1e9),L=Math.PI/180,q=180/Math.PI,Q=[0n,B.Identity()],se=[0n,B.Identity()],ae=[0,0,0],ge=[0,0,0,0],T=B.Identity(),Z=(0,P.A6)(),$=(0,P.A6)(),V=Symbol("FALLBACK_FRAME_ID");class H{static FALLBACK_FRAME_ID=V;id;maxStorageTime;maxCapacity;capacityOverfillPercentage;offsetPosition;offsetEulerDegrees;#e;#t;constructor(A,v,w,me,ue=.1){v&&(this.#e=v),this.id=A,this.maxStorageTime=w,this.maxCapacity=me,this.capacityOverfillPercentage=ue,this.#t=new E}static assertUserFrame(A){if(A.id===V)throw new Error("Expected user frame")}parent(){return this.#e}root(){if(this.id===V)return this;H.assertUserFrame(this);let A=this;for(;A.#e;)A=A.#e;return A}isRoot(){return this.#e==null}transformsSize(){return this.#t.size}setParent(A){this.#e&&this.#e!==A&&this.#t.clear(),this.#e=A}findAncestor(A){let v=this.#e;for(;v;){if(v.id===A)return v;v=v.#e}}addTransform(A,v){if(this.#t.set(A,v),Math.max(0,this.#t.size-this.maxCapacity)/this.maxCapacity>this.capacityOverfillPercentage){const me=this.#t.size-this.maxCapacity;let ue=this.#t.at(me)[0];const oe=this.#t.maxKey()-this.maxStorageTime;ue=oe>ue?oe:ue,this.#t.removeBefore(ue)}}removeTransformsAfter(A){this.#t.removeAfter(A)}removeTransformAt(A){this.#t.remove(A)}findClosestTransforms(A,v,w,me){const ue=this.#t.size;if(ue===0)return!1;if(ue===1){const[O,j]=this.#t.maxEntry();return w<=O+me?(A[0]=v[0]=O,A[1]=v[1]=j,!0):!1}const ce=this.#t.binarySearch(w);if(ce>=0){const[O,j]=this.#t.at(ce);return A[0]=v[0]=w,A[1]=v[1]=j,!0}const oe=~ce;if(oe>=this.#t.size){const[O,j]=this.#t.maxEntry();return w<=O+me?(A[0]=v[0]=O,A[1]=v[1]=j,!0):!1}const M=oe-1;if(M<0){const[O,j]=this.#t.minEntry();return O+me>=w?(A[0]=v[0]=O,A[1]=v[1]=j,!0):!1}const[b,C]=this.#t.at(M),[I,le]=this.#t.at(oe);return A[0]=b,A[1]=C,v[0]=I,v[1]=le,!0}applyLocal(A,v,w,me,ue=F){if(this.id===V||w.id===V)return A;if(H.assertUserFrame(this),H.assertUserFrame(w),w===this)return Ee(A,v),A;if(w.findAncestor(this.id))return H.Apply(A,v,this,w,!1,me,ue)?A:void 0;if(this.findAncestor(w.id))return H.Apply(A,v,w,this,!0,me,ue)?A:void 0;let ce=w;for(;ce;){const oe=this.findAncestor(ce.id);if(oe)return H.Apply(A,v,oe,w,!1,me,ue)&&H.Apply(A,A,oe,this,!0,me,ue)?A:void 0;ce=ce.#e}}apply(A,v,w,me,ue,ce,oe=F){if(w.applyLocal(A,v,me,ce,oe)!=null)return this.applyLocal(A,A,w,ue,oe)}displayName(){return H.DisplayName(this.id)}static Interpolate(A,v,w,me){const[ue,ce]=v,[oe,M]=w;if(ue===oe){A[0]=oe,A[1].copy(M);return}const b=Math.max(0,Math.min(1,n(ue,oe,me)));A[0]=x(ue,oe,b),B.Interpolate(A[1],ce,M,b)}static InterpolateTransform(A,v,w,me){const[ue,ce]=v,[oe,M]=w;if(ue===oe){A.copy(M);return}const b=Math.max(0,Math.min(1,n(ue,oe,me)));B.Interpolate(A,ce,M,b)}static GetTransformMatrix(A,v,w,me,ue){u.yR(A);let ce=w;for(;ce!==v;){if(!ce.findClosestTransforms(Q,se,me,ue))return!1;if(H.InterpolateTransform(T,Q,se,me),ce.offsetEulerDegrees){const oe=T.rotation(),M=u.en($,oe),b=ve(ae,M);m.IH(b,b,ce.offsetEulerDegrees),T.setRotation(Ce(ge,b))}if(ce.offsetPosition){const oe=T.position();m.IH(oe,oe,ce.offsetPosition),T.setPosition(oe)}if(u.Jp(A,T.matrix(),A),ce.#e==null)throw new Error(`Frame "${v.displayName()}" is not a parent of "${w.displayName()}"`);ce=ce.#e}return!0}static Apply(A,v,w,me,ue,ce,oe){return H.GetTransformMatrix(Z,w,me,ce,oe)?(ue&&u.U_(Z,Z),u.Jp(Z,Z,T.setPose(v).matrix()),T.setMatrixUnscaled(Z).toPose(A),!0):!1}static DisplayName(A){return A===V?"(none)":A===""||A.startsWith(" ")||A.endsWith(" ")?`"${A}"`:A}}function Ee(G,A){const v=A.position,w=A.orientation;G.position.x=v.x,G.position.y=v.y,G.position.z=v.z,G.orientation.x=w.x,G.orientation.y=w.y,G.orientation.z=w.z,G.orientation.w=w.w}function ve(G,A){const v=A[0],w=A[4],me=A[8],ue=A[5],ce=A[9],oe=A[6],M=A[10];return G[1]=Math.asin(Math.max(-1,Math.min(1,me))),Math.abs(me)<.9999999?(G[0]=Math.atan2(-ce,M),G[2]=Math.atan2(-w,v)):(G[0]=Math.atan2(oe,ue),G[2]=0),G[0]*=q,G[1]*=q,G[2]*=q,G}function Ce(G,A){const v=A[0]*L,w=A[1]*L,me=A[2]*L,ue=Math.cos(v/2),ce=Math.cos(w/2),oe=Math.cos(me/2),M=Math.sin(v/2),b=Math.sin(w/2),C=Math.sin(me/2);return G[0]=M*ce*oe+ue*b*C,G[1]=ue*b*oe-M*ce*C,G[2]=ue*ce*C+M*b*oe,G[3]=ue*ce*oe-M*b*C,G}const _=5e4;var be;(function(G){G[G.NOT_UPDATED=0]="NOT_UPDATED",G[G.UPDATED=1]="UPDATED",G[G.CYCLE_DETECTED=2]="CYCLE_DETECTED"})(be||(be={}));const Te=["base_link","odom","map","earth"];class re{#e=new Map;#t;#n;defaultRootFrame;constructor(A=F,v=_){this.#t=A,this.#n=v,this.defaultRootFrame=new H(H.FALLBACK_FRAME_ID,void 0,this.#t,this.#n),this.defaultRootFrame.addTransform(0n,B.Identity())}addTransform(A,v,w,me){let ue=!this.hasFrame(A),ce=!1;const oe=this.getOrCreateFrame(A),M=oe.parent();return(M==null||M.id!==v)&&(ce=this.#a(A,v),ce||(oe.setParent(this.getOrCreateFrame(v)),ue=!0)),ce||oe.addTransform(w,me),ce?be.CYCLE_DETECTED:ue?be.UPDATED:be.NOT_UPDATED}removeTransform(A,v,w){const me=this.frame(A);me&&me.parent()?.id===v&&(me.removeTransformAt(w),this.#s(me))}#s(A){if(A.transformsSize()>0)return;const v=new Map;for(const w of this.#e.values())v.set(w.id,new Set);for(const w of this.#e.values()){const me=w.parent();if(me===A)return;if(me==null)continue;const ue=v.get(me.id);if(!ue)throw new Error("invariant: should have children array");ue.add(w.id)}for(let w=A;w;w=w.parent()){if(w.transformsSize()>0)return;const me=v.get(w.id);if(me&&me.size>0)return;this.#e.delete(w.id),v.delete(w.id);const ue=w.parent()?.id;ue&&v.get(ue)?.delete(w.id)}}clear(){this.#e.clear()}clearAfter(A){for(const v of this.#e.values())v.removeTransformsAfter(A)}hasFrame(A){return A===H.FALLBACK_FRAME_ID?!0:this.#e.has(A)}frame(A){return A===H.FALLBACK_FRAME_ID?this.defaultRootFrame:this.#e.get(A)}getOrCreateFrame(A){let v=this.#e.get(A);return v||(v=new H(A,void 0,this.#t,this.#n),this.#e.set(A,v)),v}frames(){return this.#e}apply(A,v,w,me,ue,ce,oe,M){const b=this.frame(w),C=this.frame(ue);if(!b||!C)return;const I=(me!=null?this.frame(me):b.root())??b.root();return b.apply(A,v,I,C,ce,oe,M)}frameList(){const A=Array.from(this.#e.values()),v=new Map(A.map(ce=>[ce.id,{id:ce.id,children:[]}])),w=[];for(const ce of A){const oe=v.get(ce.id),M=ce.parent()?.id;if(M==null)w.push(oe);else{const b=v.get(M);if(b==null)continue;b.children.push(oe)}}const me=[];function ue(ce,oe){const M=H.DisplayName(ce.id);me.push({value:ce.id,label:`${"\xA0\xA0".repeat(oe)}${M}`}),ce.children.sort((b,C)=>b.id.localeCompare(C.id));for(const b of ce.children)ue(b,oe+1)}w.sort((ce,oe)=>ce.id.localeCompare(oe.id));for(const ce of w)ue(ce,0);return me}getDefaultFollowFrameId(){const A=this.frames();if(A.size===0)return;for(const ue of Te){const ce=this.frame(ue);if(ce)return ce.id}const v=new Map;for(const ue of A.values()){const oe=ue.root().id;v.set(oe,(v.get(oe)??0)+1)}return Array.from(v.entries()).sort((ue,ce)=>ce[1]-ue[1])[0]?.[0]}#a(A,v){if(A===v)return!0;let w=this.frame(v);for(;w?.parent();){if(w.parent()?.id===A)return!0;w=w.parent()}return!1}static Clone(A){const v=new re(A.#t,A.#n);return v.#e=A.#e,v}}},10336:(Be,R,i)=>{"use strict";i.d(R,{S:()=>E});var u=i(61175);const m=(0,u.N2)();function E(c,P,B,D,n,x,F){const L=c.userData.pose;if(!L)throw new Error(`Missing userData.pose for ${c.name}`);const q=Boolean(P.apply(m,L,B,D,n,x,F));if(c.visible=q,q){const Q=m.position,se=m.orientation;c.position.set(Q.x,Q.y,Q.z),c.quaternion.set(se.x,se.y,se.z,se.w)}return q}},1375:(Be,R,i)=>{"use strict";i.d(R,{Wr:()=>B,ym:()=>n});const u=new Map([["uint8","number"],["int8","number"],["uint16","number"],["int16","number"],["uint32","number"],["int32","number"],["float32","number"],["float64","number"],["int64","bigint"],["uint64","bigint"],["string","string"],["bool","boolean"],["time","Time"],["duration","Duration"]]),m=new Map([["uint8","Uint8Array"],["int8","Int8Array"],["int16","Int16Array"],["uint16","Uint16Array"],["int32","Int32Array"],["uint32","Uint32Array"],["int64","BigInt64Array"],["uint64","BigUint64Array"],["float32","Float32Array"],["float64","Float64Array"]]);function E(x){return JSON.stringify(x)}const c=x=>{const F=new Set;let L=`
    /**
     * MessageTypeBySchemaName enumerates the message types for for all the schema names
     * in the current data source.
     *
     * You probably want to use Message<...> instead.
     */
    export type MessageTypeBySchemaName = {
  `;for(const[q,Q]of x){if(F.has(q)){L+=`
// ${q} appeared multiple times`;continue}F.add(q),L+=`
${E(q)}: {`;for(const se of Q.definitions){const{type:ae,isConstant:ge,isArray:T}=se,Z=m.get(ae),$=u.get(ae),V=E(se.name),H=se.optional===!0?"?":"";ge===!0?L+=`
 // ${se.name} = ${se.valueText}`:T===!0?Z?L+=`
${V}${H}: ${Z},`:$?L+=`
${V}${H}: ${$}[],`:L+=`
${V}${H}: MessageTypeBySchemaName[${E(ae)}][],`:$?L+=`
${V}${H}: ${$},`:L+=`
${V}${H}: MessageTypeBySchemaName[${E(ae)}],`}L+=`
},`}return L+=`
};`,L};function P(x){let F=`
    /**
     * MessageTypeByTopic enumerates the Messages types for all the topics in
     * the current data source.
     *
     * You probably want to use Input<"/my-topic"> instead of MessageTypeByTopic.
     */
    export type MessageTypeByTopic = {`;for(const L of x)F+=`${E(L.name)}: MessageTypeBySchemaName[${E(L.schemaName??"")}]
`;return F+=`
};`,F}function B(x){const F=P(x.topics),L=new Map(x.datatypes);for(const se of x.topics)(se.schemaName==null||!L.has(se.schemaName))&&L.set(se.schemaName??"",{name:se.schemaName,definitions:[]});return`
// NOTE:
// This file is generated from the current data source.
// It contains helper types for looking up message definitions by schema name or topic.
//
// You likely want to use the higher-level types in \`./types\` rather than the types in this file directly.

type Time = {
  sec: number,
  nsec: number,
};

type Duration = Time;

${c(L)}

${F}
`}let D;function n(){return D??=B({topics:[],datatypes:new Map})}},23621:(Be,R,i)=>{"use strict";i.d(R,{Y:()=>u,k:()=>m});const u="ros/index.d.ts",m=`
  export declare interface Duration {
    sec: number;
    nsec: number;
  }

  export declare interface Time {
    sec: number;
    nsec: number;
  }

  // Once a data source Messages will be populated with interfaces matching the data source messages.
  export declare namespace Messages {}

  // Once a data source TopicsToMessageDefinition will be populated with topic names to message interfaces.
  export declare interface TopicsToMessageDefinition {}

  /**
   * To correctly type your inputs, you use this type to refer to specific
   * input topics, e.g. 'Input<"/your_input_topic">'. If you have
   * multiple input topics, use a union type, e.g.
   * 'Input<"/your_input_topic_1"> |
   * Input<"/your_input_topic_2">'.
   *
   * These types are dynamically generated from the bag(s) currently in your
   * Foxglove Studio session, so if a datatype changes, your User Script
   * may not compile on the newly formatted bag.
   */
  export declare interface Input<T extends keyof TopicsToMessageDefinition> {
    topic: T;
    receiveTime: Time;
    message: TopicsToMessageDefinition[T];
  }

`},27332:(Be,R,i)=>{"use strict";i.d(R,{Ai:()=>c});const u=(P,B)=>P.sec===B.sec&&P.nsec===B.nsec,m=(P,B)=>{const D=P.sec-B.sec;return D!==0?D:P.nsec-B.nsec},E=P=>{let{sec:B,nsec:D}=P;for(;D>1e9;)D-=1e9,B+=1;for(;D<0;)D+=1e9,B-=1;return{sec:B,nsec:D}},c=({sec:P,nsec:B},{sec:D,nsec:n})=>E({sec:P-D,nsec:B-n})},56924:(Be,R,i)=>{"use strict";i.d(R,{Fb:()=>m,H_:()=>u,SM:()=>E});const u={Hint:1,Info:2,Warning:4,Error:8},m={Typescript:"Typescript",DatatypeExtraction:"DatatypeExtraction",InputTopicsChecker:"InputTopicsChecker",OutputTopicChecker:"OutputTopicChecker",Runtime:"Runtime"},E={RUNTIME:1,DatatypeExtraction:{NO_DEFAULT_EXPORT:1,NON_FUNC_DEFAULT_EXPORT:2,NO_TYPE_RETURN:3,BAD_TYPE_RETURN:4,UNKNOWN_ERROR:5,NO_UNIONS:6,NO_FUNCTIONS:7,NO_CLASSES:8,NO_TYPE_LITERALS:9,NO_TUPLES:10,NO_INTERSECTION_TYPES:11,NO_TYPEOF:12,PREFER_ARRAY_LITERALS:13,STRICT_MARKERS_RETURN_TYPE:14,LIMITED_UNIONS:15,NO_NESTED_ANY:16,NO_MAPPED_TYPES:17,INVALID_PROPERTY:18,INVALID_INDEXED_ACCESS:19},InputTopicsChecker:{NO_TOPIC_AVAIL:1,NO_INPUTS_EXPORT:2,EMPTY_INPUTS_EXPORT:3,BAD_INPUTS_TYPE:4},OutputTopicChecker:{NO_OUTPUTS:1,NOT_UNIQUE:2,EXISTING_TOPIC:3}}},24304:(Be,R,i)=>{"use strict";i.d(R,{C:()=>m,m:()=>u});var u;(function(E){E.NOT_PRESENT="NOT_PRESENT",E.INITIALIZING="INITIALIZING",E.RECONNECTING="RECONNECTING",E.BUFFERING="BUFFERING",E.PRESENT="PRESENT",E.ERROR="ERROR"})(u||(u={}));const m={advertise:"advertise",callServices:"callServices",setSpeed:"setSpeed",playbackControl:"playbackControl",getParameters:"getParameters",setParameters:"setParameters"}},39367:(Be,R,i)=>{"use strict";i.d(R,{W0:()=>se,_N:()=>Z,ro:()=>T,vv:()=>Ce});var u=i(52322),m=i(76635),E=i.n(m),c=i(2784),P=i(60985),B=i(15655),D=i(42893),n=i(82044),x=i(88099),F=i(96715),L=i(40301);function q(_){return(0,D.M)(be=>({sequenceNumbers:{},settingsTrees:{},sharedPanelState:{},defaultTitles:{},incrementSequenceNumber:Te=>{be(re=>({sequenceNumbers:{...re.sequenceNumbers,[Te]:(re.sequenceNumbers[Te]??0)+1}}))},updateSettingsTree:(Te,re)=>{be(G=>({settingsTrees:{...G.settingsTrees,[Te]:re}}))},updateDefaultTitle:(Te,re)=>{be(G=>({defaultTitles:{...G.defaultTitles,[Te]:re}}))},updateSharedPanelState:(Te,re)=>{be(G=>({sharedPanelState:{...G.sharedPanelState,[Te]:re}}))},..._}))}const Q=_=>_.updateSettingsTree;function se(){const{id:_}=(0,n.R)(),be=(0,F.J)(Q),Te=(0,c.useCallback)(re=>{be(_,re)},[_,be]);return(0,c.useEffect)(()=>()=>{be(_,void 0)},[_,be]),Te}const ae=_=>_.updateSharedPanelState,ge=_=>_.updateDefaultTitle;function T(){const _=(0,n.R)().id,be=(0,c.useMemo)(()=>(0,L.$k)(_),[_]),Te=(0,c.useCallback)(v=>v.sharedPanelState[be],[be]),re=(0,F.J)(ae),G=(0,F.J)(Te),A=(0,c.useCallback)(v=>{re(be,v)},[be,re]);return[G,A]}function Z(){const _=(0,n.R)().id,be=(0,c.useCallback)(A=>A.defaultTitles[_],[_]),Te=(0,F.J)(ge),re=(0,F.J)(be),G=(0,c.useCallback)(A=>{Te(_,A)},[_,Te]);return[re,G]}function $(_,be){if(_===be)return!0;if(_==null&&be!=null||_!=null&&be==null)return!1;if(_!=null&&be!=null){for(const Te in _)if(!Object.prototype.hasOwnProperty.call(be,Te))return!1;for(const Te in be)if(!Object.prototype.hasOwnProperty.call(_,Te))return!1}return!0}const V=(0,P.wN)(B.PW,$),H=_=>_.selectedLayout?.id,Ee=V(_=>_.selectedLayout?.data?.configById,_=>_),ve=(0,P.P1)(Ee,_=>(0,m.uniq)(Object.keys(_??{}).map(L.$k)));function Ce(_){const{children:be,initialState:Te}=_,[re]=(0,c.useState)(()=>q(Te)),G=(0,x.NS)(ve);(0,c.useEffect)(()=>{re.setState(v=>({sharedPanelState:(0,m.pick)(v.sharedPanelState,G)}))},[G,re]);const A=(0,x.NS)(H);return(0,c.useEffect)(()=>{re.setState({sharedPanelState:{}})},[A,re]),(0,u.jsx)(F.c.Provider,{value:re,children:be})}},2661:(Be,R,i)=>{"use strict";i.d(R,{e:()=>m});const u=i.g;function m(c){u.foxgloveStudioReportErrorFn?.(c)}function E(c){u.foxgloveStudioReportErrorFn=c}},28904:(Be,R,i)=>{"use strict";i.d(R,{q:()=>u});var u;(function(m){m.APP_INIT="Studio: App Initialized",m.DIALOG_SELECT_VIEW="Studio: Dialog View Selected",m.DIALOG_CLOSE="Studio: Dialog Closed",m.DIALOG_CLICK_CTA="Studio: Dialog CTA Clicked",m.APP_BAR_CLICK_CTA="Studio: App Bar CTA CLicked",m.TOUR_PROMPT_SHOWN="Studio: New UI Tour prompt shown",m.TOUR_STARTED="Studio: New UI Tour started",m.TOUR_BACK="Studio: New UI Tour step back",m.TOUR_NEXT="Studio: New UI Tour step next",m.TOUR_COMPLETED="Studio: New UI Tour completed",m.TOUR_DISMISSED="Studio: New UI Tour dismissed",m.APP_MENU_CLICK="Studio: App Menu Clicked",m.HELP_MENU_CLICK_CTA="Studio: Help Menu CTA Clicked",m.PLAYER_CONSTRUCTED="Studio: Player Constructed",m.PLAYER_PLAY="Studio: Player Played",m.PLAYER_SEEK="Studio: Player Seeked",m.PLAYER_SET_SPEED="Studio: Player Speed Set",m.PLAYER_PAUSE="Studio: Player Paused",m.PLAYER_CLOSE="Studio: Player Closed",m.LAYOUT_UPDATE="Studio: Layout Updated",m.LAYOUT_CREATE="Studio: Layout Created",m.LAYOUT_DUPLICATE="Studio: Layout Duplicated",m.LAYOUT_RENAME="Studio: Layout Renamed",m.LAYOUT_DELETE="Studio: Layout Deleted",m.LAYOUT_SELECT="Studio: Layout Selected",m.LAYOUT_IMPORT="Studio: Layout Imported",m.LAYOUT_EXPORT="Studio: Layout Exported",m.LAYOUT_SHARE="Studio: Layout Shared",m.LAYOUT_OVERWRITE="Studio: Layout Overwritten",m.LAYOUT_REVERT="Studio: Layout Reverted",m.LAYOUT_MAKE_PERSONAL_COPY="Studio: Layout Personal Copy Made",m.PANEL_ADD="Studio: Panel Added",m.PANEL_DELETE="Studio: Panel Deleted",m.VARIABLE_ADD="Studio: Variable Added",m.VARIABLE_DELETE="Studio: Variable Deleted",m.IMAGE_DOWNLOAD="Studio: Image Downloaded",m.EXTENSION_INSTALL="Studio: Extension Installed",m.EXTENSION_UNINSTALL="Studio: Extension Uninstalled",m.EXPERIMENTAL_FEATURE_TOGGLE="Studio: Experimental Feature Toggled"})(u||(u={}))},88724:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>L});var u=i(52322),m=i(39721),E=i(79396),c=i(79315),P=i(2784),B=i(68588),D=i(1851),n=i(2784);const x=(0,m.Z)({key:"mui",prepend:!0}),F=n.forwardRef((q,Q)=>(0,u.jsx)(u.Fragment,{children:q.children}));F.displayName="ThemeContainer";function L({children:q,isDark:Q}){(0,P.useEffect)(()=>{document.documentElement.setAttribute("data-color-mode",Q?"dark":"light"),document.querySelector("#loading-styles")?.remove()},[Q]);const{i18n:se}=(0,B.$G)(),ae=(0,P.useMemo)(()=>(0,D.A)(Q?"dark":"light",se.language),[se.language,Q]);return(0,P.useLayoutEffect)(()=>{const ge=document.createElement("meta");return ge.name="theme-color",ge.content=ae.palette.background.paper,document.head.appendChild(ge),()=>ge.remove()},[ae]),(0,u.jsx)(E.C,{value:x,children:(0,u.jsx)(c.Z,{theme:ae,children:q})})}},45243:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>c,t:()=>E});const u="$$RESPONSE",m="$$ERROR";function E(){const P={onmessage:void 0,postMessage(D,n){const x=new MessageEvent("message",{data:D});B.onmessage&&B.onmessage(x)},terminate:()=>{}},B={onmessage:void 0,postMessage(D,n){const x=new MessageEvent("message",{data:D});P.onmessage&&P.onmessage(x)},terminate:()=>{}};return{local:P,remote:B}}class c{static transferables="$$TRANSFERABLES";#e;#t=0;#n={};#s=new Map;constructor(B){if(this.#e=B,this.#e.onmessage)throw new Error("channel.onmessage is already set. Can only use one Rpc instance per channel.");this.#e.onmessage=this.#a}#a=B=>{const{id:D,topic:n,data:x}=B.data;if(n===u){this.#n[D]?.(B.data),delete this.#n[D];return}new Promise(F=>{const L=this.#s.get(n);if(!L)throw new Error(`no receiver registered for ${n}`);F(L(x))}).then(F=>{if(!F)return this.#e.postMessage({topic:u,id:D});const L=F[c.transferables];delete F[c.transferables];const q={topic:u,id:D,data:F};this.#e.postMessage(q,L)}).catch(F=>{const L={topic:u,id:D,data:{[m]:!0,name:F.name,message:F.message,stack:F.stack}};this.#e.postMessage(L)})};terminate(){for(const[B,D]of Object.entries(this.#n))D({topic:u,id:B,data:{[m]:!0,name:"Error",message:"Rpc terminated",stack:new Error().stack}})}async send(B,D,n){const x=this.#t++,F={topic:B,id:x,data:D},L=new Promise((q,Q)=>{this.#n[x]=se=>{if(se.data?.[m]!=null){const ae=new Error(se.data.message);ae.name=se.data.name,ae.stack=se.data.stack,Q(ae)}else q(se.data)}});return this.#e.postMessage(F,n),await L}receive(B,D){if(this.#s.has(B))throw new Error(`Receiver already registered for topic: ${B}`);this.#s.set(B,D)}}},10363:(Be,R,i)=>{"use strict";i.d(R,{v:()=>u});function u(m,E){throw new Error(E)}},28e3:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>E});var u=i(36537);function m(c){const P=document.body,B=document.createElement("textarea");P.appendChild(B),B.value=c,B.select(),document.execCommand("copy"),P.removeChild(B)}const E={async copy(c){if((0,u.N)(navigator.clipboard).writeText!=null)try{return await navigator.clipboard.writeText(c)}catch{m(c)}else m(c)}}},55433:(Be,R,i)=>{"use strict";i.d(R,{G:()=>m,W:()=>u});function u(E,c){return m([{blob:new Blob([E]),fileName:c}])}function m(E){const c=document.body,P=document.createElement("a");P.style.display="none",c.appendChild(P);const B=E.map(D=>{const n=window.URL.createObjectURL(D.blob);return P.setAttribute("download",D.fileName),P.setAttribute("href",n),P.click(),n});window.requestAnimationFrame(()=>{c.removeChild(P),B.forEach(D=>{URL.revokeObjectURL(D)})})}},53542:(Be,R,i)=>{"use strict";i.d(R,{g:()=>u});class u extends Error{details;extraInfo;message;constructor(E,c){if(super(),this.details=E,this.extraInfo=c,this.name="AppError",this.message="",E instanceof Error?this.message=E.stack??E.message:typeof E=="string"&&(this.message=E),c!=null)if(c.componentStack!=null)this.message+=`

${c.componentStack}`;else try{const P=JSON.stringify(c);this.message+=`

${P}`}catch{this.message+=`

[ Either cyclic object or object with BigInt(s) ]`}this.message===""&&(this.message="Unknown Error")}}},85091:(Be,R,i)=>{"use strict";i.d(R,{WU:()=>F,p6:()=>L,LU:()=>Q,mr:()=>q,_v:()=>ge});var u=i(98321),m=i.n(u),E=i(54764),c=i.n(E),P=i(44668);const B=/^\d+$/,D=/^(?!\.$)(\d*)\.(\d*)$/,n=1000n*365n*24n*60n*60n*BigInt(1e9);function x(T){const Z=T.trim();if(B.test(Z)){let V=BigInt(Z)*BigInt(1e9);for(;V>n;)V/=1000n;return{sec:Number(V/BigInt(1e9)),nsec:Number(V%BigInt(1e9))}}const $=D.exec(Z);if($?.[1]!=null&&$[2]!=null)return{sec:Number($[1]),nsec:Number($[2].substr(0,9).padEnd(9,"0"))}}m()(c());function F(T,Z){return`${L(T,Z)} ${q(T,Z)}`}function L(T,Z){return T.sec<0||T.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):c().tz((0,P.toDate)(T),Z??c().tz.guess()).format("YYYY-MM-DD")}function q(T,Z){return T.sec<0||T.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):c().tz((0,P.toDate)(T),Z??c().tz.guess()).format("h:mm:ss.SSS A z")}function Q(T){return c().duration(Math.round(T.sec*1e3+T.nsec/1e6)).format("h:mm:ss.SSS",{trim:!1})}function se(T,Z){const $=Z!=null?c().tz(T,"YYYY-MM-DD h:mm:ss.SSS A z",Z):c()(T,"YYYY-MM-DD h:mm:ss.SSS A z"),V=$.toDate(),H=$.isValid()?(0,P.fromDate)(V):void 0;if(!(!H||H.sec<=0||H.nsec<0))return H}const ae=/^\d+:\d+:\d+.\d+\s[PpAa][Mm]\s[A-Za-z$]+/,ge=({text:T,date:Z,timezone:$})=>{if(T==null||T==="")return;const V=isNaN(+T),H=!(ae.test(T)&&se(`${Z} ${T}`,$));if(!(V&&H))return{time:V?se(`${Z} ${T}`,$):x(T),method:V?"TOD":"SEC"}}},11701:(Be,R,i)=>{"use strict";i.d(R,{bm:()=>c,lk:()=>E,wd:()=>m});var u=i(47746);const m="/studio_script/";function E(){const{palette:{mode:P,text:B}}=(0,u.Z)();return{dark:{base00:"transparent",base0B:"#ffa657",base09:"#7ee787",base07:"#79c0ff",base08:"#ff7b72",base0D:"#79c0ff",base03:B.secondary},light:{base00:"transparent",base0B:"#953800",base09:"#116329",base07:"#0550ae",base08:"#cf222e",base0D:"#0550ae",base03:B.secondary}}[P]}const c="Tab"},61969:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>u});function u(){return Boolean(i.g.desktopBridge)}},40301:(Be,R,i)=>{"use strict";var u="../../packages/studio-base/src/util/layout.ts";i.d(R,{$k:()=>q,A$:()=>me,CD:()=>be,IP:()=>V,VJ:()=>G,_f:()=>A,bP:()=>Ce,dr:()=>se,fG:()=>ce,jQ:()=>ve,kY:()=>_,lD:()=>Q,m2:()=>H,nJ:()=>L,p1:()=>re,p9:()=>ae,rZ:()=>ue,th:()=>v,w$:()=>oe,xS:()=>F});var m=i(76635),E=i.n(m),c=i(28219),P=i(8220),B=i(23503),D=i(2661),n=i(11701);const x=B.ZP.getLogger(u),F="foxglovePanelTitle";function L(M){const C=Math.round(Math.random()*1e10).toString(36);return`${M}!${C}`}function q(M){return M.split("!")[0]??""}function Q(M){return q(M)===n.bm}function se(M){return M!=null&&"tabs"in M&&"activeTabIdx"in M}function ae(M,b,C=[]){if(b===M)return C;if(b!=null&&(0,c.UY)(b)){const I=ae(M,b.first,[...C,"first"]);if(I.length>0)return I;const le=ae(M,b.second,[...C,"second"]);if(le.length>0)return le}return[]}function ge(M){const b={};for(const C of M)b[C]=L(q(C));return b}function T(M,b){if(typeof M=="string")return b[M]??L(q(M));if(M==null)return;const C={};for(const I in M)typeof M[I]=="object"&&!Array.isArray(M[I])?C[I]=T(M[I],b):typeof M[I]=="string"&&b[M[I]]!=null?C[I]=b[M[I]]:C[I]=M[I];return C}function Z(M){if(typeof M=="string")return M;const b=[M.first,M.second].filter(Boolean).map(Z),[C,I]=b;return C==null&&I==null?"":C!=null&&I!=null?{...M,first:C,second:I}:{...M,first:C??I??"",second:""}}function $(M,b){return typeof M=="string"?b(M):{...M,first:$(M.first,b),second:$(M.second,b)}}function V(M,b,C){const I=$(M,le=>{if(typeof le=="string"&&Q(le)&&!C.includes(le)){const O=w(le,b),j=O.tabs[O.activeTabIdx]?.layout;if(j!=null)return V(j,b,C)}return le});return Z(I)}const H=M=>Object.entries(M).reduce((b,[C,I])=>(Q(C)&&I!=null&&I.tabs?.forEach(O=>{(0,c.fY)(O.layout??null).forEach(K=>b[K]=C)}),b),{}),Ee=M=>({id:b,config:C})=>C.tabs?{id:b,config:{...C,tabs:C.tabs.map(I=>({...I,layout:T(I.layout,M)}))}}:{id:b,config:C},ve=({id:M,config:b,relatedConfigs:C})=>{if(!C)return{configs:[{id:M,config:b}]};const I=Ce([M],{[M]:b}),le=ge(I);return{configs:[...(0,P.Z)(I,K=>{const U=le[K],Y=C[K];if(!(U==null||Y==null))return{id:U,config:Y}}),{id:M,config:b}].map(Ee(le))}};function Ce(M,b){const C=M.filter(Q),I=[];return C.forEach(le=>{const O=b[le];O?.tabs&&O.tabs.forEach(j=>{I.push(j.layout,...Ce((0,c.fY)(j.layout??null),b))})}),(0,m.flatMap)(I,c.fY)}const _={activeTabIdx:0,tabs:[{title:"1",layout:void 0}]};function be(M,b){const C=(0,c.fY)(M),I=Ce(C,b);return[...C,...I]}const Te=M=>{if(!M)return!1;if(!Array.isArray(M.tabs)||typeof M.activeTabIdx!="number"){const b=new Error("A non-Tab panel config is being operated on as if it were a Tab panel.");return x.info(`Invalid Tab panel config: ${b.message}`,M),(0,D.e)(b),!1}if(M.activeTabIdx>=M.tabs.length){const b=new Error("A Tab panel has an activeTabIdx for a nonexistent tab.");return x.info(`Invalid Tab panel config: ${b.message}`,M),(0,D.e)(b),!1}return!0},re=(M,b)=>{const C=b.tabs.map((I,le)=>le===b.activeTabIdx?{...I,layout:M}:I);return b.activeTabIdx===-1&&C.push({layout:M,title:"1"}),{...b,tabs:C,activeTabIdx:Math.max(0,b.activeTabIdx)}},G=(M=[],b,C)=>{if(!Te(b))return{configs:[]};const I=b.tabs[b.activeTabIdx]?.layout;let le;if(M.length===0)le=void 0;else{const j=(0,c.NO)(I??null,M);le=(0,c.Xw)(I,[j])}return{configs:[{id:C,config:re(le,b)}]}},A=(M,b,C,I)=>{if(M==null)return[];const le=(0,c.PC)(M,C),O=I==="left"||I==="top",[j,K]=O?[b,le]:[le,b];return[{path:C,spec:{$set:{first:j,second:K,direction:I==="left"||I==="right"?"row":"column"}}}]},v=(M,b,C,I,le)=>{const O=Te(I)?I:_,j=O.tabs[O.activeTabIdx]?.layout,K=j!=null&&b&&C!=null?(0,c.Xw)(j,A(j,M,b,C)):M;return{configs:[{id:le,config:re(K,O)}]}};function w(M,b){const C=b[M];return C&&Te(C)?C:_}const me=({source:M,target:b,savedProps:C})=>{const{tabs:I,activeTabIdx:le}=w(M.panelId,C),O=M.tabIndex??I.length-1,j=b.tabIndex??I.length-1,K=[...I.slice(0,O),...I.slice(O+1)];K.splice(j,0,I[O]);const U=le===M.tabIndex,Y=j<=le&&O>=le,z=O<=le&&j>=le;let X=le;return U?X=j:Y?X++:z&&X--,{configs:[{id:M.panelId,config:{tabs:K,activeTabIdx:X}}]}},ue=({source:M,target:b,savedProps:C})=>{const I=w(M.panelId,C),le=w(b.panelId,C),O=M.tabIndex??I.tabs.length,j=b.tabIndex??le.tabs.length,K=[...I.tabs.slice(0,O),...I.tabs.slice(O+1)],U=le.tabs.slice();U.splice(j,0,I.tabs[O]);const z=O<=I.activeTabIdx?Math.max(0,I.activeTabIdx-1):I.activeTabIdx,ne=j<=le.activeTabIdx?le.activeTabIdx+1:le.activeTabIdx;return{configs:[{id:M.panelId,config:{tabs:K,activeTabIdx:z}},{id:b.panelId,config:{tabs:U,activeTabIdx:ne}}]}},ce=(M,b)=>{const{originalId:C,newId:I,idsToRemove:le=[]}=M,O=(0,c.fY)(b);return(0,m.xor)(O,le).length===0?I:(0,m.uniq)((0,m.compact)([...le,C])).reduce((j,K)=>{if(O.includes(K)){if(j===C)return I;if(j==null||j===K)return}else return j;const U=ae(K,j),Y=K===C?{path:U,spec:{$set:I}}:(0,c.NO)(j,U);return(0,c.Xw)(j,[Y])},b)};function oe(M,b,C,I){const le=[];return Object.keys(I).filter(Q).forEach(j=>{const{tabs:K,activeTabIdx:U}=w(j,I),Y=K[U]?.layout;if(Y!=null&&(0,c.fY)(Y).some(z=>C.includes(z))){const z=ce({originalId:M,newId:b,idsToRemove:C},Y),X=re(z,I[j]);le.push({id:j,config:X})}}),le}},23571:(Be,R,i)=>{"use strict";i.d(R,{Y:()=>u});function u(m){return m}},36537:(Be,R,i)=>{"use strict";i.d(R,{N:()=>u});function u(m){return m}},64578:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>u});function u(){const m=i.g.fetch;i.g.fetch=async(E,c)=>{const P=new TypeError(`Failed to fetch: ${E}`);return await m(E,c).catch(B=>{throw B.message==="Failed to fetch"?P:B})}}},63136:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>m});const m={nextTick:(E,...c)=>{queueMicrotask(()=>{E(...c)})},title:"browser",browser:!0,env:{},argv:[]}},35528:(Be,R,i)=>{"use strict";i.d(R,{Hh:()=>D,N_:()=>c,bV:()=>B});var u=i(76635),m=i.n(u),E=i(60985);const c=(0,E.P1)(n=>n,n=>(0,u.keyBy)(n,({name:x})=>x)),P=(0,E.P1)(n=>n,n=>{const x={};for(const[F,L]of n){const q=x[F]={};for(const Q of L.definitions)Q.isConstant===!0&&Q.value!=null&&typeof Q.value!="boolean"&&(q[Q.value.toString()]!=null?q[Q.value.toString()]="<multiple constants match>":q[Q.value.toString()]=Q.name)}return x});function B(n){const x=/(.*)__(foxglove|webviz)_enum$/.exec(n);if(x)return x[1]}const D=(0,E.P1)(n=>n,n=>{const x={};for(const[F,L]of n){const q={};let Q={},se;for(const ae of L.definitions){if(se!=null&&ae.type!==se&&(Q={},se=void 0),ae.isConstant===!0&&ae.value!=null&&typeof ae.value!="boolean"){se=ae.type,Q[ae.value.toString()]!=null?Q[ae.value.toString()]="<multiple constants match>":Q[ae.value.toString()]=ae.name;continue}const ge=B(ae.name);if(ge!=null){const T=P(n)[ae.type];T&&(q[ge]=T);continue}q[ae.name]||(Object.keys(Q).length>0&&(q[ae.name]=Q),Q={})}Object.keys(q).length>0&&(x[F]=q)}return x})},42146:(Be,R,i)=>{"use strict";i.d(R,{X8:()=>D,ZP:()=>n,tm:()=>B});var u=i(2661),m=i(53542),E=i(77498);const c=(x,F,L,q)=>{if((0,E.KC)()){(q==="error"?console.error:q==="warn"?console.warn:console.info)("Web Worker has uninitialized sendNotification function; this means this error message cannot show up in the UI (so we show it here in the console instead).",x,F,L);return}console.error("Notification before error display is mounted",x,F,L)};let P=c;function B(x){if(P!==c)throw new Error("Tried to overwrite existing NotificationHandler");P=x}function D(){if(P===c)throw new Error("Tried to unset NotificationHandler but it was already the default");P=c}function n(x,F,L,q){L==="app"&&(q==="warn"||q==="error")&&(0,u.e)(new m.g(F,x)),P(x,F,L,q)}n.expectCalledDuringTest=()=>{throw new Error("Should be overriden in setupTestFramework.ts")}},67649:(Be,R,i)=>{"use strict";i.d(R,{Z:()=>u});function u(m,...E){Promise.resolve().then(()=>m(...E))}},27999:(Be,R,i)=>{"use strict";i.d(R,{AB:()=>P,D3:()=>c,Eo:()=>m,IJ:()=>D,w0:()=>B});var u=i(23503);function m(n){return n.sec<0||n.nsec<0?(u.ZP.error("Times are not allowed to be negative"),"(invalid negative time)"):`${n.sec}.${n.nsec.toFixed().padStart(9,"0")}`}const E=20*365*24*60*60;function c(n){return n.sec>E}function P({sec:n,nsec:x}){return`${n}.${String.prototype.padStart.call(x,9,"0")}`}function B(n,x){return x==="headerStamp"?D(n.message):n.receiveTime}function D(n){if(n.header!=null){const x=n.header?.stamp;if(x!=null&&"sec"in x&&"nsec"in x)return x}else if(n.markers?.[0]?.header!=null){const x=n.markers[0]?.header.stamp;if(x!=null&&"sec"in x&&"nsec"in x)return x}}},77498:(Be,R,i)=>{"use strict";i.d(R,{KC:()=>u});const u=()=>typeof i.g.postMessage<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,m=()=>typeof SharedWorkerGlobalScope<"u"&&self instanceof SharedWorkerGlobalScope,E=c=>{const P=typeof fetch<"u"&&fetch("data:test").then(()=>!0).catch(()=>!1);return async(...B)=>{if(await P)throw new Error("Content security policy too loose.");return c(...B)}}},80660:()=>{}}]);

//# sourceMappingURL=studio-686.js.map